{"version":3,"file":"js/e267d21b55fb02988303.worklet.js","mappings":"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","sources":["webpack://JSPatcher/./src/core/PackageManager.ts","webpack://JSPatcher/./src/core/Project.ts","webpack://JSPatcher/./src/core/TaskMgr.ts","webpack://JSPatcher/./src/core/WorkletGlobalPackageManager.ts","webpack://JSPatcher/./src/core/WorkletSDK.ts","webpack://JSPatcher/./src/core/audio/TempAudioFile.ts","webpack://JSPatcher/./src/core/file/AbstractProjectFile.ts","webpack://JSPatcher/./src/core/file/AbstractProjectFolder.ts","webpack://JSPatcher/./src/core/file/AbstractProjectItem.ts","webpack://JSPatcher/./src/core/file/AbstractProjectItemManager.ts","webpack://JSPatcher/./src/core/file/FileEditor.ts","webpack://JSPatcher/./src/core/file/FileInstance.ts","webpack://JSPatcher/./src/core/file/History.ts","webpack://JSPatcher/./src/core/file/PersistentProjectFile.ts","webpack://JSPatcher/./src/core/file/PersistentProjectFolder.ts","webpack://JSPatcher/./src/core/file/TempData.ts","webpack://JSPatcher/./src/core/file/TemporaryProjectFile.ts","webpack://JSPatcher/./src/core/file/TemporaryProjectFolder.ts","webpack://JSPatcher/./src/core/file/TemporaryProjectItemManager.ts","webpack://JSPatcher/./src/core/file/WorkletProjectItemManager.ts","webpack://JSPatcher/./src/core/objects/base/AbstractObject.ts","webpack://JSPatcher/./src/core/objects/base/Bang.ts","webpack://JSPatcher/./src/core/objects/base/BaseObject.ts","webpack://JSPatcher/./src/core/objects/base/generateRemotedObject.ts","webpack://JSPatcher/./src/core/objects/base/index.jsdsppkg.aw.ts","webpack://JSPatcher/./src/core/objects/globalThis/index.jsdsppkg.ts","webpack://JSPatcher/./src/core/objects/importer/Func.tsx","webpack://JSPatcher/./src/core/objects/importer/Getter.ts","webpack://JSPatcher/./src/core/objects/importer/ImportedObject.tsx","webpack://JSPatcher/./src/core/objects/importer/Importer.ts","webpack://JSPatcher/./src/core/objects/importer/Method.ts","webpack://JSPatcher/./src/core/objects/importer/New.tsx","webpack://JSPatcher/./src/core/objects/importer/Property.ts","webpack://JSPatcher/./src/core/objects/importer/RemotedImporter.ts","webpack://JSPatcher/./src/core/objects/importer/Setter.ts","webpack://JSPatcher/./src/core/objects/importer/SetterGetter.ts","webpack://JSPatcher/./src/core/objects/importer/StaticGetter.ts","webpack://JSPatcher/./src/core/objects/importer/StaticMethod.ts","webpack://JSPatcher/./src/core/objects/importer/StaticProperty.ts","webpack://JSPatcher/./src/core/objects/importer/StaticSetter.ts","webpack://JSPatcher/./src/core/objects/importer/StaticSetterGetter.ts","webpack://JSPatcher/./src/core/objects/jsaw/AudioIn.ts","webpack://JSPatcher/./src/core/objects/jsaw/AudioOut.ts","webpack://JSPatcher/./src/core/objects/jsaw/In.ts","webpack://JSPatcher/./src/core/objects/jsaw/Out.ts","webpack://JSPatcher/./src/core/objects/jsaw/Param.ts","webpack://JSPatcher/./src/core/objects/jsaw/index.jsdsppkg.aw.ts","webpack://JSPatcher/./src/core/patcher/Box.ts","webpack://JSPatcher/./src/core/patcher/FaustPatcherAnalyser.ts","webpack://JSPatcher/./src/core/patcher/Line.ts","webpack://JSPatcher/./src/core/patcher/Patcher.ts","webpack://JSPatcher/./src/core/patcher/PatcherEditor.ts","webpack://JSPatcher/./src/core/patcher/PatcherHistory.ts","webpack://JSPatcher/./src/core/patcher/TempPatcherFile.ts","webpack://JSPatcher/./src/core/text/TempTextFile.ts","webpack://JSPatcher/./src/core/worklets/AudioWorkletProxyProcessor.ts","webpack://JSPatcher/./src/utils/TypedEventEmitter.ts","webpack://JSPatcher/./src/utils/symbols.ts","webpack://JSPatcher/./src/utils/utils.ts","webpack://JSPatcher/webpack/bootstrap","webpack://JSPatcher/webpack/runtime/compat get default export","webpack://JSPatcher/webpack/runtime/define property getters","webpack://JSPatcher/webpack/runtime/ensure chunk","webpack://JSPatcher/webpack/runtime/hasOwnProperty shorthand","webpack://JSPatcher/webpack/runtime/make namespace object","webpack://JSPatcher/webpack/runtime/publicPath","webpack://JSPatcher/./src/core/worklets/WorkletEnv.worklet.ts"],"sourcesContent":["import TypedEventEmitter from \"../utils/TypedEventEmitter\";\nimport { ImporterDirSelfObject } from \"../utils/symbols\";\nimport { isJSPatcherObjectConstructor, IJSPatcherObject } from \"./objects/base/AbstractObject\";\nimport type { TFlatPackage, TPackage } from \"./types\";\nimport type Patcher from \"./patcher/Patcher\";\n\nexport interface PackageManagerEventMap {\n    \"pathDuplicated\": string;\n}\nexport interface PackageInfo {\n    id: string;\n    url: string;\n    enabled: boolean;\n    isBuiltIn: boolean;\n}\n\nexport interface IPackageManager extends TypedEventEmitter<PackageManagerEventMap> {\n    pkg: TPackage;\n    lib: TFlatPackage;\n    readonly packagesInfo: PackageInfo[];\n    init(): Promise<void>;\n    importFromURL(url: string, id: string): Promise<void>;\n    searchInPkg(query: string, limit: number, staticMethodOnly: boolean, pkg: TPackage, path?: string[]): { path: string[]; object?: typeof IJSPatcherObject | TPackage }[];\n    searchInLib(query: string, limit: number, staticMethodOnly: boolean, lib: TFlatPackage): { key: string; object: typeof IJSPatcherObject }[];\n    getFromPath(pathIn: (string | symbol)[], pkg: TPackage): TPackage | typeof IJSPatcherObject;\n}\n\nexport default class PackageManager extends TypedEventEmitter<PackageManagerEventMap> implements IPackageManager {\n    private readonly patcher: Patcher;\n    pkg: TPackage;\n    lib: TFlatPackage;\n    get global() {\n        return this.patcher.env.pkgMgr;\n    }\n    get mode() {\n        return this.patcher.props.mode;\n    }\n    get patcherDependencies() {\n        return this.patcher.props.dependencies;\n    }\n    get patcherDependenciesNames() {\n        return this.patcher.props.dependencies.map(t => t[0]);\n    }\n    get packagesInfo() {\n        return Object.keys(this.global[this.mode]).map(id => ({\n            id,\n            isBuiltIn: this.global.builtInPackagesNames.indexOf(id) !== -1,\n            url: this.global.importedPackages.find(p => p.name === id)?.baseUrl,\n            enabled: id in this.pkg\n        } as PackageInfo));\n    }\n    constructor(patcher: Patcher) {\n        super();\n        this.patcher = patcher;\n    }\n    async init() {\n        await this.loadPatcherDependencies();\n        this.pkg = {};\n        for (const pkgName of Object.keys(this.global[this.mode])) {\n            if (this.global.builtInPackagesNames.indexOf(pkgName) !== -1) {\n                const pkg = this.global[this.mode][pkgName];\n                if (pkg) this.pkg[pkgName] = pkg;\n            }\n        }\n        for (const pkgName of this.patcherDependenciesNames) {\n            const pkg = this.global[this.mode][pkgName];\n            if (pkg) this.pkg[pkgName] = pkg;\n        }\n        this.lib = this.packageRegister(this.pkg);\n        this.emitLibChanged();\n    }\n    async loadPatcherDependencies() {\n        try {\n            await this.patcher.env.taskMgr.newTask(this, `${this.patcher.file?.name || \"\"} Loading dependencies`, async (onUpdate: (newMsg: string) => any) => {\n                for (let i = 0; i < this.patcherDependencies.length; i++) {\n                    const [name, url] = this.patcherDependencies[i];\n                    onUpdate(`${name} from ${url}`);\n                    if (this.global[this.mode][name]) return;\n                    try {\n                        await this.global.importFromURL?.(url, name);\n                    } catch (e) {\n                        throw new Error(`Loading dependency: ${name} from ${url} failed`);\n                    }\n                }\n            });\n        } catch (error) {\n            this.patcher.error((error as Error).message);\n        }\n    }\n    async importFromURL(url: string, id: string) {\n        if (!this.global.importFromURL) throw new Error(\"Cannot import from this context\");\n        await this.global.importFromURL(url, id);\n        this.init();\n        this.emitLibChanged();\n    }\n    emitLibChanged() {\n        this.patcher.emit(\"libChanged\", { pkg: this.pkg, lib: this.lib });\n    }\n    packageRegister(pkg: TPackage, libOut: TFlatPackage = {}, rootifyDepth = Infinity, pathIn?: string[]) {\n        const path = pathIn ? pathIn.slice() : [];\n        if (path.length && ImporterDirSelfObject in pkg) {\n            const el = pkg[ImporterDirSelfObject as any];\n            if (isJSPatcherObjectConstructor(el)) {\n                const full = path.join(\".\");\n                if (full in libOut) this.emit(\"pathDuplicated\", full);\n                // this.patcher.newLog(\"warn\", \"Patcher\", \"Path duplicated, cannot register \" + full, this);\n                else libOut[full] = el as typeof IJSPatcherObject;\n                const p = path.slice();\n                while (p.length && path.length - p.length < rootifyDepth) {\n                    const k = p.join(\".\");\n                    if (!(k in libOut)) libOut[k] = el as typeof IJSPatcherObject;\n                    p.shift();\n                }\n            }\n        }\n        for (const key in pkg) {\n            const el = pkg[key];\n            if (typeof el === \"object\") {\n                this.packageRegister(el, libOut, rootifyDepth, [...path, key]);\n            } else if (isJSPatcherObjectConstructor(el)) {\n                const full = [...path, key].join(\".\");\n                if (full in libOut) this.emit(\"pathDuplicated\", full);\n                // this.patcher.newLog(\"warn\", \"Patcher\", \"Path duplicated, cannot register \" + full, this);\n                else libOut[full] = el;\n                const p = [...path, key];\n                while (p.length && path.length + 1 - p.length < rootifyDepth) {\n                    const k = p.join(\".\");\n                    if (!(k in libOut)) libOut[k] = el;\n                    p.shift();\n                }\n            }\n        }\n        return libOut;\n    }\n    searchInLib(query: string, limit = Infinity, staticMethodOnly = false, lib: TFlatPackage) {\n        const keys = Object.keys(lib).sort();\n        const items: { key: string; object: typeof IJSPatcherObject }[] = [];\n        for (let i = 0; i < keys.length; i++) {\n            if (items.length >= limit) break;\n            const key = keys[i];\n            if (key.startsWith(query)) {\n                const o = lib[key];\n                if (staticMethodOnly) {\n                    if (o[ImporterDirSelfObject as unknown as keyof typeof IJSPatcherObject]) {\n                        items.push({ key, object: o });\n                    }\n                } else {\n                    items.push({ key, object: o });\n                }\n            }\n        }\n        return items;\n    }\n    searchInPkg(query: string, limit = Infinity, staticMethodOnly = false, pkg: TPackage, path: string[] = []): { path: string[]; object?: typeof IJSPatcherObject | TPackage }[] {\n        const outs: { path: string[]; object?: typeof IJSPatcherObject | TPackage }[] = [];\n        for (const key in pkg) {\n            if (outs.length >= limit) break;\n            const o = pkg[key];\n            if (typeof o === \"object\") {\n                if (key.indexOf(query) !== -1) outs.push({ path: [...path, key], object: o });\n                else outs.push(...this.searchInPkg(query, limit, staticMethodOnly, o, [...path, key]));\n            } else {\n                if (key.indexOf(query) !== -1) outs.push({ path: [...path, key], object: o });\n            }\n        }\n        return outs;\n    }\n    getFromPath(pathIn: (string | symbol)[], pkg: TPackage) {\n        const path = pathIn.slice();\n        let o: TPackage | typeof IJSPatcherObject = pkg;\n        while (path.length) {\n            const key = path.shift() as any;\n            o = (o as TPackage)[key];\n            if (!o) return null;\n            if (typeof o !== \"object\" && !isJSPatcherObjectConstructor(o)) return null;\n        }\n        return o;\n    }\n}\n","import TypedEventEmitter from \"../utils/TypedEventEmitter\";\nimport { ab2str, str2ab } from \"../utils/utils\";\nimport type Env from \"./Env\";\nimport type FileInstance from \"./file/FileInstance\";\nimport type PersistentProjectFile from \"./file/PersistentProjectFile\";\nimport type { IJSPatcherEnv } from \"./Env\";\nimport type { IPropsMeta } from \"./objects/base/AbstractObject\";\n\nexport interface ProjectEventMap {\n    \"propsChanged\": Partial<ProjectProps>;\n    \"save\": never;\n    \"unload\": never;\n}\nexport interface ProjectProps {\n    name: string;\n    author: string;\n    version: string;\n}\n\nexport interface IProject extends TypedEventEmitter<ProjectEventMap> {\n}\n\nexport default class Project extends TypedEventEmitter<ProjectEventMap> {\n    static props: IPropsMeta<ProjectProps> = {\n        name: {\n            type: \"string\",\n            description: \"Project name\",\n            default: \"Untitled\"\n        },\n        author: {\n            type: \"string\",\n            description: \"Author\",\n            default: \"Anonymous\"\n        },\n        version: {\n            type: \"string\",\n            description: \"Current version\",\n            default: \"0.0.0\"\n        }\n    };\n    readonly projectFilename = \".jspatproj\";\n    readonly env: IJSPatcherEnv;\n    readonly instances: FileInstance[];\n    readonly props: ProjectProps = {\n        name: Project.props.name.default,\n        author: Project.props.author.default,\n        version: Project.props.version.default\n    };\n    get audioCtx() {\n        return (this.env as Env).audioCtx;\n    }\n    constructor(envIn: IJSPatcherEnv) {\n        super();\n        this.env = envIn;\n    }\n    setProps(props: Partial<ProjectProps>) {\n        let changed = false;\n        for (const keyIn in props) {\n            const key = keyIn as keyof ProjectProps;\n            if (this.props[key] === props[key]) continue;\n            changed = true;\n            (this.props as any)[key] = props[key];\n        }\n        if (changed) this.emit(\"propsChanged\", props);\n    }\n    async save() {\n        await this.emit(\"save\");\n    }\n    async load(clean = false) {\n        await this.env.fileMgr.init(clean);\n        await this.init();\n    }\n    async init() {\n        try {\n            const item = this.env.fileMgr.getProjectItemFromPath(`./${this.projectFilename}`) as PersistentProjectFile;\n            const json = JSON.parse(ab2str(item.data)) as ProjectProps;\n            this.setProps(json);\n        } catch (error) {\n            const data = str2ab(JSON.stringify(this.props));\n            await this.env.fileMgr.projectRoot.addFile(this.projectFilename, data);\n        }\n    }\n    async unload() {\n        for (const i of this.env.instances) {\n            if (i.project === this) await i.destroy();\n        }\n        await this.emit(\"unload\");\n    }\n}\n","import TypedEventEmitter from \"../utils/TypedEventEmitter\";\n\nexport interface Task {\n    /** thread + numberId */\n    id: string;\n    timestamp: number;\n    thread: string;\n    emitter: Object | string;\n    message: string;\n    callback: (onUpdate?: (newMsg: string) => any) => any | Promise<any>;\n}\n\nexport interface TaskError {\n    id: string;\n    timestamp: number;\n    thread: string;\n    emitter: Object | string;\n    message: string;\n    error: Error;\n}\n\nexport interface TaskManagerEventMap {\n    \"taskBegin\": Task;\n    \"taskUpdate\": Task;\n    \"taskEnd\": Task;\n    \"taskError\": TaskError;\n    \"tasks\": Task[];\n    \"errors\": TaskError[];\n}\n\nexport default class TaskManager extends TypedEventEmitter<TaskManagerEventMap> {\n    _id = 0;\n    _tasks: { [thread: string]: Task[] } = {};\n    _errors: { [thread: string]: TaskError[] } = {};\n    get tasks() {\n        const tasks: Task[] = [];\n        for (const key in this._tasks) {\n            tasks.push(...this._tasks[key].filter(e => !!e));\n        }\n        return tasks;\n    }\n    get errors() {\n        const errors: TaskError[] = [];\n        for (const key in this._errors) {\n            errors.push(...this._errors[key].filter(e => !!e));\n        }\n        return errors;\n    }\n    async newTask<T extends Task[\"callback\"] = Task[\"callback\"]>(emitter: string | Object, message: string, callback: T) {\n        const thread = globalThis.constructor.name;\n        const timestamp = Date.now();\n        const id = thread + this._id++;\n        const task: Task = { id, thread, timestamp, emitter, message, callback };\n        if (!(thread in this._tasks)) this._tasks[thread] = [];\n        const $ = this._tasks[thread].push(task) - 1;\n        this.emit(\"tasks\", this.tasks);\n        this.emit(\"taskBegin\", task);\n        let returnValue: ReturnType<T> extends Promise<infer R> ? R : ReturnType<T>;\n        const handleUpdate = (msg: string) => {\n            const task: Task = { id, thread, timestamp, emitter, message: `${message}: ${msg}`, callback };\n            this._tasks[thread][$] = task;\n            this.emit(\"tasks\", this.tasks);\n            this.emit(\"taskUpdate\", task);\n        };\n        try {\n            returnValue = await callback(handleUpdate);\n        } catch (error) {\n            const taskError: TaskError = { id, thread, timestamp, emitter, message, error };\n            if (!(thread in this._errors)) this._errors[thread] = [];\n            this._errors[thread].push(taskError);\n            this.emit(\"errors\", this.errors);\n            this.emit(\"taskError\", taskError);\n            throw error;\n        } finally {\n            this._tasks[thread][$] = null;\n            this.emit(\"tasks\", this.tasks);\n            this.emit(\"taskEnd\", task);\n        }\n        return returnValue;\n    }\n    get lastError(): TaskError {\n        return this.errors.sort(((a, b) => b.timestamp - a.timestamp))[0];\n    }\n    get lastTask(): Task {\n        return this.tasks.sort(((a, b) => b.timestamp - a.timestamp))[0];\n    }\n    getTasksFromEmitter(emitter: string | Object) {\n        return this.tasks.filter(task => task.emitter === emitter);\n    }\n    getErrorsFromEmitter(emitter: string | Object) {\n        return this.errors.filter(error => error.emitter === emitter);\n    }\n    dismissLastError() {\n        const { lastError } = this;\n        if (!lastError) return;\n        const $ = this._errors[lastError.thread].indexOf(lastError);\n        this._errors[lastError.thread][$] = null;\n        this.emit(\"errors\", this.errors);\n    }\n    dismissAllErrors() {\n        this._errors = {};\n        this.emit(\"errors\", this.errors);\n    }\n}\n","import { ImporterDirSelfObject } from \"../utils/symbols\";\nimport { isJSPatcherObjectConstructor } from \"./objects/base/AbstractObject\";\nimport getBase from \"./objects/base/index.jsdsppkg.aw\";\nimport getGlobalThis from \"./objects/globalThis/index.jsdsppkg\";\nimport type { TPackage, PatcherMode, ObjectDescriptor, TAbstractPackage } from \"./types\";\nimport type { AnyImportedObject } from \"./objects/importer/ImportedObject\";\nimport type WorkletEnvProcessor from \"./worklets/WorkletEnv.worklet\";\nimport type { PackageGetter } from \"./GlobalPackageManager\";\n\nexport default class WorkletGlobalPackageManager {\n    js: TPackage;\n    jsaw: TPackage;\n    faust: TPackage;\n    max: TPackage;\n    gen: TPackage;\n    private readonly env: WorkletEnvProcessor;\n    externals = new Map<string, Record<string, any>>();\n    constructor(envIn: WorkletEnvProcessor) {\n        this.env = envIn;\n    }\n    async init() {\n        this.jsaw = {\n            Base: await getBase(),\n            globalThis: await getGlobalThis()\n        };\n        await this.env.addObjects(this.getDescriptors(this.jsaw.globalThis, \"globalThis\"), \"globalThis\");\n    }\n    toDescriptor(O: typeof AnyImportedObject, pkgName: string): ObjectDescriptor {\n        const { path } = O;\n        return {\n            isObjectDescriptor: true as const,\n            ctor: O.importedObjectType,\n            path,\n            name: path[path.length - 1] || pkgName\n        };\n    }\n    getDescriptors(pkgIn = this.jsaw.globalThis, pkgName = \"globalThis\") {\n        const $self = \"__JSPatcher_Importer_ImporterDirSelfObject\";\n        const pkg = Object.entries(pkgIn).reduce((acc, [k, v]) => {\n            if (typeof v === \"function\") {\n                const descriptor = this.toDescriptor(v, pkgName);\n                if (k as any === ImporterDirSelfObject) acc[$self] = descriptor;\n                else acc[k] = descriptor;\n            } else {\n                acc[k] = this.getDescriptors(v, pkgName);\n            }\n            return acc;\n        }, {} as TAbstractPackage);\n        if (ImporterDirSelfObject in pkgIn) pkg[$self] = this.toDescriptor((pkgIn as any)[ImporterDirSelfObject], pkgName);\n        return pkg;\n    }\n    add(pkgIn: TPackage, lib: PatcherMode, pathIn: string[] = []) {\n        const path = pathIn.slice();\n        let pkg = this[lib];\n        while (path.length) {\n            const key = path.shift();\n            if (!pkg[key]) pkg[key] = {};\n            else if (isJSPatcherObjectConstructor(pkg[key])) pkg[key] = { [ImporterDirSelfObject]: pkg[key] };\n            pkg = pkg[key] as TPackage;\n        }\n        Object.assign(pkg, pkgIn);\n    }\n    async fetchModule(url: string) {\n        const toExport = {};\n        globalThis.exports = toExport;\n        globalThis.module = { exports: toExport } as any;\n        await this.env.addWorkletModule(url);\n        const exported = globalThis.module.exports;\n        delete globalThis.exports;\n        delete globalThis.module;\n        return exported;\n    }\n    async importPackage(url: string, id: string) {\n        const getter: PackageGetter = (await this.fetchModule(url)).default;\n        this.add(await getter(this.env), \"jsaw\", [id]);\n    }\n}\n","import BaseObject from \"./objects/base/BaseObject\";\nimport Patcher from \"./patcher/Patcher\";\nimport Box from \"./patcher/Box\";\nimport Line from \"./patcher/Line\";\nimport generateRemotedObject from \"./objects/base/generateRemotedObject\";\nimport Bang, { isBang } from \"./objects/base/Bang\";\nimport type { IJSPatcherSDK } from \"./SDK\";\n\nexport default class JSPatcherWorkletSDK implements IJSPatcherSDK {\n    readonly Patcher = Patcher;\n    readonly Box = Box;\n    readonly Line = Line;\n    readonly BaseObject = BaseObject;\n    readonly generateRemotedObject = generateRemotedObject;\n    readonly Bang = Bang;\n    readonly isBang = isBang;\n}\n","import TemporaryProjectFile from \"../file/TemporaryProjectFile\";\nimport type PatcherAudio from \"./PatcherAudio\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\n\nexport default class TempAudioFile extends TemporaryProjectFile<PatcherAudio> {\n    get type() {\n        return \"audio\" as const;\n    }\n    async instantiate() {\n        return this.data;\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const AudioEditor = (await import(\"./AudioEditor\")).default;\n        return AudioEditor.fromProjectItem({ file: this, env, project, instanceId });\n    }\n}\n","import type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { ProjectItemType } from \"../types\";\nimport type { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport AbstractProjectItem, { IProjectItem, ProjectItemEventMap } from \"./AbstractProjectItem\";\n\nexport interface ProjectFileEventMap extends ProjectItemEventMap {\n    \"saved\": any; // here emit with the object who performed the saving\n}\n\nexport interface IProjectFile<Data = any, Manager extends IProjectItemManager = IProjectItemManager> extends IProjectItem<ProjectFileEventMap, Manager> {\n    readonly type: Exclude<ProjectItemType, \"folder\">;\n    readonly isFolder: false;\n    readonly data: Data;\n    readonly fileExtension: string;\n    clone(parentIn?: IProjectFolder, nameIn?: string, dataIn?: Data): IProjectFile<Data>;\n    /**\n     * This method calls default instantiation (from the file manager).\n     * Please use `FileInstance.fromProjectItem(item)` for a better instantiation.\n     */\n    instantiate(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance>;\n    instantiateEditor(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor>;\n    /**\n     * Save the data to the file manager\n     *\n     * @param newDataIn new data to save\n     * @param by the editor who performs the save\n     */\n    save(newDataIn: Data, by: any): Promise<void>;\n    /** Save the data to a new file, not modifying the current file, nor point current editing file to the new one. */\n    saveAsCopy(parentIn: IProjectFolder, nameIn: string, newDataIn: any, manager?: IProjectItemManager): Promise<IProjectFile>;\n    /**\n     * Not modifying the current file, save to a new file and point current editing file to the new one.\n     *\n     * @param to the folder that will contain the new file to save\n     * @param newNameIn new file name to save\n     * @param newDataIn new data to save\n     * @param by the editor who performs the save\n     */\n    saveAs(to: IProjectFolder, newNameIn: string, newDataIn: any, by: any, manager?: IProjectItemManager): Promise<IProjectFile>;\n}\n\nexport default abstract class AbstractProjectFile<Data = ArrayBuffer, Manager extends IProjectItemManager<any> = IProjectItemManager> extends AbstractProjectItem<ProjectFileEventMap, Manager> implements IProjectFile<Data, Manager> {\n    get type() {\n        return this.fileMgr.getTypeFromFileName(this.name) as Exclude<ProjectItemType, \"folder\">;\n    }\n    readonly isFolder = false;\n    protected _data: Data;\n    get data() {\n        return this._data;\n    }\n    set data(dataIn: Data) {\n        this._data = dataIn;\n    }\n    get fileExtension() {\n        const splitted = this.name.split(\".\");\n        return splitted[splitted.length - 1];\n    }\n    constructor(fileMgrIn: Manager, parentIn: IProjectFolder, nameIn: string, dataIn?: Data) {\n        super(fileMgrIn, parentIn, nameIn);\n        if (dataIn) this._data = dataIn;\n        this.onAny((eventName, eventData) => {\n            const { id, isFolder, type, path, data } = this;\n            this.fileMgr.emit(\"itemChanged\", { id, isFolder, type, path, data, eventName, eventData });\n        });\n    }\n    abstract clone(parentIn?: IProjectFolder, nameIn?: string, dataIn?: Data): IProjectFile<Data>;\n    abstract instantiate(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance>;\n    abstract instantiateEditor(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor>;\n    async save(newData: Data, by: any) {\n        this._data = newData;\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n    }\n    async saveAsCopy(parent: IProjectFolder, name: string, newData: any, manager?: IProjectItemManager): Promise<IProjectFile> {\n        const item = this.clone(parent, name, newData);\n        parent.items.add(item);\n        await this.emitTreeChanged();\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n    async saveAs(to: IProjectFolder, newName: string, newData: any, by: any, manager?: IProjectItemManager): Promise<IProjectFile> {\n        const { parent, name, data } = this;\n        const from = parent;\n        this._data = newData;\n        await this.move(to, newName);\n        const item = this.clone(parent, name, data);\n        parent.items.add(item);\n        await parent.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n}\n","import type { RawProjectItem } from \"../types\";\nimport type { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport AbstractProjectItem, { IProjectFileOrFolder, IProjectItem } from \"./AbstractProjectItem\";\n\nexport interface IProjectFolder<Manager extends IProjectItemManager = IProjectItemManager> extends IProjectItem<{}, Manager> {\n    readonly type: \"folder\";\n    readonly isFolder: true;\n    readonly items: Set<IProjectFileOrFolder>;\n    clone(parentIn?: IProjectFolder, nameIn?: string): IProjectFolder;\n    createProjectItem(nameIn: string, isFolder: boolean, dataIn?: any): IProjectFileOrFolder;\n    findItem(itemIn: string): IProjectFileOrFolder;\n    existItem(itemIn: IProjectFileOrFolder | string): boolean;\n    uniqueName(nameIn: string): string;\n    addFile(nameIn: string, dataIn?: any): Promise<IProjectFileOrFolder>;\n    addFolder(nameIn: string): Promise<IProjectFolder>;\n    empty(): Promise<void>;\n    getTree(): RawProjectItem<\"folder\">;\n    getDescendantFiles(): IProjectFileOrFolder[];\n    isParentOf(itemIn: IProjectItem): boolean;\n    getOrderedItems(): IProjectFileOrFolder[];\n    emitTreeChanged(): Promise<void>;\n}\n\nexport default abstract class AbstractProjectFolder<Manager extends IProjectItemManager = IProjectItemManager> extends AbstractProjectItem<{}, Manager> implements IProjectFolder<Manager> {\n    get type(): \"folder\" {\n        return \"folder\";\n    }\n    readonly isFolder = true;\n    items: Set<IProjectFileOrFolder> = new Set();\n    get isDirty() {\n        return !this.getDescendantFiles().every(f => !f.isDirty);\n    }\n    constructor(fileMgrIn: Manager, parentIn: IProjectFolder, nameIn: string) {\n        super(fileMgrIn, parentIn, nameIn);\n        this.onAny((eventName, eventData) => {\n            const { id, isFolder, type, path } = this;\n            this.fileMgr.emit(\"itemChanged\", { id, isFolder, type, path, eventName, eventData });\n        });\n    }\n    abstract clone(parentIn?: IProjectFolder, nameIn?: string): IProjectFolder;\n    abstract createProjectItem(nameIn: string, isFolder: boolean, dataIn?: any): IProjectFileOrFolder;\n    findItem(itemIn: string) {\n        return Array.from(this.items).find(item => item.name === itemIn);\n    }\n    existItem(itemIn: IProjectFileOrFolder | string) {\n        return typeof itemIn === \"string\" ? !!this.findItem(itemIn) : this.items.has(itemIn);\n    }\n    uniqueName(nameIn: string) {\n        if (!this.existItem(nameIn)) return nameIn;\n        let i = 0;\n        let name;\n        do {\n            i++;\n            name = `nameIn_${i}`;\n        } while (this.existItem(nameIn));\n        return name;\n    }\n    abstract addFile(nameIn: string, dataIn?: any): Promise<IProjectFileOrFolder>;\n    abstract addFolder(nameIn: string): Promise<IProjectFolder>;\n    async empty() {\n        for (const item of this.items) {\n            await item.destroy();\n        }\n    }\n    getTree(): RawProjectItem<\"folder\"> {\n        return {\n            type: \"folder\",\n            id: this.id,\n            isFolder: true,\n            name: this.name,\n            items: Array.from(this.items).map((item) => {\n                if (item.isFolder === false) {\n                    const { id, isFolder, type, name, data } = item;\n                    return { id, isFolder, type, name, data };\n                }\n                return item.getTree();\n            })\n        };\n    }\n    getDescendantFiles() {\n        return Array.from(this.items).reduce((acc, cur) => {\n            if (cur.isFolder === false) acc.push(cur);\n            else acc.push(...cur.getDescendantFiles());\n            return acc;\n        }, [] as IProjectFileOrFolder[]);\n    }\n    isParentOf(itemIn: IProjectFileOrFolder) {\n        let { parent } = itemIn;\n        while (parent !== this) {\n            if (!parent) return false;\n            parent = parent.parent;\n        }\n        return true;\n    }\n    getOrderedItems() {\n        const items = Array.from(this.items);\n        const folders = items.filter(i => i.isFolder).sort((a, b) => a.name.localeCompare(b.name));\n        const files = items.filter(i => !i.isFolder).sort((a, b) => a.name.localeCompare(b.name));\n        return [...folders, ...files];\n    }\n}\n","import TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport type { IObservee, ProjectItemType } from \"../types\";\nimport type { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport type { IProjectFile } from \"./AbstractProjectFile\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\n\nexport type IProjectFileOrFolder = IProjectFolder | IProjectFile;\n\nexport interface ProjectItemEventMap {\n    \"ready\": never;\n    \"nameChanged\": { oldName: string; newName: string };\n    \"pathChanged\": { from: string; to: string };\n    \"treeChanged\": never;\n    \"destroyed\": never;\n    \"observers\": Set<string>;\n    \"dirty\": boolean;\n}\n\nexport interface IProjectItem<EventMap extends Record<string, any> = {}, Manager extends IProjectItemManager = IProjectItemManager> extends ITypedEventEmitter<ProjectItemEventMap & EventMap>, IObservee<string> {\n    readonly id: string;\n    readonly fileMgr: Manager;\n    readonly isFolder: boolean;\n    readonly type: ProjectItemType;\n    readonly name: string;\n    /** path used by the file manager */\n    readonly path: string;\n    /** parent path used by the file manager */\n    readonly parentPath: string;\n    /** path relative to the project root */\n    readonly projectPath: string;\n    /** Is the file is editing by some editor and modified (without saving the data), isDirty is true. */\n    readonly isDirty: boolean;\n    parent: IProjectFolder;\n    /** Load data */\n    init(): Promise<void>;\n    /** Clone with optional modifications */\n    clone(parentIn?: IProjectFolder, nameIn?: string): IProjectItem;\n    rename(newNameIn: string): Promise<void>;\n    move(to: IProjectFolder, newNameIn?: string): Promise<void>;\n    /** Delete current file from file manager and the parent folder. */\n    destroy(): Promise<void>;\n}\n\nexport default abstract class AbstractProjectItem<EventMap extends Partial<ProjectItemEventMap> & Record<string, any> = {}, Manager extends IProjectItemManager = IProjectItemManager> extends TypedEventEmitter<ProjectItemEventMap & EventMap> implements IProjectItem<EventMap, Manager> {\n    id: string;\n    get type(): ProjectItemType {\n        return \"unknown\";\n    }\n    readonly isFolder: boolean;\n    protected readonly _fileMgr;\n    get fileMgr() {\n        return this._fileMgr;\n    }\n    protected _name: string;\n    get name() {\n        return this._name;\n    }\n    parent: IProjectFolder;\n    private _isDirty: boolean;\n    get isDirty() {\n        return this._isDirty;\n    }\n    get path(): string {\n        return this.parent ? `${this.parentPath}/${this._name}` : \"\";\n    }\n    get parentPath() {\n        return this.parent?.path;\n    }\n    get projectPath() {\n        return this.path.replace(new RegExp(`^/${this._fileMgr.projectFolderName}`), \"\");\n    }\n    protected readonly _observers = new Set<string>();\n    async addObserver(observer: string) {\n        this._observers.add(observer);\n        await this.emit(\"observers\", this._observers);\n        await this.fileMgr.emitChanged();\n    }\n    async removeObserver(observer: string) {\n        this._observers.delete(observer);\n        await this.emit(\"observers\", this._observers);\n        await this.fileMgr.emitChanged();\n    }\n    constructor(fileMgrIn: Manager, parentIn: IProjectFolder, nameIn: string) {\n        super();\n        this._fileMgr = fileMgrIn;\n        this.parent = parentIn;\n        this._name = nameIn;\n        this.on(\"dirty\", dirty => this._isDirty = dirty);\n    }\n    abstract rename(newNameIn: string): Promise<void>;\n    abstract move(to: IProjectFolder, newNameIn?: string): Promise<void>;\n    abstract destroy(): Promise<void>;\n    abstract clone(parentIn?: IProjectFolder, nameIn?: string): IProjectItem;\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        await this.emit(\"ready\");\n        await this.fileMgr.emitChanged();\n    }\n    async emitTreeChanged() {\n        await this.emit(\"treeChanged\");\n        await (this.parent || this.fileMgr).emitTreeChanged();\n    }\n}\n","import TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport { extToType } from \"../../utils/utils\";\nimport type TaskMgr from \"../TaskMgr\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { ProjectItemType, RawProjectItem } from \"../types\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IProjectFileOrFolder, IProjectItem, ProjectItemEventMap } from \"./AbstractProjectItem\";\nimport { IProject } from \"../Project\";\n\nexport interface ItemChangedEvent<K extends keyof ProjectItemEventMap = keyof ProjectItemEventMap> {\n    id: string;\n    isFolder: boolean;\n    path: string;\n    type: ProjectItemType;\n    data?: any;\n    eventName: K;\n    eventData?: ProjectItemEventMap[K];\n}\n\nexport interface ProjectItemManagerEventMap {\n    \"ready\": never;\n    \"treeChanged\": RawProjectItem<\"folder\">;\n    \"itemChanged\": ItemChangedEvent;\n    \"changed\": never;\n}\n\nexport interface IProjectItemManager<EventMap extends Record<string, any> & Partial<ProjectItemManagerEventMap> = {}> extends ITypedEventEmitter<EventMap & ProjectItemManagerEventMap> {\n    readonly projectFolderName: string;\n    readonly id: string;\n    readonly taskMgr: TaskMgr;\n    readonly allItems: Record<string, IProjectFileOrFolder>;\n    readonly allProjectItems: Record<string, IProjectFileOrFolder>;\n    root: IProjectFolder;\n    /** Enpty the backend file manager */\n    empty(): Promise<any>;\n    /** Empty the project rool folder */\n    emptyProject(): Promise<void>;\n    /** Create all project items by analyzing the backend */\n    init(clean?: boolean): Promise<this>;\n    getTypeFromFileName(name: string): ProjectItemType;\n    getProjectItemFromId(id: string): IProjectFileOrFolder;\n    getProjectItemFromPath(path: string): IProjectFileOrFolder;\n    getPathIdMap(): Record<string, string>;\n    instantiateProjectPath(path: string, envIn: IJSPatcherEnv, projectIn?: IProject): Promise<IFileInstance>;\n    emitTreeChanged(): Promise<void>;\n    emitChanged(): Promise<void>;\n    generateItemId(item: IProjectItem): string;\n}\n\nexport default abstract class AbstractProjectItemManager<EventMap extends Record<string, any> & Partial<ProjectItemManagerEventMap> = {}> extends TypedEventEmitter<EventMap & ProjectItemManagerEventMap> implements IProjectItemManager<EventMap> {\n    readonly projectFolderName = \"project\";\n    readonly id: string;\n    readonly env: IJSPatcherEnv;\n    readonly taskMgr: TaskMgr;\n    get allItems() {\n        const items: Record<string, IProjectFileOrFolder> = {};\n        const rec = (cur: IProjectFileOrFolder) => {\n            items[cur.id] = cur;\n            if (cur.isFolder) cur.items.forEach(rec);\n        };\n        rec(this.root);\n        return items;\n    }\n    get allProjectItems() {\n        const items: Record<string, IProjectFileOrFolder> = {};\n        const rec = (cur: IProjectFileOrFolder) => {\n            items[cur.id] = cur;\n            if (cur.isFolder) cur.items.forEach(rec);\n        };\n        rec(this.projectRoot);\n        return items;\n    }\n    root: IProjectFolder;\n    constructor(envIn: IJSPatcherEnv) {\n        super();\n        this.env = envIn;\n        this.id = envIn.generateId(this);\n        this.taskMgr = envIn.taskMgr;\n    }\n    abstract empty(): Promise<any>;\n    emptyProject() {\n        return this.projectRoot.empty();\n    }\n    abstract init(clean?: boolean): Promise<this>;\n    getTypeFromFileName(name: string): ProjectItemType {\n        const splitted = name.split(\".\");\n        const ext = splitted[splitted.length - 1];\n        return extToType(ext);\n    }\n    getProjectItemFromId(id: string) {\n        return this.allItems[id];\n    }\n    getProjectItemFromPath(path: string) {\n        const pathArray = path.split(\"/\");\n        const itemArray: (IProjectFileOrFolder)[] = [this.root, this.projectRoot];\n        for (let i = 0; i < pathArray.length; i++) {\n            const id = pathArray[i];\n            if (id.length === 0) continue;\n            if (id === \".\") continue;\n            if (id === \"..\") {\n                itemArray.pop();\n                continue;\n            }\n            const cur = itemArray[itemArray.length - 1];\n            if (!cur.isFolder) throw new Error(`${cur.name} from path ${path} is not a folder`);\n            const next = cur.findItem(id);\n            if (!next) throw new Error(`Cannot find ${id} from path ${path}`);\n            itemArray.push(next);\n        }\n        return itemArray[itemArray.length - 1];\n    }\n    getPathIdMap() {\n        const map: Record<string, string> = {};\n        Object.entries(this.allItems).forEach(([id, { path }]) => map[path] = id);\n        return map;\n    }\n    instantiateProjectPath(path: string, envIn: IJSPatcherEnv, projectIn: IProject) {\n        const item = this.getProjectItemFromPath(path);\n        if (item.isFolder === false) return item.instantiate({ env: envIn, project: projectIn });\n        throw new Error(`Cannot instantiate ${item.name} from path ${path} as it is a folder`);\n    }\n    async emitTreeChanged() {\n        this.emit(\"treeChanged\", this.root.getTree());\n    }\n    async emitChanged() {\n        this.emit(\"changed\");\n    }\n    get projectRoot() {\n        return this.root.findItem(this.projectFolderName) as IProjectFolder;\n    }\n    generateItemId(item: IProjectItem) {\n        return this.env.generateId(item);\n    }\n}\n","import type { SemanticICONS } from \"semantic-ui-react\";\nimport TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport History from \"./History\";\nimport TemporaryProjectFile from \"./TemporaryProjectFile\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFile } from \"./AbstractProjectFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\n\nexport interface FileEditorEventMap {\n    \"ready\": never;\n    \"changed\": never;\n    \"dirty\": boolean;\n    \"saved\": never;\n    \"locked\": boolean;\n    \"destroy\": never;\n}\n\nexport interface IFileEditor<Instance extends IFileInstance = IFileInstance, EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> extends ITypedEventEmitter<EventMap & FileEditorEventMap> {\n    readonly instance: Instance;\n    readonly env: IJSPatcherEnv;\n    readonly project: IProject;\n    readonly ctx: IFileInstance[\"ctx\"];\n    readonly isInMemory: boolean;\n    readonly isTemporary: boolean;\n    isReadonly: boolean;\n    readonly isReady: boolean;\n    readonly isDestroyed: boolean;\n    readonly isDirty: boolean;\n    readonly isLocked: boolean;\n    readonly isActive: boolean;\n    readonly editorId: string;\n    readonly fileExtension: string;\n    readonly fileIcon: SemanticICONS;\n    file: IProjectFile;\n    setActive(): void;\n    undo(): Promise<void>;\n    redo(): Promise<void>;\n    copy(): Promise<void>;\n    cut(): Promise<void>;\n    paste(): Promise<void>;\n    deleteSelected(): Promise<any>;\n    selectAll(): Promise<void>;\n    onUiResized(): void;\n    save(): Promise<void>;\n    saveAs(parent: any, name: string): Promise<void>;\n    destroy(): Promise<void>;\n}\n\nexport type AnyFileEditor = FileEditor<any, Record<string, any>>;\n\nexport default class FileEditor<Instance extends IFileInstance = IFileInstance, EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> extends TypedEventEmitter<EventMap & FileEditorEventMap> implements IFileEditor<Instance, EventMap> {\n    static async fromProjectItem({ file, env, project, instanceId }: { file: IProjectFile; env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor> {\n        return new this(await file.instantiate({ env, project, instanceId }));\n    }\n    readonly instance: Instance;\n    get env() {\n        return this.instance.env;\n    }\n    get project() {\n        return this.instance.project;\n    }\n    get file() {\n        return this.instance.file;\n    }\n    set file(value) {\n        this.instance.file = value;\n    }\n    get ctx() {\n        return this.instance.ctx;\n    }\n    get isInMemory() {\n        return this.instance.isInMemory;\n    }\n    get isTemporary() {\n        return this.instance.isTemporary;\n    }\n    get isReadonly() {\n        return this.instance.isReadonly;\n    }\n    set isReadonly(value) {\n        this.instance.isReadonly = value;\n    }\n    protected _isReady = false;\n    get isReady() {\n        return this._isReady;\n    }\n    protected _isDestroyed = false;\n    get isDestroyed() {\n        return this._isDestroyed;\n    }\n    get isDirty() {\n        return this.history.isDirty;\n    }\n    get isLocked() {\n        return false;\n    }\n    get history(): History<Partial<EventMap>, this> {\n        return this.instance.history;\n    }\n    get fileExtension() {\n        return \"data\";\n    }\n    get fileIcon(): SemanticICONS {\n        return \"code\";\n    }\n    setActive() {\n        this.env.activeEditor = this;\n    }\n    get isActive(): boolean {\n        return this.env.thread === \"main\" && this.env.activeEditor === this;\n    }\n    readonly editorId: string;\n    handleProjectSave = async () => this.save();\n    handleProjectUnload = async () => this.destroy();\n    handleDestroy = () => this.destroy();\n    constructor(instance: Instance) {\n        super();\n        this.instance = instance;\n        this.instance?.addObserver(this);\n        this.instance.on(\"destroy\", this.handleDestroy);\n        this.history.addEditor(this);\n        this.on(\"dirty\", isDirty => this.file?.emit(\"dirty\", isDirty));\n        this.on(\"destroy\", () => this.file?.emit(\"dirty\", false));\n        const handleReady = () => {\n            this._isReady = true;\n            this.off(\"ready\", handleReady);\n        };\n        this.on(\"ready\", handleReady);\n        this.editorId = this.env.generateId(this);\n        if (this.env.thread === \"main\") this.env.registerInstance(this.instance);\n        if (this.project) {\n            this.project.on(\"save\", this.handleProjectSave);\n            this.project.on(\"unload\", this.handleProjectUnload);\n        }\n    }\n    async toFileData() {\n        return this.instance.serialize();\n    }\n    async toTempData(): Promise<any> {\n        return this.instance;\n    }\n    undo() {\n        return this.history.undo();\n    }\n    redo() {\n        return this.history.redo();\n    }\n    async copy() {\n        throw new Error(\"Not implemented.\");\n    }\n    async cut() {\n        throw new Error(\"Not implemented.\");\n    }\n    async paste() {\n        throw new Error(\"Not implemented.\");\n    }\n    async deleteSelected(): Promise<any> {\n        throw new Error(\"Not implemented.\");\n    }\n    async selectAll() {\n        throw new Error(\"Not implemented.\");\n    }\n    onUiResized() {\n        throw new Error(\"Not implemented.\");\n    }\n    async save() {\n        if (this.isReadonly) throw new Error(\"Cannot save readonly file\");\n        if (this.isInMemory) throw new Error(\"Cannot save in-memory instance\");\n        const data = await (this.file instanceof TemporaryProjectFile ? this.toTempData() : this.toFileData());\n        await this.file.save(data, this);\n        await this.emit(\"saved\");\n    }\n    async saveAs(parent: IProjectFolder, name: string) {\n        const data = await this.toFileData();\n        if (this.isTemporary) {\n            await this.file.saveAsCopy(parent, name, data);\n        } else if (this.isReadonly) {\n            await this.file.saveAs(parent, name, data, this);\n        } else if (this.isInMemory) {\n            this.file = await parent.addFile(name, data) as any;\n        } else {\n            await this.file.saveAs(parent, name, data, this);\n        }\n        this.isReadonly = false;\n        await this.emit(\"saved\");\n    }\n    async destroy() {\n        if (this.isDestroyed) return;\n        if (this.project) {\n            this.project.off(\"save\", this.handleProjectSave);\n            this.project.off(\"unload\", this.handleProjectUnload);\n        }\n        this.instance.off(\"destroy\", this.handleDestroy);\n        this.instance.removeObserver(this);\n        this.history.removeEditor(this);\n        this._isDestroyed = true;\n        await this.emit(\"destroy\");\n    }\n}\n","import TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport TemporaryProjectFile from \"./TemporaryProjectFile\";\nimport type History from \"./History\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IObservee } from \"../types\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IProjectFile } from \"./AbstractProjectFile\";\n\nexport interface FileInstanceEventMap {\n    \"observers\": Set<any>;\n    \"ready\": never;\n    \"changed\": never;\n    \"destroy\": never;\n}\n\nexport interface IFileInstance<EventMap extends Record<string, any> & Partial<FileInstanceEventMap> = {}, File extends IProjectFile = IProjectFile> extends ITypedEventEmitter<EventMap & FileInstanceEventMap>, IObservee {\n    file?: File;\n    readonly env: IJSPatcherEnv;\n    readonly project: IProject;\n    readonly ctx: File | IProject | IJSPatcherEnv;\n    /** Means it doesn't have a file to save */\n    readonly isInMemory: boolean;\n    /** Means it doesn't have a file to save in the backend */\n    readonly isTemporary: boolean;\n    isReadonly: boolean;\n    isReady: boolean;\n    readonly isActive: boolean;\n    readonly id: string;\n    readonly history: History<any, any>;\n    init(): Promise<this>;\n    setActive(): void;\n    getEditor(): Promise<IFileEditor>;\n    serialize(): Promise<ArrayBuffer>;\n    destroy(): Promise<void>;\n}\n\nexport default abstract class FileInstance<EventMap extends Record<string, any> & Partial<FileInstanceEventMap> = {}, File extends IProjectFile = IProjectFile> extends TypedEventEmitter<EventMap & FileInstanceEventMap> implements IFileInstance<EventMap, File> {\n    private readonly _env: IJSPatcherEnv;\n    get env() {\n        return this._env;\n    }\n    private readonly _project: IProject;\n    get project(): IProject {\n        return this._project;\n    }\n    private _file?: File;\n    get file(): File {\n        return this._file;\n    }\n    set file(value) {\n        if (value === this._file) return;\n        this._file?.removeObserver(this._id);\n        this._file = value;\n        this._file?.addObserver(this._id);\n    }\n    get ctx(): File | IProject | IJSPatcherEnv {\n        return this.file || this.project || this.env;\n    }\n    get isInMemory() {\n        return !this.file;\n    }\n    get isTemporary() {\n        return this.file instanceof TemporaryProjectFile;\n    }\n    private _isReadonly = false;\n    get isReadonly() {\n        return this._isReadonly;\n    }\n    set isReadonly(value) {\n        this._isReadonly = value;\n    }\n    protected _isReady = false;\n    get isReady() {\n        return this._isReady;\n    }\n    setActive() {\n        this.env.activeInstance = this;\n    }\n    get isActive(): boolean {\n        return this.env.activeInstance === this;\n    }\n    async getEditor(): Promise<IFileEditor> {\n        throw new Error(\"Not implemented.\");\n    }\n    protected readonly _observers = new Set<any>();\n    async addObserver(observer: any) {\n        this._observers.add(observer);\n        await this.emit(\"observers\", this._observers);\n    }\n    async removeObserver(observer: any) {\n        this._observers.delete(observer);\n        await this.emit(\"observers\", this._observers);\n        if (this._observers.size === 0) await this.destroy();\n    }\n    readonly _id: string;\n    get id() {\n        return this._id;\n    }\n    readonly _history: History<any, any>;\n    get history() {\n        return this._history;\n    }\n    constructor({ env, project, file, instanceId }: { env: IJSPatcherEnv; project?: IProject; file?: File; instanceId?: string }) {\n        super();\n        this._env = env;\n        this._project = project;\n        this._file = file;\n        this._id = this.env.registerInstance(this, instanceId);\n        this._file?.addObserver(this._id);\n    }\n    async init() {\n        return this;\n    }\n    async serialize(): Promise<ArrayBuffer> {\n        throw new Error(\"Not implemented.\");\n    }\n    async destroy() {\n        await this.emit(\"destroy\");\n        await this.file?.removeObserver(this._id);\n    }\n}\n","import FileEditor, { FileEditorEventMap } from \"./FileEditor\";\n\ninterface IHistoryEvent<EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> {\n    timestamp: number;\n    editorId: string;\n    eventName: keyof EventMap & string;\n    eventData?: EventMap[keyof EventMap & string];\n}\n\nexport interface IHistoryData<EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> {\n    /** Current index in the event queue */\n    $: number;\n    /** Last save Timestamp */\n    saveTime: number;\n    /** Queued events */\n    eventQueue: IHistoryEvent<EventMap>[];\n}\n\n/** The class records some events and allows to perform undo/redo with a specific editor. */\nexport default abstract class History<EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}, Editor extends FileEditor<any, EventMap> = FileEditor<any, EventMap>> implements IHistoryData<EventMap> {\n    /** Editors to sync and to listen */\n    editors: Set<Editor> = new Set();\n    saveTime = 0;\n    $ = 0;\n    eventQueue: IHistoryEvent<EventMap>[] = [];\n    /** Can be set to `false` to prevent recording events while undoing/redoing */\n    capture = true;\n    get eventListening(): (keyof EventMap & string)[] {\n        return [];\n    }\n    get now() {\n        if (globalThis.performance) {\n            return performance.now() + (performance.timeOrigin || performance.timing.navigationStart);\n        }\n        return Date.now();\n    }\n    addEditor(editor: Editor) {\n        this.editors.add(editor);\n        editor.onAny(this.handleEditorEvent);\n        editor.on(\"saved\", this.handleSaved);\n        editor.once(\"destroy\", () => this.removeEditor(editor));\n    }\n    removeEditor(editor: Editor) {\n        editor.offAny(this.handleEditorEvent);\n        this.editors.delete(editor);\n    }\n    handleEditorEvent = async (eventName: keyof EventMap & string, eventData: any, editor: Editor) => {\n        if (this.eventListening.indexOf(eventName) === -1) return;\n        if (!this.capture) return;\n        this.capture = false;\n        await Promise.all(Array.from(this.editors).filter($editor => $editor !== editor).map($editor => $editor.emit(eventName, eventData)));\n        this.capture = true;\n        this.eventQueue.splice(this.$);\n        this.$ = this.eventQueue.push({ eventName, eventData, timestamp: this.now, editorId: editor.editorId });\n        this.emitChanged();\n    };\n    emitChanged() {\n        this.editors.forEach(editor => editor.emit(\"changed\"));\n        this.emitDirty();\n    }\n    emitDirty() {\n        const { isDirty } = this;\n        this.editors.forEach(editor => editor.emit(\"dirty\", isDirty));\n    }\n    destroy() {\n        this.editors.forEach(editor => this.removeEditor(editor));\n    }\n    get isDirty() {\n        if (!this.saveTime) return this.isUndoable;\n        return this.saveTime !== this.eventQueue[this.$ - 1]?.timestamp;\n    }\n    get isUndoable() {\n        return this.$ !== 0;\n    }\n    get isRedoable() {\n        return this.$ !== this.eventQueue.length;\n    }\n    handleSaved = () => {\n        this.saveTime = this.eventQueue[this.$ - 1]?.timestamp;\n        this.emitDirty();\n    };\n    abstract undoOf(editor: Editor, eventName: keyof EventMap, eventData?: any): Promise<void>;\n    async undo() {\n        if (!this.editors.size) return;\n        if (!this.isUndoable) return;\n        this.capture = false;\n        const { eventName, eventData } = this.eventQueue[this.$ - 1];\n        await Promise.all(Array.from(this.editors).map(editor => this.undoOf(editor, eventName, eventData)));\n        this.$--;\n        this.capture = true;\n        this.emitChanged();\n    }\n    abstract redoOf(editor: Editor, eventName: keyof EventMap, eventData?: any): Promise<void>;\n    async redo() {\n        if (!this.editors.size) return;\n        if (!this.isRedoable) return;\n        this.capture = false;\n        const { eventName, eventData } = this.eventQueue[this.$];\n        await Promise.all(Array.from(this.editors).map(editor => this.redoOf(editor, eventName, eventData)));\n        this.$++;\n        this.capture = true;\n        this.emitChanged();\n    }\n    /** event at timestamp exclusive */\n    async undoUntil(timestamp: number) {\n        while (this.isUndoable && this.eventQueue[this.$ - 1].timestamp >= timestamp) {\n            await this.undo();\n        }\n    }\n    /** event at timestamp inclusive */\n    async redoUntil(timestamp: number) {\n        while (this.isRedoable && this.eventQueue[this.$].timestamp <= timestamp) {\n            await this.redo();\n        }\n    }\n    async setIndex($: number) {\n        if ($ < this.$) await this.undoUntil(this.eventQueue[$].timestamp);\n        else if ($ > this.$) await this.redoUntil(this.eventQueue[$ - 1].timestamp);\n    }\n    getSyncData(): IHistoryData<EventMap> {\n        const { $, saveTime, eventQueue } = this;\n        return { $, saveTime, eventQueue };\n    }\n    async syncData(data: IHistoryData<EventMap>) {\n        this.saveTime = data.saveTime;\n        for (let i = 0; i < this.eventQueue.length; i++) {\n            const { timestamp } = this.eventQueue[i];\n            if (timestamp !== data.eventQueue[i]?.timestamp) {\n                await this.undoUntil(timestamp);\n                break;\n            }\n        }\n        this.eventQueue = data.eventQueue;\n        await this.setIndex(data.$);\n    }\n}\n","import AbstractProjectFile from \"./AbstractProjectFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IPersistentProjectItemManager } from \"./PersistentProjectItemManager\";\n\nexport default class PersistentProjectFile extends AbstractProjectFile<ArrayBuffer, IPersistentProjectItemManager> {\n    private _sab: SharedArrayBuffer;\n    get sab() {\n        return this._sab;\n    }\n    get data() {\n        return this._data;\n    }\n    set data(dataIn: ArrayBuffer) {\n        this._data = dataIn;\n        if (dataIn instanceof SharedArrayBuffer) {\n            this._sab = dataIn;\n            return;\n        }\n        this._sab = new SharedArrayBuffer(dataIn.byteLength);\n        const ui8ab = new Uint8Array(dataIn);\n        const ui8sab = new Uint8Array(this._sab);\n        for (let i = 0; i < ui8ab.length; i++) {\n            ui8sab[i] = ui8ab[i];\n        }\n    }\n    lastModifiedId: string;\n    constructor(fileMgrIn: IPersistentProjectItemManager, parentIn: IProjectFolder, nameIn: string, dataIn?: ArrayBuffer) {\n        super(fileMgrIn, parentIn, nameIn);\n        this.lastModifiedId = this.id;\n        this._data = dataIn;\n    }\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        if (!this.data) this.data = await this.fileMgr.readFile(this.path);\n        await this.emit(\"ready\");\n        await this.fileMgr.emitChanged();\n    }\n    clone(parentIn = this.parent, nameIn = this._name, dataIn = this.data) {\n        const Ctor = this.constructor as typeof PersistentProjectFile;\n        return new Ctor(this._fileMgr, parentIn, nameIn, dataIn);\n    }\n    async save(newData: ArrayBuffer, by: any) {\n        this.data = newData;\n        this.lastModifiedId = this.fileMgr.generateItemId(this);\n        await this._fileMgr.putFile(this);\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n    }\n    async saveAsCopy(parent: IProjectFolder, name: string, newData: ArrayBuffer) {\n        const item = this.clone(parent, name, newData);\n        await this._fileMgr.putFile(item);\n        parent.items.add(item);\n        await this.emitTreeChanged();\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n    async saveAs(to: IProjectFolder, newName: string, newData: ArrayBuffer, by: any) {\n        const { parent, name, data } = this;\n        const from = parent;\n        this.data = newData;\n        this.lastModifiedId = this.fileMgr.generateItemId(this);\n        await this.move(to, newName);\n        await this._fileMgr.putFile(this);\n        const item = this.clone(parent, name, data);\n        await this._fileMgr.putFile(item);\n        parent.items.add(item);\n        await parent.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        await this.fileMgr.rename(this.path, `${this.parentPath}/${newNameIn}`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this as any) return;\n        if (to === this.parent && newName === this.name) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        await this._fileMgr.rename(this.path, `${to.path}/${newName}`);\n        const from = this.parent;\n        from.items.delete(this as any);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this as any);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async destroy() {\n        await this._fileMgr.remove(this.path, this.isFolder);\n        this.parent.items.delete(this as any);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n        await this.fileMgr.emitChanged();\n    }\n    async instantiate({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance> {\n        const { type } = this;\n        const Constructor = {\n            patcher: (await import(\"../patcher/Patcher\")).default,\n            audio: (await import(\"../audio/PatcherAudio\")).default,\n            image: (await import(\"../image/PatcherImage\")).default,\n            text: (await import(\"../text/PatcherText\")).default,\n            video: undefined,\n            unknown: (await import(\"../text/PatcherText\")).default\n        }[type];\n        if (Constructor) return Constructor.fromProjectItem({ file: this as any, env, project, instanceId }) as Promise<IFileInstance>;\n        throw new Error(\"Not implemented.\");\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor> {\n        const { type } = this;\n        const Constructor = {\n            patcher: (await import(\"../patcher/PatcherEditor\")).default,\n            audio: (await import(\"../audio/AudioEditor\")).default,\n            image: (await import(\"../image/ImageEditor\")).default,\n            text: (await import(\"../text/TextEditor\")).default,\n            video: undefined,\n            unknown: (await import(\"../text/TextEditor\")).default\n        }[type];\n        if (Constructor) return Constructor.fromProjectItem({ file: this as any, env, project, instanceId }) as Promise<IFileEditor>;\n        throw new Error(\"Not implemented.\");\n    }\n}\n","import PersistentProjectFile from \"./PersistentProjectFile\";\nimport AbstractProjectFolder, { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IPersistentProjectItemManager } from \"./PersistentProjectItemManager\";\n\nexport default class PersistentProjectFolder extends AbstractProjectFolder<IPersistentProjectItemManager> {\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        const items = await this.fileMgr.readDir(this.path || \"/\");\n        for (const rawItem of items) {\n            const { name, isFolder } = rawItem;\n            const item = this.createProjectItem(name, isFolder);\n            this.items.add(item);\n            await this.emitTreeChanged();\n            await item.init();\n        }\n        await this.emit(\"ready\");\n        await this.fileMgr.emitChanged();\n    }\n    clone(parentIn = this.parent, nameIn = this._name) {\n        const Ctor = this.constructor as typeof PersistentProjectFolder;\n        return new Ctor(this._fileMgr, parentIn, nameIn);\n    }\n    createProjectItem(nameIn: string, isFolder: boolean, dataIn?: ArrayBuffer): PersistentProjectFolder | PersistentProjectFile {\n        if (isFolder) return new PersistentProjectFolder(this.fileMgr, this, nameIn);\n        return new PersistentProjectFile(this.fileMgr, this, nameIn, dataIn);\n    }\n    async addFile(nameIn: string, dataIn?: ArrayBuffer) {\n        if (this.existItem(nameIn)) throw new Error(`${nameIn} already exists.`);\n        const tempItem = new PersistentProjectFile(this.fileMgr, this, nameIn, dataIn);\n        await this.fileMgr.putFile(tempItem);\n        const fileDetail = await this.fileMgr.getFileDetails(this.path, nameIn);\n        const item = this.createProjectItem(nameIn, fileDetail.isFolder, dataIn);\n        this.items.add(item);\n        await this.emitTreeChanged();\n        item.init();\n        return item;\n    }\n    async addFolder(name: string) {\n        if (this.existItem(name)) throw new Error(`${name} already exists.`);\n        const folder = new PersistentProjectFolder(this.fileMgr, this, name);\n        await this.fileMgr.putFile(folder);\n        this.items.add(folder);\n        await folder.init();\n        await this.emitTreeChanged();\n        return folder;\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        await this.fileMgr.rename(this.path, `${this.parentPath}/${newNameIn}`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this) return;\n        if (to === this.parent && newName === this.name) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        await this._fileMgr.rename(this.path, `${to.path}/${newName}`);\n        const from = this.parent;\n        from.items.delete(this);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n    }\n    async destroy() {\n        await this._fileMgr.remove(this.path, this.isFolder);\n        this.parent.items.delete(this as any);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n    }\n}\n","import TemporaryProjectFile from \"./TemporaryProjectFile\";\n\nexport default class TempData extends TemporaryProjectFile {\n    get type() {\n        return \"unknown\" as const;\n    }\n    async instantiate(): Promise<any> {\n        return this.data;\n    }\n}\n","import AbstractProjectFile from \"./AbstractProjectFile\";\nimport PersistentProjectFile from \"./PersistentProjectFile\";\nimport type TemporaryProjectItemManager from \"./TemporaryProjectItemManager\";\nimport type PersistentProjectItemManager from \"./PersistentProjectItemManager\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IFileInstance } from \"./FileInstance\";\n\n/**\n * An item under TempMgr, this contains in-memory data/instance.\n */\nexport default class TemporaryProjectFile<Data = any> extends AbstractProjectFile<Data, TemporaryProjectItemManager> {\n    async removeObserver(observer: string) {\n        await super.removeObserver(observer);\n        await this.fileMgr.emitChanged();\n        if (this._observers.size === 0) await this.destroy();\n    }\n    /**\n     * Creating alias (do not copy the data, new item has the same ref)\n     */\n    clone(parentIn = this.parent, nameIn = this._name, dataIn = this.data) {\n        const Ctor = this.constructor as typeof TemporaryProjectFile;\n        return new Ctor(this._fileMgr, parentIn, nameIn, dataIn);\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this as any) return;\n        if (to === this.parent) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        const from = this.parent;\n        from.items.delete(this);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async destroy() {\n        this.parent.items.delete(this);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n        await this.fileMgr.emitChanged();\n    }\n    async save(newData: Data, by: any) {\n        this._data = newData;\n        this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n    }\n    async saveAsCopy(parent: IProjectFolder, name: string, newData: ArrayBuffer, persistentMgr?: PersistentProjectItemManager) {\n        const item = new PersistentProjectFile(persistentMgr, parent, name, newData);\n        await persistentMgr.putFile(item);\n        parent.items.add(item);\n        await this.emitTreeChanged();\n        await item.init();\n        return item;\n    }\n    async saveAs(to: IProjectFolder, name: string, newData: ArrayBuffer, by: any, persistentMgr: PersistentProjectItemManager) {\n        const item = new PersistentProjectFile(persistentMgr, to, name, newData);\n        await persistentMgr.putFile(item);\n        const from = this.parent;\n        this.parent = to;\n        this._name = name;\n        const _this: PersistentProjectFile = Object.setPrototypeOf(this, PersistentProjectFile.prototype);\n        this.parent.items.add(_this);\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        await this.emit(\"saved\", by);\n        await item.init();\n        return this;\n    }\n    async instantiate(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance> {\n        throw new Error(\"Not implemented.\");\n        // new instance Patcher / AudioBuffer etc\n    }\n    async instantiateEditor(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor> {\n        throw new Error(\"Not implemented.\");\n    }\n}\n","import TempAudioFile from \"../audio/TempAudioFile\";\nimport TempPatcherFile from \"../patcher/TempPatcherFile\";\nimport TempTextFile from \"../text/TempTextFile\";\nimport TempData from \"./TempData\";\nimport AbstractProjectFolder, { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type TemporaryProjectFile from \"./TemporaryProjectFile\";\nimport type { TempItemType } from \"../types\";\nimport type TemporaryProjectItemManager from \"./TemporaryProjectItemManager\";\n\nexport default class TemporaryProjectFolder extends AbstractProjectFolder<TemporaryProjectItemManager> {\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        await this.emit(\"ready\");\n    }\n    clone(parentIn = this.parent, nameIn = this._name) {\n        const Ctor = this.constructor as typeof TemporaryProjectFolder;\n        return new Ctor(this._fileMgr, parentIn, nameIn);\n    }\n    createProjectItem(name: string, isFolder: boolean, data?: any, typeIn?: TempItemType): TemporaryProjectFile {\n        const type = typeIn || this.fileMgr.getTypeFromFileName(name);\n        if (type === \"patcher\") return new TempPatcherFile(this.fileMgr, this, name, data);\n        if (type === \"audio\") return new TempAudioFile(this.fileMgr, this, name, data);\n        if (type === \"text\") return new TempTextFile(this.fileMgr, this, name, data);\n        return new TempData(this.fileMgr, this, name, data);\n    }\n    async addFile(name: string, data?: any, typeIn?: TempItemType) {\n        if (this.existItem(name)) throw new Error(`${name} already exists.`);\n        const item = this.createProjectItem(name, false, data, typeIn);\n        this.items.add(item);\n        await this.emitTreeChanged();\n        await item.init();\n        return item;\n    }\n    async addFolder(name: string) {\n        if (this.existItem(name)) throw new Error(`${name} already exists.`);\n        const folder = new TemporaryProjectFolder(this.fileMgr, this, name);\n        this.items.add(folder);\n        await folder.init();\n        await this.emitTreeChanged();\n        await this.fileMgr.emitChanged();\n        return folder;\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this) return;\n        if (to === this.parent) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        const from = this.parent;\n        from.items.delete(this);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async destroy() {\n        this.parent.items.delete(this);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n        await this.fileMgr.emitChanged();\n    }\n}\n","import TemporaryProjectFolder from \"./TemporaryProjectFolder\";\nimport AbstractProjectItemManager from \"./AbstractProjectItemManager\";\nimport type { IProjectFileOrFolder } from \"./AbstractProjectItem\";\n\nexport default class TemporaryProjectItemManager extends AbstractProjectItemManager {\n    root: TemporaryProjectFolder;\n    async empty() {\n        return true;\n    }\n    async init(clean?: boolean) {\n        this.root = new TemporaryProjectFolder(this, null, null);\n        await this.root.init();\n        this.emit(\"ready\");\n        return this;\n    }\n    getProjectItemFromPath(path: string) {\n        const pathArray = path.split(\"/\");\n        const itemArray: IProjectFileOrFolder[] = [this.root];\n        for (let i = 0; i < pathArray.length; i++) {\n            const id = pathArray[i];\n            if (id.length === 0) continue;\n            if (id === \".\") continue;\n            if (id === \"..\") {\n                itemArray.pop();\n                continue;\n            }\n            const cur = itemArray[itemArray.length - 1];\n            if (cur.isFolder === false) throw new Error(`${cur.name} from path ${path} is not a folder`);\n            const next = cur.findItem(id);\n            if (!next) throw new Error(`Cannot find ${id} from path ${path}`);\n            itemArray.push(next);\n        }\n        return itemArray[itemArray.length - 1];\n    }\n}\n","import AbstractProjectItemManager, { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport PersistentProjectFolder from \"./PersistentProjectFolder\";\nimport type { TypedMessagePort } from \"../workers/Worker\";\nimport type WorkletEnvProcessor from \"../worklets/WorkletEnv.worklet\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IPersistentProjectItemManager, ProjectItemManagerDataForDiff } from \"./PersistentProjectItemManager\";\nimport type { IProjectItem } from \"./AbstractProjectItem\";\nimport type PersistentProjectFile from \"./PersistentProjectFile\";\n\nexport default class WorkletProjectItemManager extends AbstractProjectItemManager implements IPersistentProjectItemManager {\n    readonly port: TypedMessagePort;\n    readonly env: WorkletEnvProcessor;\n    cachedPathIdMap: Record<string, string> = {};\n    disabled = false;\n    constructor(envIn: WorkletEnvProcessor) {\n        super(envIn);\n        this.env = envIn;\n    }\n    empty(): Promise<any> {\n        throw new Error(\"Empty is not allowed from other threads.\");\n    }\n    async init() {\n        this.cachedPathIdMap = await this.env.fileMgrGetPathIdMap();\n        this.root = new PersistentProjectFolder(this, null, null);\n        await this.root.init();\n        if (!this.projectRoot) await this.root.addFolder(this.projectFolderName);\n        this.emit(\"ready\");\n        return this;\n    }\n    getDataForDiff() {\n        const map: ProjectItemManagerDataForDiff = {};\n        const { allItems } = this;\n        for (const id in allItems) {\n            const item = allItems[id] as PersistentProjectFile | PersistentProjectFolder;\n            if (item.isFolder === true) map[id] = { isFolder: item.isFolder, parent: item.parent?.id, name: item.name, path: item.path };\n            else map[id] = { isFolder: item.isFolder, data: item.sab, lastModifiedId: item.lastModifiedId, parent: item.parent?.id, name: item.name, path: item.path };\n        }\n        return map;\n    }\n    async processDiff(diff: ProjectItemManagerDataForDiff) {\n        this.disabled = true;\n        for (const id in diff) {\n            const process = async (id: string): Promise<void> => {\n                const $item = diff[id];\n                const $parentId = $item.parent;\n                if (!$parentId) return;\n                let parent = this.getProjectItemFromId($parentId);\n                if (!parent) await process($parentId);\n                parent = this.getProjectItemFromId($parentId) as PersistentProjectFolder;\n                const current = this.getProjectItemFromId(id) as PersistentProjectFile | PersistentProjectFolder;\n                if (!current) {\n                    if (parent.isFolder === true) {\n                        this.cachedPathIdMap[$item.path] = id;\n                        if ($item.isFolder === true) {\n                            await parent.addFolder($item.name);\n                        } else {\n                            const newFile = await parent.addFile($item.name, $item.data) as PersistentProjectFile;\n                            newFile.lastModifiedId = $item.lastModifiedId;\n                        }\n                    }\n                } else {\n                    if (current.isFolder === false && $item.isFolder === false) {\n                        if (current.lastModifiedId !== $item.lastModifiedId) await current.save($item.data, this);\n                        if (current.name !== $item.name) await current.rename($item.name);\n                        if (current.parent?.id !== $item.parent) await current.move(parent);\n                    }\n                }\n            };\n            await process(id);\n        }\n        this.disabled = false;\n    }\n    generateItemId(item: IProjectItem) {\n        const id = this.cachedPathIdMap[item.path];\n        if (!id) return this.env.generateId(item);\n        delete this.cachedPathIdMap[item.path];\n        return id;\n    }\n    readFile(path: string) {\n        return this.env.fileMgrReadFile(path);\n    }\n    readDir(path?: string): Promise<{ isFolder: boolean; name: string }[]> {\n        return this.env.fileMgrReadDir(path);\n    }\n    getFileDetails(path: string, name: string) {\n        return this.env.fileMgrGetFileDetails(path, name);\n    }\n    exists(path: string) {\n        return this.env.fileMgrExists(path);\n    }\n    putFile(item: { isFolder: boolean; path: string; data?: ArrayBuffer | SharedArrayBuffer }) {\n        if (this.disabled) return null;\n        return this.env.fileMgrPutFile(item);\n    }\n    async writeFile(path: string, data: ArrayBuffer | SharedArrayBuffer) {\n        if (this.disabled) return null;\n        return this.env.fileMgrWriteFile(path, data);\n    }\n    async remove(path: string, isFolder?: boolean) {\n        return true;\n    }\n    async rename(oldPath: string, newPath: string) {\n        return true;\n    }\n    importFileZip(data: ArrayBuffer, subfolder?: string, to?: IProjectFolder<IProjectItemManager<{}>>, taskHost?: any): Promise<void> {\n        throw new Error(\"Import is not allowed from other threads.\");\n    }\n    exportProjectZip(): Promise<ArrayBuffer> {\n        throw new Error(\"Import is not allowed from other threads.\");\n    }\n}\n","import type { SemanticICONS } from \"semantic-ui-react\";\nimport TypedEventEmitter from \"../../../utils/TypedEventEmitter\";\nimport { stringifyError } from \"../../../utils/utils\";\nimport Line from \"../../patcher/Line\";\nimport type Box from \"../../patcher/Box\";\nimport type Patcher from \"../../patcher/Patcher\";\nimport type { ProjectItemType, TempItemByType, SharedItemByType, TempItemType, TAudioNodeInletConnection, TAudioNodeOutletConnection } from \"../../types\";\nimport type AbstractUI from \"./AbstracttUI\";\nimport type { IJSPatcherEnv } from \"../../Env\";\n\nexport const isJSPatcherObjectConstructor = (x: any): x is typeof AbstractObject => typeof x === \"function\" && x?.isJSPatcherObjectConstructor;\n\nexport const isJSPatcherObject = (x: any): x is AbstractObject => typeof x === \"object\" && x?.isJSPatcherObject;\n\nexport type TMetaType = \"anything\" | \"signal\" | \"object\" | \"number\" | \"boolean\" | \"string\" | \"function\" | \"bang\" | \"color\" | \"enum\";\nexport interface IInletMeta {\n    isHot: boolean;\n    type: TMetaType;\n    enums?: string[];\n    varLength?: boolean;\n    description: string;\n}\nexport type IInletsMeta = IInletMeta[];\nexport interface IOutletMeta {\n    type: TMetaType;\n    enums?: string[];\n    varLength?: boolean;\n    description: string;\n}\nexport type IOutletsMeta = IOutletMeta[];\nexport interface IArgMeta {\n    type: TMetaType;\n    enums?: string[];\n    optional: boolean;\n    default?: any;\n    varLength?: boolean;\n    description: string;\n}\nexport type IArgsMeta = IArgMeta[];\nexport interface IPropMeta<T extends any = any> {\n    type: TMetaType;\n    enums?: T[];\n    default: T;\n    group?: string;\n    description: string;\n    isUIState?: boolean;\n}\nexport type IPropsMeta<T extends Record<string, any> = Record<string, any>> = { [K in keyof T]: IPropMeta<T[K]> };\nexport interface IJSPatcherObjectMeta<P extends Record<string, any> = Record<string, any>> {\n    package: string; // div will have class \"package-name\" \"package-name-objectname\"\n    name: string;\n    icon: SemanticICONS; // semantic icon to display in UI\n    author: string;\n    version: string;\n    description: string;\n    inlets: IInletsMeta;\n    outlets: IOutletsMeta;\n    args: IArgsMeta;\n    props: IPropsMeta<P>;\n    isPatcherInlet: \"data\" | \"audio\" | \"parameter\" | false;\n    isPatcherOutlet: \"data\" | \"audio\" | false;\n}\n\nexport interface ObjectUpdateOptions {\n    undoable?: boolean;\n}\n\nexport type Data<T> = T extends IJSPatcherObject<infer D, any, any, any, any, any, any, any> ? D : never;\nexport type State<T> = T extends IJSPatcherObject<any, infer S, any, any, any, any, any, any> ? S : never;\nexport type Inputs<T> = T extends IJSPatcherObject<any, any, infer I, any, any, any, any, any> ? I : never;\nexport type Outputs<T> = T extends IJSPatcherObject<any, any, any, infer O, any, any, any, any> ? O : never;\nexport type Args<T> = T extends IJSPatcherObject<any, any, any, any, infer A, any, any, any> ? A : never;\nexport type Props<T> = T extends IJSPatcherObject<any, any, any, any, any, infer P, any, any> ? P : never;\nexport type UIState<T> = T extends IJSPatcherObject<any, any, any, any, any, any, infer U, any> ? U : never;\nexport type EventMap<T> = T extends IJSPatcherObject<any, any, any, any, any, any, any, infer E> ? E : never;\nexport type TInletEvent<I extends any[] = any[], $ extends keyof Pick<I, number> = keyof Pick<I, number>> = { inlet: $; data: I[$] };\nexport type TOutletEvent<O extends any[] = any[], $ extends keyof Pick<O, number> = keyof Pick<O, number>> = { outlet: $; data: O[$] };\nexport type JSPatcherObjectEventMap<D, S, I extends any[], A extends any[], P, U, E> = {\n    /** Emitted before any connection */\n    \"preInit\": never;\n    /** Emitted after connections */\n    \"postInit\": never;\n    /** Emitted immediately when the editor request changes to the args */\n    \"updateArgs\": Partial<A>;\n    /** Emitted immediately when the editor request changes to the props */\n    \"updateProps\": Partial<P>;\n    /** Emitted immediately when the editor request changes to the state */\n    \"updateState\": Partial<S>;\n    /** The UI will listen to this event type */\n    \"updateUI\": Partial<U> | never;\n    /** Emitted if received any input */\n    \"inlet\": TInletEvent<I>;\n    /** Emitted when a new connection/disconnection is made on any I/O */\n    \"connectedInlet\": { inlet: number; srcBoxId: string; srcOutlet: number; lineId: string };\n    \"connectedOutlet\": { outlet: number; destBoxId: string; destInlet: number; lineId: string };\n    \"disconnectedInlet\": { inlet: number; srcBoxId: string; srcOutlet: number; lineId: string };\n    \"disconnectedOutlet\": { outlet: number; destBoxId: string; destInlet: number; lineId: string };\n    /** Emitted when the object will be destroyed, attach a callback to clean up */\n    \"destroy\": never;\n    /** Emitted when the object's metadata is changed (by itself) */\n    \"metaUpdated\": { oldMeta: IJSPatcherObjectMeta; meta: IJSPatcherObjectMeta };\n    /** Emitted when the object's args is changed */\n    \"argsUpdated\": { oldArgs: A; args: A };\n    /** Emitted when the object's data is changed */\n    \"propsUpdated\": { oldProps: Partial<P>; props: Partial<P> };\n    /** Emitted when the object's data is changed (by itself) */\n    \"dataUpdated\": { oldData: D; data: D };\n    /** Emitted when the object's state is changed */\n    \"stateUpdated\": { oldState: S; state: S };\n} & E;\n\n/**\n * All JSPatcher Object should extends this class\n *\n * @template D serializable, type of `data` property, use `setData` to update. Data will be stored with the box in the serialized patcher. Will mark the patcher `dirty`.\n * @template S serializable, type of `state` property, use `setState` to update. State is temporary to the object instance. Can be updated from the host.\n * @template I type of inlets as an array.\n * @template O type of outlets as an array.\n * @template A serializable, type of args as an array.\n * @template P serializable, type of props as a map.\n * @template U type of UI state as a map, the UI will listen to any update of this map. If the object can be running on another thread, this should be serializable.\n * @template E type of additional event map\n */\nexport interface IJSPatcherObject<\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends {} = {},\n    U extends {} = {},\n    E extends Partial<JSPatcherObjectEventMap<D, S, I, A, P, U, {}>> & Record<string, any> = {}\n> extends TypedEventEmitter<JSPatcherObjectEventMap<D, S, I, A, P, U, E>> {\n    /** Should be true */\n    readonly isJSPatcherObject: true;\n    /** Unique identifier of the object */\n    readonly id: string;\n    /** constructor (class) name */\n    readonly class: string;\n    /** the patcher that the object lives in */\n    readonly patcher: Patcher;\n    /** Patcher constructor */\n    readonly Patcher: typeof Patcher;\n    /** the box that the object lives in */\n    readonly box: Box<this>;\n    /** the env that the object lives in */\n    readonly env: IJSPatcherEnv;\n    readonly audioCtx?: AudioContext;\n    readonly meta: IJSPatcherObjectMeta<P>;\n    setMeta(metaIn: Partial<IJSPatcherObjectMeta>): void;\n    /** Serializable, use `setState` to update. State is temporary to the object instance. Can be updated from the host. */\n    state: S;\n    setState(stateIn: Partial<S>): void;\n    /** Serializable, type of `data` property, use `setData` to update. Data will be stored with the box in the serialized patcher. */\n    readonly data: D;\n    setData(dataIn: Partial<D>): void;\n    /** Get all props from box, if not defined, get from metadata default */\n    readonly props: Partial<P>;\n    /** Get prop value from box, if not defined, get from metadata default. */\n    getProp<K extends keyof P = keyof P>(key: K): P[K];\n    setProps(props: Partial<P>): void;\n    readonly args: Partial<A>;\n    setArgs(args: Partial<A>): void;\n    inlets: number;\n    outlets: number;\n    readonly inletLines: Set<Line>[];\n    readonly outletLines: Set<Line>[];\n    inletAudioConnections: TAudioNodeInletConnection<AudioNode | AudioParam>[];\n    outletAudioConnections: TAudioNodeOutletConnection[];\n\n    // for box\n    /** Will be called just after constructed */\n    init(): Promise<void>;\n    /** Will be called after the object attached to box */\n    postInit(): Promise<void>;\n    /** Will be called when need to change arguments */\n    updateArgs(args: A, options?: ObjectUpdateOptions): Promise<void>;\n    /** Will be called when need to change properties */\n    updateProps(props: Partial<P>, options?: ObjectUpdateOptions): Promise<void>;\n    /** Will be called when need to change state */\n    updateState(state: Partial<S>, options?: ObjectUpdateOptions): Promise<void>;\n    /** Main function when receive data from a inlet (base 0). */\n    fn<$ extends number = number>(inlet: $, data: I[$]): void;\n    /** Called when object will be destroyed. */\n    destroy(): Promise<void>;\n    // called when inlet or outlet are connected or disconnected\n    connectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string): void;\n    disconnectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string): void;\n    connectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string): void;\n    disconnectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string): void;\n    /** Highlight the UI box. */\n    highlight(): void;\n\n    // for developer\n    /** Update UI's React State. */\n    updateUI(state: Partial<U>): void;\n    /** Output data with ith outlet. */\n    outlet<$ extends number>(outlet: $, data: O[$]): void;\n    /**\n     * Outlet all values in an array with corresponding index,\n     * use sparse array to omit an outlet,\n     * `[, 1]` will outlet 1 on second outlet,\n     * but `[undefined, 1]` will also outlet undefined on first outlet\n     */\n    outletAll(outputs: Partial<O>): void;\n    /** Record an undoable operation to the patcher history */\n    undoable(e: { oldArgs?: A; args?: A; oldProps?: Partial<P>; props?: Partial<P>; oldState?: S; state?: S }): void;\n    /**\n     * Get a shared item from files or temp\n     * If no ID provided, this will create a new key in temp\n     * if no such ID found in files or in temp, will put the result of data() into it.\n     */\n    getSharedItem<T extends ProjectItemType>(id?: string, type?: T, data?: () => Promise<TempItemByType<T>[\"data\"]>, onceCreate?: (aitem: SharedItemByType<T>) => any): Promise<{ id: string; item: SharedItemByType<T>; newItem: boolean; off?: () => any }>;\n    // output to console\n    post(data: any): void;\n    error(data: any): void;\n    info(data: any): void;\n    warn(data: any): void;\n    connectAudio(): void;\n    connectAudioInlet(portIn?: number): void;\n    connectAudioOutlet(portIn?: number): void;\n    disconnectAudio(): void;\n    disconnectAudioInlet(portIn?: number): void;\n    disconnectAudioOutlet(portIn?: number): void;\n    applyBPF(param: AudioParam, bpf: number[][]): void;\n}\nexport declare const IJSPatcherObject: {\n    /** Should be true */\n    readonly isJSPatcherObjectConstructor: true;\n    /** div will have class \"packageName\" \"packageName-objectName\" */\n    package: string;\n    readonly _name: string;\n    icon: SemanticICONS;\n    author: string;\n    version: string;\n    description: string;\n    inlets: IInletsMeta;\n    outlets: IOutletsMeta;\n    args: IArgsMeta;\n    props: IPropsMeta;\n    isPatcherInlet: \"data\" | \"audio\" | false;\n    isPatcherOutlet: \"data\" | \"audio\" | false;\n    readonly meta: IJSPatcherObjectMeta;\n    /**\n     * The UI that the object uses to display in the patcher, not available in other threads.\n     * is `BaseUI` by default\n     */\n    UI?: typeof AbstractUI;\n    new (box: Box, patcher: Patcher): IJSPatcherObject;\n};\n\nexport interface AnyJSPatcherObject extends IJSPatcherObject<Record<string, any>, Record<string, any>, any[], any[], any[], Record<string, any>, Record<string, any>, Record<string, any>> {}\n\nexport default abstract class AbstractObject<\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends {} = {},\n    U extends {} = {},\n    E extends Partial<JSPatcherObjectEventMap<D, S, I, A, P, U, {}>> & Record<string, any> = {}\n> extends TypedEventEmitter<JSPatcherObjectEventMap<D, S, I, A, P, U, E>> implements IJSPatcherObject<D, S, I, O, A, P, U, E> {\n    static readonly isJSPatcherObjectConstructor = true as const;\n    static package = \"Base\";\n    static get _name() {\n        return this.name;\n    }\n    static icon = null as SemanticICONS;\n    static author = \"\";\n    static version = \"0.0.0\";\n    static description = \"\";\n    static inlets: IInletsMeta = [];\n    static outlets: IOutletsMeta = [];\n    static args: IArgsMeta = [];\n    static props: IPropsMeta = {};\n    static isPatcherInlet: \"data\" | \"audio\" | false = false;\n    static isPatcherOutlet: \"data\" | \"audio\" | false = false;\n    static get meta(): IJSPatcherObjectMeta {\n        return {\n            package: this.package, // div will have class \"package-name\" \"package-name-objectname\"\n            name: this._name,\n            icon: this.icon, // semantic icon to display in UI\n            author: this.author,\n            version: this.version,\n            description: this.description,\n            inlets: this.inlets,\n            outlets: this.outlets,\n            args: this.args,\n            props: this.props,\n            isPatcherInlet: this.isPatcherInlet,\n            isPatcherOutlet: this.isPatcherOutlet\n        };\n    }\n    static UI: typeof AbstractUI;\n\n    readonly isJSPatcherObject = true as const;\n    readonly id: string;\n    get class() {\n        return this.constructor.name;\n    }\n    protected readonly _patcher: Patcher;\n    get patcher() {\n        return this._patcher;\n    }\n    get Patcher() {\n        return this._patcher.constructor as typeof Patcher;\n    }\n    protected readonly _box: Box<this>;\n    get box() {\n        return this._box;\n    }\n    get env() {\n        return this.patcher.env;\n    }\n    get audioCtx() {\n        return this.patcher.audioCtx;\n    }\n    private _meta = (this.constructor as typeof AbstractObject).meta as IJSPatcherObjectMeta<P>;\n    get meta(): IJSPatcherObjectMeta<P> {\n        return this._meta;\n    }\n    setMeta(metaIn: Partial<IJSPatcherObjectMeta<P>>) {\n        const oldMeta = { ...this.meta };\n        this._meta = Object.assign(this.meta, metaIn);\n        this.emit(\"metaUpdated\", { oldMeta, meta: { ...this.meta } });\n    }\n    state: S;\n    setState = (stateIn: Partial<S>) => {\n        const oldState = { ...this.state };\n        this.state = Object.assign(this.state, stateIn);\n        this.emit(\"stateUpdated\", { oldState, state: { ...this.state } });\n    };\n    get data(): D {\n        return this._box.data;\n    }\n    setData(dataIn: Partial<D>) {\n        const oldData = { ...this._box.data };\n        this._box.data = Object.assign(this.data, dataIn) as any;\n        this.emit(\"dataUpdated\", { oldData, data: { ...this.data } });\n    }\n    get props(): Partial<P> {\n        const props: Partial<P> = {};\n        for (const key in this.meta.props) {\n            props[key as keyof P] = this.getProp(key as keyof P);\n        }\n        return props;\n    }\n    getProp<K extends keyof P = keyof P>(key: K): P[K] {\n        if (key === \"rect\") return this.box.rect as any;\n        if (key === \"presentationRect\") return this.box.presentationRect as any;\n        if (key === \"background\") return this.box.background as any;\n        if (key === \"presentation\") return this.box.presentation as any;\n        return typeof this.box.props[key] === \"undefined\" ? this.meta.props[key].default : this.box.props[key];\n    }\n    setProps = (propsIn: Partial<P>) => {\n        const keys = Object.keys(propsIn);\n        const oldProps = { ...this.props } as Partial<P>;\n        this.box.update({ props: propsIn });\n        const props = { ...this.props } as Partial<P>;\n        for (const key in oldProps) {\n            if (keys.indexOf(key) === -1) {\n                delete oldProps[key];\n                delete props[key];\n            }\n        }\n        this.emit(\"propsUpdated\", { oldProps, props });\n    };\n    get args(): Partial<A> {\n        return this.box.args as any;\n    }\n    setArgs = (args: Partial<A>) => {\n        const oldArgs = this.args.slice() as A;\n        this.box.update({ args });\n        this.emit(\"argsUpdated\", { oldArgs, args: this.args.slice() as A });\n    };\n    get inlets() {\n        return this._box.inlets;\n    }\n    set inlets(i: number) {\n        this._box.setInlets(i);\n    }\n    get outlets() {\n        return this._box.outlets;\n    }\n    set outlets(i: number) {\n        this._box.setOutlets(i);\n    }\n    get outletLines() {\n        return this._box.outletLines;\n    }\n    get inletLines() {\n        return this._box.inletLines;\n    }\n    inletAudioConnections: TAudioNodeInletConnection[] = [];\n    outletAudioConnections: TAudioNodeOutletConnection[] = [];\n    constructor(box: Box, patcher: Patcher) {\n        super();\n        // line connected = metaChange event subscribed\n        // patcher object outside, use _ for prevent recursive stringify\n        this._patcher = patcher;\n        // the box which create this instance, use _ for prevent recursive stringify\n        this._box = box as Box<this>;\n        this.id = this.env.generateId(this);\n    }\n    async init() {\n        // process args and props\n        this.subscribe();\n        await this.emit(\"preInit\");\n    }\n    async postInit() {\n        await this.emit(\"postInit\");\n    }\n    /** Do everything here */\n    subscribe(): void {}\n    updateUI(state: Partial<U>) {\n        this.emit(\"updateUI\", state);\n    }\n    async updateArgs(args: A, options?: ObjectUpdateOptions) {\n        if (args?.length) {\n            const oldArgs = this.args.slice() as A;\n            await this.emit(\"updateArgs\", args);\n            if (options?.undoable) this.undoable({ oldArgs, args: this.args.slice() as A });\n        }\n    }\n    async updateProps(propsIn: Partial<P>, options?: ObjectUpdateOptions) {\n        if (propsIn && Object.keys(propsIn).length) {\n            const keys = Object.keys(propsIn);\n            const oldProps = { ...this.props };\n            await this.emit(\"updateProps\", propsIn);\n            const props = { ...this.props };\n            for (const key in oldProps) {\n                if (keys.indexOf(key) === -1) {\n                    delete oldProps[key];\n                    delete props[key];\n                }\n            }\n            if (options?.undoable) this.undoable({ oldProps, props });\n        }\n    }\n    async updateState(state: Partial<S>, options?: ObjectUpdateOptions) {\n        if (state && Object.keys(state).length) {\n            const oldState = { ...this.state };\n            await this.emit(\"updateState\", state);\n            if (options?.undoable) this.undoable({ oldState, state: { ...this.state } });\n        }\n    }\n    fn<$ extends keyof Pick<I, number> = keyof Pick<I, number>>(inlet: $, data: I[$]) {\n        if (inlet === 0) { // allow change props via first inlet with an props object\n            if (data !== null && typeof data === \"object\") {\n                const propsInKeys = Object.keys(data);\n                const propsKeys = Object.keys(this.meta.props);\n                if (propsInKeys.length && propsInKeys.every(k => propsKeys.indexOf(k) !== -1)) {\n                    this.updateProps(data);\n                    return;\n                }\n            }\n        }\n        this.emit(\"inlet\", { data, inlet });\n    }\n    outlet<$ extends keyof Pick<O, number>>(outlet: $, data: O[$]) {\n        if (outlet >= this.outlets) return;\n        Array.from(this.outletLines[outlet]).sort(Line.compare).map(line => line.pass(data));\n    }\n    outletAll(outputs: Partial<O>) {\n        for (let i = outputs.length - 1; i >= 0; i--) {\n            if (i in outputs) this.outlet(i, outputs[i]);\n        }\n    }\n    undoable(e: { oldArgs?: A; args?: A; oldProps?: Partial<P>; props?: Partial<P>; oldState?: S; state?: S }) {\n        this.box.undoable(e as any);\n    }\n    async destroy() {\n        await this.emit(\"destroy\");\n    }\n    connectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        this.emit(\"connectedOutlet\", { outlet, destBoxId, destInlet, lineId });\n    }\n    connectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        this.emit(\"connectedInlet\", { inlet, srcBoxId, srcOutlet, lineId });\n    }\n    disconnectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        this.emit(\"disconnectedOutlet\", { outlet, destBoxId, destInlet, lineId });\n    }\n    disconnectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        this.emit(\"disconnectedInlet\", { inlet, srcBoxId, srcOutlet, lineId });\n    }\n    post(data: any) {\n        this._patcher.newLog(\"none\", this.meta.name, stringifyError(data), this._box);\n    }\n    error(data: any) {\n        const s = stringifyError(data);\n        this._patcher.newLog(\"error\", this.meta.name, s, this._box);\n        this._box.error(s);\n    }\n    info(data: any) {\n        this._patcher.newLog(\"info\", this.meta.name, stringifyError(data), this._box);\n    }\n    warn(data: any) {\n        this._patcher.newLog(\"warn\", this.meta.name, stringifyError(data), this._box);\n    }\n    highlight() {\n        this._box.highlight();\n    }\n\n    connectAudio() {\n        this.box.allLines.forEach(line => line.enable());\n    }\n    connectAudioInlet(portIn?: number) {\n        this.inletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.enable());\n        });\n    }\n    connectAudioOutlet(portIn?: number) {\n        this.outletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.enable());\n        });\n    }\n    disconnectAudio() {\n        this.box.allLines.forEach(line => line.disable());\n    }\n    disconnectAudioInlet(portIn?: number) {\n        this.inletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.disable());\n        });\n    }\n    disconnectAudioOutlet(portIn?: number) {\n        this.outletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.disable());\n        });\n    }\n    applyBPF(param: AudioParam, bpf: number[][]) {\n        const { audioCtx } = this;\n        const { currentTime } = audioCtx;\n        param.cancelScheduledValues(currentTime);\n        param.setValueAtTime(param.value, currentTime);\n        let t = 0;\n        bpf.forEach((a) => {\n            if (a.length === 1) {\n                param.setValueAtTime(a[0], currentTime + t);\n            } else if (a.length > 1) {\n                t += a[1];\n                param.linearRampToValueAtTime(a[0], currentTime + t);\n            }\n        });\n    }\n    async getSharedItem<T extends ProjectItemType>(id = this.box.id, type: T = \"unknown\" as T, data?: () => Promise<TempItemByType<T>[\"data\"]>, onceCreate?: (aitem: SharedItemByType<T>) => any): Promise<{ id: string; item: SharedItemByType<T>; newItem: boolean; off?: () => any }> {\n        let item: SharedItemByType<T>;\n        let newItem = false;\n        const { fileMgr, tempMgr } = this.patcher.env;\n        try {\n            item = fileMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n        } catch {\n            try {\n                item = tempMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n            } catch {\n                if (data) {\n                    const d = await data();\n                    try {\n                        item = await tempMgr.root.addFile(id, d, type as TempItemType) as SharedItemByType<T>;\n                        newItem = true;\n                    } catch {\n                        item = tempMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n                    }\n                } else {\n                    if (onceCreate) {\n                        const off = () => {\n                            fileMgr.off(\"treeChanged\", handleFileMgrTreeChanged);\n                            tempMgr.off(\"treeChanged\", handleTempMgrTreeChanged);\n                        };\n                        const handleFileMgrTreeChanged = () => {\n                            try {\n                                item = fileMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n                                off();\n                                onceCreate(item);\n                            } catch {}\n                        };\n                        const handleTempMgrTreeChanged = () => {\n                            try {\n                                item = tempMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n                                off();\n                                onceCreate(item);\n                            } catch {}\n                        };\n                        fileMgr.on(\"treeChanged\", handleFileMgrTreeChanged);\n                        tempMgr.on(\"treeChanged\", handleTempMgrTreeChanged);\n                        return { id, item: null, newItem, off };\n                    }\n                    return { id, item: null, newItem };\n                }\n            }\n        }\n        if (item.type !== type) throw new Error(`Getting shared item ${id}, but returned item is of type ${item.type}, not of type ${type}.`);\n        return { id, item, newItem };\n    }\n}\n","export default class Bang {\n    isBang = true;\n    toString() {\n        return \"bang\";\n    }\n}\n\nexport const isBang = (x: any): x is Bang => typeof x === \"object\" && x?.isBang;\n","import AbstractObject, { IJSPatcherObjectMeta, IPropsMeta } from \"./AbstractObject\";\nimport type { TRect } from \"../../types\";\nimport type { BaseUIState } from \"./BaseUI\";\n\nexport interface BaseObjectAdditionalProps {\n    background: boolean;\n    presentation: boolean;\n    rect: TRect;\n    presentationRect: TRect;\n}\nexport interface BaseObjectProps extends BaseObjectAdditionalProps, BaseUIState {}\nexport default class BaseObject<\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends Partial<BaseObjectProps> & Record<string, any> = {},\n    U extends Partial<BaseUIState> & Record<string, any> = {},\n    E extends {} = {}\n> extends AbstractObject<D, S, I, O, A, P & BaseObjectProps, U & BaseUIState, E> {\n    static props: IPropsMeta = {\n        hidden: {\n            type: \"boolean\",\n            default: false,\n            description: \"Hide on lock\",\n            isUIState: true\n        },\n        background: {\n            type: \"boolean\",\n            default: false,\n            description: \"Include in background\"\n        },\n        presentation: {\n            type: \"boolean\",\n            default: false,\n            description: \"Include in presentation\"\n        },\n        rect: {\n            type: \"object\",\n            default: [0, 0, 90, 20],\n            description: \"Position and dimensions in patch\"\n        },\n        presentationRect: {\n            type: \"object\",\n            default: [0, 0, 90, 20],\n            description: \"Position and dimensions in presentation\"\n        },\n        ignoreClick: {\n            type: \"boolean\",\n            default: false,\n            description: \"Ignore Click\",\n            isUIState: true\n        },\n        hint: {\n            type: \"string\",\n            default: \"\",\n            description: \"Hint on hover\",\n            isUIState: true\n        }\n    };\n    static get meta(): IJSPatcherObjectMeta {\n        const thisName = this._name;\n        const superMeta = Object.getPrototypeOf(this).meta;\n        const superProps = superMeta.props;\n        const thisProps = this.props;\n        for (const key in thisProps) {\n            thisProps[key as keyof IPropsMeta<BaseObjectProps>].group = key in superProps ? superProps[key].group : thisName;\n        }\n        return {\n            package: this.package,\n            name: this._name,\n            icon: this.icon,\n            author: this.author,\n            version: this.version,\n            description: this.description,\n            inlets: [...this.inlets],\n            outlets: [...this.outlets],\n            args: [...this.args],\n            props: {\n                ...superProps,\n                ...thisProps\n            },\n            isPatcherInlet: this.isPatcherInlet,\n            isPatcherOutlet: this.isPatcherOutlet\n        };\n    }\n    isUIStateKey = (x: any) => this.meta.props[x] && this.meta.props[x].isUIState;\n    updateUIFromProps = (props: Partial<P & BaseObjectProps>) => {\n        if (props) {\n            const uiState: Partial<U & BaseUIState> = {};\n            for (const key in props) {\n                if (this.isUIStateKey(key)) uiState[key as keyof (U & BaseUIState)] = props[key] as any;\n            }\n            this.updateUI(uiState);\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", e => this.box.emit(\"metaUpdated\", e));\n        this.on(\"argsUpdated\", e => this.box.emit(\"argsUpdated\", e));\n        this.on(\"propsUpdated\", e => this.box.emit(\"propsUpdated\", e));\n        this.on(\"dataUpdated\", e => this.box.emit(\"dataUpdated\", e));\n        this.on(\"stateUpdated\", e => this.box.emit(\"stateUpdated\", e));\n        this.on(\"updateArgs\", this.setArgs);\n        this.on(\"updateProps\", this.setProps);\n        this.on(\"updateProps\", this.updateUIFromProps);\n    }\n}\n","import type BaseObject from \"./BaseObject\";\n\nexport interface RemotedObjectEventMap {\n    \"outlet\": { outlet: number; data: any };\n}\n\n/** Generate an object that can be used in the AudioWorklet as remoted. */\nexport default <\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends {} = {},\n    U extends {} = {},\n    E extends Partial<RemotedObjectEventMap> & Record<string, any> = {}\n>(O: typeof BaseObject) => class RemotedObject extends O<D, S, I, O, A, P, U, E & RemotedObjectEventMap> {\n    get proxy() {\n        return this.patcher.state.patcherProcessor;\n    }\n    subscribe() {\n        super.subscribe();\n        const handleBoxIoCountChanged = () => {\n            const { id, inlets, outlets } = this.box;\n            this.proxy?.objectEmitFromWorklet(id, \"boxIoCountChanged\", { inlets, outlets });\n        };\n        this.box.on(\"ioCountChanged\", handleBoxIoCountChanged);\n        this.on(\"outlet\", ({ outlet, data }) => this.outlet(outlet, data));\n        this.on(\"destroy\", () => this.box.off(\"ioCountChanged\", handleBoxIoCountChanged));\n    }\n};\n","import BaseObject from \"./BaseObject\";\nimport { Func, New } from \"../importer/RemotedImporter\";\nimport getIO from \"../jsaw/index.jsdsppkg.aw\";\n\nexport default async () => ({\n    BaseObject,\n    EmptyObject: BaseObject,\n    InvalidObject: BaseObject,\n    func: Func,\n    new: New,\n    ...await getIO()\n});\n","import RemotedImporter from \"../importer/RemotedImporter\";\n\nexport default async () => RemotedImporter.import(\"globalThis\", globalThis, true);\n","import StaticMethod from \"./StaticMethod\";\nimport Method from \"./Method\";\nimport BaseObject from \"../base/BaseObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type ImportedObject from \"./ImportedObject\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\n\ntype TAnyFunction = (...args: any[]) => any;\ntype TWrapper = typeof StaticMethod | typeof Method;\ninterface IS { Wrapper: TWrapper }\nexport default class Func extends BaseObject<{}, {}, [Bang], [TAnyFunction], any[], {}, { loading: boolean }> {\n    static description = \"Get the function itself\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Bang to get the function itself\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"function\",\n        description: \"function\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"string\",\n        optional: false,\n        varLength: false,\n        description: \"Function name\"\n    }];\n    _: IS = { Wrapper: null };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n            handleUpdateArgs(this.args);\n        });\n        const handleUpdateArgs = (args: any[]) => {\n            if (typeof args[0] !== \"undefined\") {\n                const Wrapper = this.patcher.activeLib[args[0]];\n                if (!Wrapper) this.error(`Function ${args[0]} not found.`);\n                else if (Wrapper.prototype instanceof StaticMethod || Wrapper.prototype instanceof Method) {\n                    this._.Wrapper = Wrapper as TWrapper;\n                } else {\n                    this.error(\"Given identifier function is not a function\");\n                }\n            } else {\n                this.error(\"A function identifier is needed.\");\n            }\n        };\n        this.on(\"updateArgs\", handleUpdateArgs);\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (isBang(data)) this.output();\n            }\n        });\n    }\n    callback = () => this.outlet(0, this.imported);\n    output() {\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n    get name() {\n        const c = this._.Wrapper;\n        return c.path[c.path.length - 1];\n    }\n    get imported(): TAnyFunction {\n        const c = this._.Wrapper || this.patcher.activeLib.Object as TWrapper;\n        let r: TAnyFunction;\n        try {\n            r = c.path.reduce((acc, cur) => acc[cur], c.root);\n        } catch (e) {\n            this.error(e);\n        }\n        return r;\n    }\n    set imported(v: TAnyFunction) {\n        const c = (this.constructor as typeof ImportedObject);\n        let parent = c.root;\n        try {\n            if (!c.path.length) {\n                c.root = v;\n            } else {\n                c.path.slice(0, -1).forEach(key => parent = parent[key]);\n                parent[c.path[c.path.length - 1]] = v;\n            }\n        } catch (e) {\n            this.error(e);\n        }\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ninterface IS<Static extends boolean> {\n    instance: Static extends true ? undefined : any;\n    result: any;\n}\ntype I<Static extends boolean> = Static extends true ? [Bang] : [any | Bang];\ntype O<Static extends boolean> = Static extends true ? [any] : [any, any];\nexport default class Getter<Static extends boolean = false> extends ImportedObject<any, {}, I<Static>, O<Static>, [], { sync: boolean }, { loading: boolean }> {\n    static importedObjectType: ImportedObjectType = \"Getter\";\n    static description = \"Auto-imported getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to read\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    static props: IJSPatcherObjectMeta[\"props\"] = {\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    _: IS<Static> = { instance: undefined, result: null };\n    handlePreInit = () => {\n        this.inlets = 1;\n        this.outlets = 2;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.instance = data;\n            if (this.execute()) this.output();\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", this.handlePreInit);\n        this.on(\"inlet\", this.handleInlet);\n    }\n    execute() {\n        try {\n            this._.result = this._.instance[this.name];\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this._.result, this._.instance] as O<Static>);\n    output() {\n        if (this._.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this._.result.then((r) => {\n                this.loading = false;\n                this._.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\n/**\n* ```JavaScript\n*   class A {\n*       static a = {} // A.a\n*       static b() {} // A.b\n*       static get c() {} // A.c (get)\n*       static set d(x) {} // A.d (set)\n*       e = {} // Nothing\n*       f() {} // A.prototype.f\n*       get g() {} // A.prototype.g (get)\n*       set h(x) {} // A.prototype.h (set)\n*       constructor() {} // A.prototype.constructor\n*   }\n*   const B = {\n*       a: {}, // B.a\n*       b() {} // B.b\n*   }\n*   const C = function() {\n*       this.a = null; // C.prototype.constructor\n*   }\n* ```\n*/\n\nexport default abstract class ImportedObject<T, S, I extends any[], O extends any[], A extends any[], P, U> extends BaseObject<{}, S, I, O, A, P, U> {\n    static importedObjectType: ImportedObjectType;\n    static root: Record<string, any>;\n    static path: string[];\n    static description = \"Auto-imported object\";\n    get name() {\n        const c = (this.constructor as typeof ImportedObject);\n        return c.path[c.path.length - 1];\n    }\n    get imported(): T {\n        const c = (this.constructor as typeof ImportedObject);\n        let r: T;\n        try {\n            r = c.path.reduce((acc, cur) => acc[cur], c.root);\n        } catch (e) {\n            this.error(e);\n        }\n        return r;\n    }\n    set imported(v: T) {\n        const c = (this.constructor as typeof ImportedObject);\n        let parent = c.root;\n        try {\n            if (!c.path.length) {\n                c.root = v;\n            } else {\n                c.path.slice(0, -1).forEach(key => parent = parent[key]);\n                parent[c.path[c.path.length - 1]] = v;\n            }\n        } catch (e) {\n            this.error(e);\n        }\n    }\n}\nexport class AnyImportedObject extends ImportedObject<any, any, any, any, any, any, any> {}\n","import { ImporterDirSelfObject } from \"../../../utils/symbols\";\nimport { getPropertyDescriptors } from \"../../../utils/utils\";\nimport { IJSPatcherObject, isJSPatcherObjectConstructor } from \"../base/AbstractObject\";\nimport type { TPackage } from \"../../types\";\n\nexport default abstract class Importer {\n    static $self = ImporterDirSelfObject;\n    static getObject(p: PropertyDescriptor, pkgName: string, root: Record<string, any>, path: string[]): typeof IJSPatcherObject {\n        throw new Error(\"getObject not implemented\");\n    }\n    /*\n    static async test() {\n        await Importer.importFrom(\"https://unpkg.com/@tensorflow/tfjs\", \"tf\").then(console.log);\n        await Importer.importFrom(\"https://unpkg.com/three\", \"THREE\").then(console.log);\n        await Importer.importFrom(\"https://unpkg.com/webmidi\", \"MIDI\").then(console.log);\n    }\n    */\n    static writeInPath(pkgIn: TPackage, pathIn: string[], object: typeof IJSPatcherObject) {\n        if (pathIn.length === 0) {\n            Object.assign(pkgIn, { [this.$self]: object });\n            return;\n        }\n        const path = pathIn.slice();\n        let pkg = pkgIn;\n        while (path.length > 1) {\n            const key = path.shift();\n            if (!pkg[key]) pkg[key] = {};\n            else if (isJSPatcherObjectConstructor(pkg[key])) pkg[key] = { [this.$self]: pkg[key] };\n            pkg = pkg[key] as TPackage;\n        }\n        pkg[path[0]] = object;\n    }\n    /**\n     * Recursive transform JavaScript object to JSPatcher Package\n     *\n     * @param {string} pkgName package identifier\n     * @param {Record<string, any>} root imported JavaScript object\n     * @param {boolean} [all] import non-iterables\n     * @param {TPackage} [outIn]\n     * @param {string[]} [pathIn]\n     * @param {any[]} [stackIn]\n     * @param {number} [depthIn]\n     */\n    static import(pkgName: string, root: Record<string, any>, all?: boolean, outIn?: TPackage, pathIn?: string[], stackIn?: any[], depthIn?: number) {\n        const depth = typeof depthIn === \"undefined\" ? 0 : depthIn;\n        const out = outIn || {};\n        const path = pathIn || [];\n        const stack = stackIn ? stackIn.slice() : [];\n        let o: any;\n        try {\n            o = path.reduce((acc, cur) => acc[cur], root);\n        } catch (e) {\n            return out;\n        }\n        if (typeof o === \"undefined\" || o === null || stack.indexOf(o) !== -1 || (depth && o === globalThis) || o === (globalThis as any).jspatcherEnv) return out; // cyclic object\n        stack[depth] = o;\n        let props: Record<string, TypedPropertyDescriptor<any> | PropertyDescriptor>;\n        try { // mitigate opener.location.href error\n            props = getPropertyDescriptors(o);\n        } catch (e) {\n            return out;\n        }\n        if (path.length === 0) {\n            const newObj = this.getObject({ value: root }, pkgName, root, []);\n            if (newObj) this.writeInPath(out, [], newObj);\n        }\n        for (const key in props) {\n            if (typeof o === \"function\" && [\"arguments\", \"caller\", \"length\", \"name\", \"__proto__\"].indexOf(key) >= 0) continue;\n            if (typeof o === \"object\" && [\"constructor\", \"__proto__\"].indexOf(key) >= 0) continue;\n            const prop = props[key];\n            const newPath = [...path, key];\n            if (!all && !prop.enumerable && key.startsWith(\"_\") && key !== \"prototype\") continue;\n            const newObj = this.getObject(prop, pkgName, root, newPath);\n            if (newObj) this.writeInPath(out, newPath.map((s, i) => (i !== newPath.length - 1 && s === \"prototype\" ? \"\" : s)), newObj);\n            const value = prop.value;\n            if ((typeof value === \"object\" || typeof value === \"function\") && value !== null && (value === Array.prototype || !Array.isArray(value))) {\n                this.import(pkgName, root, all, out, newPath, stack, depth + 1);\n            }\n        }\n        return out;\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ntype TAnyFunction = (...args: any[]) => any;\ninterface IS<Static extends boolean> {\n    instance: Static extends true ? undefined : any;\n    inputs: any[];\n    result: any;\n}\ntype I<Static extends boolean> = Static extends true ? [any | Bang, ...any[]] : [any | Bang, any, ...any[]];\ntype O<Static extends boolean> = Static extends true ? [any, ...any[]] : [any, any, ...any[]];\ninterface P {\n    args: number;\n    spreadArgs: boolean;\n    sync: boolean;\n}\n\nexport default class Method<Static extends boolean = false> extends ImportedObject<TAnyFunction, {}, I<Static>, O<Static>, any[], P, { loading: boolean }> {\n    static importedObjectType: ImportedObjectType = \"Method\";\n    static description = \"Auto-imported method\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to read\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Method argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Method return value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after method called\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        varLength: true,\n        description: \"Set arguments while loaded\"\n    }];\n    static props: IPropsMeta<P> = {\n        args: {\n            type: \"number\",\n            default: 0,\n            description: \"arguments count for method\"\n        },\n        spreadArgs: {\n            type: \"boolean\",\n            default: false,\n            description: \"arguments input will be spreaded if true\"\n        },\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    _: IS<Static> = { instance: undefined, inputs: [], result: null };\n    initialInlets = 1;\n    initialOutlets = 2;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.instance = data;\n            if (this.execute()) this.output();\n        } else {\n            this._.inputs[inlet - 1] = data;\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", () => {\n            handleUpdateArgs(this.args);\n        });\n        const handleUpdateArgs = (args: any[]) => {\n            this._.inputs = args.slice();\n            const fn = this.imported;\n            const argsCount = Math.max(fn.length, args.length, ~~+this.getProp(\"args\"));\n            this.inlets = Math.max(1, this.initialInlets + argsCount);\n            this.outlets = this.initialOutlets + argsCount;\n        };\n        this.on(\"updateArgs\", handleUpdateArgs);\n        this.on(\"updateProps\", (props) => {\n            if (props.args && typeof props.args === \"number\" && props.args >= 0) {\n                const fn = this.imported;\n                const argsCount = Math.max(fn.length, this.box.args.length, ~~props.args);\n                this.inlets = Math.max(1, this.initialInlets + argsCount);\n                this.outlets = this.initialOutlets + argsCount;\n            }\n        });\n        this.on(\"inlet\", this.handleInlet);\n    }\n    execute() {\n        const fn = this.imported;\n        try {\n            this._.result = fn.call(this._.instance, ...(this.getProp(\"spreadArgs\") ? this._.inputs.reduce<any[]>((acc, cur) => [...acc, ...cur], []) : this._.inputs));\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this._.result, this._.instance, ...this._.inputs] as O<Static>);\n    output() {\n        if (this._.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this._.result.then((r) => {\n                this.loading = false;\n                this._.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\n","import StaticMethod from \"./StaticMethod\";\nimport BaseObject from \"../base/BaseObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type ImportedObject from \"./ImportedObject\";\nimport type { IJSPatcherObjectMeta, IPropsMeta } from \"../base/AbstractObject\";\n\ntype TAnyConstructor = new (...args: any[]) => any;\ninterface P {\n    args: number;\n    spreadArgs: boolean;\n}\ninterface IS {\n    Wrapper: typeof StaticMethod;\n    inputs: any[];\n    result: any;\n}\n\nexport default class New extends BaseObject<{}, {}, [any | Bang, ...any[]], [any, ...any[]], any[], P, { loading: boolean }> {\n    static description = \"Call function as a constructor\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Constructor argument, output instance constructed\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Constructor argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Instance constructed\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after constructor called\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"string\",\n        optional: false,\n        varLength: false,\n        description: \"Constructor name\"\n    }, {\n        type: \"anything\",\n        optional: true,\n        varLength: true,\n        description: \"Set arguments while loaded\"\n    }];\n    static props: IPropsMeta<P> = {\n        args: {\n            type: \"number\",\n            default: 0,\n            description: \"arguments count for method\"\n        },\n        spreadArgs: {\n            type: \"boolean\",\n            default: false,\n            description: \"arguments input will be spreaded if true\"\n        }\n    };\n    _: IS = { Wrapper: null, inputs: [], result: null };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", () => {\n            handleUpdateArgs(this.args);\n        });\n        const handleUpdateArgs = (args: any[]) => {\n            if (typeof args[0] !== \"undefined\") {\n                const Wrapper = this.patcher.activeLib[args[0]];\n                if (!Wrapper) this.error(`Function ${args[0]} not found.`);\n                else if (Wrapper.prototype instanceof StaticMethod) {\n                    this._.Wrapper = Wrapper as typeof StaticMethod;\n                    const Fn = this.imported;\n                    const argsCount = Math.max(Fn.length, args.length - 1, ~~+this.getProp(\"args\"));\n                    this.inlets = Math.max(1, argsCount);\n                    this.outlets = 1 + this.inlets;\n                } else {\n                    this.error(\"Given function is not constructable\");\n                }\n            } else {\n                this.error(\"A constructor is needed.\");\n            }\n            this._.inputs = args.slice(1);\n        };\n        this.on(\"updateArgs\", handleUpdateArgs);\n        this.on(\"updateProps\", (props) => {\n            if (props.args && typeof props.args === \"number\" && props.args >= 0) {\n                const Fn = this.imported;\n                const argsCount = Math.max(Fn.length, this.box.args.length - 1, ~~+props.args);\n                this.inlets = Math.max(1, argsCount);\n                this.outlets = 1 + this.inlets;\n            }\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (!isBang(data)) this._.inputs[inlet] = data;\n                if (this.execute()) this.output();\n            } else {\n                this._.inputs[inlet] = data;\n            }\n        });\n    }\n    execute() {\n        const Fn = this.imported;\n        try {\n            this._.result = new Fn(...(this.getProp(\"spreadArgs\") ? this._.inputs.reduce<any[]>((acc, cur) => [...acc, ...cur], []) : this._.inputs));\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this._.result, ...this._.inputs]);\n    output() {\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n    get name() {\n        const c = this._.Wrapper;\n        return c.path[c.path.length - 1];\n    }\n    get imported(): TAnyConstructor {\n        const c = this._.Wrapper || this.patcher.activeLib.Object as typeof StaticMethod;\n        let r: TAnyConstructor;\n        try {\n            r = c.path.reduce((acc, cur) => acc[cur], c.root);\n        } catch (e) {\n            this.error(e);\n        }\n        return r;\n    }\n    set imported(v: TAnyConstructor) {\n        const c = (this.constructor as typeof ImportedObject);\n        let parent = c.root;\n        try {\n            if (!c.path.length) {\n                c.root = v;\n            } else {\n                c.path.slice(0, -1).forEach(key => parent = parent[key]);\n                parent[c.path[c.path.length - 1]] = v;\n            }\n        } catch (e) {\n            this.error(e);\n        }\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ninterface IS<Static extends boolean> { instance: Static extends true ? undefined : any }\ntype I<Static extends boolean> = Static extends true ? [Bang, any] : [any | Bang, any];\ntype O<Static extends boolean> = Static extends true ? [any] : [any, any];\ntype A<Static extends boolean> = Static extends true ? [any] : [];\n\nexport default class Property<Static extends boolean = false> extends ImportedObject<any, {}, I<Static>, O<Static>, A<Static>, {}, {}> {\n    static importedObjectType: ImportedObjectType = \"Property\";\n    static description = \"Auto-imported property\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Constructor argument, output instance constructed\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Constructor argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    _: IS<Static> = { instance: undefined };\n    handlePreInit = () => {\n        this.inlets = 2;\n        this.outlets = 2;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.instance = data;\n            let result;\n            try {\n                result = this._.instance[this.name];\n            } catch (e) {\n                this.error(e);\n            }\n            this.outletAll([result, this._.instance] as O<Static>);\n        } else if (inlet === 1) {\n            try {\n                this._.instance[this.name] = data;\n            } catch (e) {\n                this.error(e);\n            }\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", this.handlePreInit);\n        this.on(\"inlet\", this.handleInlet);\n    }\n}\n","import NewBase from \"./New\";\nimport FuncBase from \"./Func\";\nimport PropertyBase from \"./Property\";\nimport GetterBase from \"./Getter\";\nimport SetterBase from \"./Setter\";\nimport SetterGetterBase from \"./SetterGetter\";\nimport MethodBase from \"./Method\";\nimport StaticPropertyBase from \"./StaticProperty\";\nimport StaticGetterBase from \"./StaticGetter\";\nimport StaticSetterBase from \"./StaticSetter\";\nimport StaticSetterGetterBase from \"./StaticSetterGetter\";\nimport StaticMethodBase from \"./StaticMethod\";\nimport generateRemotedObject from \"../base/generateRemotedObject\";\nimport Importer from \"./Importer\";\nimport type BaseObject from \"../base/BaseObject\";\nimport type { IJSPatcherObject } from \"../base/AbstractObject\";\n\nexport class New extends generateRemotedObject(NewBase as typeof BaseObject) {\n}\nexport class Func extends generateRemotedObject(FuncBase as typeof BaseObject) {\n}\nexport class Property extends generateRemotedObject(PropertyBase as typeof BaseObject) {\n}\nexport class Getter extends generateRemotedObject(GetterBase as typeof BaseObject) {\n}\nexport class Setter extends generateRemotedObject(SetterBase as typeof BaseObject) {\n}\nexport class SetterGetter extends generateRemotedObject(SetterGetterBase as typeof BaseObject) {\n}\nexport class Method extends generateRemotedObject(MethodBase as typeof BaseObject) {\n}\nexport class StaticProperty extends generateRemotedObject(StaticPropertyBase as typeof BaseObject) {\n}\nexport class StaticGetter extends generateRemotedObject(StaticGetterBase as typeof BaseObject) {\n}\nexport class StaticSetter extends generateRemotedObject(StaticSetterBase as typeof BaseObject) {\n}\nexport class StaticSetterGetter extends generateRemotedObject(StaticSetterGetterBase as typeof BaseObject) {\n}\nexport class StaticMethod extends generateRemotedObject(StaticMethodBase as typeof BaseObject) {\n}\n\nexport default class DefaultImporter extends Importer {\n    static getObject(p: PropertyDescriptor, pkgName: string, root: Record<string, any>, path: string[]): typeof IJSPatcherObject {\n        const isStatic = path[path.length - 2] !== \"prototype\";\n        let Super: typeof IJSPatcherObject;\n        const type = typeof p.value;\n        if (type === \"function\") {\n            if (isStatic) Super = StaticMethod;\n            else Super = Method;\n        } else if (type === \"undefined\") {\n            const setter = p.set;\n            const getter = p.get;\n            if (isStatic) {\n                if (setter && getter) Super = StaticSetterGetter;\n                else if (setter) Super = StaticSetter;\n                else if (getter) Super = StaticGetter;\n                else return null;\n            } else {\n                if (setter && getter) Super = SetterGetter;\n                else if (setter) Super = Setter;\n                else if (getter) Super = Getter;\n                else return null;\n            }\n        } else {\n            if (isStatic) Super = StaticProperty;\n            else Super = Property;\n        }\n        return class extends Super {\n            static package = pkgName;\n            static root = root;\n            static path = path;\n            static get _name() { return path[path.length - 1] || pkgName; }\n        };\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ninterface IS<Static extends boolean> {\n    instance: Static extends true ? undefined : any;\n    input: any;\n}\ntype I<Static extends boolean> = Static extends true ? [any] : [any | Bang, any];\ntype O<Static extends boolean> = Static extends true ? [] : [any];\n\nexport default class Setter<Static extends boolean = false> extends ImportedObject<any, {}, I<Static>, O<Static>, [any], {}, {}> {\n    static importedObjectType: ImportedObjectType = \"Setter\";\n    static description = \"Auto-imported setter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to set property\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        varLength: false,\n        description: \"Initial value to set\"\n    }];\n    initialInlets = 2;\n    initialOutlets = 1;\n    _: IS<Static> = { instance: undefined, input: null };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.instance = data;\n            if (typeof this._.instance === \"undefined\") return;\n            try {\n                this._.instance[this.name] = this._.input;\n            } catch (e) {\n                this.error(e);\n                return;\n            }\n            this.outlet(0, this._.instance);\n        } else {\n            this._.input = data;\n        }\n    };\n    handleUpdateArgs = (args: [any?]) => {\n        if (args.length) this._.input = args[0];\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = this.initialInlets;\n            this.outlets = this.initialOutlets;\n            this.handleUpdateArgs(this.args);\n        });\n        this.on(\"updateArgs\", this.handleUpdateArgs);\n        this.on(\"inlet\", this.handleInlet);\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ninterface IS<Static extends boolean> {\n    instance: Static extends true ? undefined : any;\n    input: any;\n    result: any;\n}\ntype I<Static extends boolean> = Static extends true ? [any] : [any | Bang, any];\ntype O<Static extends boolean> = Static extends true ? [any] : [any, any];\n\nexport default class SetterGetter<Static extends boolean = false> extends ImportedObject<any, {}, I<Static>, O<Static>, [any], { sync: boolean }, { loading: boolean }> {\n    static importedObjectType: ImportedObjectType = \"SetterGetter\";\n    static description = \"Auto-imported setter / getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to manipulate\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        varLength: false,\n        description: \"Initial value to set\"\n    }];\n    static props: IJSPatcherObjectMeta[\"props\"] = {\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    initialInlets = 2;\n    initialOutlets = 2;\n    _: IS<Static> = { instance: undefined, input: null, result: null };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.instance = data;\n            if (typeof this._.instance === \"undefined\") return;\n            if (typeof this._.input !== \"undefined\") {\n                try {\n                    this._.instance[this.name] = this._.input;\n                } catch (e) {\n                    this.error(e);\n                    return;\n                }\n            }\n            if (this.execute()) this.output();\n        } else if (inlet === 1) {\n            this._.input = data;\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = this.initialInlets;\n            this.outlets = this.initialOutlets;\n            handleUpdateArgs(this.args);\n        });\n        const handleUpdateArgs = (args: [any?]) => {\n            if (args.length) this._.input = args[0];\n        };\n        this.on(\"updateArgs\", handleUpdateArgs);\n        this.on(\"inlet\", this.handleInlet);\n    }\n    execute() {\n        try {\n            this._.result = this._.instance[this.name];\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this._.result, this._.instance] as O<Static>);\n    output() {\n        if (this._.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this._.result.then((r) => {\n                this.loading = false;\n                this._.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\n","import Getter from \"./Getter\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticGetter extends Getter<true> {\n    static importedObjectType: ImportedObjectType = \"StaticGetter\";\n    static description = \"Auto-imported static getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Get the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    handlePreInit = () => {\n        this.inlets = 1;\n        this.outlets = 1;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0 && isBang(data) && this.execute()) this.output();\n    };\n    execute() {\n        try {\n            this._.result = this.imported;\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outlet(0, this._.result);\n}\n","import Method from \"./Method\";\nimport { ImportedStaticMethodObject } from \"../../../utils/symbols\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticMethod extends Method<true> {\n    static importedObjectType: ImportedObjectType = \"StaticMethod\";\n    static [ImportedStaticMethodObject] = true;\n    static description = \"Auto-imported static method\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        varLength: true,\n        description: \"Method argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Method return value\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after method called\"\n    }];\n    initialInlets = 0;\n    initialOutlets = 1;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.inputs[inlet] = data;\n            if (this.execute()) this.output();\n        } else {\n            this._.inputs[inlet] = data;\n        }\n    };\n    execute() {\n        const fn = this.imported;\n        try {\n            this._.result = fn(...(this.getProp(\"spreadArgs\") ? this._.inputs.reduce<any[]>((acc, cur) => [...acc, ...cur], []) : this._.inputs));\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this._.result, ...this._.inputs]);\n}\n","import Property from \"./Property\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticProperty extends Property<true> {\n    static importedObjectType: ImportedObjectType = \"StaticProperty\";\n    static description = \"Auto-imported static property\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Get the value\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        description: \"Set the value while loaded.\"\n    }];\n    handlePreInit = () => {\n        this.inlets = 2;\n        this.outlets = 1;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (isBang(data)) this.outlet(0, this.imported);\n        } else if (inlet === 1) {\n            this.imported = data;\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"updateArgs\", (args) => {\n            if (args.length) this.imported = args[0];\n        });\n        this.on(\"inlet\", this.handleInlet);\n    }\n}\n","import Setter from \"./Setter\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticSetter extends Setter<true> {\n    static importedObjectType: ImportedObjectType = \"StaticSetter\";\n    static description = \"Auto-imported static setter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [];\n    initialInlets = 1;\n    initialOutlets = 0;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) this.imported = data;\n    };\n    handleUpdateArgs = (args: [any?]) => {\n        if (args.length) this.imported = args[0];\n    };\n}\n","import SetterGetter from \"./SetterGetter\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticSetterGetter extends SetterGetter<true> {\n    static importedObjectType: ImportedObjectType = \"StaticSetterGetter\";\n    static description = \"Auto-imported static setter / getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Get the value\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    initialInlets = 2;\n    initialOutlets = 1;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) return;\n            if (typeof this._.input !== \"undefined\") {\n                try {\n                    this.imported = this._.input;\n                } catch (e) {\n                    this.error(e);\n                    return;\n                }\n            }\n            if (this.execute()) this.output();\n        } else if (inlet === 1) {\n            this._.input = data;\n        }\n    };\n    execute() {\n        try {\n            this._.result = this.imported;\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outlet(0, this._.result);\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\n\ninterface P {\n    description: string;\n}\n\nexport default class AudioIn extends BaseObject<{}, {}, [], [number, number], [number], P> {\n    static isPatcherInlet = \"audio\" as const;\n    static description = \"Patcher inlet (audio)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"number\",\n        description: \"Sample value\"\n    }, {\n        type: \"number\",\n        description: \"Sample index\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected handlePatcherInput = ({ input, index, sample }: PatcherEventMap[\"audioInput\"]) => {\n        if (input === this.index - 1) this.outletAll([sample, index]);\n    };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 2;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        if (this.env.thread === \"AudioWorklet\") this.patcher.on(\"audioInput\", this.handlePatcherInput);\n        this.on(\"destroy\", () => {\n            this.patcher.off(\"audioInput\", this.handlePatcherInput);\n            this.patcher.changeIO();\n        });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IInletsMeta, IPropsMeta } from \"../base/AbstractObject\";\n\ninterface P {\n    description: string;\n}\n\nexport default class AudioOut extends BaseObject<{}, {}, [], [number, number], [number, number], P> {\n    static isPatcherOutlet = \"audio\" as const;\n    static description = \"Patcher outlet (audio)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index, sampleIndex: 0 };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 2;\n            this.outlets = 0;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const inlet0 = { ...this.meta.inlets[0] };\n            if (typeof props.description === \"string\") inlet0.description = props.description;\n            this.setMeta({ inlets: [inlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 1) this._.sampleIndex = +~~data;\n            else if (inlet === 0) this.patcher.outputAudio(this.index - 1, this._.sampleIndex, +data);\n        });\n        this.on(\"destroy\", this.emitPatcherChangeIO);\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta, TMetaType } from \"../base/AbstractObject\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\n\ninterface P {\n    description: string;\n    type: Exclude<TMetaType, \"signal\" | \"enum\">;\n}\n\nexport default class In extends BaseObject<{}, {}, [], [any], [number], P> {\n    static isPatcherInlet = \"data\" as const;\n    static description = \"Patcher inlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        },\n        type: {\n            type: \"enum\",\n            enums: [\"string\", \"number\", \"boolean\", \"object\", \"function\", \"anything\", \"bang\", \"color\"],\n            default: \"anything\",\n            description: \"Inlet data type\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected handlePatcherInput = ({ data, inlet }: PatcherEventMap[\"dataInput\"]) => {\n        if (inlet === this.index - 1) this.outlet(0, data);\n    };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            if (typeof props.type === \"string\") outlet0.type = props.type || \"anything\";\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        if (this.env.thread === \"AudioWorklet\") this.patcher.on(\"dataInput\", this.handlePatcherInput);\n        this.on(\"destroy\", () => {\n            this.patcher.off(\"dataInput\", this.handlePatcherInput);\n            this.patcher.changeIO();\n        });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IInletsMeta, IPropsMeta, TMetaType } from \"../base/AbstractObject\";\n\ninterface P {\n    description: string;\n    type: Exclude<TMetaType, \"signal\" | \"enum\">;\n}\n\nexport default class Out extends BaseObject<{}, {}, [], [any], [number], P> {\n    static isPatcherOutlet = \"data\" as const;\n    static description = \"Patcher outlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        },\n        type: {\n            type: \"enum\",\n            enums: [\"string\", \"number\", \"boolean\", \"object\", \"function\", \"anything\", \"bang\", \"color\"],\n            default: \"anything\",\n            description: \"Inlet data type\"\n        }\n    };\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 0;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const inlet0 = { ...this.meta.inlets[0] };\n            if (typeof props.description === \"string\") inlet0.description = props.description;\n            if (typeof props.type === \"string\") inlet0.type = props.type || \"anything\";\n            this.setMeta({ inlets: [inlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) this.patcher.outlet(this.index - 1, data);\n        });\n        this.on(\"destroy\", this.emitPatcherChangeIO);\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\n\ninterface P {\n    description: string;\n}\n\nexport default class Param extends BaseObject<{}, {}, [], [number, number], [string], P> {\n    static description = \"Patcher outlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"string\",\n        optional: false,\n        default: \"\",\n        description: \"Parameter name\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected handlePatcherInput = ({ param, index, sample }: PatcherEventMap[\"paramInput\"]) => {\n        if (this.args[0] === param) this.outletAll([sample, index]);\n    };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", this.emitPatcherChangeIO);\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        if (this.env.thread === \"AudioWorklet\") this.patcher.on(\"paramInput\", this.handlePatcherInput);\n        this.on(\"destroy\", () => {\n            this.patcher.off(\"paramInput\", this.handlePatcherInput);\n            this.patcher.changeIO();\n        });\n    }\n}\n","import generateRemotedObject from \"../base/generateRemotedObject\";\nimport In from \"./In\";\nimport Out from \"./Out\";\nimport Param from \"./Param\";\nimport AudioIn from \"./AudioIn\";\nimport AudioOut from \"./AudioOut\";\nimport type BaseObject from \"../base/BaseObject\";\n\nexport default async () => ({\n    in: generateRemotedObject(In as typeof BaseObject),\n    out: generateRemotedObject(Out as typeof BaseObject),\n    \"param~\": generateRemotedObject(Param as typeof BaseObject),\n    \"in~\": generateRemotedObject(AudioIn as typeof BaseObject),\n    \"out~\": generateRemotedObject(AudioOut as typeof BaseObject)\n});\n","import TypedEventEmitter from \"../../utils/TypedEventEmitter\";\nimport { isTRect, parseToPrimitive, isTPresentationRect, isRectMovable, isRectResizable } from \"../../utils/utils\";\nimport type Patcher from \"./Patcher\";\nimport type Line from \"./Line\";\nimport type { TBox, TMaxBox, TRect, TPresentationRect } from \"../types\";\nimport type { Args, Data, IJSPatcherObject, JSPatcherObjectEventMap, Props, State } from \"../objects/base/AbstractObject\";\n\nexport interface BoxEventMap extends Pick<JSPatcherObjectEventMap<any, any, any, any, any, any, any>, \"metaUpdated\" | \"argsUpdated\" | \"propsUpdated\" | \"dataUpdated\" | \"stateUpdated\"> {\n    \"rectChanged\": Box;\n    \"presentationRectChanged\": Box;\n    \"backgroundChanged\": Box;\n    \"presentationChanged\": Box;\n    \"textChanged\": Box;\n    \"highlight\": Box;\n    \"error\": string;\n    \"highlightPort\": { isSrc: boolean; i: number; highlight: boolean };\n    \"connectedPort\": { isSrc: boolean; i: number; last?: false };\n    \"disconnectedPort\": { isSrc: boolean; i: number; last: boolean };\n    \"ioCountChanged\": Box;\n}\n\nexport default class Box<T extends IJSPatcherObject = IJSPatcherObject> extends TypedEventEmitter<BoxEventMap> {\n    readonly id: string;\n    text = \"\";\n    inlets = 0;\n    outlets = 0;\n    rect: TRect;\n    background: boolean;\n    presentation: boolean;\n    presentationRect: TPresentationRect;\n    data: Data<T>;\n    args: Args<T>;\n    props: Props<T>;\n    _editing: boolean;\n    private _parsed: { class: string; args: Args<T>; props: Props<T> };\n    private _object: T;\n    private _Object: typeof IJSPatcherObject;\n    private readonly _patcher: Patcher;\n    private readonly _inletLines: Set<Line>[];\n    private readonly _outletLines: Set<Line>[];\n    constructor(patcherIn: Patcher, boxIn: TBox) {\n        super();\n        this.id = boxIn.id;\n        this.text = boxIn.text;\n        this.args = (boxIn.args || []) as Args<T>;\n        this.props = (boxIn.props || {}) as Props<T>;\n        this.inlets = boxIn.inlets;\n        this.outlets = boxIn.outlets;\n        this._inletLines = new Array(this.inlets).fill(null).map(() => new Set<Line>());\n        this._outletLines = new Array(this.outlets).fill(null).map(() => new Set<Line>());\n        const maxBoxIn = boxIn as unknown as TMaxBox[\"box\"];\n        this.rect = boxIn.rect || maxBoxIn.patching_rect;\n        this.background = boxIn.background || !!maxBoxIn.background;\n        this.presentation = boxIn.presentation || !!maxBoxIn.presentation;\n        this.presentationRect = boxIn.presentationRect || maxBoxIn.presentation_rect;\n        if (!this.presentationRect) this.presentationRect = this.rect.slice() as TRect;\n        this.data = boxIn.data || (boxIn as any).prevData?.storage || {};\n        this._editing = !!boxIn._editing;\n        this._patcher = patcherIn;\n        this.on(\"dataUpdated\", () => this._patcher.emitChanged());\n        this.on(\"argsUpdated\", () => this._patcher.emitChanged());\n        this.on(\"propsUpdated\", () => this._patcher.emitChanged());\n    }\n    async init() {\n        this._parsed = Box.parseObjText(this.text) as { class: string; args: Args<T>; props: Props<T> };\n        const newMeta = this._patcher.getObjectMeta(this._parsed);\n        for (const key in this.props) {\n            if (!newMeta.props[key]) delete this.props[key];\n        }\n        if (this._parsed.args.length) this.args = this._parsed.args;\n        Object.assign(this.props, this._parsed.props);\n        const Constructor = this._patcher.getObjectConstructor(this._parsed);\n        this._Object = Constructor;\n        if (!this.size.every(v => v > 0)) this.size = this.defaultSize;\n        if (!isTPresentationRect(this.presentationRect) || (this.presentationSize.every(v => typeof v === \"number\") && !this.presentationSize.every(v => v > 0))) this.presentationSize = this.defaultSize;\n        this._object = new Constructor(this, this._patcher) as T;\n        await this._object.init();\n        return this;\n    }\n    async postInit() {\n        await this._object.postInit();\n        return this;\n    }\n    /**\n     * Main function when receive data from a inlet (base 0)\n     */\n    fn(inlet: number, data: any) {\n        this._object.fn(inlet, data);\n        return this;\n    }\n    get UI() {\n        return this._Object.UI;\n    }\n    get defaultSize() {\n        return this.UI?.defaultSize || [90, 20];\n    }\n    get meta() {\n        return this._object.meta;\n    }\n    get outletLines() {\n        return this._outletLines;\n    }\n    get inletLines() {\n        return this._inletLines;\n    }\n    get object() {\n        return this._object;\n    }\n    set object(oIn: T) {\n        this._object = oIn;\n    }\n    get Object() {\n        return this._Object;\n    }\n    get parsed() {\n        return this._parsed;\n    }\n    addInletLine(line: Line) {\n        const index = line.destInlet;\n        if (!this._inletLines[index]) this._inletLines[index] = new Set<Line>();\n        this._inletLines[index].add(line);\n    }\n    removeInletLine(line: Line) {\n        const index = line.destInlet;\n        if (this._inletLines[index]) this._inletLines[index].delete(line);\n    }\n    addOutletLine(line: Line) {\n        const index = line.srcOutlet;\n        if (!this._outletLines[index]) this._outletLines[index] = new Set<Line>();\n        this._outletLines[index].add(line);\n    }\n    removeOutletLine(line: Line) {\n        const index = line.srcOutlet;\n        if (this._outletLines[index]) this._outletLines[index].delete(line);\n    }\n    setInlets(count: number) {\n        const lines = this.allLines;\n        lines.forEach(line => line.disable());\n        this.inlets = count;\n        // Lines that should be removed will destroy themselves when enable()\n        lines.forEach(line => line.enable());\n        const linesSetLength = this._inletLines.length;\n        if (count > linesSetLength) this._inletLines.push(...new Array(count - linesSetLength).fill(null).map(() => new Set<Line>()));\n        else if (count < linesSetLength) this._inletLines.splice(count);\n        this._inletLines.forEach(set => set.forEach(line => line.uiUpdateDest()));\n        this.emit(\"ioCountChanged\", this);\n    }\n    setOutlets(count: number) {\n        const lines = this.allLines;\n        lines.forEach(line => line.disable());\n        this.outlets = count;\n        // Lines that should be removed will destroy themselves when enable()\n        lines.forEach(line => line.enable());\n        const linesSetLength = this._outletLines.length;\n        if (count > linesSetLength) this._outletLines.push(...new Array(count - linesSetLength).fill(null).map(() => new Set<Line>()));\n        else if (count < linesSetLength) this._outletLines.splice(count);\n        this._outletLines.forEach(set => set.forEach(line => line.uiUpdateSrc()));\n        this.emit(\"ioCountChanged\", this);\n    }\n    getInletPos(port: number) {\n        const { rect, inlets } = this;\n        const [left, top, width] = rect;\n        return { top, left: ((left + 10) + (width - 20) * port / (inlets > 1 ? inlets - 1 : 1)) };\n    }\n    getOutletPos(port: number) {\n        const { rect, outlets } = this;\n        const [left, top, width, height] = rect;\n        return { top: top + height, left: ((left + 10) + (width - 20) * port / (outlets > 1 ? outlets - 1 : 1)) };\n    }\n    get inletsPositions() {\n        const positions = [];\n        for (let i = 0; i < this.inlets; i++) {\n            positions[i] = this.getInletPos(i);\n        }\n        return positions;\n    }\n    get outletsPositions() {\n        const positions = [];\n        for (let i = 0; i < this.outlets; i++) {\n            positions[i] = this.getOutletPos(i);\n        }\n        return positions;\n    }\n    get allLines() {\n        const lines = new Set<Line>();\n        this._inletLines.forEach(set => set.forEach(line => lines.add(line)));\n        this._outletLines.forEach(set => set.forEach(line => lines.add(line)));\n        return lines;\n    }\n    // called when inlet or outlet are connected or disconnected\n    connectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        if (this._object) this._object.connectedOutlet(outlet, destBoxId, destInlet, lineId);\n        this.emit(\"connectedPort\", { isSrc: true, i: outlet });\n        return this;\n    }\n    connectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        if (this._object) this._object.connectedInlet(inlet, srcBoxId, srcOutlet, lineId);\n        this.emit(\"connectedPort\", { isSrc: false, i: inlet });\n        return this;\n    }\n    disconnectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        if (this._object) this._object.disconnectedOutlet(outlet, destBoxId, destInlet, lineId);\n        const last = this._patcher.getLinesBySrcID(this.id)[outlet].length === 1;\n        this.emit(\"disconnectedPort\", { isSrc: true, i: outlet, last });\n        return this;\n    }\n    disconnectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        if (this._object) this._object.disconnectedInlet(inlet, srcBoxId, srcOutlet, lineId);\n        const last = this._patcher.getLinesByDestID(this.id)[inlet].length === 1;\n        this.emit(\"disconnectedPort\", { isSrc: false, i: inlet, last });\n        return this;\n    }\n    isOutletTo(outlet: number, box: Box, inlet: number) {\n        const iterator = this._outletLines[outlet].values();\n        let r: IteratorResult<Line, Line>;\n        while (!(r = iterator.next()).done) {\n            const line = r.value;\n            if (line.destBox === box && line.destInlet === inlet) return true;\n        }\n        return false;\n    }\n    isInletFrom(inlet: number, box: Box, outlet: number) {\n        const iterator = this._inletLines[inlet].values();\n        let r: IteratorResult<Line, Line>;\n        while (!(r = iterator.next()).done) {\n            const line = r.value;\n            if (line.srcBox === box && line.srcOutlet === outlet) return true;\n        }\n        return false;\n    }\n    async changeText(textIn: string, force?: boolean) {\n        if (!force && textIn === this.text) return this;\n        const { defaultSize: oldDefaultSize } = this;\n        this.allLines.forEach(line => line.disable());\n        await this._object.destroy();\n        this.text = textIn;\n        this.args = [] as Args<T>;\n        await this.init();\n        this.allLines.forEach(line => line.enable());\n        const { defaultSize } = this;\n        if (!defaultSize.every((v, i) => v === oldDefaultSize[i])) {\n            this.size = defaultSize;\n            this.presentationSize = defaultSize;\n        }\n        this.emit(\"textChanged\", this);\n        this._object.setMeta(this._object.meta);\n        await this.postInit();\n        return this;\n    }\n    update(e: { args?: any[]; props?: Record<string, any> }) {\n        const { args, props } = e;\n        if (args) this.args = args as Args<T>;\n        if (props) {\n            if (isTRect(props.rect)) {\n                this.setRect(props.rect);\n                delete props.rect;\n            }\n            if (isTPresentationRect(props.presentationRect)) {\n                this.setPresentationRect(props.presentationRect);\n                delete props.presentationRect;\n            }\n            if (typeof props.presentation === \"boolean\") {\n                this.setPresentation(props.presentation);\n                delete props.presentation;\n            }\n            if (typeof props.background === \"boolean\") {\n                this.setBackground(props.background);\n                delete props.background;\n            }\n            this.props = Object.assign(this.props, props);\n        }\n        return this;\n    }\n    get position() {\n        return this.rect.slice(0, 2) as [number, number];\n    }\n    set position([leftIn, topIn]: [number, number]) {\n        const [left, top, width, height] = this.rect;\n        this.setRect([typeof leftIn === \"number\" ? leftIn : left, typeof topIn === \"number\" ? topIn : top, width, height] as TRect);\n    }\n    get presentationPosition() {\n        return this.presentationRect.slice(0, 2) as [number | string, number | string];\n    }\n    set presentationPosition([leftIn, topIn]: [number | string, number | string]) {\n        const [left, top, width, height] = this.presentationRect;\n        this.setPresentationRect([typeof leftIn === \"number\" || typeof leftIn === \"string\" ? leftIn : left, typeof topIn === \"number\" || typeof topIn === \"string\" ? topIn : top, width, height] as TPresentationRect);\n    }\n    get size() {\n        return this.rect.slice(2) as [number, number];\n    }\n    set size([widthIn, heightIn]: [number, number]) {\n        const [left, top, width, height] = this.rect;\n        this.setRect([left, top, widthIn || width, heightIn || height] as TRect);\n    }\n    get presentationSize() {\n        return this.presentationRect.slice(2) as [number | string, number | string];\n    }\n    set presentationSize([widthIn, heightIn]: [number | string, number | string]) {\n        const [left, top, width, height] = this.presentationRect;\n        this.setPresentationRect([left, top, widthIn || width, heightIn || height] as TPresentationRect);\n    }\n    getLeft(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][0];\n    }\n    setLeft(leftIn: number | string, inPresentation = false) {\n        const positionKey = inPresentation ? \"presentationPosition\" : \"position\";\n        this[positionKey] = [leftIn as any, undefined];\n    }\n    getTop(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][1];\n    }\n    setTop(topIn: number | string, inPresentation = false) {\n        const positionKey = inPresentation ? \"presentationPosition\" : \"position\";\n        this[positionKey] = [undefined, topIn as any];\n    }\n    getWidth(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][2];\n    }\n    setWidth(widthIn: number | string, inPresentation = false) {\n        const sizeKey = inPresentation ? \"presentationSize\" : \"size\";\n        this[sizeKey] = [widthIn as any, undefined];\n    }\n    getHeight(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][3];\n    }\n    setHeight(heightIn: number | string, inPresentation = false) {\n        const sizeKey = inPresentation ? \"presentationSize\" : \"size\";\n        this[sizeKey] = [undefined, heightIn as any];\n    }\n    setBackground(bool: boolean) {\n        if (!!this.background === !!bool) return this;\n        this.background = bool;\n        this.emit(\"backgroundChanged\", this);\n        return this;\n    }\n    setPresentation(bool: boolean) {\n        if (!!this.presentation === !!bool) return this;\n        this.presentation = bool;\n        if (bool) this.presentationRect = this.rect.slice() as TRect;\n        this.emit(\"presentationChanged\", this);\n        return this;\n    }\n    setRect(rect: TRect) {\n        if (!isTRect(rect)) return this;\n        rect[0] = Math.max(0, rect[0]);\n        rect[1] = Math.max(0, rect[1]);\n        rect[2] = Math.max(15, rect[2]);\n        rect[3] = Math.max(15, rect[3]);\n        this.rect = rect;\n        this.inletLines.forEach(set => set.forEach(line => line.uiUpdateDest()));\n        this.outletLines.forEach(set => set.forEach(line => line.uiUpdateSrc()));\n        this.emit(\"rectChanged\", this);\n        return this;\n    }\n    setPresentationRect(rect: TPresentationRect) {\n        if (!isTPresentationRect(rect)) return this;\n        if (typeof rect[0] === \"number\") rect[0] = Math.max(0, rect[0]);\n        if (typeof rect[1] === \"number\") rect[1] = Math.max(0, rect[1]);\n        if (typeof rect[2] === \"number\") rect[2] = Math.max(15, rect[2]);\n        if (typeof rect[3] === \"number\") rect[3] = Math.max(15, rect[3]);\n        this.presentationRect = rect;\n        this.emit(\"presentationRectChanged\", this);\n        return this;\n    }\n    getIsMovable(inPresentation = false) {\n        if (!inPresentation) return true;\n        return isRectMovable(this.presentationRect);\n    }\n    getIsResizable(inPresentation = false) {\n        if (!inPresentation) return true;\n        return isRectResizable(this.presentationRect);\n    }\n    error(text: string) {\n        this.emit(\"error\", text);\n    }\n    highlight() {\n        this.emit(\"highlight\", this);\n    }\n    highlightPort(isSrc: boolean, i: number, highlight: boolean) {\n        this.emit(\"highlightPort\", { isSrc, i, highlight });\n    }\n    undoable(e: { oldArgs?: Args<T>; args?: Args<T>; oldProps?: Props<T>; props?: Props<T>; oldState?: State<T>; state?: State<T> }) {\n        this._patcher.boxChanged(this.id, e);\n    }\n    async changeObject({ args, props, state }: { args?: Args<T>; props?: Props<T>; state?: State<T> }, options?: { undoable?: boolean }) {\n        if (args) await this._object.updateArgs(args, options);\n        if (props) await this._object.updateProps(props, options);\n        if (state) await this._object.updateState(state, options);\n    }\n    async destroy() {\n        this.allLines.forEach(line => this._patcher.deleteLine(line.id));\n        await this._object.destroy();\n        delete this._patcher.boxes[this.id];\n        return this;\n    }\n    static parseObjText(strIn: string) {\n        const REGEX = /`([^`]*)`|[^\\s]+/gi;\n        const strArray = [];\n        let match = REGEX.exec(strIn);\n        while (match != null) {\n            // Index 1 in the array is the captured group if it exists\n            // Index 0 is the matched text, which we use if no captured group exists\n            strArray.push(match[1] ? match[1] : match[0]);\n            // Each call to exec returns the next regex match as an array\n            match = REGEX.exec(strIn);\n        }\n        const objOut: { class: string; args: any[]; props: Record<string, any> } = { class: \"\", args: [], props: {} };\n        let lastProp;\n        if (strArray.length) objOut.class = strArray.shift();\n        while (strArray.length) {\n            const el = strArray.shift();\n            if (typeof lastProp === \"undefined\" && el.charAt(0) !== \"@\") { // is arg, to push\n                try {\n                    objOut.args.push(JSON.parse(el));\n                } catch (e) {\n                    objOut.args.push(el);\n                }\n                continue;\n            }\n            if (el.length > 1 && el.charAt(0) === \"@\") { // is prop key\n                lastProp = el.substr(1);\n                objOut.props[lastProp] = [];\n                continue;\n            }\n            try { // is prop value\n                objOut.props[lastProp].push(JSON.parse(el));\n            } catch (e) {\n                objOut.props[lastProp].push(el);\n            }\n        }\n        for (const key in objOut.props) { // no value = true, one value need to parse, else array\n            if (objOut.props[key].length === 0) objOut.props[key] = true;\n            else if (objOut.props[key].length === 1) objOut.props[key] = parseToPrimitive(objOut.props[key][0]);\n            else objOut.props[key] = parseToPrimitive(objOut.props[key].join(\" \"));\n        }\n        return objOut;\n    }\n    toString() {\n        const { id, text, inlets, outlets, rect, background, presentation, presentationRect, args, props, data } = this;\n        return JSON.stringify({ id, text, inlets, outlets, rect, background, presentation, presentationRect, args, props, data });\n    }\n    toSerializable(): TBox {\n        return JSON.parse(this.toString());\n    }\n}\n","import type { Rec, Receive, Import, Iterator, FaustOp, Effect, In, Out, TLineMap } from \"../objects/Faust\";\nimport type Box from \"./Box\";\nimport type Line from \"./Line\";\nimport type Patcher from \"./Patcher\";\n\nconst mapLines = (box: Box, patcher: Patcher, visitedBoxes: Box[], ins: In[], recs: Rec[], lineMap: Map<Line, string>) => {\n    if (visitedBoxes.indexOf(box) >= 0) return;\n    visitedBoxes.push(box);\n    if (box.object.class === \"Iterator\" && box !== visitedBoxes[0]) return;\n    const inletLines = Array.from(box.inletLines);\n    if (box.object.class === \"Receive\") {\n        const { sendID, state: { sendMap } } = box.object as Receive;\n        if (sendMap[sendID]) {\n            sendMap[sendID].forEach(s => inletLines.push(...s.inletLines));\n        }\n    }\n    inletLines.forEach(lines => lines.forEach((line) => {\n        const { srcBox } = line;\n        if (srcBox.object.class === \"In\" && ins.indexOf(srcBox.object as In) === -1) ins.push(srcBox.object as In);\n        else if (srcBox.object.class === \"Rec\" && recs.indexOf(srcBox.object as Rec) === -1) recs.push(srcBox.object as Rec);\n        if (srcBox.object.class === \"Effect\") lineMap.set(line, \"_\");\n        else lineMap.set(line, `${(srcBox.object as FaustOp).resultID}_${line.srcOutlet}`);\n        mapLines(srcBox, patcher, visitedBoxes, ins, recs, lineMap);\n    }));\n};\nexport const toFaustLambda = (patcher: Patcher, outs: FaustOp[], lambdaName: string) => {\n    const exprs: string[] = [];\n    const onces: string[] = [];\n    const mainIns: string[] = [];\n    const mainOuts: string[] = [];\n    const recIns: string[] = [];\n    const recOuts: string[] = [];\n    const visitedBoxes: Box[] = [];\n    let ins: In[] = [];\n    const recs: Rec[] = [];\n    const lineMap: TLineMap = new Map<Line, string>();\n    // Build graph\n    outs.forEach(out => mapLines(out.box, patcher, visitedBoxes, ins, recs, lineMap));\n    visitedBoxes.forEach((box) => {\n        if (box.object.class === \"In\") return;\n        if (box.object.class === \"Out\") return;\n        if (box.object.class === \"Rec\") return;\n        if (outs.indexOf(box.object as FaustOp) !== -1) return;\n        const { onces: o, exprs: e } = (box.object as FaustOp).toExpr(lineMap);\n        if (o) onces.push(...o.filter(v => onces.indexOf(v) === -1));\n        if (e) exprs.push(...e);\n    });\n    // Reverse order for readibility\n    exprs.reverse();\n    // Build rec in/outs\n    recs.forEach((rec) => {\n        exprs.push(...rec.toExpr(lineMap).exprs || []);\n        const recIn = rec.resultID;\n        const recOut = `${recIn}_0`;\n        recIns.push(recIn);\n        recOuts.push(recOut);\n    });\n    // Build main in/outs\n    ins = ins.sort((a, b) => a.index - b.index);\n    ins.forEach((in_) => {\n        const id = `${in_.resultID}_0`;\n        if (mainIns.indexOf(id) === -1) mainIns.push(id);\n    });\n    outs.forEach((out) => {\n        if (out.class === \"Iterator\") exprs.push(...(out as Iterator).toNormalExpr(lineMap).exprs || []);\n        else exprs.push(...out.toExpr(lineMap).exprs || []);\n        const id = out.resultID;\n        if (mainIns.indexOf(id) === -1) mainOuts.push(id);\n    });\n    // Generate Final expressions\n    exprs.forEach((s, i) => exprs[i] = `    ${s.replace(/\\n/g, \"\\n    \")}`); // indent\n    if (recIns.length) {\n        exprs.unshift(`Main(${[...recOuts, ...mainIns].join(\", \")}) = ${[...recIns, ...mainOuts].join(\", \")} with {`);\n        exprs.push(\n            \"};\",\n            `Rec = ${recIns.map(() => \"_\").join(\", \")} : ${recOuts.map(() => \"_\").join(\", \")};`,\n            `${lambdaName} = Main ~ Rec : ${[...recIns.map(() => \"!\"), ...mainOuts.map(() => \"_\")].join(\", \")};`\n        );\n    } else if (mainIns.length) {\n        exprs.unshift(`${lambdaName}(${mainIns.join(\", \")}) = ${mainOuts.join(\", \")} with {`);\n        exprs.push(\"};\");\n    } else if (exprs.length) {\n        exprs.unshift(`${lambdaName} = ${mainOuts.join(\", \")} with {`);\n        exprs.push(\"};\");\n    } else {\n        exprs.push(`${lambdaName} = 0;`);\n    }\n    return { onces, exprs, ins, outs };\n};\nexport const toFaustDspCode = (patcher: Patcher) => inspectFaustPatcher(patcher).code;\nexport const inspectFaustPatcher = (patcher: Patcher) => {\n    const imports: Import[] = [];\n    let outs: Out[] = [];\n    const effects: Effect[] = [];\n    // Find outs and imports\n    for (const boxId in patcher.boxes) {\n        const box = patcher.boxes[boxId];\n        if (box.object.class === \"Effect\") effects.push(box.object as Effect);\n        else if (box.object.class === \"Out\") outs.push(box.object as Out);\n        else if (box.object.class === \"Import\") imports.push(box.object as Import);\n    }\n    outs = outs.sort((a, b) => a.index - b.index);\n    const { onces, exprs, ins } = toFaustLambda(patcher, outs, \"process\");\n    if (effects.length) {\n        const { onces: fxOnces, exprs: fxExprs, ins: fxIns } = toFaustLambda(patcher, [effects[0]], \"effect\");\n        onces.push(...fxOnces.filter(v => onces.indexOf(v) === -1));\n        exprs.push(...fxExprs);\n        ins.push(...fxIns);\n    }\n    imports.map(i => i.toOnceExpr()).forEach(o => onces.push(...o.filter(v => onces.indexOf(v) === -1)));\n    const code = `${onces.join(\"\\n\")}${onces.length ? \"\\n\" : \"\"}${exprs.join(\"\\n\")}\\n`;\n    return { code, onces, exprs, ins, outs };\n};\n","import type { WamNode } from \"wamsdk\";\nimport TypedEventEmitter from \"../../utils/TypedEventEmitter\";\nimport type Patcher from \"./Patcher\";\nimport type { TLine, TLineType } from \"../types\";\nimport type { IJSPatcherObject, TMetaType } from \"../objects/base/AbstractObject\";\n\nexport interface LineEventMap {\n    \"passData\": any;\n    \"destPosChanged\": { top: number; left: number };\n    \"srcPosChanged\": { top: number; left: number };\n    \"posChanged\": Line;\n    \"typeChanged\": TLineType;\n}\n\nexport default class Line extends TypedEventEmitter<LineEventMap> {\n    static isConnectableByAudio(from: IJSPatcherObject, outlet: number, to: IJSPatcherObject, inlet: number) {\n        const fromConnection = from.outletAudioConnections[outlet];\n        const toConnection = to.inletAudioConnections[inlet];\n        if (!fromConnection) return false;\n        if (!toConnection) return false;\n        if (!fromConnection.node) return false;\n        if (!toConnection.node) return false;\n        return true;\n    }\n    static isWamNode(x: any): x is WamNode {\n        return typeof x === \"object\" && x !== null && x?.module?.isWebAudioModule;\n    }\n    static compare(line1: Line, line2: Line) {\n        return line2.positionHash - line1.positionHash;\n    }\n    readonly id: string;\n    src: [string, number];\n    dest: [string, number];\n    disabled = true;\n    private _type: TLineType;\n    private readonly _patcher: Patcher;\n    constructor(patcherIn: Patcher, lineIn: TLine) {\n        super();\n        this.id = lineIn.id;\n        this.src = lineIn.src;\n        this.dest = lineIn.dest;\n        this.disabled = true;\n        this._patcher = patcherIn;\n        const { srcBox, destBox } = this;\n        this._type = this.calcType();\n        if (srcBox) {\n            srcBox.on(\"metaUpdated\", this.updateType);\n            srcBox.addOutletLine(this);\n        }\n        if (destBox) {\n            destBox.on(\"metaUpdated\", this.updateType);\n            destBox.addInletLine(this);\n        }\n    }\n    get isConnectableByAudio() {\n        if (this._patcher.props.mode !== \"js\") return false;\n        return Line.isConnectableByAudio(this.srcBox.object, this.srcOutlet, this.destBox.object, this.destInlet);\n    }\n    get presentation() {\n        return this.srcBox && this.srcBox.presentation && this.destBox && this.destBox.presentation;\n    }\n    setSrc(src: [string, number]) {\n        const srcId = src[0];\n        const srcOutlet = src[1];\n        if (srcId === this.src[0] && srcOutlet === this.src[1]) return this;\n        this.srcBox.off(\"metaUpdated\", this.updateType);\n        this.disable();\n        this.srcBox.removeOutletLine(this);\n        this.src = [srcId, srcOutlet];\n        this.srcBox.addOutletLine(this);\n        this.enable();\n        this.srcBox.on(\"metaUpdated\", this.updateType);\n        this.updateType();\n        return this.uiUpdateSrc();\n    }\n    getSrc() {\n        return this.src;\n    }\n    uiUpdateSrc() {\n        this.emit(\"srcPosChanged\", this.srcPos);\n        return this;\n    }\n    setDest(dest: [string, number]) {\n        const destId = dest[0];\n        const destInlet = dest[1];\n        if (destId === this.dest[0] && destInlet === this.dest[1]) return this;\n        this.destBox.off(\"metaUpdated\", this.updateType);\n        this.disable();\n        this.destBox.removeInletLine(this);\n        this.dest = [destId, destInlet];\n        this.destBox.addInletLine(this);\n        this.enable();\n        this.destBox.on(\"metaUpdated\", this.updateType);\n        this.updateType();\n        return this.uiUpdateDest();\n    }\n    getDest() {\n        return this.dest;\n    }\n    uiUpdateDest() {\n        this.emit(\"destPosChanged\", this.destPos);\n        return this;\n    }\n    disable(bool?: boolean): Line {\n        if (bool === false) return this.enable();\n        if (this.disabled) return this;\n        this.disabled = true;\n        const { srcBox, destBox } = this;\n        if (this._patcher.getLinesByBox(this.srcId, this.destId, this.srcOutlet, this.destInlet).length > 1) return this; // not last cable\n        if (this.isConnectableByAudio) {\n            const from = this.srcBox.object.outletAudioConnections[this.srcOutlet];\n            const to = this.destBox.object.inletAudioConnections[this.destInlet];\n            if (from && to && from.node && to.node) {\n                const isAudioParam = to.node instanceof AudioParam;\n                try {\n                    if (isAudioParam) from.node.disconnect(to.node as AudioParam, from.index);\n                    else from.node.disconnect(to.node as AudioNode, from.index, to.index);\n                    if (Line.isWamNode(from.node) && Line.isWamNode(to.node)) from.node.disconnectEvents(to.node);\n                } catch (e) {\n                    this._patcher.error((e as Error).message);\n                }\n            }\n        }\n        srcBox.disconnectedOutlet(this.srcOutlet, destBox.id, this.destInlet, this.id);\n        destBox.disconnectedInlet(this.destInlet, srcBox.id, this.srcOutlet, this.id);\n        return this;\n    }\n    enable(bool?: boolean): Line {\n        if (bool === false) return this.disable();\n        if (!this.disabled) return this;\n        const { srcBox, destBox } = this;\n        if (this.srcOutlet >= srcBox.outlets || this.destInlet >= destBox.inlets) return this._patcher.deleteLine(this.id);\n        if (this._patcher.getLinesByBox(this.srcId, this.destId, this.srcOutlet, this.destInlet).length > 1) return this; // not last cable\n        if (this.isConnectableByAudio) {\n            const from = this.srcBox.object.outletAudioConnections[this.srcOutlet];\n            const to = this.destBox.object.inletAudioConnections[this.destInlet];\n            if (from && to && from.node && to.node) {\n                const isAudioParam = to.node instanceof AudioParam;\n                try {\n                    if (isAudioParam) from.node.connect(to.node as AudioParam, from.index);\n                    else from.node.connect(to.node as AudioNode, from.index, to.index);\n                    if (Line.isWamNode(from.node) && Line.isWamNode(to.node)) from.node.connectEvents(to.node);\n                } catch (e) {\n                    this._patcher.error((e as Error).message);\n                }\n            }\n        }\n        srcBox.connectedOutlet(this.srcOutlet, destBox.id, this.destInlet, this.id);\n        destBox.connectedInlet(this.destInlet, srcBox.id, this.srcOutlet, this.id);\n        this.disabled = false;\n        return this;\n    }\n    destroy() {\n        this.destBox.off(\"metaUpdated\", this.updateType);\n        this.srcBox.off(\"metaUpdated\", this.updateType);\n        this.disable();\n        this.srcBox.removeOutletLine(this);\n        this.destBox.removeInletLine(this);\n        delete this._patcher.lines[this.id];\n        return this;\n    }\n    pass(data: any) {\n        this.emit(\"passData\", data);\n        return this.disabled ? this : this.destBox.fn(this.destInlet, data);\n    }\n    get positionHash() {\n        const { top, left } = this._patcher.boxes[this.dest[0]].getInletPos(this.dest[1]);\n        return left * 65536 + top;\n    }\n    get srcPos() {\n        return this._patcher.boxes[this.src[0]].getOutletPos(this.src[1]);\n    }\n    get destPos() {\n        return this._patcher.boxes[this.dest[0]].getInletPos(this.dest[1]);\n    }\n    get srcId() {\n        return this.src[0];\n    }\n    get srcOutlet() {\n        return this.src[1];\n    }\n    get destId() {\n        return this.dest[0];\n    }\n    get destInlet() {\n        return this.dest[1];\n    }\n    get srcBox() {\n        return this._patcher.boxes[this.src[0]];\n    }\n    get destBox() {\n        return this._patcher.boxes[this.dest[0]];\n    }\n    private calcType() {\n        const srcMeta = this.srcBox.object.meta.outlets;\n        const destMeta = this.destBox.object.meta.inlets;\n        let srcType: TMetaType = \"anything\";\n        let destType: TMetaType = \"anything\";\n        if (srcMeta[this.srcOutlet]) srcType = srcMeta[this.srcOutlet].type;\n        else if (srcMeta[srcMeta.length - 1] && srcMeta[srcMeta.length - 1].varLength) srcType = srcMeta[srcMeta.length - 1].type;\n        if (destMeta[this.destInlet]) destType = destMeta[this.destInlet].type;\n        else if (destMeta[destMeta.length - 1] && destMeta[destMeta.length - 1].varLength) destType = destMeta[destMeta.length - 1].type;\n        return srcType === \"signal\" && destType === \"signal\" ? \"audio\" : \"normal\";\n    }\n    updateType = () => {\n        const type = this.calcType();\n        if (type !== this._type) {\n            this._type = type;\n            this.emit(\"typeChanged\", type);\n        }\n    };\n    get type(): TLineType {\n        return this._type;\n    }\n    toString() {\n        return JSON.stringify(this.toSerializable());\n    }\n    toSerializable(): TLine {\n        const { id, src, dest, disabled } = this;\n        return { id, src: [...src], dest: [...dest], disabled };\n    }\n}\n","import FileInstance from \"../file/FileInstance\";\nimport PatcherEditor from \"./PatcherEditor\";\nimport Line from \"./Line\";\nimport Box from \"./Box\";\nimport PatcherHistory from \"./PatcherHistory\";\nimport PackageManager, { IPackageManager } from \"../PackageManager\";\nimport { max2js, js2max } from \"../../utils/utils\";\nimport { toFaustDspCode } from \"./FaustPatcherAnalyser\";\nimport type Env from \"../Env\";\nimport type Project from \"../Project\";\nimport type TempPatcherFile from \"./TempPatcherFile\";\nimport type PersistentProjectFile from \"../file/PersistentProjectFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { TInletEvent, TOutletEvent, IJSPatcherObjectMeta, IPropsMeta, IJSPatcherObject, TMetaType } from \"../objects/base/AbstractObject\";\nimport type { TLine, TBox, PatcherMode, RawPatcher, TMaxPatcher, TErrorLevel, TPatcherAudioConnection, TFlatPackage, TPackage, TPatcherLog, TDependencies } from \"../types\";\nimport type PatcherNode from \"../worklets/PatcherNode\";\nimport type PatcherProcessor from \"../worklets/Patcher.worklet\";\n\nexport interface TPatcherProps {\n    mode: PatcherMode;\n    dependencies: TDependencies;\n    bgColor: string;\n    editingBgColor: string;\n    grid: [number, number];\n    boxIndexCount: number;\n    lineIndexCount: number;\n    package?: string;\n    name?: string;\n    author?: string;\n    version?: string;\n    description?: string;\n    openInPresentation: boolean;\n}\nexport type TPublicPatcherProps = Pick<TPatcherProps, \"dependencies\" | \"bgColor\" | \"editingBgColor\" | \"grid\" | \"openInPresentation\">;\n\nexport interface TPatcherState {\n    name: string;\n    isReady: boolean;\n    log: TPatcherLog[];\n    selected: string[];\n    pkgMgr: IPackageManager;\n    preventEmitChanged: boolean;\n    patcherNode?: PatcherNode;\n    patcherProcessor?: PatcherProcessor;\n}\n\nexport interface PatcherEventMap extends TPublicPatcherProps {\n    \"postInited\": never;\n    \"ready\": never;\n    \"unload\": never;\n    \"changeBoxText\": { boxId: string; oldText: string; text: string };\n    \"boxChanged\": { boxId: string; oldArgs?: any[]; args?: any[]; oldProps?: Record<string, any>; props?: Record<string, any>; oldState?: Record<string, any>; state?: Record<string, any> };\n    \"passiveDeleteLine\": Line;\n    \"graphChanged\": never;\n    \"changed\": never;\n    \"ioChanged\": IJSPatcherObjectMeta;\n    \"dataInput\": TInletEvent<any[]>;\n    \"dataOutput\": TOutletEvent<any[]>;\n    \"audioInput\": { input: number; index: number; sample: number };\n    \"paramInput\": { param: string; index: number; sample: number };\n    \"audioOutput\": { output: number; index: number; sample: number };\n    \"disconnectAudioInlet\": number;\n    \"disconnectAudioOutlet\": number;\n    \"connectAudioInlet\": number;\n    \"connectAudioOutlet\": number;\n    \"propsChanged\": Partial<TPublicPatcherProps>;\n    \"libChanged\": { pkg: TPackage; lib: TFlatPackage };\n}\n\nexport default class Patcher extends FileInstance<PatcherEventMap, PersistentProjectFile | TempPatcherFile> {\n    static props: IPropsMeta<TPublicPatcherProps> = {\n        dependencies: {\n            type: \"object\",\n            description: \"Patcher dependencies\",\n            default: []\n        },\n        bgColor: {\n            type: \"color\",\n            description: \"Background color\",\n            default: \"rgba(61, 65, 70, 1)\"\n        },\n        editingBgColor: {\n            type: \"color\",\n            description: \"Background color while unlocked\",\n            default: \"rgba(82, 87, 94, 1)\"\n        },\n        grid: {\n            type: \"object\",\n            description: \"Grid size\",\n            default: [15, 15]\n        },\n        openInPresentation: {\n            type: \"boolean\",\n            description: \"Open patcher in presentation\",\n            default: false\n        }\n    };\n    static async fromProjectItem(options: { file: PersistentProjectFile | TempPatcherFile; env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<Patcher> {\n        return new this(options).init();\n    }\n    async getEditor() {\n        const editor = new PatcherEditor(this);\n        return editor.init();\n    }\n    lines: Record<string, Line> = {};\n    boxes: Record<string, Box> = {};\n    props: TPatcherProps;\n    _state: TPatcherState;\n    _inletAudioConnections: TPatcherAudioConnection[] = [];\n    _outletAudioConnections: TPatcherAudioConnection[] = [];\n    _history = new PatcherHistory();\n    constructor(options: { env: IJSPatcherEnv; project?: IProject; file?: PersistentProjectFile | TempPatcherFile; instanceId?: string }) {\n        super(options);\n        this._state = {\n            name: \"patcher\",\n            isReady: false,\n            log: [],\n            selected: [],\n            pkgMgr: undefined,\n            preventEmitChanged: false\n        };\n        this.lines = {};\n        this.boxes = {};\n        this.props = {\n            mode: \"js\",\n            dependencies: Patcher.props.dependencies.default.slice(),\n            bgColor: Patcher.props.bgColor.default,\n            editingBgColor: Patcher.props.editingBgColor.default,\n            grid: Patcher.props.grid.default.slice() as [number, number],\n            openInPresentation: Patcher.props.openInPresentation.default,\n            boxIndexCount: 0,\n            lineIndexCount: 0\n        };\n    }\n    get state() {\n        return this._state;\n    }\n    get activePkg() {\n        return this._state.pkgMgr.pkg;\n    }\n    get activeLib() {\n        return this._state.pkgMgr.lib;\n    }\n    get isReady() {\n        return true;\n    }\n    get audioCtx() {\n        return (this.project as Project)?.audioCtx || (this.env as Env).audioCtx;\n    }\n    get fileExtension() {\n        return {\n            js: \"jspat\",\n            max: \"maxpat\",\n            gen: \"gendsp\",\n            faust: \"dsppat\",\n            jsaw: \"jsdsp\"\n        }[this.props.mode];\n    }\n    get fileName() {\n        return this.file?.name || `${this._state.name}.${this.fileExtension}`;\n    }\n    emitGraphChanged() {\n        if (this._state.preventEmitChanged) return;\n        this.emit(\"graphChanged\");\n        this.emitChanged();\n    }\n    emitChanged() {\n        if (this._state.preventEmitChanged) return;\n        this.emit(\"changed\");\n    }\n    boxChanged(boxId: string, changed: { oldArgs?: any[]; args?: any[]; oldProps?: Record<string, any>; props?: Record<string, any>; oldState?: Record<string, any>; state?: Record<string, any> }) {\n        this.emit(\"boxChanged\", { boxId, ...changed });\n    }\n    async init(data = this.file?.data, fileName = this.fileName) {\n        if (data instanceof ArrayBuffer) {\n            if (!data.byteLength) return this.load({});\n            const patcherIn = await new Response(data).json();\n            const splitName = fileName.split(\".\");\n            const ext = splitName.pop();\n            const extMap: Record<string, PatcherMode> = { json: \"js\", jspat: \"js\", maxpat: \"max\", gendsp: \"gen\", dsppat: \"faust\" };\n            return this.load(patcherIn, extMap[ext] || \"js\");\n        }\n        return this.load(data || {});\n    }\n    async load(patcherIn: RawPatcher | TMaxPatcher | any, modeIn?: PatcherMode) {\n        this._state.isReady = false;\n        this._state.preventEmitChanged = true;\n        await this.unload();\n        if (typeof patcherIn !== \"object\") {\n            this._state.isReady = true;\n            this._state.preventEmitChanged = false;\n            this.emit(\"ready\");\n            return this;\n        }\n        this.props.mode = patcherIn.props?.mode || modeIn || \"js\";\n        this.state.pkgMgr = new PackageManager(this);\n        const { mode } = this.props;\n        const $init: Promise<Box>[] = [];\n        let patcher;\n        if (mode === \"max\" || mode === \"gen\") {\n            if (!(patcherIn as TMaxPatcher).patcher) {\n                patcher = patcherIn;\n            } else {\n                patcher = max2js(patcherIn as TMaxPatcher);\n            }\n        } else if (mode === \"js\" || mode === \"faust\" || mode === \"jsaw\") {\n            if (\"data\" in patcherIn && \"patcher\" in patcherIn) {\n                patcher = patcherIn.patcher;\n            } else {\n                patcher = patcherIn;\n            }\n        }\n        if (patcher.props) this.props = { ...this.props, ...patcher.props, mode };\n        if (Array.isArray(this.props.bgColor)) this.props.bgColor = `rgba(${this.props.bgColor.join(\", \")})`;\n        if (Array.isArray(this.props.editingBgColor)) this.props.editingBgColor = `rgba(${this.props.editingBgColor.join(\", \")})`;\n        if (mode === \"js\" && this.props.dependencies) {\n            const { dependencies } = this.props;\n            if (!Array.isArray(dependencies)) {\n                this.props.dependencies = [];\n                for (const key in dependencies as Record<string, string>) {\n                    this.props.dependencies.push([key, dependencies[key]]);\n                }\n            }\n        }\n        await this._state.pkgMgr.init();\n        if (patcher.boxes) { // Boxes & data\n            for (const id in patcher.boxes) {\n                const $ = this.createBox(patcher.boxes[id]);\n                $init.push($);\n                const numID = parseInt(id.match(/\\d+/)[0]);\n                if (numID > this.props.boxIndexCount) this.props.boxIndexCount = numID;\n            }\n        }\n        await Promise.all($init);\n        if (patcher.lines) { // Lines\n            for (const id in patcher.lines) {\n                this.createLine(patcher.lines[id]);\n                const numID = parseInt(id.match(/\\d+/)[0]);\n                if (numID > this.props.lineIndexCount) this.props.lineIndexCount = numID;\n            }\n        }\n        this._state.isReady = true;\n        this._state.preventEmitChanged = false;\n        this.emitGraphChanged();\n        this.emit(\"ready\");\n        await Promise.all(Object.keys(this.boxes).map(id => this.boxes[id].postInit()));\n        this.emit(\"postInited\");\n        return this;\n    }\n    async getPatcherNode() {\n        if (this.props.mode === \"jsaw\" && this.env.thread === \"main\") {\n            const PatcherNode = (await import(\"../worklets/PatcherNode\")).default;\n            await PatcherNode.register(this.audioCtx.audioWorklet);\n            this.state.patcherNode = new PatcherNode(this.audioCtx, { env: this.env, instanceId: this.id, fileId: this.file?.id, data: this.file ? undefined : this.toSerializable() });\n            await this.state.patcherNode.init();\n            return this.state.patcherNode;\n        }\n        return null;\n    }\n    async loadFromURL(url: string) {\n        try {\n            const file = await fetch(url);\n            const parsed = await file.json() as RawPatcher | TMaxPatcher;\n            return this.load(parsed);\n        } catch (e) {\n            this.error(`Fetch file ${url} failed.`);\n        }\n        return this;\n    }\n    async loadFromString(sIn: string) {\n        try {\n            const parsed = JSON.parse(sIn) as RawPatcher | TMaxPatcher;\n            return this.load(parsed);\n        } catch (e) {\n            this.error(`Load from string: ${sIn.slice(20)}... failed.`);\n        }\n        return this;\n    }\n    async loadFromFile(file: File) {\n        const splitName = file.name.split(\".\");\n        const ext = splitName.pop();\n        const name = splitName.join(\".\");\n        const extMap: Record<string, PatcherMode> = { json: \"js\", jspat: \"js\", maxpat: \"max\", gendsp: \"gen\", dsppat: \"faust\" };\n        if (!extMap[ext]) return this;\n        const reader = new FileReader();\n        reader.onload = () => {\n            let parsed: RawPatcher | TMaxPatcher;\n            try {\n                parsed = JSON.parse(reader.result.toString());\n            } catch (e) {\n                this.error((e as Error).message);\n            }\n            if (parsed) {\n                this.load(parsed, extMap[ext]);\n                this._state.name = name;\n            }\n        };\n        reader.onerror = () => this.error(reader.error.message);\n        reader.readAsText(file, \"UTF-8\");\n        return this;\n    }\n    async unload() {\n        await this.emit(\"unload\");\n        if (Object.keys(this.boxes).length) {\n            this._state.preventEmitChanged = true;\n            await Promise.all(Object.keys(this.boxes).map(id => this.boxes[id].destroy()));\n            this._state.preventEmitChanged = false;\n            this.emitGraphChanged();\n        }\n        this.lines = {};\n        this.boxes = {};\n        this.props = {\n            mode: \"js\",\n            dependencies: Patcher.props.dependencies.default.slice(),\n            bgColor: Patcher.props.bgColor.default,\n            editingBgColor: Patcher.props.editingBgColor.default,\n            grid: Patcher.props.grid.default.slice() as [number, number],\n            openInPresentation: Patcher.props.openInPresentation.default,\n            boxIndexCount: 0,\n            lineIndexCount: 0\n        };\n        this._state.selected = [];\n    }\n    async destroy() {\n        await this.unload();\n        await super.destroy();\n    }\n    async addPackage(namespace: string, url: string) {\n        const { dependencies } = this.props;\n        dependencies.push([namespace, url]);\n        this.setProps({ dependencies: dependencies.slice() });\n        await this.state.pkgMgr.init();\n        if (!(namespace in this.activePkg)) {\n            this.setProps({ dependencies: dependencies.filter(([id]) => id !== namespace) });\n        }\n    }\n    async removePackage(id: string) {\n        const { dependencies } = this.props;\n        const i = dependencies.findIndex(t => t[0] === id);\n        if (i === -1) return;\n        dependencies.splice(i, 1);\n        this.setProps({ dependencies: dependencies.slice() });\n        await this.state.pkgMgr.init();\n    }\n    async createBox(boxIn: TBox) {\n        if (!boxIn.id || (boxIn.id in this.boxes)) boxIn.id = \"box-\" + ++this.props.boxIndexCount;\n        const box = new Box(this, boxIn);\n        this.boxes[box.id] = box;\n        await box.init();\n        this.emitGraphChanged();\n        return box;\n    }\n    getObjectConstructor(parsed: { class: string; args: any[]; props: Record<string, any> }) {\n        const className = parsed.class;\n        if (typeof className !== \"string\" || className.length === 0) return this.activeLib.EmptyObject;\n        if (this.activeLib[className]) return this.activeLib[className];\n        this.error(`Object ${className} not found.`);\n        return this.activeLib.InvalidObject;\n    }\n    getObjectMeta(parsed: { class: string; args: any[]; props: Record<string, any> }) {\n        return this.getObjectConstructor(parsed).meta;\n    }\n    async changeBoxText(boxId: string, text: string) {\n        const oldText = this.boxes[boxId].text;\n        if (oldText === text) return this.boxes[boxId];\n        await this.boxes[boxId].changeText(text);\n        this.emit(\"changeBoxText\", { oldText, text, boxId });\n        return this.boxes[boxId];\n    }\n    async deleteBox(boxId: string) {\n        const box = this.boxes[boxId];\n        if (!box) return null;\n        await box.destroy();\n        this.emitGraphChanged();\n        return box;\n    }\n    createLine(lineIn: TLine) {\n        if (!this.canCreateLine(lineIn)) return null;\n        if (!lineIn.id || (lineIn.id in this.lines)) lineIn.id = \"line-\" + ++this.props.lineIndexCount;\n        const line = new Line(this, lineIn);\n        this.lines[line.id] = line;\n        line.enable();\n        this.emitGraphChanged();\n        return line;\n    }\n    canCreateLine(lineIn: TLine) {\n        if (lineIn.src[1] >= this.boxes[lineIn.src[0]].outlets) return false;\n        if (lineIn.dest[1] >= this.boxes[lineIn.dest[0]].inlets) return false;\n        if (this.getLinesByBox(lineIn.src[0], lineIn.dest[0], lineIn.src[1], lineIn.dest[1]).length > 0) return false;\n        return true;\n    }\n    deleteLine(lineId: string) {\n        const line = this.lines[lineId];\n        if (!line) return null;\n        line.destroy();\n        if (!this._state.preventEmitChanged) this.emit(\"passiveDeleteLine\", line);\n        this.emitGraphChanged();\n        return line;\n    }\n    changeLineSrc(lineId: string, srcId: string, srcOutlet: number) {\n        const line = this.lines[lineId];\n        // if (this.instance.getLinesByBox(srcId, line.destId, srcOutlet, line.destInlet).length > 0) return line;\n        const oldSrc: [string, number] = [line.srcId, line.srcOutlet];\n        const src: [string, number] = [srcId, srcOutlet];\n        line.setSrc(src);\n        this.emitGraphChanged();\n        return { lineId, oldSrc, src };\n    }\n    changeLineDest(lineId: string, destId: string, destOutlet: number) {\n        const line = this.lines[lineId];\n        // if (this.getLinesByBox(line.srcId, destId, line.destInlet, destOutlet).length > 0) return line;\n        const oldDest: [string, number] = [line.destId, line.destInlet];\n        const dest: [string, number] = [destId, destOutlet];\n        line.setDest(dest);\n        this.emitGraphChanged();\n        return { lineId, oldDest, dest };\n    }\n    getLinesBySrcID(srcId: string) {\n        const result = [];\n        for (let i = 0; i < this.boxes[srcId].outlets; i++) { // Array.fill fills the array with same instance\n            result[i] = [];\n        }\n        for (const id in this.lines) {\n            const line = this.lines[id];\n            if (line && line.srcId === srcId) {\n                const srcOutlet = line.srcOutlet;\n                if (!result[srcOutlet]) result[srcOutlet] = [id];\n                else result[srcOutlet].push(id);\n            }\n        }\n        return result;\n    }\n    getLinesByDestID(destId: string) {\n        const result = [];\n        for (let i = 0; i < this.boxes[destId].inlets; i++) {\n            result[i] = [];\n        }\n        for (const id in this.lines) {\n            const line = this.lines[id];\n            if (line && line.destId === destId) {\n                const destInlet = line.destInlet;\n                if (!result[destInlet]) result[destInlet] = [id];\n                else result[destInlet].push(id);\n            }\n        }\n        return result;\n    }\n    getLinesByBox(srcId: string, destId: string, srcOutlet?: number, destInlet?: number) {\n        const result: string[] = [];\n        let srcOuts: string[] = [];\n        let destIns: string[] = [];\n        const srcOutsWraped = this.getLinesBySrcID(srcId);\n        if (srcOutlet !== undefined) srcOuts = srcOutsWraped[srcOutlet];\n        else srcOutsWraped.forEach(el => srcOuts = srcOuts.concat(el));\n        const destInsWraped = this.getLinesByDestID(destId);\n        if (destInlet !== undefined) destIns = destInsWraped[destInlet];\n        else destInsWraped.forEach(el => destIns = destIns.concat(el));\n        if (!srcOuts || !destIns) return result;\n        srcOuts.forEach(idOut => destIns.forEach(idIn => (idIn === idOut ? result.push(idIn) : undefined)));\n        return result;\n    }\n    fn(data: any, inlet: number) {\n        this.emit(\"dataInput\", { data, inlet });\n    }\n    inputAudio(input: number, index: number, sample: number) {\n        this.emit(\"audioInput\", { input, index, sample });\n    }\n    inputParam(param: string, index: number, sample: number) {\n        this.emit(\"paramInput\", { param, index, sample });\n    }\n    outputAudio(output: number, index: number, sample: number) {\n        this.emit(\"audioOutput\", { output, index, sample });\n    }\n    outlet(outlet: number, data: any) {\n        this.emit(\"dataOutput\", { data, outlet });\n    }\n    get inletAudioConnections() {\n        return this._inletAudioConnections;\n    }\n    get outletAudioConnections() {\n        return this._outletAudioConnections;\n    }\n    connectAudioInlet(index: number) {\n        this.emit(\"connectAudioInlet\", index);\n    }\n    connectAudioOutlet(index: number) {\n        this.emit(\"connectAudioOutlet\", index);\n    }\n    disconnectAudioInlet(index: number) {\n        this.emit(\"disconnectAudioInlet\", index);\n    }\n    disconnectAudioOutlet(index: number) {\n        this.emit(\"disconnectAudioOutlet\", index);\n    }\n    changeIO() {\n        this.emit(\"ioChanged\", this.meta);\n    }\n    inspectAudioIO() {\n        const inputBoxes: Box[] = [];\n        const outputBoxes: Box[] = [];\n        const parametersBoxes: [string, Box][] = [];\n        for (const boxId in this.boxes) {\n            const box = this.boxes[boxId];\n            const arg0 = box.args[0];\n            const port = Math.max(1, ~~arg0) - 1;\n            if (box.meta.isPatcherInlet === \"audio\") inputBoxes[port] = box;\n            else if (box.meta.isPatcherInlet === \"parameter\") parametersBoxes.push([arg0, box]);\n            else if (box.meta.isPatcherOutlet === \"audio\") outputBoxes[port] = box;\n        }\n        for (let i = 0; i < this._inletAudioConnections.length; i++) {\n            if (!inputBoxes[i]) delete this._inletAudioConnections[i];\n        }\n        for (let i = 0; i < this._outletAudioConnections.length; i++) {\n            if (!outputBoxes[i]) delete this._outletAudioConnections[i];\n        }\n        return { inputBoxes, outputBoxes, parametersBoxes };\n    }\n    get meta(): IJSPatcherObjectMeta {\n        const { metaFromPatcher } = this;\n        return {\n            package: this.props.package || \"\",\n            name: this.props.name || \"\",\n            icon: null,\n            author: this.props.author || \"\",\n            version: this.props.version || \"\",\n            description: this.props.description || \"\",\n            isPatcherInlet: false,\n            isPatcherOutlet: false,\n            ...metaFromPatcher\n        };\n    }\n    get metaFromPatcher(): Pick<IJSPatcherObjectMeta, \"inlets\" | \"outlets\" | \"args\" | \"props\"> {\n        const inlets: IJSPatcherObjectMeta[\"inlets\"] = [];\n        const outlets: IJSPatcherObjectMeta[\"outlets\"] = [];\n        for (const boxId in this.boxes) {\n            const box = this.boxes[boxId] as Box<IJSPatcherObject<any, any, any[], any[], any[], { description: string; type: TMetaType }>>;\n            const port = Math.max(1, ~~box.args[0]) - 1;\n            const description = box.props.description || \"\";\n            if (box.meta.isPatcherInlet === \"data\" && !inlets[port]) {\n                inlets[port] = {\n                    isHot: true,\n                    type: box.props.type || \"anything\",\n                    description\n                };\n            } else if (box.meta.isPatcherInlet === \"audio\") {\n                inlets[port] = {\n                    isHot: true,\n                    type: \"signal\",\n                    description\n                };\n            } else if (box.meta.isPatcherOutlet === \"data\" && !outlets[port]) {\n                outlets[port] = {\n                    type: box.props.type || \"anything\",\n                    description\n                };\n            } else if (box.meta.isPatcherOutlet === \"audio\") {\n                outlets[port] = {\n                    type: \"signal\",\n                    description\n                };\n            }\n        }\n        return { inlets, outlets, args: [], props: {} };\n    }\n    log(message: string) {\n        this.newLog(\"none\", \"Patcher\", message, this);\n    }\n    error(message: string) {\n        this.newLog(\"error\", \"Patcher\", message, this);\n    }\n    newLog(errorLevel: TErrorLevel, title: string, message: string, emitter?: any) {\n        this.env.newLog(errorLevel, title, message, emitter);\n    }\n    setProps(props: Partial<TPublicPatcherProps>) {\n        let changed = false;\n        for (const keyIn in props) {\n            const key = keyIn as keyof TPublicPatcherProps;\n            if (this.props[key] === props[key]) continue;\n            changed = true;\n            (this.props as any)[key] = props[key];\n            this.emit(key, props[key]);\n        }\n        if (changed) {\n            this.emit(\"propsChanged\", props);\n            this.emitChanged();\n        }\n    }\n    get publicProps() {\n        const { dependencies, bgColor, editingBgColor, grid, openInPresentation } = this.props;\n        return { dependencies, bgColor, editingBgColor, grid, openInPresentation } as TPublicPatcherProps;\n    }\n    toFaustDspCode() {\n        const code = toFaustDspCode(this);\n        return code;\n    }\n    toString(spacing?: number) {\n        if (this.props.mode === \"max\" || this.props.mode === \"gen\") {\n            return JSON.stringify(js2max(this), undefined, spacing);\n        }\n        const { props } = this;\n        const boxes: RawPatcher[\"boxes\"] = {};\n        const lines: RawPatcher[\"lines\"] = {};\n        for (const id in this.boxes) {\n            boxes[id] = this.boxes[id].toSerializable();\n        }\n        for (const id in this.lines) {\n            lines[id] = this.lines[id].toSerializable();\n        }\n        return JSON.stringify({ boxes, lines, props }, undefined, spacing);\n    }\n    toSerializable(): RawPatcher {\n        return JSON.parse(this.toString());\n    }\n    serialize() {\n        return new Blob([this.toString()]).arrayBuffer();\n    }\n}\n","import type { SemanticICONS } from \"semantic-ui-react\";\nimport { isRectMovable, isRectResizable, isTRect } from \"../../utils/utils\";\nimport FileEditor from \"../file/FileEditor\";\nimport Box from \"./Box\";\nimport Line from \"./Line\";\nimport type { RawPatcher, TBox, TLine, TMaxClipboard, TRect, TResizeHandlerType } from \"../types\";\nimport type Patcher from \"./Patcher\";\nimport type PersistentProjectFile from \"../file/PersistentProjectFile\";\nimport type TempPatcherFile from \"./TempPatcherFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { PatcherEventMap } from \"./Patcher\";\n\nexport interface PatcherEditorEventMap extends PatcherEditorState {\n    \"create\": RawPatcher;\n    \"delete\": RawPatcher;\n    \"changeBoxText\": { boxId: string; oldText: string; text: string };\n    \"boxChanged\": { boxId: string; oldArgs?: any[]; args?: any[]; oldProps?: Record<string, any>; props?: Record<string, any>; oldState?: Record<string, any>; state?: Record<string, any> };\n    \"changeLineSrc\": { lineId: string; oldSrc: [string, number]; src: [string, number] };\n    \"changeLineDest\": { lineId: string; oldDest: [string, number]; dest: [string, number] };\n    \"selected\": string[];\n    \"moving\": { selected: string[]; delta: { x: number; y: number }; presentation: boolean };\n    \"moved\": { selected: string[]; delta: { x: number; y: number }; presentation: boolean };\n    \"resized\": { selected: string[]; delta: { x: number; y: number }; type: TResizeHandlerType; presentation: boolean };\n    \"tempLine\": { findSrc: boolean; from: [string, number] };\n    \"inspector\": never;\n    \"dockUI\": string;\n}\n\nexport interface PatcherHistoryEventMap extends Pick<PatcherEditorEventMap, \"create\" | \"delete\" | \"changeBoxText\" | \"changeLineSrc\" | \"changeLineDest\" | \"moved\" | \"resized\" | \"boxChanged\"> {}\n\nexport interface PatcherEditorState {\n    locked: boolean;\n    presentation: boolean;\n    showGrid: boolean;\n    snapToGrid: boolean;\n    selected: string[];\n}\n\nexport default class PatcherEditor extends FileEditor<Patcher, PatcherEditorEventMap> {\n    static async fromProjectItem({ file, env, project, instanceId }: { file: PersistentProjectFile | TempPatcherFile; env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<PatcherEditor> {\n        const patcher = await file.instantiate({ env, project, instanceId }) as Patcher;\n        const editor = new this(patcher);\n        return editor.init();\n    }\n    state: PatcherEditorState = {\n        locked: true,\n        presentation: false,\n        showGrid: true,\n        snapToGrid: true,\n        selected: []\n    };\n    get isLocked() {\n        return this.state.locked;\n    }\n    get boxes() {\n        return this.instance.boxes;\n    }\n    get lines() {\n        return this.instance.lines;\n    }\n    get props() {\n        return this.instance.props;\n    }\n    get publicProps() {\n        return this.instance.publicProps;\n    }\n    get fileExtension() {\n        return this.instance.fileExtension;\n    }\n    get fileName() {\n        return this.instance.fileName;\n    }\n    get fileIcon(): SemanticICONS {\n        return \"sitemap\";\n    }\n    handleChangeBoxText = (e: PatcherEventMap[\"changeBoxText\"]) => this.emit(\"changeBoxText\", e);\n    handlePassiveDeleteLine = (e: PatcherEventMap[\"passiveDeleteLine\"]) => this.emit(\"delete\", { boxes: {}, lines: { [e.id]: e } });\n    handleBoxChanged = (e: PatcherEventMap[\"boxChanged\"]) => this.emit(\"boxChanged\", e);\n    handleChanged = () => this.instance.emitChanged();\n    constructor(instance: Patcher) {\n        super(instance);\n        const { openInPresentation } = this.props;\n        this.setState({\n            locked: true,\n            presentation: !!openInPresentation,\n            showGrid: true,\n            snapToGrid: true,\n            selected: []\n        });\n    }\n    async init() {\n        if (!this.instance.isReady) {\n            await new Promise<void>((resolve, reject) => {\n                const handleReady = () => {\n                    resolve();\n                    this.instance.off(\"ready\", handleReady);\n                };\n                this.instance.on(\"ready\", handleReady);\n            });\n        }\n        this.on(\"changed\", this.handleChanged);\n        this.instance.on(\"changeBoxText\", this.handleChangeBoxText);\n        this.instance.on(\"passiveDeleteLine\", this.handlePassiveDeleteLine);\n        this.instance.on(\"boxChanged\", this.handleBoxChanged);\n        const { openInPresentation } = this.props;\n        this.setState({\n            locked: true,\n            presentation: !!openInPresentation,\n            showGrid: true,\n            snapToGrid: true,\n            selected: []\n        });\n        this._isReady = true;\n        this.emit(\"ready\");\n        return this;\n    }\n    setState(state: Partial<PatcherEditorState>) {\n        let changed = false;\n        for (const keyIn in state) {\n            const key = keyIn as keyof PatcherEditorState;\n            if (this.state[key] === state[key]) continue;\n            changed = true;\n            if (key === \"locked\" || key === \"presentation\") this.deselectAll();\n            this.state[key] = state[key] as any;\n            this.emit(key, state[key]);\n        }\n        // if (changed) this.emit(\"stateChanged\", this.state);\n        return changed;\n    }\n    async createBox(boxIn: TBox) {\n        const box = await this.instance.createBox(boxIn);\n        this.emit(\"create\", { boxes: { [box.id]: box.toSerializable() }, lines: {} });\n        await box.postInit();\n        return box;\n    }\n    async createBoxFromFile(file: PersistentProjectFile, boxIn: Omit<TBox, \"text\">) {\n        const path = file.projectPath;\n        const type = file.type;\n        const ext = file.fileExtension;\n        if (type === \"patcher\") {\n            const extMap: Record<string, string> = this.props.mode === \"js\"\n                ? { json: \"p\", jspat: \"p\", maxpat: \"max\", gendsp: \"gen\", dsppat: \"pfaust\" }\n                : this.props.mode === \"faust\"\n                    ? { gendsp: \"gen\", dsppat: \"p\" }\n                    : this.props.mode === \"gen\"\n                        ? { gendsp: \"gen\" }\n                        : {};\n            const obj = extMap[ext];\n            if (obj) await this.createBox({ text: `${obj} ${path}`, ...boxIn });\n        } else if (type === \"audio\") {\n            await this.createBox({ text: `buffer~ ${path}`, ...boxIn });\n        } else if (type === \"image\") {\n            await this.createBox({ text: `img ${path}`, ...boxIn });\n        }\n    }\n    async deleteBox(boxId: string) {\n        this.deselect(boxId);\n        const box = await this.instance.deleteBox(boxId);\n        if (!box) return null;\n        this.emit(\"delete\", { boxes: { [box.id]: box.toSerializable() }, lines: {} });\n        return box;\n    }\n    createLine(lineIn: TLine) {\n        const line = this.instance.createLine(lineIn);\n        if (!line) return null;\n        this.emit(\"create\", { boxes: {}, lines: { [line.id]: line.toSerializable() } });\n        return line;\n    }\n    deleteLine(lineId: string) {\n        this.deselect(lineId);\n        const line = this.instance.deleteLine(lineId);\n        if (!line) return null;\n        this.emit(\"delete\", { boxes: {}, lines: { [line.id]: line.toSerializable() } });\n        return line;\n    }\n    changeLineSrc(lineId: string, srcId: string, srcOutlet: number) {\n        const e = this.instance.changeLineSrc(lineId, srcId, srcOutlet);\n        this.emit(\"changeLineSrc\", e);\n    }\n    changeLineDest(lineId: string, destId: string, destOutlet: number) {\n        const e = this.instance.changeLineDest(lineId, destId, destOutlet);\n        this.emit(\"changeLineDest\", e);\n    }\n    async changeBox(boxId: string, change: { args?: any[]; props?: Record<string, any>; state?: Record<string, any> }) {\n        await this.instance.boxes[boxId]?.changeObject(change);\n    }\n\n    select(...ids: string[]) {\n        ids.forEach((id) => {\n            if (this.state.selected.indexOf(id) >= 0) return;\n            if (this.boxes[id] || this.lines[id]) this.state.selected.push(id);\n        });\n        this.emit(\"selected\", this.state.selected.slice());\n    }\n    selectAllBoxes() {\n        let ids = Object.keys(this.boxes);\n        if (this.state.presentation) ids = ids.filter(id => this.boxes[id].presentation);\n        this.state.selected = ids;\n        this.emit(\"selected\", ids);\n    }\n    selectOnly(...ids: string[]) {\n        this.state.selected = [];\n        this.select(...ids);\n    }\n    deselect(...ids: string[]) {\n        ids.forEach((id) => {\n            const i = this.state.selected.indexOf(id);\n            if (i === -1) return;\n            this.state.selected.splice(i, 1);\n        });\n        this.emit(\"selected\", this.state.selected.slice());\n    }\n    deselectAll() {\n        this.state.selected = [];\n        this.emit(\"selected\", []);\n    }\n    selectedToString() {\n        const lineSet = new Set<Line>();\n        const patcher: RawPatcher = { lines: {}, boxes: {} };\n        this.state.selected\n            .filter(id => id.startsWith(\"box\") && this.boxes[id])\n            .map(id => this.boxes[id])\n            .forEach((box) => {\n                box.allLines.forEach(line => lineSet.add(line));\n                patcher.boxes[box.id] = box.toSerializable();\n            });\n        lineSet.forEach((line) => {\n            if (patcher.boxes[line.srcId] && patcher.boxes[line.destId]) patcher.lines[line.id] = line.toSerializable();\n        });\n        if (!Object.keys(patcher.boxes)) return undefined;\n        return JSON.stringify(patcher, undefined, 4);\n    }\n    async pasteToPatcher(clipboard: RawPatcher | TMaxClipboard) {\n        const idMap: Record<string, string> = {};\n        const pasted: RawPatcher = { boxes: {}, lines: {} };\n        if (!clipboard || !clipboard.boxes) return pasted;\n        const $init: Promise<Box>[] = [];\n        const $postInit: Promise<Box>[] = [];\n        if (Array.isArray(clipboard.boxes)) { // Max Patcher\n            this.instance.state.preventEmitChanged = true;\n            const maxBoxes = clipboard.boxes;\n            for (let i = 0; i < maxBoxes.length; i++) {\n                const maxBox = maxBoxes[i].box;\n                const numID = parseInt(maxBox.id.match(/\\d+/)[0]);\n                let id = \"box-\" + numID;\n                if (this.boxes[id]) {\n                    idMap[id] = \"box-\" + ++this.props.boxIndexCount;\n                    id = idMap[id];\n                } else {\n                    idMap[id] = id;\n                    if (numID > this.props.boxIndexCount) this.props.boxIndexCount = numID;\n                }\n                const box: TBox = {\n                    id,\n                    inlets: maxBox.numinlets,\n                    outlets: maxBox.numoutlets,\n                    rect: maxBox.patching_rect,\n                    text: (maxBox.maxclass === \"newobj\" ? \"\" : maxBox.maxclass + \" \") + (maxBox.text ? maxBox.text : \"\")\n                };\n                $init.push(this.instance.createBox(box));\n            }\n            const createdBoxes = (await Promise.all($init)).filter(box => !!box);\n            createdBoxes.forEach((box) => {\n                pasted.boxes[box.id] = box.toSerializable();\n                $postInit.push(box.postInit());\n            });\n            if (Array.isArray(clipboard.lines)) {\n                const maxLines = clipboard.lines;\n                for (let i = 0; i < maxLines.length; i++) {\n                    const lineArgs = maxLines[i].patchline;\n                    const id = \"line-\" + ++this.props.lineIndexCount;\n                    const line: TLine = {\n                        id,\n                        src: [idMap[lineArgs.source[0].replace(/obj/, \"box\")], lineArgs.source[1]],\n                        dest: [idMap[lineArgs.destination[0].replace(/obj/, \"box\")], lineArgs.destination[1]]\n                    };\n                    const createdLine = this.instance.createLine(line);\n                    if (createdLine) pasted.lines[createdLine.id] = createdLine.toSerializable();\n                }\n            }\n            this.instance.state.preventEmitChanged = false;\n            if (Object.keys(pasted.boxes).length) {\n                this.deselectAll();\n                this.select(...Object.keys(pasted.boxes));\n                this.emit(\"create\", pasted);\n                this.instance.emitGraphChanged();\n                await Promise.all($postInit);\n            }\n            return pasted;\n        }\n        if (Array.isArray(clipboard.boxes) || Array.isArray(clipboard.lines)) return pasted;\n        this.instance.state.preventEmitChanged = true;\n        for (const boxId in clipboard.boxes) {\n            const box = clipboard.boxes[boxId];\n            if (this.boxes[box.id]) {\n                idMap[box.id] = \"box-\" + ++this.props.boxIndexCount;\n                box.id = idMap[box.id];\n            } else {\n                idMap[box.id] = box.id;\n                const numID = parseInt(box.id.match(/\\d+/)[0]);\n                if (numID > this.props.boxIndexCount) this.props.boxIndexCount = numID;\n            }\n            box.rect = [box.rect[0] + 30, box.rect[1] + 30, box.rect[2], box.rect[3]];\n            $init.push(this.instance.createBox(box));\n        }\n        const createdBoxes = (await Promise.all($init)).filter(box => !!box);\n        createdBoxes.forEach((box) => {\n            pasted.boxes[box.id] = box.toSerializable();\n            $postInit.push(box.postInit());\n        });\n        await Promise.all($postInit);\n        for (const lineId in clipboard.lines) {\n            const line = clipboard.lines[lineId];\n            line.id = \"line-\" + ++this.props.lineIndexCount;\n            line.src[0] = idMap[line.src[0]];\n            line.dest[0] = idMap[line.dest[0]];\n            const createdLine = this.instance.createLine(line);\n            if (createdLine) pasted.lines[createdLine.id] = createdLine.toSerializable();\n        }\n        this.instance.state.preventEmitChanged = false;\n        if (Object.keys(pasted.boxes).length) {\n            this.deselectAll();\n            this.select(...Object.keys(pasted.boxes));\n            this.emit(\"create\", pasted);\n            this.instance.emitGraphChanged();\n        }\n        return pasted;\n    }\n    async create(objects: RawPatcher) {\n        const $init: Promise<Box>[] = [];\n        const $postInit: Promise<Box>[] = [];\n        const created: RawPatcher = { boxes: {}, lines: {} };\n        for (const boxId in objects.boxes) {\n            const boxIn = objects.boxes[boxId];\n            const box = new Box(this.instance, boxIn);\n            this.boxes[box.id] = box;\n            created.boxes[box.id] = box.toSerializable();\n            $init.push(box.init());\n            $postInit.push(box.postInit());\n        }\n        await Promise.all($init);\n        await Promise.all($postInit);\n        for (const lineId in objects.lines) {\n            const lineIn = objects.lines[lineId];\n            if (!this.instance.canCreateLine(lineIn)) continue;\n            const line = new Line(this.instance, lineIn);\n            this.lines[line.id] = line;\n            created.lines[line.id] = line.toSerializable();\n            line.enable();\n        }\n        this.deselectAll();\n        this.select(...Object.keys(objects.boxes));\n        this.emit(\"create\", created);\n        this.instance.emitGraphChanged();\n    }\n    async deleteSelected() {\n        const boxSet = new Set<Box>();\n        const lineSet = new Set<Line>();\n        this.state.selected.filter(id => id.startsWith(\"line\")).forEach(id => lineSet.add(this.lines[id]));\n        this.state.selected.filter(id => id.startsWith(\"box\")).forEach((id) => {\n            boxSet.add(this.boxes[id]);\n            this.boxes[id].allLines.forEach(line => lineSet.add(line));\n        });\n        if (!boxSet.size && !lineSet.size) return undefined;\n        this.state.selected = [];\n        const deleted: RawPatcher = { boxes: {}, lines: {} };\n        const promises: Promise<Box>[] = [];\n        lineSet.forEach((line) => {\n            deleted.lines[line.id] = line.toSerializable();\n            line.destroy();\n        });\n        boxSet.forEach((box) => {\n            deleted.boxes[box.id] = box.toSerializable();\n            promises.push(box.destroy());\n        });\n        await Promise.all(promises);\n        this.emit(\"selected\", this.state.selected.slice());\n        this.emit(\"delete\", deleted);\n        this.instance.emitGraphChanged();\n        return deleted;\n    }\n    async delete(objects: RawPatcher) {\n        const deleted: RawPatcher = { boxes: {}, lines: {} };\n        for (const id in objects.lines) {\n            deleted.lines[id] = this.lines[id].destroy().toSerializable();\n        }\n        const promises: Promise<Box>[] = [];\n        for (const id in objects.boxes) {\n            deleted.boxes[id] = this.boxes[id].toSerializable();\n            promises.push(this.boxes[id].destroy());\n        }\n        await Promise.all(promises);\n        this.emit(\"selected\", this.state.selected.slice());\n        this.emit(\"delete\", deleted);\n        this.instance.emitGraphChanged();\n    }\n    async cut() {\n        if (this.state.locked) return;\n        await this.copy();\n        this.deleteSelected();\n    }\n    async copy() {\n        if (this.state.locked) return;\n        const s = this.selectedToString();\n        if (!s) return;\n        await navigator.clipboard.writeText(s);\n    }\n    async paste() {\n        if (this.state.locked) return;\n        const s = await navigator.clipboard.readText();\n        if (!s) return;\n        let parsed: RawPatcher | TMaxClipboard;\n        try {\n            parsed = JSON.parse(s);\n        } catch (e) {} // eslint-disable-line no-empty\n        await this.pasteToPatcher(parsed);\n    }\n    async duplicate() {\n        if (this.state.locked) return;\n        const s = this.selectedToString();\n        if (!s) return;\n        let parsed: RawPatcher | TMaxClipboard;\n        try {\n            parsed = JSON.parse(s);\n        } catch (e) {} // eslint-disable-line no-empty\n        await this.pasteToPatcher(parsed);\n    }\n    async selectAll() {\n        this.selectAllBoxes();\n    }\n    selectRegion(selectionRect: number[], selectedBefore: string[]) {\n        let [left, top, right, bottom] = selectionRect;\n        if (left > right) [left, right] = [right, left];\n        if (top > bottom) [top, bottom] = [bottom, top];\n        const { presentation } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        const select = selectedBefore.slice();\n        for (const boxId in this.boxes) {\n            const box = this.boxes[boxId];\n            if (presentation && !box.presentation) continue;\n            const rect = box[rectKey];\n            if (!isTRect(rect)) continue;\n            const [boxLeft, boxTop, boxWidth, boxHeight] = rect;\n            const [boxRight, boxBottom] = [boxLeft + boxWidth, boxTop + boxHeight];\n            if (boxLeft < right && boxTop < bottom && boxRight > left && boxBottom > top) {\n                const i = select.indexOf(boxId);\n                if (i === -1) select.push(boxId);\n                else select.splice(i, 1);\n            }\n        }\n        const deselect = this.state.selected.filter(id => select.indexOf(id) === -1);\n        this.select(...select);\n        this.deselect(...deselect);\n    }\n    moveSelectedBox(dragOffset: { x: number; y: number }, refBoxID?: string) {\n        const { presentation, snapToGrid, selected } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        const delta = { ...dragOffset };\n        if (refBoxID) {\n            const rect = this.boxes[refBoxID][rectKey];\n            if (!isRectMovable(rect)) return { x: 0, y: 0 };\n            delta.x = snapToGrid ? Math.round((rect[0] + dragOffset.x) / this.props.grid[0]) * this.props.grid[0] - rect[0] : dragOffset.x;\n            delta.y = snapToGrid ? Math.round((rect[1] + dragOffset.y) / this.props.grid[1]) * this.props.grid[1] - rect[1] : dragOffset.y;\n        }\n        if (!delta.x && !delta.y) return dragOffset;\n        this.move(selected, delta, presentation);\n        return { x: dragOffset.x - delta.x, y: dragOffset.y - delta.y };\n    }\n    moveEnd(delta: { x: number; y: number }) {\n        const { presentation, selected } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        let ids = selected.filter(id => id.startsWith(\"box\") && this.boxes[id]);\n        if (presentation) ids = ids.filter(id => isRectMovable(this.boxes[id][rectKey]));\n        const boxes = ids.map(id => this.boxes[id]);\n        boxes.forEach(box => box.emit(presentation ? \"presentationRectChanged\" : \"rectChanged\", box));\n        this.emit(\"moved\", { delta, selected: ids, presentation: this.state.presentation });\n    }\n    move(selected: string[], delta: { x: number; y: number }, presentation: boolean) {\n        this.select(...selected);\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        let ids = selected.filter(id => id.startsWith(\"box\") && this.boxes[id]);\n        if (presentation) ids = ids.filter(id => isRectMovable(this.boxes[id][rectKey]));\n        const boxes = ids.map(id => this.boxes[id]);\n        if (boxes.length === 0) return;\n        let [left, top] = boxes[0][rectKey] as TRect;\n        for (let i = 1; i < boxes.length; i++) {\n            const box = boxes[i];\n            const [$left, $top] = box[rectKey] as TRect;\n            if ($left < left) left = $left;\n            if ($top < top) top = $top;\n        }\n        // Not allowing resize out of bound\n        delta.x = Math.max(delta.x, -left);\n        delta.y = Math.max(delta.y, -top);\n        if (delta.x) boxes.forEach(box => (box[rectKey] as TRect)[0] += delta.x);\n        if (delta.y) boxes.forEach(box => (box[rectKey] as TRect)[1] += delta.y);\n        // Emit events\n        if (!delta.x && !delta.y) return;\n        if (presentation !== this.state.presentation) return;\n        // boxes.forEach(box => box.emit(presentation ? \"presentationRectChanged\" : \"rectChanged\", box));\n        this.emit(\"moving\", { selected: ids, delta, presentation });\n        if (presentation) return;\n        const lineSet = new Set<Line>();\n        boxes.forEach((box) => {\n            box.inletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n            box.outletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n        });\n        lineSet.forEach(line => line.emit(\"posChanged\", line));\n    }\n    resizeSelectedBox(boxId: string, dragOffset: { x: number; y: number }, type: TResizeHandlerType) {\n        const { presentation, snapToGrid, selected } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        const rect = this.boxes[boxId][rectKey];\n        if (!isRectResizable(rect)) return { x: 0, y: 0 };\n        const delta = { x: 0, y: 0 };\n        // Round delta to grid\n        if (type === \"e\" || type === \"se\" || type === \"ne\") {\n            delta.x = snapToGrid ? Math.round((rect[0] + rect[2] + dragOffset.x) / this.props.grid[0]) * this.props.grid[0] - rect[0] - rect[2] : dragOffset.x;\n        }\n        if (type === \"s\" || type === \"se\" || type === \"sw\") {\n            delta.y = snapToGrid ? Math.round((rect[1] + rect[3] + dragOffset.y) / this.props.grid[1]) * this.props.grid[1] - rect[1] - rect[3] : dragOffset.y;\n        }\n        if (type === \"w\" || type === \"nw\" || type === \"sw\") {\n            delta.x = snapToGrid ? Math.round((rect[0] + dragOffset.x) / this.props.grid[0]) * this.props.grid[0] - rect[0] : dragOffset.x;\n        }\n        if (type === \"n\" || type === \"nw\" || type === \"ne\") {\n            delta.y = snapToGrid ? Math.round((rect[1] + dragOffset.y) / this.props.grid[1]) * this.props.grid[1] - rect[1] : dragOffset.y;\n        }\n        if (!delta.x && !delta.y) return dragOffset;\n        this.resize(selected, delta, type, presentation);\n        return { x: dragOffset.x - delta.x, y: dragOffset.y - delta.y };\n    }\n    resizeEnd(delta: { x: number; y: number }, type: TResizeHandlerType) {\n        const { selected, presentation } = this.state;\n        this.emit(\"resized\", { delta, type, selected, presentation });\n    }\n    resize(selected: string[], delta: { x: number; y: number }, type: TResizeHandlerType, presentation: boolean) {\n        this.select(...selected);\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        let ids = selected.filter(id => id.startsWith(\"box\") && this.boxes[id]);\n        if (presentation) ids = ids.filter(id => isRectResizable(this.boxes[id][rectKey]));\n        const boxes = ids.map(id => this.boxes[id]);\n        if (boxes.length === 0) return;\n        let [left, top, width, height] = boxes[0][rectKey] as TRect;\n        for (let i = 1; i < boxes.length; i++) {\n            const box = boxes[i];\n            const [$left, $top, $width, $height] = box[rectKey] as TRect;\n            if ($left < left) left = $left;\n            if ($top < top) top = $top;\n            if ($width < width) width = $width;\n            if ($height < height) height = $height;\n        }\n        // Not allowing resize out of bound\n        if (type === \"sw\" || type === \"w\" || type === \"nw\") delta.x = Math.max(delta.x, -left);\n        if (type === \"nw\" || type === \"n\" || type === \"ne\") delta.y = Math.max(delta.y, -top);\n        // Not allowing resize below 15px width or height\n        if (type === \"ne\" || type === \"e\" || type === \"se\") delta.x = Math.max(delta.x, 15 - width);\n        if (type === \"sw\" || type === \"w\" || type === \"nw\") delta.x = Math.min(delta.x, width - 15);\n        if (type === \"se\" || type === \"s\" || type === \"sw\") delta.y = Math.max(delta.y, 15 - height);\n        if (type === \"nw\" || type === \"n\" || type === \"ne\") delta.y = Math.min(delta.y, height - 15);\n        boxes.forEach((box) => {\n            const sizingX = box.UI ? box.UI?.sizing === \"horizontal\" || box.UI?.sizing === \"both\" : true;\n            const sizingY = box.UI ? box.UI?.sizing === \"vertical\" || box.UI?.sizing === \"both\" : true;\n            if (delta.x && sizingX) {\n                if (type === \"ne\" || type === \"e\" || type === \"se\") (box[rectKey] as TRect)[2] += delta.x;\n                if (type === \"sw\" || type === \"w\" || type === \"nw\") {\n                    (box[rectKey] as TRect)[2] -= delta.x;\n                    (box[rectKey] as TRect)[0] += delta.x;\n                }\n            }\n            if (delta.y && sizingY) {\n                if (type === \"se\" || type === \"s\" || type === \"sw\") (box[rectKey] as TRect)[3] += delta.y;\n                if (type === \"nw\" || type === \"n\" || type === \"ne\") {\n                    (box[rectKey] as TRect)[3] -= delta.y;\n                    (box[rectKey] as TRect)[1] += delta.y;\n                }\n            }\n        });\n        // Emit events\n        if (!delta.x && !delta.y) return;\n        if (presentation !== this.state.presentation) return;\n        boxes.forEach(box => box.emit(presentation ? \"presentationRectChanged\" : \"rectChanged\", box));\n        if (presentation) return;\n        const lineSet = new Set<Line>();\n        boxes.forEach((box) => {\n            box.inletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n            box.outletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n        });\n        lineSet.forEach(line => line.emit(\"posChanged\", line));\n    }\n    findNearestPort(findSrc: boolean, left: number, top: number, from: [string, number], to?: [string, number]) {\n        let nearest: [string, number] = [null, null];\n        let minDistance = 100;\n        if (to) {\n            const currentPos = this.boxes[to[0]][findSrc ? \"getOutletPos\" : \"getInletPos\"](to[1]);\n            const currentDistance = ((currentPos.left - left) ** 2 + (currentPos.top - top) ** 2) ** 0.5;\n            if (currentDistance < 100) {\n                nearest = to;\n                minDistance = currentDistance;\n            }\n        }\n        for (const id in this.boxes) {\n            const box = this.boxes[id];\n            box[findSrc ? \"outletsPositions\" : \"inletsPositions\"].forEach((pos, i) => {\n                const distance = ((pos.left - left) ** 2 + (pos.top - top) ** 2) ** 0.5;\n                if (distance < minDistance) {\n                    const canCreate = this.instance.canCreateLine({ src: findSrc ? [id, i] : from, dest: findSrc ? from : [id, i] });\n                    if (!canCreate) return;\n                    nearest = [id, i];\n                    minDistance = distance;\n                }\n            });\n        }\n        return nearest;\n    }\n    highlightNearestPort(findSrc: boolean, dragOffset: { x: number; y: number }, from: [string, number], to?: [string, number]) { // to = the port need to be reconnect\n        const origPos = to ? this.boxes[to[0]][findSrc ? \"getOutletPos\" : \"getInletPos\"](to[1]) : this.boxes[from[0]][findSrc ? \"getInletPos\" : \"getOutletPos\"](from[1]);\n        const left = origPos.left + dragOffset.x;\n        const top = origPos.top + dragOffset.y;\n        const nearest = this.findNearestPort(findSrc, left, top, from, to);\n        for (const id in this.boxes) {\n            const box = this.boxes[id];\n            for (let i = 0; i < box[findSrc ? \"outlets\" : \"inlets\"]; i++) {\n                box.highlightPort(findSrc, i, nearest[0] === id && nearest[1] === i);\n            }\n        }\n        return nearest;\n    }\n    tempLine(findSrc: boolean, from: [string, number]) {\n        this.emit(\"tempLine\", { findSrc, from });\n        return this;\n    }\n    inspector(box?: Box) {\n        if (box) this.emit(\"inspector\");\n        else if (this.state.selected.length) {\n            const found = this.state.selected.find(id => id.startsWith(\"box\"));\n            if (found && this.boxes[found]) this.emit(\"inspector\");\n        }\n    }\n    dockUI(box?: Box) {\n        if (box && box.UI.dockable) this.emit(\"dockUI\", box.id);\n        else if (this.state.selected.length) {\n            const found = this.state.selected.find(id => id.startsWith(\"box\"));\n            if (found && this.boxes[found] && this.boxes[found].UI.dockable) this.emit(\"dockUI\", found);\n        }\n    }\n    onUiResized() {}\n    async toTempData() {\n        return this.instance.toSerializable();\n    }\n}\n","import History from \"../file/History\";\nimport PatcherEditor, { PatcherHistoryEventMap } from \"./PatcherEditor\";\n\nexport default class PatcherHistory extends History<PatcherHistoryEventMap, PatcherEditor> {\n    get eventListening(): (keyof PatcherHistoryEventMap)[] {\n        return [\n            \"create\", \"delete\", \"changeBoxText\", \"boxChanged\",\n            \"changeLineSrc\", \"changeLineDest\", \"moved\", \"resized\"\n        ];\n    }\n    async undoOf(editor: PatcherEditor, eventName: keyof PatcherHistoryEventMap, eventData?: any) {\n        if (eventName === \"delete\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.create(e);\n        } else if (eventName === \"changeBoxText\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, oldText } = e;\n            await editor.instance.changeBoxText(boxId, oldText);\n        } else if (eventName === \"boxChanged\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, oldArgs, oldProps, oldState } = e;\n            await editor.changeBox(boxId, { args: oldArgs, props: oldProps, state: oldState });\n        } else if (eventName === \"moved\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, presentation } = e;\n            const d = { x: -1 * delta.x, y: -1 * delta.y };\n            editor.move(selected, d, presentation);\n            editor.moveEnd(d);\n        } else if (eventName === \"changeLineSrc\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, oldSrc } = e;\n            editor.changeLineSrc(lineId, oldSrc[0], oldSrc[1]);\n        } else if (eventName === \"changeLineDest\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, oldDest } = e;\n            editor.changeLineDest(lineId, oldDest[0], oldDest[1]);\n        } else if (eventName === \"create\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.delete(e);\n        } else if (eventName === \"resized\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, type: t, presentation } = e;\n            const d = { x: -1 * delta.x, y: -1 * delta.y };\n            editor.resize(selected, d, t, presentation);\n            editor.resizeEnd(d, t);\n        }\n    }\n    async redoOf(editor: PatcherEditor, eventName: keyof PatcherHistoryEventMap, eventData?: any) {\n        if (eventName === \"create\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.create(e);\n        } else if (eventName === \"changeBoxText\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, text } = e;\n            await editor.instance.changeBoxText(boxId, text);\n        } else if (eventName === \"boxChanged\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, args, props, state } = e;\n            await editor.changeBox(boxId, { args, props, state });\n        } else if (eventName === \"moved\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, presentation } = e;\n            editor.move(selected, delta, presentation);\n            editor.moveEnd(delta);\n        } else if (eventName === \"changeLineSrc\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, src } = e;\n            editor.changeLineSrc(lineId, src[0], src[1]);\n        } else if (eventName === \"changeLineDest\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, dest } = e;\n            editor.changeLineDest(lineId, dest[0], dest[1]);\n        } else if (eventName === \"delete\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.delete(e);\n        } else if (eventName === \"resized\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, type: t, presentation } = e;\n            editor.resize(selected, delta, t, presentation);\n            editor.resizeEnd(delta, t);\n        }\n    }\n}\n","import TemporaryProjectFile from \"../file/TemporaryProjectFile\";\nimport type { RawPatcher } from \"../types\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\n\nexport default class TempPatcherFile extends TemporaryProjectFile<RawPatcher> {\n    get type() {\n        return \"patcher\" as const;\n    }\n    async instantiate({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const Patcher = (await import(\"./Patcher\")).default;\n        const patcher = new Patcher({ file: this, env, project, instanceId });\n        await patcher.load(this.data);\n        return patcher;\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const PatcherEditor = (await import(\"./PatcherEditor\")).default;\n        return PatcherEditor.fromProjectItem({ file: this, env, project, instanceId });\n    }\n}\n","import TemporaryProjectFile from \"../file/TemporaryProjectFile\";\nimport type PatcherText from \"./PatcherText\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\n\nexport default class TempTextFile extends TemporaryProjectFile<PatcherText> {\n    get type() {\n        return \"text\" as const;\n    }\n    async instantiate() {\n        return this.data;\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const TextEditor = (await import(\"./TextEditor\")).default;\n        return TextEditor.fromProjectItem({ file: this, env, project, instanceId });\n    }\n}\n","import { AudioWorkletGlobalScope, MessagePortRequest, MessagePortResponse, TypedMessageEvent } from \"./TypedAudioWorklet\";\nimport { AudioWorkletProxyProcessor } from \"./AudioWorkletProxyProcessor.types\";\n\ndeclare const globalThis: AudioWorkletGlobalScope;\nconst { AudioWorkletProcessor } = globalThis;\n\nconst Processor = class extends AudioWorkletProcessor {\n    static get fnNames(): string[] {\n        return [];\n    }\n    _disposed = false;\n    constructor(options: AudioWorkletNodeOptions) {\n        super(options);\n        const resolves: Record<number, ((...args: any[]) => any)> = {};\n        const rejects: Record<number, ((...args: any[]) => any)> = {};\n        let messagePortRequestId = -1;\n        const handleDisposed = () => {\n            this.port.removeEventListener(\"message\", handleMessage);\n            this.port.close();\n        };\n        const handleMessage = async (e: TypedMessageEvent<MessagePortResponse & MessagePortRequest>) => {\n            const { id, call, args, value, error } = e.data;\n            if (call) {\n                const r: MessagePortResponse = { id };\n                try {\n                    r.value = await (this as any)[call](...args);\n                } catch (e) {\n                    r.error = e;\n                }\n                this.port.postMessage(r as any);\n                if (this._disposed) handleDisposed();\n            } else {\n                if (error) {\n                    if (rejects[id]) rejects[id](error);\n                    delete rejects[id];\n                    return;\n                }\n                if (resolves[id]) {\n                    resolves[id](value);\n                    delete resolves[id];\n                }\n            }\n        };\n        const call = (call: string, ...args: any[]) => new Promise<any>((resolve, reject) => {\n            const id = messagePortRequestId--;\n            resolves[id] = resolve;\n            rejects[id] = reject;\n            this.port.postMessage({ id, call, args });\n        });\n        const Ctor = (this.constructor as typeof AudioWorkletProxyProcessor);\n        Ctor.fnNames.forEach(name => (this as any)[name] = (...args: any[]) => call(name, ...args));\n        this.port.start();\n        this.port.addEventListener(\"message\", handleMessage);\n    }\n} as typeof AudioWorkletProxyProcessor;\n\nexport default Processor;\n","export const $AnyEventType = Symbol(\"__TypedEventListener_AnyEventType\");\nexport interface ITypedEventEmitter<M> extends Omit<TypedEventEmitter<M>, \"_listeners\" | \"getListeners\"> {\n}\nexport interface IEmitOptions {\n    /** if true, the emission will not trigger `onAny` listeners */\n    excludeAny?: boolean;\n    /** Exclude listeners with emit */\n    exclude?: ((...args: any[]) => any)[];\n}\nexport class TypedEventEmitter<M> {\n    private _listeners: { [eventName: string]: ((e?: any, emitter?: any) => any | Promise<any>)[]; [$AnyEventType]: ((eventName: string, eventData?: any, emitter?: any) => any | Promise<any>)[] } = { [$AnyEventType]: [] };\n    get listeners() {\n        return this._listeners;\n    }\n    private getListeners<K extends keyof M & string>(eventName: K) {\n        if (!(eventName in this._listeners)) this._listeners[eventName] = [];\n        return this._listeners[eventName];\n    }\n    on<K extends keyof M & string>(eventName: K, listener: (e: M[K], emitter?: this) => any) {\n        if (this.getListeners(eventName).indexOf(listener) === -1) this.getListeners(eventName).push(listener);\n    }\n    once<K extends keyof M & string>(eventName: K, listener: (e: M[K], emitter?: this) => any) {\n        const listenerWithOff = (arg: M[K], emitter?: this) => {\n            const returnValue = listener(arg, emitter);\n            this.off(eventName, listenerWithOff);\n            return returnValue;\n        };\n        this.on(eventName, listenerWithOff);\n    }\n    onAny<K extends keyof M & string>(listener: <KK extends K>(eventName: KK, eventData?: M[KK], emitter?: this) => any) {\n        this._listeners[$AnyEventType].push(listener);\n    }\n    off<K extends keyof M & string>(eventName: K, listener: (e: M[K], emitter?: this) => any) {\n        const i = this.getListeners(eventName).indexOf(listener);\n        if (i !== -1) this.getListeners(eventName).splice(i, 1);\n    }\n    offAny<K extends keyof M & string>(listener: <KK extends K>(eventName: KK, eventData?: M[KK], emitter?: this) => any) {\n        const i = this._listeners[$AnyEventType].indexOf(listener);\n        if (i !== -1) this._listeners[$AnyEventType].splice(i, 1);\n    }\n    async emit<K extends keyof M & string>(eventName: K, eventData?: M[K], options?: IEmitOptions) {\n        let listeners = this.getListeners(eventName);\n        let anyListeners = options?.excludeAny ? [] : this._listeners[$AnyEventType];\n        if (!listeners.length && !anyListeners.length) return [];\n        if (options?.exclude?.length) {\n            const { exclude } = options;\n            listeners = listeners.filter(l => exclude.indexOf(l) === -1);\n            anyListeners = anyListeners.filter(l => exclude.indexOf(l) === -1);\n        }\n        return Promise.all([...listeners.map(f => f(eventData, this)), ...anyListeners.map(f => f(eventName, eventData, this))]);\n    }\n    async emitSerial<K extends keyof M & string>(eventName: K, eventData?: M[K], options?: IEmitOptions) {\n        let listeners = this.getListeners(eventName);\n        let anyListeners = options?.excludeAny ? [] : this._listeners[$AnyEventType];\n        if (!listeners.length && !anyListeners.length) return [];\n        if (options?.exclude?.length) {\n            const { exclude } = options;\n            listeners = listeners.filter(l => exclude.indexOf(l) === -1);\n            anyListeners = anyListeners.filter(l => exclude.indexOf(l) === -1);\n        }\n        const returnValues = [];\n        for (let i = 0; i < listeners.length; i++) {\n            const listener = listeners[i];\n            returnValues[i] = await listener(eventData, this);\n        }\n        for (let i = 0; i < anyListeners.length; i++) {\n            const listener = anyListeners[i];\n            returnValues[listeners.length + i] = await listener(eventName, eventData, this);\n        }\n        return returnValues;\n    }\n    emitSync<K extends keyof M & string>(eventName: K, eventData?: M[K], options?: IEmitOptions) {\n        let listeners = this.getListeners(eventName);\n        let anyListeners = options?.excludeAny ? [] : this._listeners[$AnyEventType];\n        if (!listeners.length && !anyListeners.length) return [];\n        if (options?.exclude?.length) {\n            const { exclude } = options;\n            listeners = listeners.filter(l => exclude.indexOf(l) === -1);\n            anyListeners = anyListeners.filter(l => exclude.indexOf(l) === -1);\n        }\n        return [...listeners.map(f => f(eventData, this)), ...anyListeners.map(f => f(eventName, eventData, this))];\n    }\n    offAll(eventName?: keyof M & string) {\n        if (eventName) {\n            this._listeners[eventName] = [];\n        } else {\n            this._listeners = { [$AnyEventType]: [] };\n        }\n    }\n    listenerCount(eventName: keyof M & string) {\n        const anyListenerCount = this._listeners[$AnyEventType].length;\n        if (!(eventName in this._listeners)) return anyListenerCount;\n        return this._listeners[eventName].length + anyListenerCount;\n    }\n}\n\nexport default TypedEventEmitter;\n","export const ImporterDirSelfObject = Symbol(\"__JSPatcher_ImporterDirSelfObject\");\nexport const ImportedStaticMethodObject = Symbol(\"__JSPatcher_ImportedStaticMethodObject\");\nexport const SharedDataNoValue = Symbol(\"__JSPatcher_ShareDataNoValue\");\nexport const TempManagerFolder = Symbol(\"__JSPatcher_TempManagerFolder\");\n","/* eslint-disable arrow-body-style */\nimport type { TPatcherProps } from \"../core/patcher/Patcher\";\nimport type { TMIDIEvent, TBPF, TRect, TPresentationRect, ProjectItemType, RawPatcher, TMaxPatcher, TAudioUnit } from \"../core/types\";\n\nexport const isStringArray = (x: any): x is string[] => Array.isArray(x) && x.every(e => typeof e === \"string\");\nexport const isNumberArray = (x: any): x is number[] => Array.isArray(x) && x.every(e => typeof e === \"number\");\nexport const isTRect = (x: any): x is TRect => {\n    return isNumberArray(x)\n        && x.length === 4\n        && x[0] >= 0\n        && x[1] >= 0\n        && x[2] >= 15\n        && x[3] >= 15;\n};\nexport const isTPresentationRect = (x: any): x is TPresentationRect => {\n    return Array.isArray(x)\n        && x.length === 4\n        && x.every(v => typeof v === \"number\" || typeof v === \"string\");\n};\nexport const isRectMovable = (x: any): x is [number, number, number | string, number | string] => {\n    return isTPresentationRect(x) && typeof x[0] === \"number\" && typeof x[1] === \"number\";\n};\nexport const isRectResizable = (x: any): x is TRect => isTRect(x);\nexport const isMIDIEvent = (x: any): x is TMIDIEvent => (isNumberArray(x) || x instanceof Uint8Array) && x.length === 3;\nexport const stringifyError = (data: any) => {\n    if (typeof data === \"string\") return data;\n    if (data instanceof Error) return data.message;\n    if (typeof data === \"object\") return JSON.stringify(data);\n    return `${data}`;\n};\nexport const parseToPrimitive = (value: any) => {\n    try {\n        return JSON.parse(value);\n    } catch (e) {\n        return value.toString();\n    }\n};\nexport const rgbaMax2Css = (maxColor: number[]) => {\n    const cssColor = [255, 255, 255, 1] as TRect;\n    if (Array.isArray(maxColor)) {\n        for (let i = 0; i < 3; i++) {\n            if (typeof maxColor[i] === \"number\") cssColor[i] = Math.floor(maxColor[i] * 255);\n        }\n        if (typeof maxColor[3] === \"number\") cssColor[3] = maxColor[3];\n    }\n    return `rgba(${cssColor.join(\",\")})`;\n};\nexport const css2RgbaMax = (color: string) => {\n    const maxColor = [0.2, 0.2, 0.2, 1] as TRect;\n    const matched = color.match(/rgba\\((.+)\\)/);\n    if (!matched) return maxColor;\n    const cssColor = matched[1].split(\",\").map(s => +s);\n    for (let i = 0; i < 3; i++) {\n        if (typeof cssColor[i] === \"number\") maxColor[i] = cssColor[i] / 255;\n        if (typeof cssColor[3] === \"number\") maxColor[3] = cssColor[3];\n    }\n    return maxColor;\n};\n/**\n * A BPF can be described as a succesion of three number tuples.\n * i.e. `1 1 0.5 2 1 1` curve mode means go to 0 immediately then go to 1 in 1s with a curve of e^0.5, then go to 2 in 1s linear.\n * The function transform the string to number[][], i.e. `[[1, 1, 0.5], [2, 1, 1]]`\n *\n * @param {TBPF} sIn\n * @returns {number[][]}\n */\nexport const decodeBPF = (sIn: TBPF, tupleLength: number): number[][] => {\n    if (typeof sIn === \"number\") return [[sIn]];\n    if (isNumberArray(sIn)) return [sIn];\n    if (Array.isArray(sIn) && sIn.every(a => isNumberArray(a))) return sIn;\n    if (typeof sIn !== \"string\") throw new Error(\"Failed to decode curve.\");\n    const numbers = sIn.split(\" \").filter(s => !!s).map(s => +s);\n    if (numbers.find(v => !isFinite(v))) throw new Error(\"BPF contains invalid number.\");\n    const tuples: number[][] = [];\n    for (let i = 0; i < numbers.length; i++) {\n        const $tuple = ~~(i / tupleLength);\n        const $ = i % tupleLength;\n        if (!tuples[$tuple]) tuples[$tuple] = [];\n        tuples[$tuple][$] = numbers[i];\n    }\n    return tuples;\n};\nexport const decodeCurve = (sIn: TBPF) => decodeBPF(sIn, 3);\nexport const decodeLine = (sIn: TBPF) => decodeBPF(sIn, 2);\n\n/**\n * Gives OS name as follows:\n * \"Windows\"    for all versions of Windows,\n * \"MacOS\"      for all versions of Macintosh OS,\n * \"Linux\"      for all versions of Linux,\n * \"UNIX\"       for all other UNIX flavors,\n * \"Unknown\" indicates failure to detect the OS\n *\n * @returns {\"Windows\" | \"MacOS\" | \"UNIX\" | \"Linux\" | \"Unknown\"} OS name\n */\nexport const detectOS = (): \"Windows\" | \"MacOS\" | \"UNIX\" | \"Linux\" | \"Unknown\" => {\n    const { appVersion } = navigator;\n    if (appVersion.indexOf(\"Win\") !== -1) return \"Windows\";\n    if (appVersion.indexOf(\"Mac\") !== -1) return \"MacOS\";\n    if (appVersion.indexOf(\"X11\") !== -1) return \"UNIX\";\n    if (appVersion.indexOf(\"Linux\") !== -1) return \"Linux\";\n    return \"Unknown\";\n};\nexport const detectBrowserCore = () => {\n    if ((window as any).chrome) return \"Chromium\";\n    if ((window as any).InstallTrigger) return \"Gecko\";\n    if (navigator.vendor.indexOf(\"Apple\") !== -1) return \"WebKit\";\n    return \"Unknown\";\n};\nexport const roundedRect = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number | number[]) => {\n    const radii = [0, 0, 0, 0];\n    if (typeof radius === \"number\") radii.fill(radius);\n    else radius.forEach((v, i) => radii[i] = v);\n    ctx.beginPath();\n    ctx.moveTo(x + radii[0], y);\n    ctx.lineTo(x + width - radii[1], y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radii[1]);\n    ctx.lineTo(x + width, y + height - radii[2]);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radii[2], y + height);\n    ctx.lineTo(x + radii[3], y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radii[3]);\n    ctx.lineTo(x, y + radii[0]);\n    ctx.quadraticCurveTo(x, y, x + radii[0], y);\n    ctx.closePath();\n    ctx.stroke();\n};\nexport const fillRoundedRect = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number | number[]) => {\n    const radii = [0, 0, 0, 0];\n    if (typeof radius === \"number\") radii.fill(radius);\n    else radius.forEach((v, i) => radii[i] = v);\n    ctx.beginPath();\n    ctx.moveTo(x + radii[0], y);\n    ctx.lineTo(x + width - radii[1], y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radii[1]);\n    ctx.lineTo(x + width, y + height - radii[2]);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radii[2], y + height);\n    ctx.lineTo(x + radii[3], y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radii[3]);\n    ctx.lineTo(x, y + radii[0]);\n    ctx.quadraticCurveTo(x, y, x + radii[0], y);\n    ctx.closePath();\n    ctx.fill();\n};\nexport const selectElementRange = (e: HTMLElement) => {\n    const elementIsEditable = (e: HTMLElement): e is HTMLInputElement | HTMLTextAreaElement => !!e.nodeName.match(/^(INPUT|TEXTAREA)$/i);\n    const selection = window.getSelection();\n    if (elementIsEditable(e)) {\n        e.focus();\n        e.select();\n        return;\n    }\n    if (selection.setBaseAndExtent) {\n        // Safari\n        selection.setBaseAndExtent(e, 0, e, e.hasChildNodes() ? 1 : 0);\n        return;\n    }\n    if (selection.addRange && selection.removeAllRanges && document.createRange) {\n        // Mozilla or Opera 10.5+\n        const range = document.createRange();\n        range.selectNodeContents(e);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n};\nexport const selectElementPos = (e: HTMLElement, pos: number) => {\n    const range = document.createRange();\n    const selection = window.getSelection();\n    range.setStart(e.childNodes[0], pos);\n    range.collapse(true);\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\nexport const findFromAscendants = (e: HTMLElement, predict: (e: HTMLElement) => boolean) => {\n    const ascendants = [];\n    let parent = e.parentElement;\n    while (parent !== document.body) {\n        ascendants.push(parent);\n        parent = parent.parentElement;\n    }\n    return ascendants.find(predict);\n};\n// eslint-disable-next-line arrow-body-style\nexport const getPropertyDescriptor = (obj: Record<string, any>, key: string): PropertyDescriptor => {\n    return Object.getOwnPropertyDescriptor(obj, key) || getPropertyDescriptor(Object.getPrototypeOf(obj), key);\n};\nexport const getPropertyDescriptors = (obj: Function | Record<string, any>): PropertyDescriptorMap => {\n    if (typeof obj === \"function\") return Object.getOwnPropertyDescriptors(obj);\n    const proto = Object.getPrototypeOf(obj);\n    if (obj !== Object.prototype && proto === Object.prototype) return Object.getOwnPropertyDescriptors(obj);\n    return Object.assign(proto ? getPropertyDescriptors(proto) : {}, Object.getOwnPropertyDescriptors(obj));\n};\n\nexport const extToType = (ext: string): Exclude<ProjectItemType, \"folder\"> => {\n    if ([\"jspat\", \"maxpat\", \"gendsp\", \"dsppat\"].indexOf(ext) !== -1) return \"patcher\";\n    if ([\"wav\", \"aif\", \"aiff\", \"mp3\", \"aac\", \"flac\", \"ogg\", \"m4a\"].indexOf(ext) !== -1) return \"audio\";\n    if ([\"txt\", \"json\"].indexOf(ext) !== -1) return \"text\";\n    if ([\"apng\", \"avif\", \"gif\", \"jpg\", \"jpeg\", \"jfif\", \"pjpeg\", \"pjp\", \"png\", \"svg\", \"webp\", \"bmp\", \"ico\", \"cur\", \"tif\", \"tiff\"].indexOf(ext) !== -1) return \"image\";\n    if ([\"mp4\", \"webm\", \"3gp\"].indexOf(ext) !== -1) return \"video\";\n    return \"unknown\";\n};\n\nexport const max2js = (patcherIn: TMaxPatcher, mode = \"max\" as TPatcherProps[\"mode\"]): RawPatcher => {\n    const patcher: RawPatcher = { boxes: {}, lines: {} };\n    const maxPatcher = (patcherIn as TMaxPatcher).patcher;\n    patcher.props = {\n        bgColor: rgbaMax2Css(maxPatcher.bgcolor),\n        editingBgColor: rgbaMax2Css(maxPatcher.editing_bgcolor),\n        dependencies: [],\n        grid: maxPatcher.gridsize,\n        openInPresentation: !!maxPatcher.openinpresentation,\n        mode\n    };\n    const maxBoxes = maxPatcher.boxes;\n    const maxLines = maxPatcher.lines;\n    for (let i = 0; i < maxBoxes.length; i++) {\n        const maxBox = maxBoxes[i].box;\n        const numID = parseInt(maxBox.id.match(/\\d+/)[0]);\n        const id = \"box-\" + numID;\n        patcher.boxes[id] = {\n            id,\n            inlets: maxBox.numinlets,\n            outlets: maxBox.numoutlets,\n            rect: maxBox.patching_rect,\n            presentationRect: maxBox.presentation_rect,\n            background: !!maxBox.background,\n            presentation: !!maxBox.presentation,\n            text: (maxBox.maxclass === \"newobj\" ? \"\" : maxBox.maxclass + \" \") + (maxBox.text ? maxBox.text : \"\")\n        };\n    }\n    for (let i = 0; i < maxLines.length; i++) {\n        const lineArgs = maxLines[i].patchline;\n        const id = \"line-\" + i;\n        patcher.lines[id] = {\n            id,\n            src: [lineArgs.source[0].replace(/obj/, \"box\"), lineArgs.source[1]],\n            dest: [lineArgs.destination[0].replace(/obj/, \"box\"), lineArgs.destination[1]]\n        };\n    }\n    return patcher;\n};\n\nexport const js2max = (patcherIn: RawPatcher): TMaxPatcher => {\n    const maxPatcher: TMaxPatcher[\"patcher\"] = {\n        boxes: [],\n        lines: [],\n        rect: undefined,\n        bgcolor: css2RgbaMax(patcherIn.props.bgColor),\n        editing_bgcolor: css2RgbaMax(patcherIn.props.editingBgColor),\n        gridsize: patcherIn.props.grid,\n        openinpresentation: +patcherIn.props.openInPresentation\n    };\n    for (const id in patcherIn.boxes) {\n        const box = patcherIn.boxes[id];\n        const numID = parseInt(id.match(/\\d+/)[0]);\n        maxPatcher.boxes.push({\n            box: {\n                id: `obj-${numID}`,\n                maxclass: \"newobj\",\n                numinlets: box.inlets,\n                numoutlets: box.outlets,\n                patching_rect: box.rect,\n                presentation: +box.presentation,\n                background: +box.background,\n                text: box.text\n            }\n        });\n    }\n    for (const id in patcherIn.lines) {\n        const line = patcherIn.lines[id];\n        maxPatcher.lines.push({\n            patchline: {\n                source: [line.src[0].replace(/box/, \"obj\"), line.src[1]],\n                destination: [line.dest[0].replace(/box/, \"obj\"), line.dest[1]]\n            }\n        });\n    }\n    return { patcher: maxPatcher };\n};\n\nexport const convertSampleToUnit = (sample: number, unit: TAudioUnit, { sampleRate = 48000, bpm = 60, beatsPerMeasure = 4, division = 16 }) => {\n    if (unit === \"sample\") return { unit, str: sample.toString(), value: sample, values: [sample] };\n    const milliseconds = sample * 1000 / sampleRate;\n    const roundedMs = Math.round(milliseconds);\n    if (unit === \"measure\") {\n        const dpms = bpm * division / 60000;\n        const totalDivisions = dpms * milliseconds;\n        const roundedTotalDivisions = dpms * milliseconds;\n        const divisions = ~~(roundedTotalDivisions % division);\n        const beats = ~~(roundedTotalDivisions / division) % beatsPerMeasure + 1;\n        const measure = ~~(roundedTotalDivisions / beatsPerMeasure / division) + 1;\n        const str = `${measure}:${beats}.${divisions.toString().padStart(2, \"0\")}`;\n        return { unit, str, value: totalDivisions / division, values: [measure, beats, divisions] };\n    }\n    // if (unit === \"time\")\n    const ms = roundedMs % 1000;\n    const s = ~~(roundedMs / 1000) % 60;\n    const min = ~~(roundedMs / 60000) % 60;\n    const h = ~~(roundedMs / 3600000);\n    const str = !min ? `${s}.${ms.toString().padStart(3, \"0\")}`\n        : !h ? `${min}:${s.toString().padStart(2, \"0\")}.${ms.toString().padStart(3, \"0\")}`\n            : `${h}:${min.toString().padStart(2, \"0\")}:${s.toString().padStart(2, \"0\")}.${ms.toString().padStart(3, \"0\")}`;\n    return { unit, str, value: milliseconds / 1000, values: [h, min, s, ms] };\n};\nexport const MEASURE_UNIT_REGEX = /^((\\d+):)?(\\d+)\\.?(\\d+)?$/;\nexport const TIME_UNIT_REGEX = /^((\\d+):)??((\\d+):)?(\\d+)\\.?(\\d+)?$/;\nexport const convertUnitToSample = (str: string, unit: TAudioUnit, { sampleRate = 48000, bpm = 60, beatsPerMeasure = 4, division = 16 }) => {\n    if (unit === \"sample\") return +str || 0;\n    if (unit === \"measure\") {\n        const matched = str.match(MEASURE_UNIT_REGEX);\n        if (!matched) throw new Error(`String ${str} cannot be parsed to ${unit}`);\n        const [, , measureIn, beatsIn, divisionsIn] = matched;\n        const bps = bpm / 60;\n        const samplesPerBeat = sampleRate / bps;\n        let measures = +measureIn || 0;\n        let beats = +beatsIn || 0;\n        let divisions = +divisionsIn || 0;\n        beats += ~~(divisions / division);\n        divisions %= division;\n        measures += ~~(beats / beatsPerMeasure);\n        beats %= beatsPerMeasure;\n        return (measures * beatsPerMeasure + beats + divisions / division) * samplesPerBeat;\n    }\n    const matched = str.match(TIME_UNIT_REGEX);\n    if (!matched) throw new Error(`String ${str} cannot be parsed to ${unit}`);\n    const [, , hIn, , minIn, sIn, msIn] = matched;\n    let h = +hIn || 0;\n    let min = +minIn || 0;\n    let s = +sIn || 0;\n    let ms = +msIn || 0;\n    s += ~~(ms / 1000);\n    ms %= 1000;\n    min += ~~(s / 60);\n    s %= 60;\n    h += ~~(min / 60);\n    min %= 60;\n    return (h * 3600 + min * 60 + s + ms / 1000) * sampleRate;\n};\n\nexport const ab2sab = (ab: SharedArrayBuffer | ArrayBuffer) => {\n    if (ab instanceof ArrayBuffer) return ab;\n    const sab = new SharedArrayBuffer(ab.byteLength);\n    const ui8ab = new Uint8Array(ab);\n    const ui8sab = new Uint8Array(sab);\n    for (let i = 0; i < ui8ab.length; i++) {\n        ui8sab[i] = ui8ab[i];\n    }\n    return sab;\n};\n\nexport const sab2ab = (sab: SharedArrayBuffer | ArrayBuffer) => {\n    if (sab instanceof SharedArrayBuffer) return sab;\n    const ab = new ArrayBuffer(sab.byteLength);\n    const ui8ab = new Uint8Array(ab);\n    const ui8sab = new Uint8Array(sab);\n    for (let i = 0; i < ui8sab.length; i++) {\n        ui8ab[i] = ui8sab[i];\n    }\n    return ab;\n};\nexport const ab2str = (buf: ArrayBuffer) => {\n    return String.fromCharCode.apply(null, new Uint16Array(buf));\n};\n\nexport const str2ab = (str: string) => {\n    const buf = new ArrayBuffer(str.length * 2); // 2 bytes for each char\n    const bufView = new Uint16Array(buf);\n    for (let i = 0, strLen = str.length; i < strLen; i++) {\n        bufView[i] = str.charCodeAt(i);\n    }\n    return buf;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","import AudioWorkletProxyProcessor from \"./AudioWorkletProxyProcessor\";\nimport TaskManager from \"../TaskMgr\";\nimport TemporaryProjectItemManager from \"../file/TemporaryProjectItemManager\";\nimport TypedEventEmitter from \"../../utils/TypedEventEmitter\";\nimport WorkletProjectItemManager from \"../file/WorkletProjectItemManager\";\nimport WorkletGlobalPackageManager from \"../WorkletGlobalPackageManager\";\nimport Project from \"../Project\";\nimport JSPatcherWorkletSDK from \"../WorkletSDK\";\nimport type { WorkletEnvParameters, IWorkletEnvNode, IWorkletEnvProcessor, WorkletEnvOptions } from \"./WorkletEnv.types\";\nimport type { AudioWorkletGlobalScope, TypedAudioWorkletNodeOptions } from \"./TypedAudioWorklet\";\nimport type { Task, TaskError } from \"../TaskMgr\";\nimport type { EnvEventMap, IJSPatcherEnv } from \"../Env\";\nimport type { IFileEditor } from \"../file/FileEditor\";\nimport type { IFileInstance } from \"../file/FileInstance\";\nimport type { ProjectItemManagerDataForDiff } from \"../file/PersistentProjectItemManager\";\nimport type { TErrorLevel } from \"../types\";\n\nexport const processorId = \"__JSPatcher_WorkletEnv\";\ndeclare const globalThis: AudioWorkletGlobalScope;\nconst { registerProcessor } = globalThis;\n\nexport default class WorkletEnvProcessor extends AudioWorkletProxyProcessor<IWorkletEnvProcessor, IWorkletEnvNode, WorkletEnvParameters, WorkletEnvOptions> implements IWorkletEnvProcessor, IJSPatcherEnv {\n    static fnNames: (keyof IWorkletEnvNode)[] = [\"envNewLog\", \"taskBegin\", \"taskUpdate\", \"taskError\", \"taskEnd\", \"fileMgrExists\", \"fileMgrGetFileDetails\", \"fileMgrPutFile\", \"fileMgrReadDir\", \"fileMgrReadFile\", \"fileMgrWriteFile\", \"fileMgrGetPathIdMap\", \"fileMgrDiff\", \"addObjects\", \"addWorkletModule\"];\n    private readonly ee = new TypedEventEmitter<EnvEventMap>();\n    readonly thread = \"AudioWorklet\";\n    readonly os: \"Windows\" | \"MacOS\" | \"UNIX\" | \"Linux\" | \"Unknown\";\n    readonly browser: \"Unknown\" | \"Chromium\" | \"Gecko\" | \"WebKit\";\n    readonly language: string;\n    readonly generatedId: Uint32Array;\n    readonly taskMgr = new TaskManager();\n    readonly fileMgr: WorkletProjectItemManager;\n    readonly tempMgr: TemporaryProjectItemManager;\n    readonly pkgMgr: WorkletGlobalPackageManager;\n    readonly sdk = new JSPatcherWorkletSDK();\n    currentProject: Project;\n    constructor(options?: TypedAudioWorkletNodeOptions<WorkletEnvOptions>) {\n        super(options);\n        globalThis.jspatcherEnv = this;\n        const { os, browser, language, generatedId } = options.processorOptions;\n        this.os = os;\n        this.browser = browser;\n        this.language = language;\n        this.generatedId = generatedId;\n        this.fileMgr = new WorkletProjectItemManager(this);\n        this.tempMgr = new TemporaryProjectItemManager(this);\n        this.pkgMgr = new WorkletGlobalPackageManager(this);\n    }\n    async init() {\n        await this.pkgMgr.init();\n        this.currentProject = new Project(this);\n        await this.fileMgr.init();\n        await this.tempMgr.init();\n        this.bindTaskMgr();\n        this.bindFileMgr();\n    }\n    instances = new Set<IFileInstance>();\n    activeInstance: IFileInstance;\n    activeEditor: IFileEditor;\n    newLog(errorLevel: TErrorLevel, title: string, message: string, emitterIn?: any) {\n        const emitter = typeof emitterIn === \"string\" ? emitterIn : typeof emitterIn === \"object\" ? emitterIn.constructor.name : typeof emitterIn === \"function\" ? emitterIn.name : \"\";\n        this.envNewLog(errorLevel, title, message, emitter);\n    }\n    generateId(objectIn: object) {\n        return this.thread + objectIn.constructor.name + Atomics.add(this.generatedId, 0, 1);\n    }\n    registerInstance(i: IFileInstance, id?: string) {\n        this.instances.add(i);\n        i.on(\"destroy\", () => {\n            this.instances.delete(i);\n            this.ee.emit(\"instances\", Array.from(this.instances));\n        });\n        this.ee.emit(\"instances\", Array.from(this.instances));\n        if (!id) return this.generateId(i);\n        return id;\n    }\n    getInstanceById(id: string) {\n        for (const instance of this.instances) {\n            if (instance.id === id) return instance;\n        }\n        return null;\n    }\n    // get _listeners() { return this.ee._listeners; }\n    // get getListeners() { return this.ee.getListeners; }\n    get listeners() { return this.ee.listeners; }\n    get on() { return this.ee.on; }\n    get once() { return this.ee.once; }\n    get onAny() { return this.ee.onAny; }\n    get off() { return this.ee.off; }\n    get offAny() { return this.ee.offAny; }\n    get offAll() { return this.ee.offAll; }\n    get emit() { return this.ee.emit; }\n    get emitSerial() { return this.ee.emitSerial; }\n    get emitSync() { return this.ee.emitSync; }\n    get listenerCount() { return this.ee.listenerCount; }\n    bindTaskMgr() {\n        const handleTaskBegin = ({ id, message, emitter }: Task) => this.taskBegin({ id, message, emitter: typeof emitter === \"string\" ? emitter : emitter.constructor?.name });\n        const handleTaskUpdate = ({ id, message }: Task) => this.taskUpdate({ id, message });\n        const handleTaskError = ({ id, error }: TaskError) => this.taskError({ id, error });\n        const handleTaskEnd = ({ id }: Task) => this.taskEnd({ id });\n        this.taskMgr.on(\"taskBegin\", handleTaskBegin);\n        this.taskMgr.on(\"taskUpdate\", handleTaskUpdate);\n        this.taskMgr.on(\"taskError\", handleTaskError);\n        this.taskMgr.on(\"taskEnd\", handleTaskEnd);\n    }\n    handleFileMgrChange = () => {\n        if (this.fileMgr.disabled) return;\n        this.fileMgrDiff(this.fileMgr.getDataForDiff());\n    };\n    bindFileMgr() {\n        this.fileMgr.on(\"changed\", this.handleFileMgrChange);\n    }\n    async workletFileMgrDiff(diff: ProjectItemManagerDataForDiff) {\n        this.fileMgr.off(\"changed\", this.handleFileMgrChange);\n        await this.fileMgr.processDiff(diff);\n        this.fileMgr.on(\"changed\", this.handleFileMgrChange);\n    }\n    async importPackage(url: string, id: string) {\n        await this.pkgMgr.importPackage(url, id);\n    }\n    process(inputs: Float32Array[][], outputs: Float32Array[][]) {\n        if (this._disposed) return false;\n        return true;\n    }\n}\n\ntry {\n    registerProcessor(processorId, WorkletEnvProcessor);\n} catch (error) {\n    // eslint-disable-next-line no-console\n    console.warn(error);\n}\n"],"names":["TypedEventEmitter","ImporterDirSelfObject","isJSPatcherObjectConstructor","PackageManager","global","patcher","env","pkgMgr","mode","props","patcherDependencies","dependencies","patcherDependenciesNames","map","t","packagesInfo","Object","keys","id","isBuiltIn","builtInPackagesNames","indexOf","url","importedPackages","find","p","name","baseUrl","enabled","pkg","constructor","init","loadPatcherDependencies","pkgName","lib","packageRegister","emitLibChanged","taskMgr","newTask","file","onUpdate","i","length","importFromURL","e","Error","error","message","emit","libOut","rootifyDepth","Infinity","pathIn","path","slice","el","full","join","k","shift","key","searchInLib","query","limit","staticMethodOnly","sort","items","startsWith","o","push","object","searchInPkg","outs","getFromPath","ab2str","str2ab","Project","audioCtx","envIn","default","author","version","setProps","changed","keyIn","save","load","clean","fileMgr","item","getProjectItemFromPath","projectFilename","json","JSON","parse","data","stringify","projectRoot","addFile","unload","instances","project","destroy","type","description","TaskManager","tasks","_tasks","filter","errors","_errors","emitter","callback","thread","globalThis","timestamp","Date","now","_id","task","$","returnValue","handleUpdate","msg","taskError","lastError","a","b","lastTask","getTasksFromEmitter","getErrorsFromEmitter","dismissLastError","dismissAllErrors","getBase","getGlobalThis","WorkletGlobalPackageManager","Map","jsaw","Base","addObjects","getDescriptors","toDescriptor","O","isObjectDescriptor","ctor","importedObjectType","pkgIn","$self","entries","reduce","acc","v","descriptor","add","assign","fetchModule","toExport","exports","module","addWorkletModule","exported","importPackage","getter","BaseObject","Patcher","Box","Line","generateRemotedObject","Bang","isBang","JSPatcherWorkletSDK","TemporaryProjectFile","TempAudioFile","instantiate","instantiateEditor","instanceId","AudioEditor","fromProjectItem","AbstractProjectItem","AbstractProjectFile","getTypeFromFileName","_data","dataIn","fileExtension","splitted","split","fileMgrIn","parentIn","nameIn","onAny","eventName","eventData","isFolder","newData","by","emitChanged","saveAsCopy","parent","manager","clone","emitTreeChanged","saveAs","to","newName","from","move","AbstractProjectFolder","isDirty","getDescendantFiles","every","f","Set","findItem","itemIn","Array","existItem","has","uniqueName","empty","getTree","cur","isParentOf","getOrderedItems","folders","localeCompare","files","_fileMgr","_name","_isDirty","parentPath","projectPath","replace","RegExp","projectFolderName","addObserver","observer","_observers","removeObserver","delete","on","dirty","generateItemId","extToType","AbstractProjectItemManager","allItems","rec","forEach","root","allProjectItems","generateId","emptyProject","ext","getProjectItemFromId","pathArray","itemArray","pop","next","getPathIdMap","instantiateProjectPath","projectIn","FileEditor","instance","value","ctx","isInMemory","isTemporary","isReadonly","isReady","_isReady","isDestroyed","_isDestroyed","history","isLocked","fileIcon","setActive","activeEditor","isActive","handleDestroy","addEditor","handleReady","off","editorId","registerInstance","handleProjectSave","handleProjectUnload","toFileData","serialize","toTempData","undo","redo","copy","cut","paste","deleteSelected","selectAll","onUiResized","removeEditor","FileInstance","_env","_project","_file","_isReadonly","activeInstance","getEditor","size","_history","History","editor","eventListening","capture","Promise","all","editors","$editor","eventQueue","splice","saveTime","emitDirty","performance","timeOrigin","timing","navigationStart","handleEditorEvent","handleSaved","once","offAny","isUndoable","isRedoable","undoOf","redoOf","undoUntil","redoUntil","setIndex","getSyncData","syncData","PersistentProjectFile","sab","_sab","SharedArrayBuffer","byteLength","ui8ab","Uint8Array","ui8sab","lastModifiedId","readFile","Ctor","putFile","rename","newNameIn","trim","oldName","remove","Constructor","audio","image","text","video","undefined","unknown","PersistentProjectFolder","readDir","rawItem","createProjectItem","tempItem","fileDetail","getFileDetails","addFolder","folder","TempData","persistentMgr","_this","setPrototypeOf","prototype","options","TempPatcherFile","TempTextFile","TemporaryProjectFolder","typeIn","TemporaryProjectItemManager","WorkletProjectItemManager","cachedPathIdMap","fileMgrGetPathIdMap","getDataForDiff","processDiff","diff","disabled","process","$item","$parentId","current","newFile","fileMgrReadFile","fileMgrReadDir","fileMgrGetFileDetails","exists","fileMgrExists","fileMgrPutFile","writeFile","fileMgrWriteFile","oldPath","newPath","importFileZip","subfolder","taskHost","exportProjectZip","stringifyError","x","isJSPatcherObject","AbstractObject","meta","package","icon","inlets","outlets","args","isPatcherInlet","isPatcherOutlet","class","_patcher","box","_box","_meta","setMeta","metaIn","oldMeta","setData","oldData","getProp","rect","presentationRect","background","presentation","setInlets","setOutlets","outletLines","inletLines","stateIn","oldState","state","propsIn","oldProps","update","oldArgs","subscribe","postInit","updateUI","updateArgs","undoable","updateProps","updateState","fn","inlet","propsInKeys","propsKeys","outlet","compare","line","pass","outletAll","outputs","connectedOutlet","destBoxId","destInlet","lineId","connectedInlet","srcBoxId","srcOutlet","disconnectedOutlet","disconnectedInlet","post","newLog","s","info","warn","highlight","connectAudio","allLines","enable","connectAudioInlet","portIn","lines","port","connectAudioOutlet","disconnectAudio","disable","disconnectAudioInlet","disconnectAudioOutlet","applyBPF","param","bpf","currentTime","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","getSharedItem","onceCreate","newItem","tempMgr","d","handleFileMgrTreeChanged","handleTempMgrTreeChanged","toString","isUIState","uiState","isUIStateKey","thisName","superMeta","getPrototypeOf","superProps","thisProps","group","setArgs","updateUIFromProps","hidden","ignoreClick","hint","RemotedObject","proxy","patcherProcessor","handleBoxIoCountChanged","objectEmitFromWorklet","Func","New","getIO","EmptyObject","InvalidObject","func","new","RemotedImporter","import","StaticMethod","Method","Wrapper","imported","handleUpdateArgs","activeLib","_","output","loading","c","r","isHot","optional","varLength","ImportedObject","Getter","result","execute","handlePreInit","handleInlet","then","sync","AnyImportedObject","getPropertyDescriptors","Importer","getObject","writeInPath","outIn","stackIn","depthIn","depth","out","stack","jspatcherEnv","newObj","prop","enumerable","isArray","inputs","argsCount","Math","max","initialInlets","initialOutlets","call","spreadArgs","Fn","Property","NewBase","FuncBase","PropertyBase","GetterBase","SetterBase","SetterGetterBase","MethodBase","StaticPropertyBase","StaticGetterBase","StaticSetterBase","StaticSetterGetterBase","StaticMethodBase","Setter","SetterGetter","StaticProperty","StaticGetter","StaticSetter","StaticSetterGetter","DefaultImporter","isStatic","Super","setter","set","get","input","ImportedStaticMethodObject","AudioIn","index","sample","changeIO","emitPatcherChangeIO","outlet0","handlePatcherInput","AudioOut","sampleIndex","inlet0","outputAudio","In","enums","Out","Param","in","isTRect","parseToPrimitive","isTPresentationRect","isRectMovable","isRectResizable","patcherIn","boxIn","_inletLines","fill","_outletLines","maxBoxIn","patching_rect","presentation_rect","prevData","storage","_editing","_parsed","parseObjText","newMeta","getObjectMeta","getObjectConstructor","_Object","defaultSize","presentationSize","_object","UI","oIn","parsed","addInletLine","removeInletLine","addOutletLine","removeOutletLine","count","linesSetLength","uiUpdateDest","uiUpdateSrc","getInletPos","left","top","width","getOutletPos","height","inletsPositions","positions","outletsPositions","isSrc","last","getLinesBySrcID","getLinesByDestID","isOutletTo","iterator","values","done","destBox","isInletFrom","srcBox","changeText","textIn","force","oldDefaultSize","setRect","setPresentationRect","setPresentation","setBackground","position","leftIn","topIn","presentationPosition","widthIn","heightIn","getLeft","inPresentation","rectKey","setLeft","positionKey","getTop","setTop","getWidth","setWidth","sizeKey","getHeight","setHeight","bool","getIsMovable","getIsResizable","highlightPort","boxChanged","changeObject","deleteLine","boxes","strIn","REGEX","strArray","match","exec","objOut","lastProp","charAt","substr","toSerializable","mapLines","visitedBoxes","ins","recs","lineMap","sendID","sendMap","resultID","toFaustLambda","lambdaName","exprs","onces","mainIns","mainOuts","recIns","recOuts","toExpr","reverse","recIn","recOut","in_","toNormalExpr","unshift","toFaustDspCode","inspectFaustPatcher","code","imports","effects","boxId","fxOnces","fxExprs","fxIns","toOnceExpr","isConnectableByAudio","fromConnection","outletAudioConnections","toConnection","inletAudioConnections","node","isWamNode","isWebAudioModule","line1","line2","positionHash","lineIn","calcType","_type","src","dest","updateType","setSrc","srcId","getSrc","srcPos","setDest","destId","getDest","destPos","getLinesByBox","isAudioParam","AudioParam","disconnect","disconnectEvents","connect","connectEvents","srcMeta","destMeta","srcType","destType","PatcherEditor","PatcherHistory","max2js","js2max","_state","log","selected","preventEmitChanged","bgColor","editingBgColor","grid","openInPresentation","boxIndexCount","lineIndexCount","activePkg","js","gen","faust","fileName","emitGraphChanged","ArrayBuffer","Response","splitName","extMap","jspat","maxpat","gendsp","dsppat","modeIn","$init","createBox","numID","parseInt","createLine","getPatcherNode","PatcherNode","register","audioWorklet","patcherNode","fileId","loadFromURL","fetch","loadFromString","sIn","loadFromFile","reader","FileReader","onload","onerror","readAsText","addPackage","namespace","removePackage","findIndex","className","changeBoxText","oldText","deleteBox","canCreateLine","changeLineSrc","oldSrc","changeLineDest","destOutlet","oldDest","srcOuts","destIns","srcOutsWraped","concat","destInsWraped","idOut","idIn","inputAudio","inputParam","_inletAudioConnections","_outletAudioConnections","inspectAudioIO","inputBoxes","outputBoxes","parametersBoxes","arg0","metaFromPatcher","errorLevel","title","publicProps","spacing","Blob","arrayBuffer","locked","showGrid","snapToGrid","setState","resolve","reject","handleChanged","handleChangeBoxText","handlePassiveDeleteLine","handleBoxChanged","deselectAll","createBoxFromFile","obj","deselect","changeBox","change","select","ids","selectAllBoxes","selectOnly","selectedToString","lineSet","pasteToPatcher","clipboard","idMap","pasted","$postInit","maxBoxes","maxBox","numinlets","numoutlets","maxclass","createdBoxes","maxLines","lineArgs","patchline","source","destination","createdLine","create","objects","created","boxSet","deleted","promises","navigator","writeText","readText","duplicate","selectRegion","selectionRect","selectedBefore","right","bottom","boxLeft","boxTop","boxWidth","boxHeight","boxRight","boxBottom","moveSelectedBox","dragOffset","refBoxID","delta","y","round","moveEnd","$left","$top","resizeSelectedBox","resize","resizeEnd","$width","$height","min","sizingX","sizing","sizingY","findNearestPort","findSrc","nearest","minDistance","currentPos","currentDistance","pos","distance","canCreate","highlightNearestPort","origPos","tempLine","inspector","found","dockUI","dockable","TextEditor","AudioWorkletProcessor","Processor","fnNames","resolves","rejects","messagePortRequestId","handleDisposed","removeEventListener","handleMessage","close","postMessage","_disposed","start","addEventListener","$AnyEventType","Symbol","listeners","_listeners","getListeners","listener","listenerWithOff","arg","anyListeners","excludeAny","exclude","l","emitSerial","returnValues","emitSync","offAll","listenerCount","anyListenerCount","SharedDataNoValue","TempManagerFolder","isStringArray","isNumberArray","isMIDIEvent","rgbaMax2Css","maxColor","cssColor","floor","css2RgbaMax","color","matched","decodeBPF","tupleLength","numbers","isFinite","tuples","$tuple","decodeCurve","decodeLine","detectOS","appVersion","detectBrowserCore","window","chrome","InstallTrigger","vendor","roundedRect","radius","radii","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","stroke","fillRoundedRect","selectElementRange","elementIsEditable","nodeName","selection","getSelection","focus","setBaseAndExtent","hasChildNodes","addRange","removeAllRanges","document","createRange","range","selectNodeContents","selectElementPos","setStart","childNodes","collapse","findFromAscendants","predict","ascendants","parentElement","body","getPropertyDescriptor","getOwnPropertyDescriptor","getOwnPropertyDescriptors","proto","maxPatcher","bgcolor","editing_bgcolor","gridsize","openinpresentation","convertSampleToUnit","unit","sampleRate","bpm","beatsPerMeasure","division","str","milliseconds","roundedMs","dpms","totalDivisions","roundedTotalDivisions","divisions","beats","measure","padStart","ms","h","MEASURE_UNIT_REGEX","TIME_UNIT_REGEX","convertUnitToSample","measureIn","beatsIn","divisionsIn","bps","samplesPerBeat","measures","hIn","minIn","msIn","ab2sab","ab","sab2ab","buf","String","fromCharCode","apply","Uint16Array","bufView","strLen","charCodeAt","AudioWorkletProxyProcessor","processorId","registerProcessor","WorkletEnvProcessor","fileMgrDiff","os","browser","language","generatedId","processorOptions","currentProject","bindTaskMgr","bindFileMgr","emitterIn","envNewLog","objectIn","Atomics","ee","getInstanceById","handleTaskBegin","taskBegin","handleTaskUpdate","taskUpdate","handleTaskError","handleTaskEnd","taskEnd","handleFileMgrChange","workletFileMgrDiff","console"],"sourceRoot":""}