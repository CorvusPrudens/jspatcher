{"version":3,"sources":["webpack://JSPatcher/./src/core/objects/Std.tsx"],"names":["StdObject","DefaultObject","print","title","subscribe","on","inlets","outlets","args","state","data","inlet","isBang","patcher","newLog","box","Util","isHot","type","description","optional","default","bang","outlet","Bang","loadbang","unloadbang","For","start","end","step","times","isFinite","error","i","ForIn","buffer","key","outletAll","gate","pass","set","undefined","value","e","message","get","keys","slice","length","resetIO","varLength","If","sel","array","testsCount","inletMeta0","inletMeta1","meta","outletMeta0","outletMeta1","foundIndex","indexOf","v","toString","sharedItem","handleFilePathChanged","setState","projectPath","handleSaved","subscribeItem","file","addObserver","reload","unsubscribeItem","off","removeObserver","item","getSharedItem","save","lambda","argsCount","result","delay","time","ref","Set","add","window","setTimeout","forEach","clearTimeout","call","instance","inputs","initialInlets","initialOutlets","Math","max","getProp","props","execute","output","m","Promise","loading","then","r","callback","updateUI","sync","thispatcher","for","if"],"mappings":"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","file":"js/72c74b8dbd0b5e4c19b9.js","sourcesContent":["import * as Util from \"util\";\nimport Patcher from \"../patcher/Patcher\";\nimport { DefaultObject, Bang, isBang } from \"./Base\";\nimport { TMeta } from \"../types\";\nimport ProjectItem, { ProjectItemEventMap } from \"../file/ProjectItem\";\nimport TempItem from \"../file/TempItem\";\n\nclass StdObject<D = {}, S = {}, I extends any[] = any[], O extends any[] = any[], A extends any[] = any[], P = {}, U = {}> extends DefaultObject<D, S, I, O, A, P, U> {\n    static package = \"Std\";\n    static author = \"Fr0stbyteR\";\n    static version = \"1.0.0\";\n    static description = \"Standard Objects\";\n}\n\nclass print extends StdObject<{}, { title: string }, [any], [], [string]> {\n    static description = \"Print to console\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Anything to stringify\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"string\",\n        optional: true,\n        default: \"Print\",\n        description: \"Title\"\n    }];\n    state = { title: \"Print\" };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 0;\n        });\n        this.on(\"updateArgs\", (args) => {\n            if (typeof args[0] !== \"undefined\") this.state.title = args[0];\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (isBang(data)) {\n                    this.patcher.newLog(\"none\", this.state.title, \"Bang\", this.box);\n                } else {\n                    this.patcher.newLog(\"none\", this.state.title, typeof data === \"string\" ? data : Util.inspect(data), this.box);\n                }\n            }\n        });\n    }\n}\nclass bang extends StdObject<{}, {}, [any], [Bang], []> {\n    static description = \"Transform to bang\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Anything to transform to a bang\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"Bang when inlet\"\n    }];\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n        });\n        this.on(\"inlet\", ({ inlet }) => {\n            if (inlet === 0) this.outlet(0, new Bang());\n        });\n    }\n}\nclass loadbang extends StdObject<{}, {}, [], [Bang], []> {\n    static description = \"Bang when patcher is loaded\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Anything to transform to a bang\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"Bang when inlet\"\n    }];\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n            this.patcher.on(\"postInited\", () => this.outlet(0, new Bang()));\n        });\n    }\n}\nclass unloadbang extends StdObject<{}, {}, [], [Bang], []> {\n    static description = \"Bang when patcher will be unloaded\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Anything to transform to a bang\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"Bang when inlet\"\n    }];\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n            this.patcher.on(\"unload\", () => this.outlet(0, new Bang()));\n        });\n    }\n}\nclass For extends StdObject<{}, { start: number; end: number; step: number }, [Bang, number, number, number], [Bang, number], [number, number, number?]> {\n    static description = \"Number iterator\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Do iterations\"\n    }, {\n        isHot: false,\n        type: \"number\",\n        description: \"Set the starting point\"\n    }, {\n        isHot: false,\n        type: \"number\",\n        description: \"Set the end point (excluded)\"\n    }, {\n        isHot: false,\n        type: \"number\",\n        description: \"Set the step\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"Bang when finished\"\n    }, {\n        type: \"number\",\n        description: \"Output all iterations one by one\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"number\",\n        optional: false,\n        description: \"The starting point\"\n    }, {\n        type: \"number\",\n        optional: false,\n        description: \"The end point (excluded)\"\n    }, {\n        type: \"number\",\n        optional: true,\n        default: 1,\n        description: \"The step\"\n    }];\n    state = { start: 0, end: 0, step: 1 };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 4;\n            this.outlets = 2;\n        });\n        this.on(\"updateArgs\", (args) => {\n            this.state.start = +args[0] || 0;\n            this.state.end = +args[1] || 0;\n            this.state.step = +args[2] || 1;\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (isBang(data)) {\n                    const { start, end, step } = this.state;\n                    const times = (end - start) / step;\n                    if (!isFinite(times) || times < 0) {\n                        this.error(`Infinite loop from ${start} to ${end} with step ${step}.`);\n                        return;\n                    }\n                    for (let i = start; i < end; i += step) {\n                        this.outlet(1, i);\n                    }\n                    this.outlet(0, new Bang());\n                }\n            } else if (inlet === 1) this.state.start = +data;\n            else if (inlet === 2) this.state.end = +data;\n            else if (inlet === 3) this.state.step = +data;\n        });\n    }\n}\nclass ForIn extends StdObject<{}, { buffer: any }, [any, any], [Bang, string | number | symbol, any], [Record<string, any>]> {\n    static description = \"Object key-value iterator\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Iterate input, bang to redo\"\n    }, {\n        isHot: false,\n        type: \"object\",\n        description: \"Set the iteration object\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"Bang when finished\"\n    }, {\n        type: \"anything\",\n        description: \"Key\"\n    }, {\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"object\",\n        optional: true,\n        description: \"Initial object to iterate\"\n    }];\n    state = { buffer: null as any };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 2;\n            this.outlets = 3;\n        });\n        this.on(\"updateArgs\", args => this.state.buffer = args[0]);\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (!isBang(data)) this.state.buffer = data;\n                for (const key in this.state.buffer) {\n                    this.outletAll([, key, this.state.buffer[key]]);\n                }\n                this.outlet(0, new Bang());\n            } else if (inlet === 1) {\n                this.state.buffer = data;\n            }\n        });\n    }\n}\nclass gate extends StdObject<{}, { pass: boolean }, [any, any], [any], [any]> {\n    static description = \"Bypass or block incoming data\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Anything to bypass\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Test, falsable to block\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Anything bypass\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        default: true,\n        description: \"default state\"\n    }];\n    state = { pass: true };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 2;\n            this.outlets = 1;\n        });\n        this.on(\"updateArgs\", (args) => {\n            this.state.pass = args[0] === \"undefined\" || args[0] === \"\" || !!args[0];\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (this.state.pass) this.outlet(0, data);\n            } else if (inlet === 1) {\n                this.state.pass = !!data;\n            }\n        });\n    }\n}\nclass set extends StdObject<{}, { key: string | number; value: any }, [Record<string, any> | any[], string | number, any], [Record<string, any> | any[]], [string | number, any]> {\n    static description = \"Set a property of incoming object\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"object\",\n        description: \"Object to set a property\"\n    }, {\n        isHot: false,\n        type: \"string\",\n        description: \"Key / name of the property\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Value to set to the property\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Object bypass\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: false,\n        description: \"Initial key of the property\"\n    }, {\n        type: \"anything\",\n        optional: true,\n        default: undefined,\n        description: \"Initial value of the property\"\n    }];\n    state = { key: undefined as string | number, value: undefined as any };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 3;\n            this.outlets = 1;\n        });\n        this.on(\"updateArgs\", (args) => {\n            if (typeof args[0] === \"string\" || typeof args[0] === \"number\") this.state.key = args[0];\n            if (typeof args[1] !== \"undefined\") this.state.value = args[1];\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (typeof this.state.key === \"string\" || typeof this.state.key === \"number\") {\n                    try {\n                        data[this.state.key] = this.state.value;\n                        this.outlet(0, data);\n                    } catch (e) {\n                        this.error((e as Error).message);\n                    }\n                } else {\n                    this.error(\"Key not defined\");\n                }\n            } else if (inlet === 1) {\n                if (typeof data === \"string\" || typeof data === \"number\") this.state.key = data;\n                else this.error(\"Key should be a number or a string\");\n            } else if (inlet === 2) {\n                this.state.value = data;\n            }\n        });\n    }\n}\nclass get extends StdObject<{}, { keys: (string | number)[] }, [Record<string, any> | any[], ...(string | number)[]], any[], (string | number)[]> {\n    static description = \"Get properties of incoming object\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"object\",\n        description: \"Object to get a property\"\n    }, {\n        isHot: false,\n        type: \"string\",\n        varLength: true,\n        description: \"Key / name of the property\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        varLength: true,\n        description: \"Value got\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: false,\n        varLength: true,\n        description: \"Initial key of the property\"\n    }];\n    state = { keys: [] as (string | number)[] };\n    resetIO = () => {\n        const { args } = this.box;\n        this.state.keys = args.slice();\n        this.inlets = 1 + args.length;\n        this.outlets = args.length;\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", this.resetIO);\n        this.on(\"updateArgs\", this.resetIO);\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                for (let i = this.state.keys.length - 1; i >= 0; i--) {\n                    const key = this.state.keys[i];\n                    if (typeof key === \"string\" || typeof key === \"number\") {\n                        try {\n                            this.outlet(i, (data as any)[key]);\n                        } catch (e) {\n                            this.error((e as Error).message);\n                        }\n                    }\n                }\n            } else {\n                if (typeof data === \"string\" || typeof data === \"number\") this.state.keys[inlet - 1] = data;\n                else this.error(\"Key should be a number or a string\");\n            }\n        });\n    }\n}\nclass If extends StdObject<{}, {}, [boolean], [Bang, Bang]> {\n    static description = \"Output a bang on true / false\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"boolean\",\n        description: \"True for a bang to left outlet, false for right\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"True?\"\n    }, {\n        type: \"bang\",\n        description: \"False?\"\n    }];\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 2;\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) this.outlet(+!data, new Bang());\n        });\n    }\n}\nclass sel extends StdObject<{}, { array: any[] }, any[], (Bang | any)[], any[]> {\n    static description = \"Output a bang on a matched inlet\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        varLength: false,\n        description: \"Test for match\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Set value for match\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        varLength: false,\n        description: \"Bang if match\"\n    }, {\n        type: \"anything\",\n        varLength: false,\n        description: \"Bypass if not matched\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: false,\n        varLength: true,\n        description: \"Initial value for match\"\n    }];\n    state = { array: [] as any[] };\n    resetIO = () => {\n        const { args } = this.box;\n        const testsCount = args.length;\n        const [inletMeta0, inletMeta1] = sel.meta.inlets;\n        const [outletMeta0, outletMeta1] = sel.meta.inlets;\n        const { meta } = this;\n        meta.inlets = [inletMeta0];\n        meta.outlets = [];\n        for (let i = 0; i < testsCount; i++) {\n            meta.outlets[i] = { ...outletMeta0 };\n            meta.outlets[i].description += ` index ${i}`;\n            meta.inlets[i + 1] = { ...inletMeta1 };\n            meta.inlets[i + 1].description += ` index ${i}`;\n        }\n        meta.outlets[testsCount] = outletMeta1;\n        this.meta = meta;\n        this.state.array = args.slice();\n        this.inlets = 1 + testsCount;\n        this.outlets = testsCount + 1;\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", this.resetIO);\n        this.on(\"updateArgs\", this.resetIO);\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                const foundIndex = this.state.array.indexOf(data);\n                if (foundIndex === -1) this.outlet(this.outlets - 1, data);\n                else this.outlet(foundIndex, new Bang());\n            } else {\n                this.state.array[inlet - 1] = data;\n            }\n        });\n    }\n}\nclass v extends StdObject<{}, { key: string; value: any; sharedItem: ProjectItem | TempItem }, [Bang | any, any, string | number], [any], [string | number, any]> {\n    static description = \"Store anything as named sharable variable\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Bang to output stored value, anything to set the value then output it.\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Anything to set the value.\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set variable name.\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        description: \"Variable name\"\n    }, {\n        type: \"anything\",\n        optional: true,\n        description: \"Initial value\"\n    }];\n    state: { key: string; value: any; sharedItem: ProjectItem | TempItem } = { key: this.box.args[0]?.toString(), value: undefined, sharedItem: null };\n    subscribe() {\n        super.subscribe();\n        const handleFilePathChanged = () => {\n            this.setState({ key: this.state.sharedItem?.projectPath });\n        };\n        const handleSaved = (e: ProjectItemEventMap[\"saved\"]) => {\n            if (e === this) return;\n            this.setState({ value: this.state.sharedItem?.data });\n        };\n        const subscribeItem = async () => {\n            const file = this.state.sharedItem;\n            if (!file) return;\n            await file.addObserver(this);\n            file.on(\"destroyed\", reload);\n            file.on(\"nameChanged\", handleFilePathChanged);\n            file.on(\"pathChanged\", handleFilePathChanged);\n            file.on(\"saved\", handleSaved);\n        };\n        const unsubscribeItem = async () => {\n            const file = this.state.sharedItem;\n            if (!file) return;\n            file.off(\"destroyed\", reload);\n            file.off(\"nameChanged\", handleFilePathChanged);\n            file.off(\"pathChanged\", handleFilePathChanged);\n            file.off(\"saved\", handleSaved);\n            await file.removeObserver(this);\n        };\n        const reload = async () => {\n            await unsubscribeItem();\n            const { key } = this.state;\n            try {\n                const { item } = await this.getSharedItem(key, \"unknown\", () => this.state.value);\n                this.setState({ value: item.data, sharedItem: item });\n            } catch (error) {\n                this.error(error);\n            } finally {\n                await subscribeItem();\n            }\n        };\n        this.on(\"preInit\", () => {\n            this.inlets = 3;\n            this.outlets = 1;\n        });\n        this.on(\"updateArgs\", async (args) => {\n            const key = args[0]?.toString();\n            if (key !== this.state.key) {\n                this.setState({ key });\n                await reload();\n            } else {\n                if (typeof args[1] !== \"undefined\") {\n                    this.setState({ value: args[1] });\n                    this.state.sharedItem?.save?.(this.state.value, this);\n                }\n            }\n        });\n        this.on(\"postInit\", reload);\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (!isBang(data)) {\n                    this.setState({ value: data });\n                    this.state.sharedItem?.save?.(this.state.value, this);\n                }\n                this.outlet(0, this.state.value);\n            } else if (inlet === 1) {\n                this.setState({ value: data });\n                this.state.sharedItem?.save?.(this.state.value, this);\n            } else if (inlet === 2) {\n                if (typeof data === \"string\" || typeof data === \"number\") {\n                    const key = data.toString() || \"\";\n                    if (key !== this.state.key) {\n                        this.setState({ key });\n                        reload();\n                    }\n                }\n            }\n        });\n        this.on(\"destroy\", unsubscribeItem);\n    }\n}\nclass lambda extends StdObject<{}, { argsCount: number; result: any }, [Bang, any], [(...args: any[]) => any, ...any[]], [number]> {\n    static description = \"Generate anonymous function, output args when called\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Output anonymous function\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Result of the anonymous function\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"function\",\n        description: \"Anonymous function\"\n    }, {\n        type: \"bang\",\n        description: \"bang while lambda is called\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"If args=0, outlet args as array, else argument of current index\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"number\",\n        optional: true,\n        default: 0,\n        description: \"Arguments count\"\n    }];\n    state = { argsCount: 0, result: undefined as any };\n    lambda = (...args: any[]) => {\n        this.state.result = undefined;\n        if (this.state.argsCount === 0) {\n            this.outletAll([, new Bang(), args]);\n        } else {\n            this.outletAll([, new Bang(), ...args]);\n        }\n        return this.state.result; // After outlet, result will be received.\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 2;\n            this.outlets = 3;\n        });\n        this.on(\"updateArgs\", () => {\n            const { args } = this.box;\n            if (typeof args[0] === \"number\" && args[0] >= 0) {\n                this.state.argsCount = ~~args[0];\n                this.outlets = 2 + this.state.argsCount;\n            }\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (isBang(data)) this.outlet(0, this.lambda);\n            } else if (inlet === 1) this.state.result = data;\n        });\n    }\n}\nclass delay extends StdObject<{}, { time: number; ref: Set<number> }, [any, number], [any]> {\n    static description = \"Delay an input\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Input to be delayed\"\n    }, {\n        isHot: false,\n        type: \"number\",\n        description: \"Delay time in seconds\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Delayed input\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"number\",\n        optional: true,\n        default: 0,\n        description: \"Default delay time\"\n    }];\n    state = { time: 0, ref: new Set<number>() };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 2;\n            this.outlets = 1;\n        });\n        this.on(\"updateArgs\", () => {\n            const { args } = this.box;\n            if (typeof args[0] === \"number\") this.state.time = +args[0];\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                this.state.ref.add(window.setTimeout(() => this.outlet(0, data), this.state.time || 0));\n            } else if (inlet === 1) {\n                this.state.time = +data;\n            }\n        });\n        this.on(\"destroy\", () => {\n            this.state.ref.forEach(ref => window.clearTimeout(ref));\n        });\n    }\n}\n\ntype CallState = { instance: any; inputs: any[]; result: any };\nexport class call extends DefaultObject<{}, CallState, [any | Bang, ...any[]], any[], [string, ...any[]], { args: number; sync: boolean }, { loading: boolean }> {\n    static description = \"Call a method of current object\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to read\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Method argument\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Method return value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after method called\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"string\",\n        optional: false,\n        description: \"Method name\"\n    }, {\n        type: \"anything\",\n        optional: true,\n        varLength: true,\n        description: \"Set arguments while loaded\"\n    }];\n    static props: TMeta[\"props\"] = {\n        args: {\n            type: \"number\",\n            default: 0,\n            description: \"arguments count for method\"\n        },\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    state: CallState = { instance: undefined, inputs: [], result: null };\n    initialInlets = 1;\n    initialOutlets = 2;\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = this.initialInlets;\n            this.outlets = this.initialOutlets;\n        });\n        this.on(\"updateArgs\", (args) => {\n            this.state.inputs = args.slice(1);\n            const argsCount = Math.max(args.length - 1, ~~+this.getProp(\"args\"));\n            this.inlets = Math.max(1, this.initialInlets + argsCount);\n            this.outlets = this.initialOutlets + argsCount;\n        });\n        this.on(\"updateProps\", (props) => {\n            if (props.args && typeof props.args === \"number\" && props.args >= 0) {\n                const argsCount = Math.max(this.box.args.length - 1, ~~props.args);\n                this.inlets = Math.max(1, this.initialInlets + argsCount);\n                this.outlets = this.initialOutlets + argsCount;\n            }\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (!isBang(data)) this.state.instance = data;\n                if (this.execute()) this.output();\n            } else {\n                this.state.inputs[inlet - 1] = data;\n            }\n        });\n    }\n    execute() {\n        const m = this.box.args[0];\n        try {\n            this.state.result = this.state.instance[m](...this.state.inputs);\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this.state.result, this.state.instance, ...this.state.inputs]);\n    output() {\n        if (this.state.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this.state.result.then((r) => {\n                this.loading = false;\n                this.state.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\nclass thispatcher extends StdObject<{}, {}, [Bang], [Patcher]> {\n    static description = \"Current patcher instance\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Bang to output patcher instance\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"object\",\n        description: \"Patcher instance\"\n    }];\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                this.outlet(0, this.patcher);\n            }\n        });\n    }\n}\n\nexport default { print, for: For, \"for-in\": ForIn, if: If, gate, sel, set, get, call, v, lambda, bang, loadbang, unloadbang, delay, thispatcher };\n"],"sourceRoot":""}