{"version":3,"sources":["webpack://JSPatcher/./src/core/objects/Std.tsx"],"names":["StdObject","DefaultObject","print","title","subscribe","on","inlets","outlets","args","state","data","inlet","Bang","patcher","newLog","box","Util","isHot","type","description","optional","default","bang","outlet","loadbang","unloadbang","For","start","end","step","times","isFinite","error","i","ForIn","buffer","key","outletAll","gate","pass","set","undefined","value","e","message","get","keys","slice","length","resetIO","varLength","If","sel","array","testsCount","inletMeta0","inletMeta1","meta","outletMeta0","outletMeta1","foundIndex","indexOf","v","SharedDataNoValue","sharedDataKey","reload","sharedData","unsubscribe","shared","toString","lambda","argsCount","result","delay","time","ref","Set","add","window","setTimeout","forEach","clearTimeout","call","instance","inputs","initialInlets","initialOutlets","Math","max","getProp","props","execute","output","m","Promise","loading","then","r","callback","updateUI","sync","thispatcher","for","if"],"mappings":"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","file":"js/ba4aec43557d3a04a024.js","sourcesContent":["import * as Util from \"util\";\nimport Patcher from \"../patcher/Patcher\";\nimport { DefaultObject, Bang } from \"./Base\";\nimport { TMeta } from \"../types\";\nimport { SharedDataNoValue } from \"../../utils/symbols\";\n\nclass StdObject<D = {}, S = {}, I extends any[] = any[], O extends any[] = any[], A extends any[] = any[], P = {}, U = {}> extends DefaultObject<D, S, I, O, A, P, U> {\n    static package = \"Std\";\n    static author = \"Fr0stbyteR\";\n    static version = \"1.0.0\";\n    static description = \"Standard Objects\";\n}\n\nclass print extends StdObject<{}, { title: string }, [any], [], [string]> {\n    static description = \"Print to console\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Anything to stringify\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"string\",\n        optional: true,\n        default: \"Print\",\n        description: \"Title\"\n    }];\n    state = { title: \"Print\" };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 0;\n        });\n        this.on(\"updateArgs\", (args) => {\n            if (typeof args[0] !== \"undefined\") this.state.title = args[0];\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (data instanceof Bang) {\n                    this.patcher.newLog(\"none\", this.state.title, \"Bang\", this.box);\n                } else {\n                    this.patcher.newLog(\"none\", this.state.title, typeof data === \"string\" ? data : Util.inspect(data), this.box);\n                }\n            }\n        });\n    }\n}\nclass bang extends StdObject<{}, {}, [any], [Bang], []> {\n    static description = \"Transform to bang\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Anything to transform to a bang\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"Bang when inlet\"\n    }];\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n        });\n        this.on(\"inlet\", ({ inlet }) => {\n            if (inlet === 0) this.outlet(0, new Bang());\n        });\n    }\n}\nclass loadbang extends StdObject<{}, {}, [], [Bang], []> {\n    static description = \"Bang when patcher is loaded\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Anything to transform to a bang\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"Bang when inlet\"\n    }];\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n            this.patcher.on(\"ready\", () => this.outlet(0, new Bang()));\n        });\n    }\n}\nclass unloadbang extends StdObject<{}, {}, [], [Bang], []> {\n    static description = \"Bang when patcher will be unloaded\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Anything to transform to a bang\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"Bang when inlet\"\n    }];\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n            this.patcher.on(\"unload\", () => this.outlet(0, new Bang()));\n        });\n    }\n}\nclass For extends StdObject<{}, { start: number; end: number; step: number }, [Bang, number, number, number], [Bang, number], [number, number, number?]> {\n    static description = \"Number iterator\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Do iterations\"\n    }, {\n        isHot: false,\n        type: \"number\",\n        description: \"Set the starting point\"\n    }, {\n        isHot: false,\n        type: \"number\",\n        description: \"Set the end point (excluded)\"\n    }, {\n        isHot: false,\n        type: \"number\",\n        description: \"Set the step\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"Bang when finished\"\n    }, {\n        type: \"number\",\n        description: \"Output all iterations one by one\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"number\",\n        optional: false,\n        description: \"The starting point\"\n    }, {\n        type: \"number\",\n        optional: false,\n        description: \"The end point (excluded)\"\n    }, {\n        type: \"number\",\n        optional: true,\n        default: 1,\n        description: \"The step\"\n    }];\n    state = { start: 0, end: 0, step: 1 };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 4;\n            this.outlets = 2;\n        });\n        this.on(\"updateArgs\", (args) => {\n            this.state.start = +args[0] || 0;\n            this.state.end = +args[1] || 0;\n            this.state.step = +args[2] || 1;\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (data instanceof Bang) {\n                    const { start, end, step } = this.state;\n                    const times = (end - start) / step;\n                    if (!isFinite(times) || times < 0) {\n                        this.error(`Infinite loop from ${start} to ${end} with step ${step}.`);\n                        return;\n                    }\n                    for (let i = start; i < end; i += step) {\n                        this.outlet(1, i);\n                    }\n                    this.outlet(0, new Bang());\n                }\n            } else if (inlet === 1) this.state.start = +data;\n            else if (inlet === 2) this.state.end = +data;\n            else if (inlet === 3) this.state.step = +data;\n        });\n    }\n}\nclass ForIn extends StdObject<{}, { buffer: any }, [any, any], [Bang, string | number | symbol, any], [Record<string, any>]> {\n    static description = \"Object key-value iterator\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Iterate input, bang to redo\"\n    }, {\n        isHot: false,\n        type: \"object\",\n        description: \"Set the iteration object\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"Bang when finished\"\n    }, {\n        type: \"anything\",\n        description: \"Key\"\n    }, {\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"object\",\n        optional: true,\n        description: \"Initial object to iterate\"\n    }];\n    state = { buffer: null as any };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 2;\n            this.outlets = 3;\n        });\n        this.on(\"updateArgs\", args => this.state.buffer = args[0]);\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (!(data instanceof Bang)) this.state.buffer = data;\n                for (const key in this.state.buffer) {\n                    this.outletAll([, key, this.state.buffer[key]]);\n                }\n                this.outlet(0, new Bang());\n            } else if (inlet === 1) {\n                this.state.buffer = data;\n            }\n        });\n    }\n}\nclass gate extends StdObject<{}, { pass: boolean }, [any, any], [any], [any]> {\n    static description = \"Bypass or block incoming data\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Anything to bypass\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Test, falsable to block\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Anything bypass\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        default: true,\n        description: \"default state\"\n    }];\n    state = { pass: true };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 2;\n            this.outlets = 1;\n        });\n        this.on(\"updateArgs\", (args) => {\n            this.state.pass = args[0] === \"undefined\" || args[0] === \"\" || !!args[0];\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (this.state.pass) this.outlet(0, data);\n            } else if (inlet === 1) {\n                this.state.pass = !!data;\n            }\n        });\n    }\n}\nclass set extends StdObject<{}, { key: string | number; value: any }, [Record<string, any> | any[], string | number, any], [Record<string, any> | any[]], [string | number, any]> {\n    static description = \"Set a property of incoming object\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"object\",\n        description: \"Object to set a property\"\n    }, {\n        isHot: false,\n        type: \"string\",\n        description: \"Key / name of the property\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Value to set to the property\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Object bypass\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: false,\n        description: \"Initial key of the property\"\n    }, {\n        type: \"anything\",\n        optional: true,\n        default: undefined,\n        description: \"Initial value of the property\"\n    }];\n    state = { key: undefined as string | number, value: undefined as any };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 3;\n            this.outlets = 1;\n        });\n        this.on(\"updateArgs\", (args) => {\n            if (typeof args[0] === \"string\" || typeof args[0] === \"number\") this.state.key = args[0];\n            if (typeof args[1] !== \"undefined\") this.state.value = args[1];\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (typeof this.state.key === \"string\" || typeof this.state.key === \"number\") {\n                    try {\n                        data[this.state.key] = this.state.value;\n                        this.outlet(0, data);\n                    } catch (e) {\n                        this.error((e as Error).message);\n                    }\n                } else {\n                    this.error(\"Key not defined\");\n                }\n            } else if (inlet === 1) {\n                if (typeof data === \"string\" || typeof data === \"number\") this.state.key = data;\n                else this.error(\"Key should be a number or a string\");\n            } else if (inlet === 2) {\n                this.state.value = data;\n            }\n        });\n    }\n}\nclass get extends StdObject<{}, { keys: (string | number)[] }, [Record<string, any> | any[], ...(string | number)[]], any[], (string | number)[]> {\n    static description = \"Get properties of incoming object\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"object\",\n        description: \"Object to get a property\"\n    }, {\n        isHot: false,\n        type: \"string\",\n        varLength: true,\n        description: \"Key / name of the property\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        varLength: true,\n        description: \"Value got\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: false,\n        varLength: true,\n        description: \"Initial key of the property\"\n    }];\n    state = { keys: [] as (string | number)[] };\n    resetIO = () => {\n        const { args } = this.box;\n        this.state.keys = args.slice();\n        this.inlets = 1 + args.length;\n        this.outlets = args.length;\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", this.resetIO);\n        this.on(\"updateArgs\", this.resetIO);\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                for (let i = this.state.keys.length - 1; i >= 0; i--) {\n                    const key = this.state.keys[i];\n                    if (typeof key === \"string\" || typeof key === \"number\") {\n                        try {\n                            this.outlet(i, (data as any)[key]);\n                        } catch (e) {\n                            this.error((e as Error).message);\n                        }\n                    }\n                }\n            } else {\n                if (typeof data === \"string\" || typeof data === \"number\") this.state.keys[inlet - 1] = data;\n                else this.error(\"Key should be a number or a string\");\n            }\n        });\n    }\n}\nclass If extends StdObject<{}, {}, [boolean], [Bang, Bang]> {\n    static description = \"Output a bang on true / false\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"boolean\",\n        description: \"True for a bang to left outlet, false for right\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        description: \"True?\"\n    }, {\n        type: \"bang\",\n        description: \"False?\"\n    }];\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 2;\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) this.outlet(+!data, new Bang());\n        });\n    }\n}\nclass sel extends StdObject<{}, { array: any[] }, any[], (Bang | any)[], any[]> {\n    static description = \"Output a bang on a matched inlet\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        varLength: false,\n        description: \"Test for match\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Set value for match\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"bang\",\n        varLength: false,\n        description: \"Bang if match\"\n    }, {\n        type: \"anything\",\n        varLength: false,\n        description: \"Bypass if not matched\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: false,\n        varLength: true,\n        description: \"Initial value for match\"\n    }];\n    state = { array: [] as any[] };\n    resetIO = () => {\n        const { args } = this.box;\n        const testsCount = args.length;\n        const [inletMeta0, inletMeta1] = sel.meta.inlets;\n        const [outletMeta0, outletMeta1] = sel.meta.inlets;\n        const { meta } = this;\n        meta.inlets = [inletMeta0];\n        meta.outlets = [];\n        for (let i = 0; i < testsCount; i++) {\n            meta.outlets[i] = { ...outletMeta0 };\n            meta.outlets[i].description += ` index ${i}`;\n            meta.inlets[i + 1] = { ...inletMeta1 };\n            meta.inlets[i + 1].description += ` index ${i}`;\n        }\n        meta.outlets[testsCount] = outletMeta1;\n        this.meta = meta;\n        this.state.array = args.slice();\n        this.inlets = 1 + testsCount;\n        this.outlets = testsCount + 1;\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", this.resetIO);\n        this.on(\"updateArgs\", this.resetIO);\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                const foundIndex = this.state.array.indexOf(data);\n                if (foundIndex === -1) this.outlet(this.outlets - 1, data);\n                else this.outlet(foundIndex, new Bang());\n            } else {\n                this.state.array[inlet - 1] = data;\n            }\n        });\n    }\n}\nclass v extends StdObject<{}, { key: string; value: any }, [Bang | any, any, string | number], [any], [string | number, any]> {\n    static description = \"Store anything as named sharable variable\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Bang to output stored value, anything to set the value then output it.\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Anything to set the value.\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set variable name.\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        description: \"Variable name\"\n    }, {\n        type: \"anything\",\n        optional: true,\n        description: \"Initial value\"\n    }];\n    state = { key: undefined as string, value: SharedDataNoValue as any };\n    subscribe() {\n        super.subscribe();\n        const sharedDataKey = \"_v\";\n        const reload = (key: string) => {\n            if (this.state.key) this.sharedData.unsubscribe(sharedDataKey, this.state.key, this);\n            const { args } = this.box;\n            this.state.key = key;\n            if (typeof args[1] !== \"undefined\") this.state.value = args[1];\n            if (key) {\n                const shared = this.sharedData.get(sharedDataKey, key);\n                if (shared !== SharedDataNoValue) this.state.value = shared;\n                else this.sharedData.set(sharedDataKey, key, this.state.value, this);\n                this.sharedData.subscribe(sharedDataKey, this.state.key, this);\n            }\n        };\n        this.on(\"preInit\", () => {\n            this.inlets = 3;\n            this.outlets = 1;\n        });\n        this.on(\"updateArgs\", (args) => {\n            const key = typeof args[0] === \"undefined\" ? args[0] : args[0].toString();\n            if (key !== this.state.key) {\n                reload(key);\n            } else {\n                if (typeof args[1] !== \"undefined\") {\n                    this.state.value = args[1];\n                    if (this.state.key) this.sharedData.set(sharedDataKey, this.state.key, this.state.value, this);\n                }\n            }\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (!(data instanceof Bang)) {\n                    this.state.value = data;\n                    if (this.state.key) this.sharedData.set(sharedDataKey, this.state.key, this.state.value, this);\n                }\n                this.outlet(0, this.state.value);\n            } else if (inlet === 1) {\n                this.state.value = data;\n                if (this.state.key) this.sharedData.set(sharedDataKey, this.state.key, this.state.value, this);\n            } else if (inlet === 2) {\n                if (typeof data === \"string\" || typeof data === \"number\") {\n                    const key = data.toString() || \"\";\n                    if (key !== this.state.key) {\n                        reload(key);\n                    }\n                }\n            }\n        });\n        this.on(\"sharedDataUpdated\", ({ data }) => this.state.value = data);\n        this.on(\"destroy\", () => {\n            if (this.state.key) this.sharedData.unsubscribe(sharedDataKey, this.state.key, this);\n        });\n    }\n}\nclass lambda extends StdObject<{}, { argsCount: number; result: any }, [Bang, any], [(...args: any[]) => any, ...any[]], [number]> {\n    static description = \"Generate anonymous function, output args when called\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Output anonymous function\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Result of the anonymous function\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"function\",\n        description: \"Anonymous function\"\n    }, {\n        type: \"bang\",\n        description: \"bang while lambda is called\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"If args=0, outlet args as array, else argument of current index\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"number\",\n        optional: true,\n        default: 0,\n        description: \"Arguments count\"\n    }];\n    state = { argsCount: 0, result: undefined as any };\n    lambda = (...args: any[]) => {\n        this.state.result = undefined;\n        if (this.state.argsCount === 0) {\n            this.outletAll([, new Bang(), args]);\n        } else {\n            this.outletAll([, new Bang(), ...args]);\n        }\n        return this.state.result; // After outlet, result will be received.\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 2;\n            this.outlets = 3;\n        });\n        this.on(\"updateArgs\", () => {\n            const { args } = this.box;\n            if (typeof args[0] === \"number\" && args[0] >= 0) {\n                this.state.argsCount = ~~args[0];\n                this.outlets = 2 + this.state.argsCount;\n            }\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (data instanceof Bang) this.outlet(0, this.lambda);\n            } else if (inlet === 1) this.state.result = data;\n        });\n    }\n}\nclass delay extends StdObject<{}, { time: number; ref: Set<number> }, [any, number], [any]> {\n    static description = \"Delay an input\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Input to be delayed\"\n    }, {\n        isHot: false,\n        type: \"number\",\n        description: \"Delay time in seconds\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Delayed input\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"number\",\n        optional: true,\n        default: 0,\n        description: \"Default delay time\"\n    }];\n    state = { time: 0, ref: new Set<number>() };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 2;\n            this.outlets = 1;\n        });\n        this.on(\"updateArgs\", () => {\n            const { args } = this.box;\n            if (typeof args[0] === \"number\") this.state.time = +args[0];\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                this.state.ref.add(window.setTimeout(() => this.outlet(0, data), this.state.time || 0));\n            } else if (inlet === 1) {\n                this.state.time = +data;\n            }\n        });\n        this.on(\"destroy\", () => {\n            this.state.ref.forEach(ref => window.clearTimeout(ref));\n        });\n    }\n}\n\ntype CallState = { instance: any; inputs: any[]; result: any };\nexport class call extends DefaultObject<{}, CallState, [any | Bang, ...any[]], any[], [string, ...any[]], { args: number; sync: boolean }, { loading: boolean }> {\n    static description = \"Call a method of current object\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to read\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Method argument\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Method return value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after method called\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"string\",\n        optional: false,\n        description: \"Method name\"\n    }, {\n        type: \"anything\",\n        optional: true,\n        varLength: true,\n        description: \"Set arguments while loaded\"\n    }];\n    static props: TMeta[\"props\"] = {\n        args: {\n            type: \"number\",\n            default: 0,\n            description: \"arguments count for method\"\n        },\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    state: CallState = { instance: undefined, inputs: [], result: null };\n    initialInlets = 1;\n    initialOutlets = 2;\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = this.initialInlets;\n            this.outlets = this.initialOutlets;\n        });\n        this.on(\"updateArgs\", (args) => {\n            this.state.inputs = args.slice(1);\n            const argsCount = Math.max(args.length - 1, ~~+this.getProp(\"args\"));\n            this.inlets = Math.max(1, this.initialInlets + argsCount);\n            this.outlets = this.initialOutlets + argsCount;\n        });\n        this.on(\"updateProps\", (props) => {\n            if (props.args && typeof props.args === \"number\" && props.args >= 0) {\n                const argsCount = Math.max(this.box.args.length - 1, ~~props.args);\n                this.inlets = Math.max(1, this.initialInlets + argsCount);\n                this.outlets = this.initialOutlets + argsCount;\n            }\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (!(data instanceof Bang)) this.state.instance = data;\n                if (this.execute()) this.output();\n            } else {\n                this.state.inputs[inlet - 1] = data;\n            }\n        });\n    }\n    execute() {\n        const m = this.box.args[0];\n        try {\n            this.state.result = this.state.instance[m](...this.state.inputs);\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this.state.result, this.state.instance, ...this.state.inputs]);\n    output() {\n        if (this.state.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this.state.result.then((r) => {\n                this.loading = false;\n                this.state.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\nclass thispatcher extends StdObject<{}, {}, [Bang], [Patcher]> {\n    static description = \"Current patcher instance\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Bang to output patcher instance\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"object\",\n        description: \"Patcher instance\"\n    }];\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                this.outlet(0, this.patcher);\n            }\n        });\n    }\n}\n\nexport default { print, for: For, \"for-in\": ForIn, if: If, gate, sel, set, get, call, v, lambda, bang, loadbang, unloadbang, delay, thispatcher };\n"],"sourceRoot":""}