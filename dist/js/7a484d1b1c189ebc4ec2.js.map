{"version":3,"file":"js/7a484d1b1c189ebc4ec2.js","mappings":"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","sources":["webpack://JSPatcher/./src/core/objects/faust/Diagram.ts","webpack://JSPatcher/./src/core/objects/faust/LibFaust.ts","webpack://JSPatcher/./src/core/objects/faust/faustUI.ts","webpack://JSPatcher/./src/core/objects/faust/index.jspatpkg.ts","webpack://JSPatcher/./src/core/objects/faust/Diagram.scss","webpack://JSPatcher/./src/core/objects/faust/Diagram.scss?56d3"],"sourcesContent":["import BaseObject from \"../base/BaseObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport DOMUI, { DOMUIState } from \"../base/DOMUI\";\nimport type Env from \"../../Env\";\nimport type { IInletsMeta, IOutletsMeta } from \"../base/AbstractObject\";\nimport type { FaustNodeInternalState } from \"./FaustNode\";\nimport \"./Diagram.scss\";\n\nexport default class diagram extends BaseObject<{}, {}, [Bang | string | FaustNodeInternalState[\"node\"]], [string], [], {}, DOMUIState> {\n    static package = \"Faust\";\n    static description = \"Get Faust code diagram\";\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"string\",\n        description: \"Code or FaustNode to compile, bang to output only\"\n    }];\n    static outlets: IOutletsMeta = [{\n        type: \"string\",\n        description: \"SVG code\"\n    }];\n    static UI = class extends DOMUI<diagram> {\n        state: DOMUIState = { ...this.state, children: this.props.object._.container ? [this.props.object._.container] : [] };\n    };\n    _ = { svg: \"\", container: undefined as HTMLDivElement };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n        });\n        this.on(\"inlet\", async ({ data, inlet }) => {\n            const faust = await (this.env as Env).getFaust();\n            if (inlet === 0) {\n                if (!isBang(data)) {\n                    try {\n                        this._.svg = faust.getDiagram(typeof data === \"string\" ? data : data.dspCode, { \"-I\": [\"libraries/\", \"project/\"] });\n                    } catch (e) {\n                        this.error(e);\n                        return;\n                    }\n                }\n                if (this._.svg) {\n                    this.outlet(0, this._.svg);\n                    const template = document.createElement(\"template\");\n                    const container = document.createElement(\"div\");\n                    container.addEventListener(\"click\", (e) => {\n                        let target = e.target as HTMLElement;\n                        while (target !== container && !(target instanceof SVGAElement)) {\n                            target = target.parentElement;\n                        }\n                        if (target === container) return;\n                        if (target instanceof SVGAElement) {\n                            e.preventDefault();\n                            const fileName = target.href.baseVal;\n                            const svg = faust.fs.readFile(\"FaustDSP-svg/\" + fileName, { encoding: \"utf8\" }) as string;\n                            container.innerHTML = svg;\n                        }\n                    });\n                    template.appendChild(container);\n                    container.innerHTML = this._.svg;\n                    this._.container = container;\n                    this.updateUI({ children: [container] });\n                }\n            }\n        });\n    }\n}\n","import type { Faust } from \"faust2webaudio\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IInletsMeta, IOutletsMeta } from \"../base/AbstractObject\";\n\nimport DefaultObject from \"../base/DefaultObject\";\n\nexport default class libFaust extends DefaultObject<{}, {}, [Bang], [Faust]> {\n    static package = \"Faust\";\n    static description = \"Get LibFaust instance\";\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Output LibFaust instance\"\n    }];\n    static outlets: IOutletsMeta = [{\n        type: \"object\",\n        description: \"LibFaust instance\"\n    }];\n    state = {};\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n        });\n        this.on(\"inlet\", async ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (isBang(data)) this.outlet(0, await this.env.getFaust());\n            }\n        });\n    }\n}\n","import type { FaustAudioWorkletNode } from \"faust2webaudio\";\nimport type { TFaustUI } from \"faust2webaudio/src/types\";\nimport type { FaustUI } from \"@shren/faust-ui\";\nimport DOMUI, { DOMUIState } from \"../base/DOMUI\";\nimport BaseObject from \"../base/BaseObject\";\nimport type { IInletsMeta, IOutletsMeta } from \"../base/AbstractObject\";\n\ninterface IS {\n    node: FaustAudioWorkletNode;\n    faustUI: FaustUI;\n    root: HTMLDivElement;\n}\n\nexport default class ui extends BaseObject<{}, {}, [FaustAudioWorkletNode], [Record<string, number>], [], {}, DOMUIState> {\n    static package = \"faust\";\n    static description = \"Display a Faust UI\";\n    static inlets: IInletsMeta = [{\n        isHot: false,\n        type: \"object\",\n        description: \"Compiled Faust AudioWorkletNode\"\n    }];\n    static outlets: IOutletsMeta = [{\n        type: \"object\",\n        description: \"Changed parameter name-value map\"\n    }];\n    static UI = class extends DOMUI<ui> {\n        state: DOMUIState = { ...this.state, children: this.props.object._.root ? [this.props.object._.root] : [] };\n        componentDidMount() {\n            super.componentDidMount();\n            this.props.object._.faustUI?.resize();\n        }\n    };\n    _: IS = { node: undefined, faustUI: undefined, root: undefined };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", () => this.updateUI({ shadow: false }));\n        const handleParamChangedByDSP = (e: CustomEvent<{ path: string; value: number }>) => {\n            this._.faustUI?.paramChangeByDSP(e.detail.path, e.detail.value);\n        };\n        const handleDestroyDSP = (e: CustomEvent<{ target: FaustAudioWorkletNode }>) => {\n            e.detail.target?.removeEventListener(\"paramChanged\", handleParamChangedByDSP);\n            e.detail.target?.removeEventListener(\"destroy\", handleDestroyDSP);\n        };\n        this.on(\"inlet\", async ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (data instanceof AudioWorkletNode) {\n                    this._.node?.removeEventListener(\"paramChanged\", handleParamChangedByDSP);\n                    this._.node?.removeEventListener(\"destroy\", handleDestroyDSP);\n                    this._.node = data;\n                    const ui = data.getUI() as TFaustUI;\n                    const root = document.createElement(\"div\");\n                    root.style.width = \"100%\";\n                    root.style.height = \"100%\";\n                    root.style.margin = \"0\";\n                    root.style.position = \"absolute\";\n                    root.style.overflow = \"auto\";\n                    root.style.display = \"flex\";\n                    root.style.flexDirection = \"column\";\n                    const { FaustUI } = (await import(\"@shren/faust-ui\"));\n                    const faustUI = new FaustUI({ ui, root, listenWindowMessage: false, listenWindowResize: false });\n                    this._.faustUI = faustUI;\n                    faustUI.paramChangeByUI = (path: string, value: number) => {\n                        this.outlet(0, { [path]: value });\n                    };\n                    if (!data.outputHandler) data.outputHandler = (path, value) => data.dispatchEvent(new CustomEvent(\"paramChanged\", { detail: { path, value } }));\n                    data.destroy = () => {\n                        data.dispatchEvent(new CustomEvent(\"destroy\", { detail: { target: data } }));\n                        data.port.postMessage({ type: \"destroy\" });\n                        data.port.close();\n                        delete data.plotHandler;\n                        delete data.outputHandler;\n                    };\n                    data.addEventListener(\"paramChanged\", handleParamChangedByDSP);\n                    data.addEventListener(\"destroy\", handleDestroyDSP);\n                    this.updateUI({ children: [root] });\n                    this._.root = root;\n                    faustUI.resize();\n                }\n            }\n        });\n        this.on(\"destroy\", () => {\n            this._.node?.removeEventListener(\"paramChanged\", handleParamChangedByDSP);\n            this._.node?.removeEventListener(\"destroy\", handleDestroyDSP);\n        });\n        const handleResize = () => {\n            this._.faustUI?.resize();\n        };\n        this.box.on(\"rectChanged\", handleResize);\n        this.box.on(\"presentationRectChanged\", handleResize);\n    }\n}\n","import FaustNode from \"./FaustNode\";\nimport diagram from \"./Diagram\";\nimport ui from \"./faustUI\";\nimport libFaust from \"./LibFaust\";\n\nexport default async () => ({\n    \"faustnode~\": FaustNode,\n    diagram,\n    ui,\n    libFaust\n});\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".patcher div.box-ui > div.package-faust-diagram > div > div > svg {\\n  height: 100%;\\n  width: 100%; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/core/objects/faust/Diagram.scss\"],\"names\":[],\"mappings\":\"AAAA;EAEQ,YAAY;EACZ,WAAW,EAAA\",\"sourcesContent\":[\".patcher div.box-ui > div.package-faust-diagram {\\n    & > div > div > svg {\\n        height: 100%;\\n        width: 100%;\\n    }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./Diagram.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./Diagram.scss\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["BaseObject","isBang","DOMUI","diagram","svg","container","undefined","subscribe","on","inlets","outlets","data","inlet","faust","env","getFaust","_","getDiagram","dspCode","e","error","outlet","template","document","createElement","addEventListener","target","SVGAElement","parentElement","preventDefault","fileName","href","baseVal","fs","readFile","encoding","innerHTML","appendChild","updateUI","children","isHot","type","description","state","props","object","DefaultObject","libFaust","ui","node","faustUI","root","shadow","handleParamChangedByDSP","paramChangeByDSP","detail","path","value","handleDestroyDSP","removeEventListener","AudioWorkletNode","getUI","style","width","height","margin","position","overflow","display","flexDirection","FaustUI","listenWindowMessage","listenWindowResize","paramChangeByUI","outputHandler","dispatchEvent","CustomEvent","destroy","port","postMessage","close","plotHandler","resize","handleResize","box","componentDidMount","FaustNode"],"sourceRoot":""}