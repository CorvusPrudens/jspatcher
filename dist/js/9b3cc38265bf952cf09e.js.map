{"version":3,"sources":["webpack://JSPatcher/./src/core/objects/base/CodePopupUI.tsx","webpack://JSPatcher/./src/core/objects/base/EmptyObject.ts","webpack://JSPatcher/./src/core/objects/base/InvalidObject.ts","webpack://JSPatcher/./src/core/objects/base/index.jspatpkg.ts","webpack://JSPatcher/./src/core/objects/faust/FaustNode.ts","webpack://JSPatcher/./src/core/objects/jsaw/In.ts","webpack://JSPatcher/./src/core/objects/jsaw/Out.ts","webpack://JSPatcher/./src/core/objects/main/AudioIn.ts","webpack://JSPatcher/./src/core/objects/main/AudioOut.ts","webpack://JSPatcher/./src/core/objects/main/BPatcher.ts","webpack://JSPatcher/./src/core/objects/main/BPatcherUI.tsx","webpack://JSPatcher/./src/core/objects/main/DspSubPatcher.ts","webpack://JSPatcher/./src/core/objects/main/FaustPatcher.ts","webpack://JSPatcher/./src/core/objects/main/GenPatcher.ts","webpack://JSPatcher/./src/core/objects/main/In.ts","webpack://JSPatcher/./src/core/objects/main/Out.ts","webpack://JSPatcher/./src/core/objects/main/SubPatcher.ts","webpack://JSPatcher/./src/core/objects/main/index.jspatpkg.ts","webpack://JSPatcher/./src/core/objects/base/InvalidObject.scss","webpack://JSPatcher/./src/core/objects/main/BPatcherUI.scss","webpack://JSPatcher/./src/core/objects/base/InvalidObject.scss?691a","webpack://JSPatcher/./src/core/objects/main/BPatcherUI.scss?a0de"],"names":["CodePopupUI","DefaultPopupUI","state","editorLoaded","code","undefined","setState","modalOpen","handleSave","codeEditor","getValue","monaco","layout","componentDidMount","window","addEventListener","handleResize","reactMonacoEditor","editorJSX","default","componentWillUnmount","removeEventListener","componentDidUpdate","prevProps","prevState","props","inDock","width","height","render","display","flexDirection","flex","overflow","editorLanguage","handleCodeEditorMount","fontSize","padding","handleCloseAndSave","children","innerHeight","handleClose","containerProps","onDoubleClick","handleDoubleClick","modalProps","open","onClose","basic","size","EmptyObject","DefaultObject","editing","subscribe","on","outlets","inlets","data","outlet","isHot","type","description","InvalidObject","patcher","box","changeText","text","varLength","bgColor","isUIState","BaseObject","func","Func","new","New","getIO","FaustNodeUI","object","setData","newNode","_","voices","FaustNode","merger","splitter","node","args","Math","max","inlet","isBang","isMIDIEvent","midiMessage","key","bpf","decodeLine","applyBPF","parameters","get","e","error","message","con","inletAudioConnections","AudioParam","disconnect","destroy","getFaustNode","audioCtx","faust","env","getFaust","getNode","useWorklet","compile","Error","channelInterpretation","dspCode","getNumInputs","getNumOutputs","createChannelMerger","connect","createChannelSplitter","compiled","disconnectAudio","handleDestroy","Object","assign","Ctor","constructor","firstInletMeta","firstInletSignalMeta","inletMeta","audioParamInletMeta","outletMeta","lastOutletMeta","factoryMeta","meta","i","index","outletAudioConnections","audioParams","forEach","v","k","push","length","path","param","defaultValue","minValue","maxValue","setMeta","connectAudio","handlePreInit","handlePostInit","handleUpdateArgs","handleInlet","optional","In","changeIO","emitPatcherChangeIO","outlet0","thread","handlePatcherInput","off","enums","Out","inlet0","AudioIn","_duringInit","connectAudioInlet","inspectAudioIO","disconnectAudioInlet","createGain","AudioOut","disconnectAudioOutlet","connectAudioOutlet","BPatcher","SubPatcher","BPatcherUI","BaseUI","timestamp","performance","now","editor","isTemporary","save","Editor","init","handleChanged","language","DspSubPatcher","unsubscribePatcher","Patcher","project","load","getPatcherNode","updateUI","handlePatcherIOChanged","subscribePatcher","handlePatcherGraphChanged","rawPatcher","toSerializable","emit","Array","fill","map","FaustPatcher","file","projectPath","instance","reload","addObserver","handleGraphChanged","handlePatcherChanged","handleFilePathChanged","handleSaved","removeObserver","compilePatcher","item","newItem","getSharedItem","instantiate","newKey","newVoices","toFaustDspCode","SubPatcherUI","GenPatcher","generateDefaultObject","port","slice","handlePatcherOutput","handlePatcherDisconnectAudioInlet","handlePatcherDisconnectAudioOutlet","handlePatcherConnectAudioInlet","handlePatcherConnectAudioOutlet","fn","in","out","p","pdsp","faustPatcher","pfaust","gen","bpatcher"],"mappings":"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","file":"js/9b3cc38265bf952cf09e.js","sourcesContent":["import * as React from \"react\";\nimport { Icon, StrictModalProps, Modal, Dimmer, Loader, Button } from \"semantic-ui-react\";\nimport type MonacoEditor from \"react-monaco-editor\";\nimport type { editor } from \"monaco-editor/esm/vs/editor/editor.api\";\nimport DefaultPopupUI from \"./DefaultPopupUI\";\nimport type DefaultObject from \"./DefaultObject\";\nimport type { DefaultPopupUIProps, DefaultPopupUIState } from \"./DefaultPopupUI\";\n\nexport interface CodePopupUIState extends DefaultPopupUIState {\n    editorLoaded: boolean;\n}\nexport default class CodePopupUI<T extends DefaultObject = DefaultObject, P extends Partial<DefaultPopupUIProps> & Record<string, any> = {}, S extends Partial<CodePopupUIState> & Record<string, any> = {}> extends DefaultPopupUI<T, P, S & CodePopupUIState> {\n    static dockable = true;\n    state: S & CodePopupUIState = {\n        ...this.state,\n        editorLoaded: false\n    };\n    codeEditor: editor.IStandaloneCodeEditor;\n    editorJSX: typeof MonacoEditor;\n    editorLanguage = \"javascript\";\n    get code() {\n        return \"\";\n    }\n    handleSave = (code: string): any => undefined;\n    handleCloseAndSave = () => {\n        this.setState({ modalOpen: false });\n        this.handleSave(this.codeEditor.getValue());\n    };\n    handleCodeEditorMount = (monaco: editor.IStandaloneCodeEditor) => this.codeEditor = monaco;\n    handleResize = () => ((this.state.editorLoaded && this.codeEditor) ? this.codeEditor.layout() : undefined);\n    async componentDidMount() {\n        super.componentDidMount();\n        window.addEventListener(\"resize\", this.handleResize);\n        const reactMonacoEditor = await import(\"react-monaco-editor\");\n        this.editorJSX = reactMonacoEditor.default;\n        this.setState({ editorLoaded: true });\n    }\n    componentWillUnmount() {\n        super.componentWillUnmount();\n        window.removeEventListener(\"resize\", this.handleResize);\n    }\n    componentDidUpdate(prevProps: Readonly<DefaultPopupUIProps>, prevState: Readonly<S & CodePopupUIState>) {\n        if (this.props.inDock) {\n            if (this.state.width !== prevState.width || this.state.height !== prevState.height) this.handleResize();\n        }\n    }\n    render() {\n        if (this.props.inDock) {\n            if (!this.state.editorLoaded) return <Dimmer active><Loader content=\"Loading\" /></Dimmer>;\n            return (\n                <div style={{ display: \"flex\", flexDirection: \"column\", flex: \"1 1 auto\", width: \"100%\", height: \"100%\" }}>\n                    <div style={{ flex: \"1 1 auto\", overflow: \"hidden\" }}>\n                        <this.editorJSX value={this.code} language={this.editorLanguage} theme=\"vs-dark\" editorDidMount={this.handleCodeEditorMount} options={{ fontSize: 12 }} />\n                    </div>\n                    <div style={{ flex: \"0 0 auto\", display: \"flex\", flexDirection: \"row-reverse\", padding: \"10px\" }}>\n                        <Button icon=\"checkmark\" content=\"OK\" color=\"green\" onClick={this.handleCloseAndSave} inverted />\n                    </div>\n                </div>\n            );\n        }\n        const children = (\n            <>\n                <Modal.Content>\n                    <div style={{ height: window.innerHeight * 0.8 }}>\n                        {\n                            this.state.editorLoaded\n                                ? <this.editorJSX value={this.code} language={this.editorLanguage} theme=\"vs-dark\" editorDidMount={this.handleCodeEditorMount} options={{ fontSize: 12 }} />\n                                : <Dimmer active><Loader content=\"Loading\" /></Dimmer>\n                        }\n                    </div>\n                </Modal.Content>\n                <Modal.Actions>\n                    <Button basic color=\"red\" onClick={this.handleClose} inverted>\n                        <Icon name=\"remove\" /> Cancel\n                    </Button>\n                    <Button color=\"green\" onClick={this.handleCloseAndSave} inverted>\n                        <Icon name=\"checkmark\" /> OK\n                    </Button>\n                </Modal.Actions>\n            </>\n        );\n        const containerProps = { ...this.props.containerProps };\n        if (!containerProps.onDoubleClick) containerProps.onDoubleClick = this.handleDoubleClick;\n        const modalProps: StrictModalProps = { ...this.props.modalProps, children, open: this.state.modalOpen, onClose: this.handleClose, basic: true, size: \"fullscreen\" };\n        return <DefaultPopupUI {...this.props} modalProps={modalProps} containerProps={containerProps} />;\n    }\n}\n","import DefaultObject from \"./DefaultObject\";\nimport type { IJSPatcherObjectMeta } from \"./AbstractObject\";\n\nexport default class EmptyObject extends DefaultObject<{}, { editing: boolean }, [any], [any]> {\n    static author = \"Fr0stbyteR\";\n    static version = \"1.0.0\";\n    static description = \"Bypass input\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"output same thing\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"output same thing\"\n    }];\n    state = { editing: false };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.outlets = 1;\n            this.inlets = 1;\n        });\n        this.on(\"inlet\", ({ data }) => this.outlet(0, data));\n    }\n}\n","import DefaultObject from \"./DefaultObject\";\nimport type { IJSPatcherObjectMeta } from \"./AbstractObject\";\nimport \"./InvalidObject.scss\";\n\nexport default class InvalidObject extends DefaultObject<{}, {}, [any], [undefined]> {\n    static description = \"invalid object\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"nothing\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        varLength: true,\n        description: \"nothing\"\n    }];\n    static props: IJSPatcherObjectMeta[\"props\"] = {\n        bgColor: {\n            type: \"color\",\n            default: \"rgb(128, 64, 64)\",\n            description: \"Background color\",\n            isUIState: true\n        }\n    };\n    subscribe() {\n        this.patcher.on(\"libChanged\", () => this.box.changeText(this.box.text, true));\n    }\n}\n","import BaseObject from \"./BaseObject\";\nimport EmptyObject from \"./EmptyObject\";\nimport InvalidObject from \"./InvalidObject\";\nimport { Func, New } from \"../importer/DefaultImporter\";\nimport getIO from \"../main/index.jspatpkg\";\n\nexport default async () => ({\n    BaseObject,\n    EmptyObject,\n    InvalidObject,\n    func: Func,\n    new: New,\n    ...await getIO()\n});\n","import type { FaustAudioWorkletNode } from \"faust2webaudio\";\nimport CodePopupUI from \"../base/CodePopupUI\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport DefaultObject from \"../base/DefaultObject\";\nimport { isMIDIEvent, decodeLine } from \"../../../utils/utils\";\nimport type DefaultUI from \"../base/DefaultUI\";\nimport type { TBPF, TMIDIEvent } from \"../../types\";\nimport type { UnPromisifiedFunction } from \"../../workers/Worker\";\nimport type { IJSPatcherObjectMeta, IInletMeta, IOutletMeta } from \"../base/AbstractObject\";\n\nclass FaustNodeUI extends CodePopupUI<FaustNode> {\n    editorLanguage = \"faust\";\n    get code() {\n        return this.object.data.code;\n    }\n    handleSave = (code: string) => {\n        this.object.setData({ code });\n        this.object.newNode(code, this.object._.voices);\n    };\n}\nexport interface FaustNodeData {\n    code?: string;\n}\nexport interface FaustNodeInternalState {\n    merger: ChannelMergerNode;\n    splitter: ChannelSplitterNode;\n    node: FaustAudioWorkletNode & { dspCode?: string };\n    voices: number;\n}\ntype Args = [number];\ntype I = [Bang | number | string | TMIDIEvent | Record<string, TBPF>, ...TBPF[]];\ntype O = (null | FaustAudioWorkletNode)[];\n\nexport default class FaustNode<\n    D extends Record<string, any> & Partial<FaustNodeData> = {},\n    S extends {} = {},\n    A extends any[] = Args,\n    U extends {} = {}\n> extends DefaultObject<D & FaustNodeData, S, I, O, A, {}, U> {\n    static package = \"Faust\";\n    static author = \"Fr0stbyteR\";\n    static version = \"1.0.0\";\n    static description = \"Dynamically generate WebAudioNode from Faust\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"A bang to output the node, code string to compile, number to set voices, or a param-bpf map, or a MIDI event\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"object\",\n        description: \"FaustNode instance output: AudioWorkletNode | ScriptProcessor\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"number\",\n        optional: true,\n        default: 0,\n        description: \"Polyphonic instrument voices count\"\n    }];\n    static UI: typeof DefaultUI = FaustNodeUI;\n    _: FaustNodeInternalState = { merger: undefined, splitter: undefined, node: undefined, voices: 0 };\n    async getFaustNode(code: string, voices: number) {\n        const { audioCtx } = this;\n        const faust = await this.env.getFaust();\n        return faust.getNode(code, { audioCtx, useWorklet: true, voices, args: { \"-I\": [\"libraries/\", \"project/\"] } });\n    }\n    async compile(code: string, voices: number) {\n        let splitter: ChannelSplitterNode;\n        let merger: ChannelMergerNode;\n        const node = await this.getFaustNode(code, voices) as FaustAudioWorkletNode & { dspCode?: string };\n        if (!node) throw new Error(\"Cannot compile Faust code\");\n        node.channelInterpretation = \"discrete\";\n        node.dspCode = code;\n        const { audioCtx } = this.patcher;\n        const inlets = node.getNumInputs();\n        const outlets = node.getNumOutputs();\n        if (inlets) {\n            merger = audioCtx.createChannelMerger(inlets);\n            merger.channelInterpretation = \"discrete\";\n            merger.connect(node, 0, 0);\n        }\n        if (outlets) {\n            splitter = audioCtx.createChannelSplitter(outlets);\n            node.connect(splitter, 0, 0);\n        }\n        return { inlets, outlets, node, splitter, merger };\n    }\n    async newNode(code: string, voices: number) {\n        let compiled: ReturnType<UnPromisifiedFunction<FaustNode[\"compile\"]>>;\n        try {\n            compiled = await this.compile(code, voices);\n        } catch (e) {\n            this.error((e as Error).message);\n            return;\n        }\n        const { inlets, outlets, merger, splitter, node } = compiled;\n        this.disconnectAudio();\n        this.handleDestroy();\n        Object.assign(this._, { voices, merger, splitter, node } as FaustNodeInternalState);\n        const Ctor = this.constructor as typeof FaustNode;\n        const firstInletMeta = Ctor.inlets[0];\n        const firstInletSignalMeta: IInletMeta = { ...firstInletMeta, type: \"signal\" };\n        const inletMeta: IInletMeta = { isHot: false, type: \"signal\", description: \"Node connection\" };\n        const audioParamInletMeta: IInletMeta = { isHot: false, type: \"signal\", description: \": bpf or node connection\" };\n        const outletMeta: IOutletMeta = { type: \"signal\", description: \"Node connection\" };\n        const lastOutletMeta = Ctor.outlets[0];\n        const factoryMeta = Ctor.meta as this[\"meta\"];\n        for (let i = 0; i < inlets; i++) {\n            if (i === 0) factoryMeta.inlets[i] = compiled.inlets ? firstInletSignalMeta : firstInletMeta;\n            else factoryMeta.inlets[i] = inletMeta;\n            this.inletAudioConnections[i] = { node: merger, index: i };\n        }\n        for (let i = 0; i < outlets; i++) {\n            factoryMeta.outlets[i] = outletMeta;\n            this.outletAudioConnections[i] = { node: splitter, index: i };\n        }\n        factoryMeta.outlets[outlets] = lastOutletMeta;\n        const audioParams: string[] = [];\n        node.parameters.forEach((v, k) => audioParams.push(k));\n        for (let i = inlets || 1; i < (inlets || 1) + audioParams.length; i++) {\n            const path = audioParams[i - (inlets || 1)];\n            const param = node.parameters.get(path);\n            const { defaultValue, minValue, maxValue } = param;\n            factoryMeta.inlets[i] = { ...audioParamInletMeta, description: `${path}${audioParamInletMeta.description}: ${defaultValue} (${minValue} - ${maxValue})` };\n            this.inletAudioConnections[i] = { node: param };\n        }\n        this.setMeta(factoryMeta);\n        this.inlets = (inlets || 1) + node.parameters.size;\n        this.outlets = outlets + 1;\n        this.connectAudio();\n        this.outlet(this.outlets - 1, this._.node);\n    }\n    handlePreInit = () => undefined as any;\n    handlePostInit = async () => {\n        if (this.data.code) await this.newNode(this.data.code, this._.voices);\n    };\n    handleUpdateArgs = (args: Partial<A>): void => {\n        if (typeof args[0] === \"number\") this._.voices = ~~Math.max(0, args[0]);\n    };\n    handleInlet = async ({ data, inlet }: { data: I[number]; inlet: number }) => {\n        if (inlet === 0) {\n            if (isBang(data)) {\n                if (this._.node) this.outlet(this.outlets - 1, this._.node);\n            } else if (typeof data === \"string\") {\n                this.setData({ code: data } as D);\n                await this.newNode(data, this._.voices);\n            } else if (typeof data === \"number\") {\n                this._.voices = Math.max(0, ~~data);\n            } else if (isMIDIEvent(data)) {\n                if (this._.node) this._.node.midiMessage(data);\n            } else if (typeof data === \"object\") {\n                if (this._.node) {\n                    for (const key in data) {\n                        try {\n                            const bpf = decodeLine((data as Record<string, TBPF>)[key]);\n                            this.applyBPF(this._.node.parameters.get(key), bpf);\n                        } catch (e) {\n                            this.error(e.message);\n                        }\n                    }\n                }\n            }\n        } else if (this._.node) {\n            const con = this.inletAudioConnections[inlet].node;\n            if (con instanceof AudioParam) {\n                try {\n                    const bpf = decodeLine(data as TBPF);\n                    this.applyBPF(con, bpf);\n                } catch (e) {\n                    this.error(e.message);\n                }\n            }\n        }\n    };\n    handleDestroy = () => {\n        const { merger, node } = this._;\n        if (merger) merger.disconnect();\n        if (node) {\n            node.disconnect();\n            node.destroy();\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", this.handlePreInit);\n        this.on(\"postInit\", this.handlePostInit);\n        this.on(\"updateArgs\", this.handleUpdateArgs);\n        this.on(\"inlet\", this.handleInlet);\n        this.on(\"destroy\", this.handleDestroy);\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta, TMetaType } from \"../base/AbstractObject\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\n\ninterface P {\n    description: string;\n    type: Exclude<TMetaType, \"signal\" | \"enum\">;\n}\n\nexport default class In extends BaseObject<{}, {}, [], [any], [number], P> {\n    static isPatcherInlet = \"data\" as const;\n    static description = \"Patcher inlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        },\n        type: {\n            type: \"enum\",\n            enums: [\"string\", \"number\", \"boolean\", \"object\", \"function\", \"anything\", \"bang\", \"color\"],\n            default: \"anything\",\n            description: \"Inlet data type\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected handlePatcherInput = ({ data, inlet }: PatcherEventMap[\"dataInput\"]) => {\n        if (inlet === this.index - 1) this.outlet(0, data);\n    };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            if (typeof props.type === \"string\") outlet0.type = props.type || \"anything\";\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        if (this.env.thread === \"AudioWorklet\") this.patcher.on(\"dataInput\", this.handlePatcherInput);\n        this.on(\"destroy\", () => {\n            this.patcher.off(\"dataInput\", this.handlePatcherInput);\n            this.patcher.changeIO();\n        });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IInletsMeta, IPropsMeta, TMetaType } from \"../base/AbstractObject\";\n\ninterface P {\n    description: string;\n    type: Exclude<TMetaType, \"signal\" | \"enum\">;\n}\n\nexport default class Out extends BaseObject<{}, {}, [], [any], [number], P> {\n    static isPatcherOutlet = \"data\" as const;\n    static description = \"Patcher outlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        },\n        type: {\n            type: \"enum\",\n            enums: [\"string\", \"number\", \"boolean\", \"object\", \"function\", \"anything\", \"bang\", \"color\"],\n            default: \"anything\",\n            description: \"Inlet data type\"\n        }\n    };\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 0;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const inlet0 = { ...this.meta.inlets[0] };\n            if (typeof props.description === \"string\") inlet0.description = props.description;\n            if (typeof props.type === \"string\") inlet0.type = props.type || \"anything\";\n            this.setMeta({ inlets: [inlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) this.patcher.outlet(this.index - 1, data);\n        });\n        this.on(\"destroy\", this.emitPatcherChangeIO);\n    }\n}\n","import type { TAudioNodeOutletConnection } from \"../../types\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport DefaultObject from \"../base/DefaultObject\";\n\ninterface P {\n    description: string;\n}\n\nexport default class AudioIn extends DefaultObject<{}, {}, [], [any], [number], P> {\n    static package = \"SubPatcher\";\n    static description = \"Patcher inlet (audio)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"signal\",\n        description: \"\"\n    }];\n    outletAudioConnections: TAudioNodeOutletConnection[] = [{ node: undefined as GainNode, index: 0 }];\n    private _duringInit = true;\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", () => {\n            this._duringInit = false;\n            this.connectAudio();\n            this.patcher.connectAudioInlet(this.index - 1);\n            this.patcher.inspectAudioIO();\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.disconnectAudioInlet(index - 1);\n                this.disconnectAudio();\n                if (!this.patcher.inletAudioConnections[index - 1]) {\n                    const node = this.audioCtx.createGain();\n                    node.channelInterpretation = \"discrete\";\n                    this.patcher.inletAudioConnections[index - 1] = { node, index: 0 };\n                }\n                const { node } = this.patcher.inletAudioConnections[index - 1];\n                this.outletAudioConnections[0].node = node;\n                if (!this._duringInit) {\n                    this.connectAudio();\n                    this.patcher.connectAudioInlet(index - 1);\n                    this.patcher.inspectAudioIO();\n                    this.emitPatcherChangeIO();\n                }\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"destroy\", () => {\n            this.patcher.inspectAudioIO();\n            this.emitPatcherChangeIO();\n        });\n    }\n}\n","import type { TAudioNodeInletConnection } from \"../../types\";\nimport type { IArgsMeta, IInletsMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport DefaultObject from \"../base/DefaultObject\";\n\nexport default class AudioOut extends DefaultObject<{}, { index: number }, [any], [], [number], { description: string }> {\n    static package = \"SubPatcher\";\n    static description = \"Patcher outlet (audio)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Outlet index (1-based)\"\n    }];\n    static props: IPropsMeta = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static inlets: IInletsMeta = [{\n        type: \"signal\",\n        description: \"\",\n        isHot: true\n    }];\n    inletAudioConnections: TAudioNodeInletConnection[] = [{ node: undefined as GainNode, index: 0 }];\n    private _duringInit = true;\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 0;\n        });\n        this.on(\"postInit\", () => {\n            this._duringInit = false;\n            this.connectAudio();\n            this.patcher.connectAudioInlet(this.state.index - 1);\n            this.patcher.inspectAudioIO();\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.disconnectAudioOutlet(index - 1);\n                this.disconnectAudio();\n                if (!this.patcher.outletAudioConnections[index - 1]) {\n                    const node = this.audioCtx.createGain();\n                    node.channelInterpretation = \"discrete\";\n                    this.patcher.outletAudioConnections[index - 1] = { node, index: 0 };\n                }\n                const { node } = this.patcher.outletAudioConnections[index - 1];\n                this.inletAudioConnections[0].node = node;\n                if (!this._duringInit) {\n                    this.connectAudio();\n                    this.patcher.connectAudioOutlet(index - 1);\n                    this.patcher.inspectAudioIO();\n                    this.emitPatcherChangeIO();\n                }\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const inlet0 = { ...this.meta.inlets[0] };\n            if (typeof props.description === \"string\") inlet0.description = props.description;\n            this.setMeta({ inlets: [inlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"destroy\", () => {\n            this.patcher.inspectAudioIO();\n            this.emitPatcherChangeIO();\n        });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport BPatcherUI from \"./BPatcherUI\";\nimport SubPatcher from \"./SubPatcher\";\n\nexport default class BPatcher extends SubPatcher {\n    static props = BaseObject.props;\n    static UI = BPatcherUI as any;\n}\n","import * as React from \"react\";\nimport PatcherEditorUI from \"../../../components/editors/PatcherEditorUI\";\nimport BaseUI, { BaseUIState } from \"../base/BaseUI\";\nimport PatcherUI from \"../../../components/editors/patcher/PatcherUI\";\nimport type SubPatcher from \"./SubPatcher\";\nimport type PatcherEditor from \"../../patcher/PatcherEditor\";\nimport type { SubPatcherUIState } from \"./SubPatcherUI\";\nimport \"./BPatcherUI.scss\";\n\nexport default class BPatcherUI extends BaseUI<SubPatcher, {}, SubPatcherUIState> {\n    static sizing: \"horizontal\" | \"vertical\" | \"both\" | \"ratio\" = \"both\";\n    static defaultSize: [number, number] = [210, 90];\n    state: SubPatcherUIState & BaseUIState = {\n        ...this.state,\n        patcher: this.object._.patcher,\n        timestamp: performance.now(),\n        editor: undefined\n    };\n    handleChanged = () => {\n        if (this.state.editor.isTemporary) this.state.editor.save();\n    };\n    componentDidMount() {\n        super.componentDidMount();\n        if (this.state.patcher) {\n            const Editor = this.editor.constructor as typeof PatcherEditor;\n            const editor = new Editor(this.object._.patcher);\n            this.setState({ editor });\n            editor.init();\n            editor.on(\"changed\", this.handleChanged);\n        }\n    }\n    componentDidUpdate(prevProps: any, prevState: Readonly<SubPatcherUIState & BaseUIState>) {\n        if (prevState.patcher !== this.state.patcher) {\n            if (this.state.editor) {\n                this.state.editor.off(\"changed\", this.handleChanged);\n                this.state.editor.destroy();\n            }\n            if (this.state.patcher) {\n                const Editor = this.editor.constructor as typeof PatcherEditor;\n                const editor = new Editor(this.object._.patcher);\n                this.setState({ timestamp: performance.now(), editor });\n                editor.init();\n                editor.on(\"changed\", this.handleChanged);\n            } else {\n                this.setState({ timestamp: performance.now(), editor: undefined });\n            }\n        }\n    }\n    componentWillUnmount() {\n        this.state.editor?.off(\"changed\", this.handleChanged);\n        super.componentWillUnmount();\n    }\n    static dockable = true;\n    render() {\n        if (this.props.inDock) {\n            return (\n                <div style={{ height: \"100%\", width: \"100%\", display: \"flex\" }}>\n                    {\n                        this.state.editor\n                            ? <PatcherEditorUI key={this.state.timestamp} editor={this.state.editor} env={this.env} lang={this.env.language} />\n                            : undefined\n                    }\n                </div>\n            );\n        }\n        const children = (\n            <div style={{ height: \"100%\", width: \"100%\", display: \"flex\" }}>\n                {\n                    this.state.editor\n                        ? <PatcherUI key={this.state.timestamp} editor={this.state.editor} transparent runtime />\n                        : undefined\n                }\n            </div>\n        );\n        return <BaseUI {...this.props} children={children} />;\n    }\n}\n","import SubPatcher from \"./SubPatcher\";\nimport type Patcher from \"../../patcher/Patcher\";\n// import type { RawPatcher } from \"../../types\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type PatcherNode from \"../../worklets/PatcherNode\";\n\nexport default class DspSubPatcher extends SubPatcher {\n    type = \"jsaw\" as const;\n    _: SubPatcher[\"_\"] & { node: PatcherNode } = { ...this._, node: undefined };\n    reload = async () => {\n        if (this._.patcher) {\n            this.disconnectAudio();\n            await this.unsubscribePatcher();\n        }\n        // const { key } = this._;\n        let patcher: Patcher;\n        // let rawPatcher: RawPatcher;\n        try {\n            patcher = new this.Patcher({ env: this.patcher.env, project: this.patcher.project });\n            await patcher.load(this.data, this.type);\n            this._.node = await patcher.getPatcherNode();\n            this._.patcher = patcher;\n            this.updateUI({ patcher });\n        } catch (error) {\n            this.error(error);\n        } finally {\n            this.handlePatcherIOChanged(this._.patcher.meta);\n            this.subscribePatcher();\n            this.handlePatcherGraphChanged();\n            this.connectAudio();\n        }\n    };\n    handlePatcherChanged = () => {\n        const rawPatcher = this._.patcher.toSerializable();\n        this.setData(rawPatcher);\n        this.patcher.emit(\"changed\");\n    };\n    handlePatcherIOChanged = (meta: IJSPatcherObjectMeta) => {\n        this.inlets = meta.inlets.length;\n        this.outlets = meta.outlets.length;\n        const { inlets, outlets } = meta;\n        const { node } = this._;\n        this.inletAudioConnections = new Array(inlets).fill(null).map((v, index) => ({ node, index }));\n        this.outletAudioConnections = new Array(outlets).fill(null).map((v, index) => ({ node, index }));\n        this.setMeta({ ...this.meta, inlets, outlets, args: SubPatcher.args });\n    };\n}\n","import FaustNode, { FaustNodeInternalState } from \"../faust/FaustNode\";\nimport SubPatcherUI from \"./SubPatcherUI\";\nimport type Patcher from \"../../patcher/Patcher\";\nimport type { ProjectFileEventMap } from \"../../file/AbstractProjectFile\";\nimport type { RawPatcher } from \"../../types\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\n\ninterface InternalState extends FaustNodeInternalState {\n    patcher: Patcher;\n    key: string;\n    voices: number;\n    code: string;\n}\nexport default class FaustPatcher extends FaustNode<Partial<RawPatcher>, {}, [string, number], { patcher: Patcher }> {\n    static package = \"SubPatcher\";\n    static description = \"Faust Sub-patcher, compiled to AudioNode\";\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"string\",\n        optional: true,\n        default: \"\",\n        description: \"Name of the subpatcher\"\n    }, {\n        type: \"number\",\n        optional: true,\n        default: 0,\n        description: \"Polyphonic instrument voices count\"\n    }];\n    static UI = SubPatcherUI;\n    _: InternalState = {\n        merger: undefined,\n        splitter: undefined,\n        node: undefined,\n        patcher: undefined,\n        key: this.box.args[0],\n        code: undefined,\n        voices: ~~Math.max(0, this.box.args[1])\n    };\n    type: \"faust\" | \"gen\" = \"faust\";\n    handleFilePathChanged = () => {\n        this._.key = this._.patcher.file.projectPath;\n    };\n    handleSaved = (e: ProjectFileEventMap[\"saved\"]) => {\n        if (e.instance === this._.patcher) return;\n        this.reload();\n    };\n    subscribePatcher = async () => {\n        const { patcher } = this._;\n        if (patcher) {\n            await patcher.addObserver(this);\n            patcher.on(\"graphChanged\", this.handleGraphChanged);\n            patcher.on(\"changed\", this.handlePatcherChanged);\n            const { file } = patcher;\n            if (file) {\n                file.on(\"destroyed\", this.reload);\n                file.on(\"nameChanged\", this.handleFilePathChanged);\n                file.on(\"pathChanged\", this.handleFilePathChanged);\n                file.on(\"saved\", this.handleSaved);\n            }\n        }\n    };\n    unsubscribePatcher = async () => {\n        const { patcher } = this._;\n        if (patcher) {\n            patcher.off(\"graphChanged\", this.handleGraphChanged);\n            patcher.off(\"changed\", this.handlePatcherChanged);\n            const { file } = patcher;\n            if (file) {\n                file.off(\"destroyed\", this.reload);\n                file.off(\"nameChanged\", this.handleFilePathChanged);\n                file.off(\"pathChanged\", this.handleFilePathChanged);\n                file.off(\"saved\", this.handleSaved);\n            }\n            await patcher.removeObserver(this); // patcher will be destroyed if no observers left.\n        }\n    };\n    async compilePatcher() {\n        const code = this._.patcher.toFaustDspCode();\n        if (code && code !== this._.code) {\n            this._.code = code;\n            await this.newNode(code, this._.voices);\n        }\n    }\n    handleGraphChanged = async () => {\n        await this.compilePatcher();\n        this.patcher.emit(\"graphChanged\");\n    };\n    handlePatcherChanged = () => {\n        const { patcher } = this._;\n        if (patcher.isTemporary) {\n            const rawPatcher = patcher.toSerializable();\n            this.setData(rawPatcher);\n        }\n        this.patcher.emit(\"changed\");\n    };\n    reload = async () => {\n        if (this._.patcher) {\n            this.disconnectAudio();\n            await this.unsubscribePatcher();\n        }\n        const { key } = this._;\n        let patcher: Patcher;\n        let rawPatcher: RawPatcher;\n        try {\n            const { item, newItem } = await this.getSharedItem(key, \"patcher\", async () => {\n                patcher = new this.Patcher({ env: this.patcher.env, project: this.patcher.project });\n                await patcher.load(this.data, this.type);\n                rawPatcher = patcher.toSerializable();\n                return rawPatcher;\n            });\n            if (newItem) {\n                patcher.file = item;\n                this.setData(rawPatcher);\n            } else {\n                patcher = await item.instantiate({ env: this.patcher.env, project: this.patcher.project }) as Patcher;\n                this.setData(patcher.toSerializable());\n            }\n            this._.patcher = patcher;\n            this.updateUI({ patcher });\n        } catch (error) {\n            this.error(error);\n        } finally {\n            await this.subscribePatcher();\n            await this.handleGraphChanged();\n            this.connectAudio();\n        }\n    };\n    handlePreInit = () => {};\n    handleUpdateArgs = async (args: Partial<[string, number]>): Promise<void> => {\n        if (!this._.patcher) return;\n        const { voices, key } = this._;\n        let newKey = key;\n        let newVoices = voices;\n        if (typeof args[0] === \"string\" || typeof args[0] === \"undefined\") {\n            newKey = args[0];\n            if (newKey !== key) this._.key = newKey;\n        }\n        if (typeof args[1] === \"number\") {\n            newVoices = ~~Math.max(0, args[1]);\n            this._.voices = newVoices;\n        }\n        if (newKey !== key) {\n            await this.reload();\n        } else if (newVoices !== voices) {\n            this.disconnectAudio();\n            await this.compilePatcher();\n            this.connectAudio();\n        }\n    };\n    handlePostInit = this.reload;\n    subscribe() {\n        super.subscribe();\n        this.on(\"destroy\", this.unsubscribePatcher);\n    }\n}\n","import FaustPatcher from \"./FaustPatcher\";\n\nexport default class GenPatcher extends FaustPatcher {\n    static description = \"Gen Sub-patcher, compiled to AudioNode\";\n    type: \"faust\" | \"gen\" = \"gen\";\n}\n","import generateDefaultObject from \"../base/generateDefaultObject\";\nimport In from \"../jsaw/In\";\nimport type BaseObject from \"../base/BaseObject\";\n\nexport default generateDefaultObject(In as typeof BaseObject);\n","import generateDefaultObject from \"../base/generateDefaultObject\";\nimport Out from \"../jsaw/Out\";\nimport type BaseObject from \"../base/BaseObject\";\n\nexport default generateDefaultObject(Out as typeof BaseObject);\n","import DefaultObject from \"../base/DefaultObject\";\nimport SubPatcherUI, { SubPatcherUIState } from \"./SubPatcherUI\";\nimport type { ProjectFileEventMap } from \"../../file/AbstractProjectFile\";\nimport type Patcher from \"../../patcher/Patcher\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\nimport type { RawPatcher, PatcherMode } from \"../../types\";\nimport type { IArgsMeta, IJSPatcherObjectMeta } from \"../base/AbstractObject\";\n\nexport default class SubPatcher extends DefaultObject<Partial<RawPatcher>, {}, any[], any[], [string], {}, SubPatcherUIState> {\n    static package = \"SubPatcher\";\n    static description = \"Sub-patcher\";\n    static args: IArgsMeta = [{\n        type: \"string\",\n        optional: true,\n        default: \"\",\n        description: \"Name of the subpatcher\"\n    }];\n    static UI = SubPatcherUI;\n    _ = { patcher: undefined as Patcher, key: this.box.args[0] };\n    type: PatcherMode = \"js\";\n    handlePatcherOutput = ({ outlet, data }: PatcherEventMap[\"dataOutput\"]) => this.outlet(outlet, data);\n    handlePatcherDisconnectAudioInlet = (port: number) => this.disconnectAudioInlet(port);\n    handlePatcherDisconnectAudioOutlet = (port: number) => this.disconnectAudioOutlet(port);\n    handlePatcherConnectAudioInlet = (port: number) => this.connectAudioInlet(port);\n    handlePatcherConnectAudioOutlet = (port: number) => this.connectAudioOutlet(port);\n    handlePatcherIOChanged = (meta: IJSPatcherObjectMeta) => {\n        this.inletAudioConnections = this._.patcher.inletAudioConnections.slice();\n        this.outletAudioConnections = this._.patcher.outletAudioConnections.slice();\n        this.inlets = meta.inlets.length;\n        this.outlets = meta.outlets.length;\n        const { inlets, outlets } = meta;\n        this.setMeta({ ...this.meta, inlets, outlets, args: SubPatcher.args });\n    };\n    handlePatcherGraphChanged = () => {\n        this.patcher.emit(\"graphChanged\");\n    };\n    handlePatcherChanged = () => {\n        const { patcher } = this._;\n        if (patcher.isTemporary) {\n            const rawPatcher = patcher.toSerializable();\n            this.setData(rawPatcher);\n        }\n        this.patcher.emit(\"changed\");\n    };\n    handleFilePathChanged = () => {\n        this._.key = this._.patcher.file.projectPath;\n    };\n    handleSaved = (e: ProjectFileEventMap[\"saved\"]) => {\n        if (e.instance === this._.patcher) return;\n        this.reload();\n    };\n    subscribePatcher = async () => {\n        const { patcher } = this._;\n        if (patcher) {\n            await patcher.addObserver(this);\n            patcher.on(\"dataOutput\", this.handlePatcherOutput);\n            patcher.on(\"disconnectAudioInlet\", this.handlePatcherDisconnectAudioInlet);\n            patcher.on(\"disconnectAudioOutlet\", this.handlePatcherDisconnectAudioOutlet);\n            patcher.on(\"connectAudioInlet\", this.handlePatcherConnectAudioInlet);\n            patcher.on(\"connectAudioOutlet\", this.handlePatcherConnectAudioOutlet);\n            patcher.on(\"ioChanged\", this.handlePatcherIOChanged);\n            patcher.on(\"graphChanged\", this.handlePatcherGraphChanged);\n            patcher.on(\"changed\", this.handlePatcherChanged);\n            const { file } = patcher;\n            if (file) {\n                file.on(\"destroyed\", this.reload);\n                file.on(\"nameChanged\", this.handleFilePathChanged);\n                file.on(\"pathChanged\", this.handleFilePathChanged);\n                file.on(\"saved\", this.handleSaved);\n            }\n        }\n    };\n    unsubscribePatcher = async () => {\n        const { patcher } = this._;\n        if (patcher) {\n            patcher.off(\"dataOutput\", this.handlePatcherOutput);\n            patcher.off(\"disconnectAudioInlet\", this.handlePatcherDisconnectAudioInlet);\n            patcher.off(\"disconnectAudioOutlet\", this.handlePatcherDisconnectAudioOutlet);\n            patcher.off(\"connectAudioInlet\", this.handlePatcherConnectAudioInlet);\n            patcher.off(\"connectAudioOutlet\", this.handlePatcherConnectAudioOutlet);\n            patcher.off(\"ioChanged\", this.handlePatcherIOChanged);\n            patcher.off(\"graphChanged\", this.handlePatcherGraphChanged);\n            patcher.off(\"changed\", this.handlePatcherChanged);\n            const { file } = patcher;\n            if (file) {\n                file.off(\"destroyed\", this.reload);\n                file.off(\"nameChanged\", this.handleFilePathChanged);\n                file.off(\"pathChanged\", this.handleFilePathChanged);\n                file.off(\"saved\", this.handleSaved);\n            }\n            await patcher.removeObserver(this); // patcher will be destroyed if no observers left.\n        }\n    };\n    reload = async () => {\n        if (this._.patcher) {\n            this.disconnectAudio();\n            await this.unsubscribePatcher();\n        }\n        const { key } = this._;\n        let patcher: Patcher;\n        let rawPatcher: RawPatcher;\n        try {\n            const { item, newItem } = await this.getSharedItem(key, \"patcher\", async () => {\n                patcher = new this.Patcher({ env: this.patcher.env, project: this.patcher.project });\n                await patcher.load(this.data, this.type);\n                rawPatcher = patcher.toSerializable();\n                return rawPatcher;\n            });\n            if (newItem) {\n                patcher.file = item;\n                this.setData(rawPatcher);\n            } else {\n                patcher = await item.instantiate({ env: this.patcher.env, project: this.patcher.project }) as Patcher;\n                this.setData(patcher.toSerializable());\n            }\n            this._.patcher = patcher;\n            this.updateUI({ patcher });\n        } catch (error) {\n            this.error(error);\n        } finally {\n            this.handlePatcherIOChanged(this._.patcher.meta);\n            this.subscribePatcher();\n            this.handlePatcherGraphChanged();\n            this.connectAudio();\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"updateArgs\", async (args) => {\n            if (!this._.patcher) return;\n            if (typeof args[0] === \"string\" || typeof args[0] === \"undefined\") {\n                const newKey = args[0];\n                if (newKey !== this._.key) {\n                    this._.key = newKey;\n                    await this.reload();\n                }\n            }\n        });\n        this.on(\"postInit\", this.reload);\n        this.on(\"inlet\", ({ data, inlet }) => this._.patcher.fn(data, inlet));\n        this.on(\"destroy\", this.unsubscribePatcher);\n    }\n}\n","import In from \"./In\";\nimport Out from \"./Out\";\nimport AudioIn from \"./AudioIn\";\nimport AudioOut from \"./AudioOut\";\nimport SubPatcher from \"./SubPatcher\";\nimport FaustPatcher from \"./FaustPatcher\";\nimport GenPatcher from \"./GenPatcher\";\nimport BPatcher from \"./BPatcher\";\nimport DspSubPatcher from \"./DspSubPatcher\";\n\nexport default async () => ({\n    in: In,\n    out: Out,\n    \"in~\": AudioIn,\n    \"out~\": AudioOut,\n    patcher: SubPatcher,\n    p: SubPatcher,\n    pdsp: DspSubPatcher,\n    faustPatcher: FaustPatcher,\n    pfaust: FaustPatcher,\n    gen: GenPatcher,\n    bpatcher: BPatcher\n});\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".patcher div.box-ui > div.package-base.package-base-invalidobject > .box-ui-text-container {\\n  background-color: #804040; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/core/objects/base/InvalidObject.scss\"],\"names\":[],\"mappings\":\"AAAA;EAEQ,yBAAkC,EAAA\",\"sourcesContent\":[\".patcher div.box-ui > div.package-base {\\n    &.package-base-invalidobject > .box-ui-text-container {\\n        background-color: rgb(128, 64, 64);\\n    }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".patcher div.box-ui > div.package-subpatcher-bpatcher {\\n  position: relative;\\n  height: 100%;\\n  width: 100%; }\\n  .patcher div.box-ui > div.package-subpatcher-bpatcher > div > div.patcher {\\n    overflow: hidden; }\\n\\n.patcher.locked div.box-ui > div.package-subpatcher-bpatcher {\\n  overflow: hidden; }\\n  .patcher.locked div.box-ui > div.package-subpatcher-bpatcher > div > div.patcher {\\n    overflow: hidden; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/core/objects/main/BPatcherUI.scss\"],\"names\":[],\"mappings\":\"AAAA;EAEQ,kBAAkB;EAClB,YAAY;EACZ,WAAW,EAAA;EAJnB;IAMY,gBAAgB,EAAA;;AAN5B;EAWY,gBAAgB,EAAA;EAX5B;IAagB,gBAAgB,EAAA\",\"sourcesContent\":[\".patcher {\\n    & div.box-ui > div.package-subpatcher-bpatcher {\\n        position: relative;\\n        height: 100%;\\n        width: 100%;\\n        & > div > div.patcher {\\n            overflow: hidden;\\n        }\\n    }\\n    &.locked {\\n        & div.box-ui > div.package-subpatcher-bpatcher {\\n            overflow: hidden;\\n            & > div > div.patcher {\\n                overflow: hidden;\\n            }\\n        }\\n    }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./InvalidObject.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./BPatcherUI.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};"],"sourceRoot":""}