{"version":3,"file":"js/7e971f7eda4062696834.worklet.js","mappings":"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","sources":["webpack://JSPatcher/./src/core/PackageManager.ts","webpack://JSPatcher/./src/core/Project.ts","webpack://JSPatcher/./src/core/TaskMgr.ts","webpack://JSPatcher/./src/core/WorkletGlobalPackageManager.ts","webpack://JSPatcher/./src/core/WorkletSDK.ts","webpack://JSPatcher/./src/core/audio/TempAudioFile.ts","webpack://JSPatcher/./src/core/file/AbstractProjectFile.ts","webpack://JSPatcher/./src/core/file/AbstractProjectFolder.ts","webpack://JSPatcher/./src/core/file/AbstractProjectItem.ts","webpack://JSPatcher/./src/core/file/AbstractProjectItemManager.ts","webpack://JSPatcher/./src/core/file/FileEditor.ts","webpack://JSPatcher/./src/core/file/FileInstance.ts","webpack://JSPatcher/./src/core/file/History.ts","webpack://JSPatcher/./src/core/file/PersistentProjectFile.ts","webpack://JSPatcher/./src/core/file/PersistentProjectFolder.ts","webpack://JSPatcher/./src/core/file/TempData.ts","webpack://JSPatcher/./src/core/file/TemporaryProjectFile.ts","webpack://JSPatcher/./src/core/file/TemporaryProjectFolder.ts","webpack://JSPatcher/./src/core/file/TemporaryProjectItemManager.ts","webpack://JSPatcher/./src/core/file/WorkletProjectItemManager.ts","webpack://JSPatcher/./src/core/objects/base/AbstractObject.ts","webpack://JSPatcher/./src/core/objects/base/Bang.ts","webpack://JSPatcher/./src/core/objects/base/BaseObject.ts","webpack://JSPatcher/./src/core/objects/base/generateRemotedObject.ts","webpack://JSPatcher/./src/core/objects/base/index.jsdsppkg.aw.ts","webpack://JSPatcher/./src/core/objects/globalThis/index.jsdsppkg.ts","webpack://JSPatcher/./src/core/objects/importer/Func.tsx","webpack://JSPatcher/./src/core/objects/importer/Getter.ts","webpack://JSPatcher/./src/core/objects/importer/ImportedObject.tsx","webpack://JSPatcher/./src/core/objects/importer/Importer.ts","webpack://JSPatcher/./src/core/objects/importer/Method.ts","webpack://JSPatcher/./src/core/objects/importer/New.tsx","webpack://JSPatcher/./src/core/objects/importer/Property.ts","webpack://JSPatcher/./src/core/objects/importer/RemotedImporter.ts","webpack://JSPatcher/./src/core/objects/importer/Setter.ts","webpack://JSPatcher/./src/core/objects/importer/SetterGetter.ts","webpack://JSPatcher/./src/core/objects/importer/StaticGetter.ts","webpack://JSPatcher/./src/core/objects/importer/StaticMethod.ts","webpack://JSPatcher/./src/core/objects/importer/StaticProperty.ts","webpack://JSPatcher/./src/core/objects/importer/StaticSetter.ts","webpack://JSPatcher/./src/core/objects/importer/StaticSetterGetter.ts","webpack://JSPatcher/./src/core/objects/jsaw/AudioIn.ts","webpack://JSPatcher/./src/core/objects/jsaw/AudioOut.ts","webpack://JSPatcher/./src/core/objects/jsaw/In.ts","webpack://JSPatcher/./src/core/objects/jsaw/Out.ts","webpack://JSPatcher/./src/core/objects/jsaw/Param.ts","webpack://JSPatcher/./src/core/objects/jsaw/index.jsdsppkg.aw.ts","webpack://JSPatcher/./src/core/patcher/Box.ts","webpack://JSPatcher/./src/core/patcher/FaustPatcherAnalyser.ts","webpack://JSPatcher/./src/core/patcher/Line.ts","webpack://JSPatcher/./src/core/patcher/Patcher.ts","webpack://JSPatcher/./src/core/patcher/PatcherEditor.ts","webpack://JSPatcher/./src/core/patcher/PatcherHistory.ts","webpack://JSPatcher/./src/core/patcher/TempPatcherFile.ts","webpack://JSPatcher/./src/core/text/TempTextFile.ts","webpack://JSPatcher/./src/core/worklets/AudioWorkletProxyProcessor.ts","webpack://JSPatcher/./src/utils/TypedEventEmitter.ts","webpack://JSPatcher/./src/utils/symbols.ts","webpack://JSPatcher/./src/utils/utils.ts","webpack://JSPatcher/webpack/bootstrap","webpack://JSPatcher/webpack/runtime/compat get default export","webpack://JSPatcher/webpack/runtime/define property getters","webpack://JSPatcher/webpack/runtime/ensure chunk","webpack://JSPatcher/webpack/runtime/hasOwnProperty shorthand","webpack://JSPatcher/webpack/runtime/make namespace object","webpack://JSPatcher/webpack/runtime/publicPath","webpack://JSPatcher/./src/core/worklets/WorkletEnv.worklet.ts"],"sourcesContent":["import TypedEventEmitter from \"../utils/TypedEventEmitter\";\nimport { ImporterDirSelfObject } from \"../utils/symbols\";\nimport { isJSPatcherObjectConstructor, IJSPatcherObject } from \"./objects/base/AbstractObject\";\nimport type { TFlatPackage, TPackage } from \"./types\";\nimport type Patcher from \"./patcher/Patcher\";\n\nexport interface PackageManagerEventMap {\n    \"libChanged\": never;\n    \"pathDuplicated\": string;\n}\n\nexport interface IPackageManager extends TypedEventEmitter<PackageManagerEventMap> {\n    pkg: TPackage;\n    lib: TFlatPackage;\n    importFromURL(url: string, id: string): Promise<void>;\n    remove(id: string): void;\n}\n\nexport default class PackageManager extends TypedEventEmitter<PackageManagerEventMap> implements IPackageManager {\n    private readonly patcher: Patcher;\n    pkg: TPackage;\n    lib: TFlatPackage;\n    get global() {\n        return this.patcher.env.pkgMgr;\n    }\n    get mode() {\n        return this.patcher.props.mode;\n    }\n    constructor(patcher: Patcher) {\n        super();\n        this.patcher = patcher;\n        this.init();\n    }\n    init() {\n        this.pkg = { ...this.global[this.mode] };\n        this.lib = this.packageRegister(this.pkg);\n    }\n    remove(id: string) {}\n    async importFromURL(url: string, id: string) {\n        if (!this.global.importFromURL) throw new Error(\"Cannot import from this context\");\n        await this.global.importFromURL(url, id);\n        this.init();\n        this.emit(\"libChanged\");\n    }\n    packageRegister(pkg: TPackage, libOut: TFlatPackage = {}, rootifyDepth = Infinity, pathIn?: string[]) {\n        const path = pathIn ? pathIn.slice() : [];\n        if (path.length && ImporterDirSelfObject in pkg) {\n            const el = pkg[ImporterDirSelfObject as any];\n            if (isJSPatcherObjectConstructor(el)) {\n                const full = path.join(\".\");\n                if (full in libOut) this.emit(\"pathDuplicated\", full);\n                // this.patcher.newLog(\"warn\", \"Patcher\", \"Path duplicated, cannot register \" + full, this);\n                else libOut[full] = el as typeof IJSPatcherObject;\n                const p = path.slice();\n                while (p.length && path.length - p.length < rootifyDepth) {\n                    const k = p.join(\".\");\n                    if (!(k in libOut)) libOut[k] = el as typeof IJSPatcherObject;\n                    p.shift();\n                }\n            }\n        }\n        for (const key in pkg) {\n            const el = pkg[key];\n            if (typeof el === \"object\") {\n                this.packageRegister(el, libOut, rootifyDepth, [...path, key]);\n            } else if (isJSPatcherObjectConstructor(el)) {\n                const full = [...path, key].join(\".\");\n                if (full in libOut) this.emit(\"pathDuplicated\", full);\n                // this.patcher.newLog(\"warn\", \"Patcher\", \"Path duplicated, cannot register \" + full, this);\n                else libOut[full] = el;\n                const p = [...path, key];\n                while (p.length && path.length + 1 - p.length < rootifyDepth) {\n                    const k = p.join(\".\");\n                    if (!(k in libOut)) libOut[k] = el;\n                    p.shift();\n                }\n            }\n        }\n        return libOut;\n    }\n    searchInLib(query: string, limit = Infinity, staticMethodOnly = false, lib: TFlatPackage) {\n        const keys = Object.keys(lib).sort();\n        const items: { key: string; object: typeof IJSPatcherObject }[] = [];\n        for (let i = 0; i < keys.length; i++) {\n            if (items.length >= limit) break;\n            const key = keys[i];\n            if (key.startsWith(query)) {\n                const o = lib[key];\n                if (staticMethodOnly) {\n                    if (o[ImporterDirSelfObject as unknown as keyof typeof IJSPatcherObject]) {\n                        items.push({ key, object: o });\n                    }\n                } else {\n                    items.push({ key, object: o });\n                }\n            }\n        }\n        return items;\n    }\n    searchInPkg(query: string, limit = Infinity, staticMethodOnly = false, pkg: TPackage, path: string[] = []): { path: string[]; object?: typeof IJSPatcherObject | TPackage }[] {\n        const outs: { path: string[]; object?: typeof IJSPatcherObject | TPackage }[] = [];\n        for (const key in pkg) {\n            if (outs.length >= limit) break;\n            const o = pkg[key];\n            if (typeof o === \"object\") {\n                if (key.indexOf(query) !== -1) outs.push({ path: [...path, key], object: o });\n                else outs.push(...this.searchInPkg(query, limit, staticMethodOnly, o, [...path, key]));\n            } else {\n                if (key.indexOf(query) !== -1) outs.push({ path: [...path, key], object: o });\n            }\n        }\n        return outs;\n    }\n    getFromPath(pathIn: (string | symbol)[], pkg: TPackage) {\n        const path = pathIn.slice();\n        let o: TPackage | typeof IJSPatcherObject = pkg;\n        while (path.length) {\n            const key = path.shift() as any;\n            o = (o as TPackage)[key];\n            if (!o) return null;\n            if (typeof o !== \"object\" && !isJSPatcherObjectConstructor(o)) return null;\n        }\n        return o;\n    }\n}\n","import TypedEventEmitter from \"../utils/TypedEventEmitter\";\nimport { ab2str, str2ab } from \"../utils/utils\";\nimport type Env from \"./Env\";\nimport type FileInstance from \"./file/FileInstance\";\nimport type PersistentProjectFile from \"./file/PersistentProjectFile\";\nimport type { IJSPatcherEnv } from \"./Env\";\nimport type { IPropsMeta } from \"./objects/base/AbstractObject\";\n\nexport interface ProjectEventMap {\n    \"propsChanged\": Partial<ProjectProps>;\n    \"save\": never;\n    \"unload\": never;\n}\nexport interface ProjectProps {\n    name: string;\n    author: string;\n    version: string;\n}\n\nexport interface IProject extends TypedEventEmitter<ProjectEventMap> {\n}\n\nexport default class Project extends TypedEventEmitter<ProjectEventMap> {\n    static props: IPropsMeta<ProjectProps> = {\n        name: {\n            type: \"string\",\n            description: \"Project name\",\n            default: \"Untitled\"\n        },\n        author: {\n            type: \"string\",\n            description: \"Author\",\n            default: \"Anonymous\"\n        },\n        version: {\n            type: \"string\",\n            description: \"Current version\",\n            default: \"0.0.0\"\n        }\n    };\n    readonly projectFilename = \".jspatproj\";\n    readonly env: IJSPatcherEnv;\n    readonly instances: FileInstance[];\n    readonly props: ProjectProps = {\n        name: Project.props.name.default,\n        author: Project.props.author.default,\n        version: Project.props.version.default\n    };\n    get audioCtx() {\n        return (this.env as Env).audioCtx;\n    }\n    constructor(envIn: IJSPatcherEnv) {\n        super();\n        this.env = envIn;\n    }\n    setProps(props: Partial<ProjectProps>) {\n        let changed = false;\n        for (const keyIn in props) {\n            const key = keyIn as keyof ProjectProps;\n            if (this.props[key] === props[key]) continue;\n            changed = true;\n            (this.props as any)[key] = props[key];\n        }\n        if (changed) this.emit(\"propsChanged\", props);\n    }\n    async save() {\n        await this.emit(\"save\");\n    }\n    async load(clean = false) {\n        await this.env.fileMgr.init(clean);\n        await this.init();\n    }\n    async init() {\n        try {\n            const item = this.env.fileMgr.getProjectItemFromPath(`./${this.projectFilename}`) as PersistentProjectFile;\n            const json = JSON.parse(ab2str(item.data)) as ProjectProps;\n            this.setProps(json);\n        } catch (error) {\n            const data = str2ab(JSON.stringify(this.props));\n            await this.env.fileMgr.projectRoot.addFile(this.projectFilename, data);\n        }\n    }\n    async unload() {\n        for (const i of this.env.instances) {\n            if (i.project === this) await i.destroy();\n        }\n        await this.emit(\"unload\");\n    }\n}\n","import TypedEventEmitter from \"../utils/TypedEventEmitter\";\n\nexport interface Task {\n    /** thread + numberId */\n    id: string;\n    timestamp: number;\n    thread: string;\n    emitter: Object | string;\n    message: string;\n    callback: (onUpdate?: (newMsg: string) => any) => any | Promise<any>;\n}\n\nexport interface TaskError {\n    id: string;\n    timestamp: number;\n    thread: string;\n    emitter: Object | string;\n    message: string;\n    error: Error;\n}\n\nexport interface TaskManagerEventMap {\n    \"taskBegin\": Task;\n    \"taskUpdate\": Task;\n    \"taskEnd\": Task;\n    \"taskError\": TaskError;\n    \"tasks\": Task[];\n    \"errors\": TaskError[];\n}\n\nexport default class TaskManager extends TypedEventEmitter<TaskManagerEventMap> {\n    _id = 0;\n    _tasks: { [thread: string]: Task[] } = {};\n    _errors: { [thread: string]: TaskError[] } = {};\n    get tasks() {\n        const tasks: Task[] = [];\n        for (const key in this._tasks) {\n            tasks.push(...this._tasks[key].filter(e => !!e));\n        }\n        return tasks;\n    }\n    get errors() {\n        const errors: TaskError[] = [];\n        for (const key in this._errors) {\n            errors.push(...this._errors[key].filter(e => !!e));\n        }\n        return errors;\n    }\n    async newTask<T extends Task[\"callback\"] = Task[\"callback\"]>(emitter: string | Object, message: string, callback: T) {\n        const thread = globalThis.constructor.name;\n        const timestamp = Date.now();\n        const id = thread + this._id++;\n        const task: Task = { id, thread, timestamp, emitter, message, callback };\n        if (!(thread in this._tasks)) this._tasks[thread] = [];\n        const $ = this._tasks[thread].push(task) - 1;\n        this.emit(\"tasks\", this.tasks);\n        this.emit(\"taskBegin\", task);\n        let returnValue: ReturnType<T> extends Promise<infer R> ? R : ReturnType<T>;\n        const handleUpdate = (msg: string) => {\n            const task: Task = { id, thread, timestamp, emitter, message: `${message}: ${msg}`, callback };\n            this._tasks[thread][$] = task;\n            this.emit(\"tasks\", this.tasks);\n            this.emit(\"taskUpdate\", task);\n        };\n        try {\n            returnValue = await callback(handleUpdate);\n        } catch (error) {\n            const taskError: TaskError = { id, thread, timestamp, emitter, message, error };\n            if (!(thread in this._errors)) this._errors[thread] = [];\n            this._errors[thread].push(taskError);\n            this.emit(\"errors\", this.errors);\n            this.emit(\"taskError\", taskError);\n            throw error;\n        } finally {\n            this._tasks[thread][$] = null;\n            this.emit(\"tasks\", this.tasks);\n            this.emit(\"taskEnd\", task);\n        }\n        return returnValue;\n    }\n    get lastError(): TaskError {\n        return this.errors.sort(((a, b) => b.timestamp - a.timestamp))[0];\n    }\n    get lastTask(): Task {\n        return this.tasks.sort(((a, b) => b.timestamp - a.timestamp))[0];\n    }\n    getTasksFromEmitter(emitter: string | Object) {\n        return this.tasks.filter(task => task.emitter === emitter);\n    }\n    getErrorsFromEmitter(emitter: string | Object) {\n        return this.errors.filter(error => error.emitter === emitter);\n    }\n    dismissLastError() {\n        const { lastError } = this;\n        if (!lastError) return;\n        const $ = this._errors[lastError.thread].indexOf(lastError);\n        this._errors[lastError.thread][$] = null;\n        this.emit(\"errors\", this.errors);\n    }\n    dismissAllErrors() {\n        this._errors = {};\n        this.emit(\"errors\", this.errors);\n    }\n}\n","import { ImporterDirSelfObject } from \"../utils/symbols\";\nimport { isJSPatcherObjectConstructor } from \"./objects/base/AbstractObject\";\nimport getBase from \"./objects/base/index.jsdsppkg.aw\";\nimport getGlobalThis from \"./objects/globalThis/index.jsdsppkg\";\nimport type { TPackage, PatcherMode, ObjectDescriptor, TAbstractPackage } from \"./types\";\nimport type { AnyImportedObject } from \"./objects/importer/ImportedObject\";\nimport type WorkletEnvProcessor from \"./worklets/WorkletEnv.worklet\";\nimport type { PackageGetter } from \"./GlobalPackageManager\";\n\nexport default class WorkletGlobalPackageManager {\n    js: TPackage;\n    jsaw: TPackage;\n    faust: TPackage;\n    max: TPackage;\n    gen: TPackage;\n    private readonly env: WorkletEnvProcessor;\n    externals = new Map<string, Record<string, any>>();\n    constructor(envIn: WorkletEnvProcessor) {\n        this.env = envIn;\n    }\n    async init() {\n        this.jsaw = {\n            Base: await getBase(),\n            globalThis: await getGlobalThis()\n        };\n        await this.env.addObjects(this.getDescriptors(this.jsaw.globalThis, \"globalThis\"), \"globalThis\");\n    }\n    toDescriptor(O: typeof AnyImportedObject, pkgName: string): ObjectDescriptor {\n        const { path } = O;\n        return {\n            isObjectDescriptor: true as const,\n            ctor: O.importedObjectType,\n            path,\n            name: path[path.length - 1] || pkgName\n        };\n    }\n    getDescriptors(pkgIn = this.jsaw.globalThis, pkgName = \"globalThis\") {\n        const $self = \"__JSPatcher_Importer_ImporterDirSelfObject\";\n        const pkg = Object.entries(pkgIn).reduce((acc, [k, v]) => {\n            if (typeof v === \"function\") {\n                const descriptor = this.toDescriptor(v, pkgName);\n                if (k as any === ImporterDirSelfObject) acc[$self] = descriptor;\n                else acc[k] = descriptor;\n            } else {\n                acc[k] = this.getDescriptors(v, pkgName);\n            }\n            return acc;\n        }, {} as TAbstractPackage);\n        if (ImporterDirSelfObject in pkgIn) pkg[$self] = this.toDescriptor((pkgIn as any)[ImporterDirSelfObject], pkgName);\n        return pkg;\n    }\n    add(pkgIn: TPackage, lib: PatcherMode, pathIn: string[] = []) {\n        const path = pathIn.slice();\n        let pkg = this[lib];\n        while (path.length) {\n            const key = path.shift();\n            if (!pkg[key]) pkg[key] = {};\n            else if (isJSPatcherObjectConstructor(pkg[key])) pkg[key] = { [ImporterDirSelfObject]: pkg[key] };\n            pkg = pkg[key] as TPackage;\n        }\n        Object.assign(pkg, pkgIn);\n    }\n    async fetchModule(url: string) {\n        const toExport = {};\n        globalThis.exports = toExport;\n        globalThis.module = { exports: toExport } as any;\n        await this.env.addWorkletModule(url);\n        const exported = globalThis.module.exports;\n        delete globalThis.exports;\n        delete globalThis.module;\n        return exported;\n    }\n    async importPackage(url: string, id: string) {\n        const getter: PackageGetter = (await this.fetchModule(url)).default;\n        this.add(await getter(this.env), \"jsaw\", [id]);\n    }\n}\n","import BaseObject from \"./objects/base/BaseObject\";\nimport Patcher from \"./patcher/Patcher\";\nimport Box from \"./patcher/Box\";\nimport Line from \"./patcher/Line\";\nimport generateRemotedObject from \"./objects/base/generateRemotedObject\";\nimport Bang, { isBang } from \"./objects/base/Bang\";\nimport type { IJSPatcherSDK } from \"./SDK\";\n\nexport default class JSPatcherWorkletSDK implements IJSPatcherSDK {\n    readonly Patcher = Patcher;\n    readonly Box = Box;\n    readonly Line = Line;\n    readonly BaseObject = BaseObject;\n    readonly generateRemotedObject = generateRemotedObject;\n    readonly Bang = Bang;\n    readonly isBang = isBang;\n}\n","import TemporaryProjectFile from \"../file/TemporaryProjectFile\";\nimport type PatcherAudio from \"./PatcherAudio\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\n\nexport default class TempAudioFile extends TemporaryProjectFile<PatcherAudio> {\n    get type() {\n        return \"audio\" as const;\n    }\n    async instantiate() {\n        return this.data;\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const AudioEditor = (await import(\"./AudioEditor\")).default;\n        return AudioEditor.fromProjectItem({ file: this, env, project, instanceId });\n    }\n}\n","import type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { ProjectItemType } from \"../types\";\nimport type { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport AbstractProjectItem, { IProjectItem, ProjectItemEventMap } from \"./AbstractProjectItem\";\n\nexport interface ProjectFileEventMap extends ProjectItemEventMap {\n    \"saved\": any; // here emit with the object who performed the saving\n}\n\nexport interface IProjectFile<Data = any, Manager extends IProjectItemManager = IProjectItemManager> extends IProjectItem<ProjectFileEventMap, Manager> {\n    readonly type: Exclude<ProjectItemType, \"folder\">;\n    readonly isFolder: false;\n    readonly data: Data;\n    readonly fileExtension: string;\n    clone(parentIn?: IProjectFolder, nameIn?: string, dataIn?: Data): IProjectFile<Data>;\n    /**\n     * This method calls default instantiation (from the file manager).\n     * Please use `FileInstance.fromProjectItem(item)` for a better instantiation.\n     */\n    instantiate(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance>;\n    instantiateEditor(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor>;\n    /**\n     * Save the data to the file manager\n     *\n     * @param newDataIn new data to save\n     * @param by the editor who performs the save\n     */\n    save(newDataIn: Data, by: any): Promise<void>;\n    /** Save the data to a new file, not modifying the current file, nor point current editing file to the new one. */\n    saveAsCopy(parentIn: IProjectFolder, nameIn: string, newDataIn: any, manager?: IProjectItemManager): Promise<IProjectFile>;\n    /**\n     * Not modifying the current file, save to a new file and point current editing file to the new one.\n     *\n     * @param to the folder that will contain the new file to save\n     * @param newNameIn new file name to save\n     * @param newDataIn new data to save\n     * @param by the editor who performs the save\n     */\n    saveAs(to: IProjectFolder, newNameIn: string, newDataIn: any, by: any, manager?: IProjectItemManager): Promise<IProjectFile>;\n}\n\nexport default abstract class AbstractProjectFile<Data = ArrayBuffer, Manager extends IProjectItemManager<any> = IProjectItemManager> extends AbstractProjectItem<ProjectFileEventMap, Manager> implements IProjectFile<Data, Manager> {\n    get type() {\n        return this.fileMgr.getTypeFromFileName(this.name) as Exclude<ProjectItemType, \"folder\">;\n    }\n    readonly isFolder = false;\n    protected _data: Data;\n    get data() {\n        return this._data;\n    }\n    set data(dataIn: Data) {\n        this._data = dataIn;\n    }\n    get fileExtension() {\n        const splitted = this.name.split(\".\");\n        return splitted[splitted.length - 1];\n    }\n    constructor(fileMgrIn: Manager, parentIn: IProjectFolder, nameIn: string, dataIn?: Data) {\n        super(fileMgrIn, parentIn, nameIn);\n        if (dataIn) this._data = dataIn;\n        this.onAny((eventName, eventData) => {\n            const { id, isFolder, type, path, data } = this;\n            this.fileMgr.emit(\"itemChanged\", { id, isFolder, type, path, data, eventName, eventData });\n        });\n    }\n    abstract clone(parentIn?: IProjectFolder, nameIn?: string, dataIn?: Data): IProjectFile<Data>;\n    abstract instantiate(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance>;\n    abstract instantiateEditor(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor>;\n    async save(newData: Data, by: any) {\n        this._data = newData;\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n    }\n    async saveAsCopy(parent: IProjectFolder, name: string, newData: any, manager?: IProjectItemManager): Promise<IProjectFile> {\n        const item = this.clone(parent, name, newData);\n        parent.items.add(item);\n        await this.emitTreeChanged();\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n    async saveAs(to: IProjectFolder, newName: string, newData: any, by: any, manager?: IProjectItemManager): Promise<IProjectFile> {\n        const { parent, name, data } = this;\n        const from = parent;\n        this._data = newData;\n        await this.move(to, newName);\n        const item = this.clone(parent, name, data);\n        parent.items.add(item);\n        await parent.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n}\n","import type { RawProjectItem } from \"../types\";\nimport type { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport AbstractProjectItem, { IProjectFileOrFolder, IProjectItem } from \"./AbstractProjectItem\";\n\nexport interface IProjectFolder<Manager extends IProjectItemManager = IProjectItemManager> extends IProjectItem<{}, Manager> {\n    readonly type: \"folder\";\n    readonly isFolder: true;\n    readonly items: Set<IProjectFileOrFolder>;\n    clone(parentIn?: IProjectFolder, nameIn?: string): IProjectFolder;\n    createProjectItem(nameIn: string, isFolder: boolean, dataIn?: any): IProjectFileOrFolder;\n    findItem(itemIn: string): IProjectFileOrFolder;\n    existItem(itemIn: IProjectFileOrFolder | string): boolean;\n    uniqueName(nameIn: string): string;\n    addFile(nameIn: string, dataIn?: any): Promise<IProjectFileOrFolder>;\n    addFolder(nameIn: string): Promise<IProjectFolder>;\n    empty(): Promise<void>;\n    getTree(): RawProjectItem<\"folder\">;\n    getDescendantFiles(): IProjectFileOrFolder[];\n    isParentOf(itemIn: IProjectItem): boolean;\n    getOrderedItems(): IProjectFileOrFolder[];\n    emitTreeChanged(): Promise<void>;\n}\n\nexport default abstract class AbstractProjectFolder<Manager extends IProjectItemManager = IProjectItemManager> extends AbstractProjectItem<{}, Manager> implements IProjectFolder<Manager> {\n    get type(): \"folder\" {\n        return \"folder\";\n    }\n    readonly isFolder = true;\n    items: Set<IProjectFileOrFolder> = new Set();\n    get isDirty() {\n        return !this.getDescendantFiles().every(f => !f.isDirty);\n    }\n    constructor(fileMgrIn: Manager, parentIn: IProjectFolder, nameIn: string) {\n        super(fileMgrIn, parentIn, nameIn);\n        this.onAny((eventName, eventData) => {\n            const { id, isFolder, type, path } = this;\n            this.fileMgr.emit(\"itemChanged\", { id, isFolder, type, path, eventName, eventData });\n        });\n    }\n    abstract clone(parentIn?: IProjectFolder, nameIn?: string): IProjectFolder;\n    abstract createProjectItem(nameIn: string, isFolder: boolean, dataIn?: any): IProjectFileOrFolder;\n    findItem(itemIn: string) {\n        return Array.from(this.items).find(item => item.name === itemIn);\n    }\n    existItem(itemIn: IProjectFileOrFolder | string) {\n        return typeof itemIn === \"string\" ? !!this.findItem(itemIn) : this.items.has(itemIn);\n    }\n    uniqueName(nameIn: string) {\n        if (!this.existItem(nameIn)) return nameIn;\n        let i = 0;\n        let name;\n        do {\n            i++;\n            name = `nameIn_${i}`;\n        } while (this.existItem(nameIn));\n        return name;\n    }\n    abstract addFile(nameIn: string, dataIn?: any): Promise<IProjectFileOrFolder>;\n    abstract addFolder(nameIn: string): Promise<IProjectFolder>;\n    async empty() {\n        for (const item of this.items) {\n            await item.destroy();\n        }\n    }\n    getTree(): RawProjectItem<\"folder\"> {\n        return {\n            type: \"folder\",\n            id: this.id,\n            isFolder: true,\n            name: this.name,\n            items: Array.from(this.items).map((item) => {\n                if (item.isFolder === false) {\n                    const { id, isFolder, type, name, data } = item;\n                    return { id, isFolder, type, name, data };\n                }\n                return item.getTree();\n            })\n        };\n    }\n    getDescendantFiles() {\n        return Array.from(this.items).reduce((acc, cur) => {\n            if (cur.isFolder === false) acc.push(cur);\n            else acc.push(...cur.getDescendantFiles());\n            return acc;\n        }, [] as IProjectFileOrFolder[]);\n    }\n    isParentOf(itemIn: IProjectFileOrFolder) {\n        let { parent } = itemIn;\n        while (parent !== this) {\n            if (!parent) return false;\n            parent = parent.parent;\n        }\n        return true;\n    }\n    getOrderedItems() {\n        const items = Array.from(this.items);\n        const folders = items.filter(i => i.isFolder).sort((a, b) => a.name.localeCompare(b.name));\n        const files = items.filter(i => !i.isFolder).sort((a, b) => a.name.localeCompare(b.name));\n        return [...folders, ...files];\n    }\n}\n","import TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport type { IObservee, ProjectItemType } from \"../types\";\nimport type { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport type { IProjectFile } from \"./AbstractProjectFile\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\n\nexport type IProjectFileOrFolder = IProjectFolder | IProjectFile;\n\nexport interface ProjectItemEventMap {\n    \"ready\": never;\n    \"nameChanged\": { oldName: string; newName: string };\n    \"pathChanged\": { from: string; to: string };\n    \"treeChanged\": never;\n    \"destroyed\": never;\n    \"observers\": Set<string>;\n    \"dirty\": boolean;\n}\n\nexport interface IProjectItem<EventMap extends Record<string, any> = {}, Manager extends IProjectItemManager = IProjectItemManager> extends ITypedEventEmitter<ProjectItemEventMap & EventMap>, IObservee<string> {\n    readonly id: string;\n    readonly fileMgr: Manager;\n    readonly isFolder: boolean;\n    readonly type: ProjectItemType;\n    readonly name: string;\n    /** path used by the file manager */\n    readonly path: string;\n    /** parent path used by the file manager */\n    readonly parentPath: string;\n    /** path relative to the project root */\n    readonly projectPath: string;\n    /** Is the file is editing by some editor and modified (without saving the data), isDirty is true. */\n    readonly isDirty: boolean;\n    parent: IProjectFolder;\n    /** Load data */\n    init(): Promise<void>;\n    /** Clone with optional modifications */\n    clone(parentIn?: IProjectFolder, nameIn?: string): IProjectItem;\n    rename(newNameIn: string): Promise<void>;\n    move(to: IProjectFolder, newNameIn?: string): Promise<void>;\n    /** Delete current file from file manager and the parent folder. */\n    destroy(): Promise<void>;\n}\n\nexport default abstract class AbstractProjectItem<EventMap extends Partial<ProjectItemEventMap> & Record<string, any> = {}, Manager extends IProjectItemManager = IProjectItemManager> extends TypedEventEmitter<ProjectItemEventMap & EventMap> implements IProjectItem<EventMap, Manager> {\n    id: string;\n    get type(): ProjectItemType {\n        return \"unknown\";\n    }\n    readonly isFolder: boolean;\n    protected readonly _fileMgr;\n    get fileMgr() {\n        return this._fileMgr;\n    }\n    protected _name: string;\n    get name() {\n        return this._name;\n    }\n    parent: IProjectFolder;\n    private _isDirty: boolean;\n    get isDirty() {\n        return this._isDirty;\n    }\n    get path(): string {\n        return this.parent ? `${this.parentPath}/${this._name}` : \"\";\n    }\n    get parentPath() {\n        return this.parent?.path;\n    }\n    get projectPath() {\n        return this.path.replace(new RegExp(`^/${this._fileMgr.projectFolderName}`), \"\");\n    }\n    protected readonly _observers = new Set<string>();\n    async addObserver(observer: string) {\n        this._observers.add(observer);\n        await this.emit(\"observers\", this._observers);\n        await this.fileMgr.emitChanged();\n    }\n    async removeObserver(observer: string) {\n        this._observers.delete(observer);\n        await this.emit(\"observers\", this._observers);\n        await this.fileMgr.emitChanged();\n    }\n    constructor(fileMgrIn: Manager, parentIn: IProjectFolder, nameIn: string) {\n        super();\n        this._fileMgr = fileMgrIn;\n        this.parent = parentIn;\n        this._name = nameIn;\n        this.on(\"dirty\", dirty => this._isDirty = dirty);\n    }\n    abstract rename(newNameIn: string): Promise<void>;\n    abstract move(to: IProjectFolder, newNameIn?: string): Promise<void>;\n    abstract destroy(): Promise<void>;\n    abstract clone(parentIn?: IProjectFolder, nameIn?: string): IProjectItem;\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        await this.emit(\"ready\");\n        await this.fileMgr.emitChanged();\n    }\n    async emitTreeChanged() {\n        await this.emit(\"treeChanged\");\n        await (this.parent || this.fileMgr).emitTreeChanged();\n    }\n}\n","import TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport { extToType } from \"../../utils/utils\";\nimport type TaskMgr from \"../TaskMgr\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { ProjectItemType, RawProjectItem } from \"../types\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IProjectFileOrFolder, IProjectItem, ProjectItemEventMap } from \"./AbstractProjectItem\";\nimport { IProject } from \"../Project\";\n\nexport interface ItemChangedEvent<K extends keyof ProjectItemEventMap = keyof ProjectItemEventMap> {\n    id: string;\n    isFolder: boolean;\n    path: string;\n    type: ProjectItemType;\n    data?: any;\n    eventName: K;\n    eventData?: ProjectItemEventMap[K];\n}\n\nexport interface ProjectItemManagerEventMap {\n    \"ready\": never;\n    \"treeChanged\": RawProjectItem<\"folder\">;\n    \"itemChanged\": ItemChangedEvent;\n    \"changed\": never;\n}\n\nexport interface IProjectItemManager<EventMap extends Record<string, any> & Partial<ProjectItemManagerEventMap> = {}> extends ITypedEventEmitter<EventMap & ProjectItemManagerEventMap> {\n    readonly projectFolderName: string;\n    readonly id: string;\n    readonly taskMgr: TaskMgr;\n    readonly allItems: Record<string, IProjectFileOrFolder>;\n    readonly allProjectItems: Record<string, IProjectFileOrFolder>;\n    root: IProjectFolder;\n    /** Enpty the backend file manager */\n    empty(): Promise<any>;\n    /** Empty the project rool folder */\n    emptyProject(): Promise<void>;\n    /** Create all project items by analyzing the backend */\n    init(clean?: boolean): Promise<this>;\n    getTypeFromFileName(name: string): ProjectItemType;\n    getProjectItemFromId(id: string): IProjectFileOrFolder;\n    getProjectItemFromPath(path: string): IProjectFileOrFolder;\n    getPathIdMap(): Record<string, string>;\n    instantiateProjectPath(path: string, envIn: IJSPatcherEnv, projectIn?: IProject): Promise<IFileInstance>;\n    emitTreeChanged(): Promise<void>;\n    emitChanged(): Promise<void>;\n    generateItemId(item: IProjectItem): string;\n}\n\nexport default abstract class AbstractProjectItemManager<EventMap extends Record<string, any> & Partial<ProjectItemManagerEventMap> = {}> extends TypedEventEmitter<EventMap & ProjectItemManagerEventMap> implements IProjectItemManager<EventMap> {\n    readonly projectFolderName = \"project\";\n    readonly id: string;\n    readonly env: IJSPatcherEnv;\n    readonly taskMgr: TaskMgr;\n    get allItems() {\n        const items: Record<string, IProjectFileOrFolder> = {};\n        const rec = (cur: IProjectFileOrFolder) => {\n            items[cur.id] = cur;\n            if (cur.isFolder) cur.items.forEach(rec);\n        };\n        rec(this.root);\n        return items;\n    }\n    get allProjectItems() {\n        const items: Record<string, IProjectFileOrFolder> = {};\n        const rec = (cur: IProjectFileOrFolder) => {\n            items[cur.id] = cur;\n            if (cur.isFolder) cur.items.forEach(rec);\n        };\n        rec(this.projectRoot);\n        return items;\n    }\n    root: IProjectFolder;\n    constructor(envIn: IJSPatcherEnv) {\n        super();\n        this.env = envIn;\n        this.id = envIn.generateId(this);\n        this.taskMgr = envIn.taskMgr;\n    }\n    abstract empty(): Promise<any>;\n    emptyProject() {\n        return this.projectRoot.empty();\n    }\n    abstract init(clean?: boolean): Promise<this>;\n    getTypeFromFileName(name: string): ProjectItemType {\n        const splitted = name.split(\".\");\n        const ext = splitted[splitted.length - 1];\n        return extToType(ext);\n    }\n    getProjectItemFromId(id: string) {\n        return this.allItems[id];\n    }\n    getProjectItemFromPath(path: string) {\n        const pathArray = path.split(\"/\");\n        const itemArray: (IProjectFileOrFolder)[] = [this.root, this.projectRoot];\n        for (let i = 0; i < pathArray.length; i++) {\n            const id = pathArray[i];\n            if (id.length === 0) continue;\n            if (id === \".\") continue;\n            if (id === \"..\") {\n                itemArray.pop();\n                continue;\n            }\n            const cur = itemArray[itemArray.length - 1];\n            if (!cur.isFolder) throw new Error(`${cur.name} from path ${path} is not a folder`);\n            const next = cur.findItem(id);\n            if (!next) throw new Error(`Cannot find ${id} from path ${path}`);\n            itemArray.push(next);\n        }\n        return itemArray[itemArray.length - 1];\n    }\n    getPathIdMap() {\n        const map: Record<string, string> = {};\n        Object.entries(this.allItems).forEach(([id, { path }]) => map[path] = id);\n        return map;\n    }\n    instantiateProjectPath(path: string, envIn: IJSPatcherEnv, projectIn: IProject) {\n        const item = this.getProjectItemFromPath(path);\n        if (item.isFolder === false) return item.instantiate({ env: envIn, project: projectIn });\n        throw new Error(`Cannot instantiate ${item.name} from path ${path} as it is a folder`);\n    }\n    async emitTreeChanged() {\n        this.emit(\"treeChanged\", this.root.getTree());\n    }\n    async emitChanged() {\n        this.emit(\"changed\");\n    }\n    get projectRoot() {\n        return this.root.findItem(this.projectFolderName) as IProjectFolder;\n    }\n    generateItemId(item: IProjectItem) {\n        return this.env.generateId(item);\n    }\n}\n","import type { SemanticICONS } from \"semantic-ui-react\";\nimport TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport History from \"./History\";\nimport TemporaryProjectFile from \"./TemporaryProjectFile\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFile } from \"./AbstractProjectFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\n\nexport interface FileEditorEventMap {\n    \"ready\": never;\n    \"changed\": never;\n    \"dirty\": boolean;\n    \"saved\": never;\n    \"locked\": boolean;\n    \"destroy\": never;\n}\n\nexport interface IFileEditor<Instance extends IFileInstance = IFileInstance, EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> extends ITypedEventEmitter<EventMap & FileEditorEventMap> {\n    readonly instance: Instance;\n    readonly env: IJSPatcherEnv;\n    readonly project: IProject;\n    readonly ctx: IFileInstance[\"ctx\"];\n    readonly isInMemory: boolean;\n    readonly isTemporary: boolean;\n    isReadonly: boolean;\n    readonly isReady: boolean;\n    readonly isDestroyed: boolean;\n    readonly isDirty: boolean;\n    readonly isLocked: boolean;\n    readonly isActive: boolean;\n    readonly editorId: string;\n    readonly fileExtension: string;\n    readonly fileIcon: SemanticICONS;\n    file: IProjectFile;\n    setActive(): void;\n    undo(): Promise<void>;\n    redo(): Promise<void>;\n    copy(): Promise<void>;\n    cut(): Promise<void>;\n    paste(): Promise<void>;\n    deleteSelected(): Promise<any>;\n    selectAll(): Promise<void>;\n    onUiResized(): void;\n    save(): Promise<void>;\n    saveAs(parent: any, name: string): Promise<void>;\n    destroy(): Promise<void>;\n}\n\nexport type AnyFileEditor = FileEditor<any, Record<string, any>>;\n\nexport default class FileEditor<Instance extends IFileInstance = IFileInstance, EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> extends TypedEventEmitter<EventMap & FileEditorEventMap> implements IFileEditor<Instance, EventMap> {\n    static async fromProjectItem({ file, env, project, instanceId }: { file: IProjectFile; env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor> {\n        return new this(await file.instantiate({ env, project, instanceId }));\n    }\n    readonly instance: Instance;\n    get env() {\n        return this.instance.env;\n    }\n    get project() {\n        return this.instance.project;\n    }\n    get file() {\n        return this.instance.file;\n    }\n    set file(value) {\n        this.instance.file = value;\n    }\n    get ctx() {\n        return this.instance.ctx;\n    }\n    get isInMemory() {\n        return this.instance.isInMemory;\n    }\n    get isTemporary() {\n        return this.instance.isTemporary;\n    }\n    get isReadonly() {\n        return this.instance.isReadonly;\n    }\n    set isReadonly(value) {\n        this.instance.isReadonly = value;\n    }\n    protected _isReady = false;\n    get isReady() {\n        return this._isReady;\n    }\n    protected _isDestroyed = false;\n    get isDestroyed() {\n        return this._isDestroyed;\n    }\n    get isDirty() {\n        return this.history.isDirty;\n    }\n    get isLocked() {\n        return false;\n    }\n    get history(): History<Partial<EventMap>, this> {\n        return this.instance.history;\n    }\n    get fileExtension() {\n        return \"data\";\n    }\n    get fileIcon(): SemanticICONS {\n        return \"code\";\n    }\n    setActive() {\n        this.env.activeEditor = this;\n    }\n    get isActive(): boolean {\n        return this.env.thread === \"main\" && this.env.activeEditor === this;\n    }\n    readonly editorId: string;\n    handleProjectSave = async () => this.save();\n    handleProjectUnload = async () => this.destroy();\n    handleDestroy = () => this.destroy();\n    constructor(instance: Instance) {\n        super();\n        this.instance = instance;\n        this.instance?.addObserver(this);\n        this.instance.on(\"destroy\", this.handleDestroy);\n        this.history.addEditor(this);\n        this.on(\"dirty\", isDirty => this.file?.emit(\"dirty\", isDirty));\n        this.on(\"destroy\", () => this.file?.emit(\"dirty\", false));\n        const handleReady = () => {\n            this._isReady = true;\n            this.off(\"ready\", handleReady);\n        };\n        this.on(\"ready\", handleReady);\n        this.editorId = this.env.generateId(this);\n        if (this.env.thread === \"main\") this.env.registerInstance(this.instance);\n        if (this.project) {\n            this.project.on(\"save\", this.handleProjectSave);\n            this.project.on(\"unload\", this.handleProjectUnload);\n        }\n    }\n    async toFileData() {\n        return this.instance.serialize();\n    }\n    async toTempData(): Promise<any> {\n        return this.instance;\n    }\n    undo() {\n        return this.history.undo();\n    }\n    redo() {\n        return this.history.redo();\n    }\n    async copy() {\n        throw new Error(\"Not implemented.\");\n    }\n    async cut() {\n        throw new Error(\"Not implemented.\");\n    }\n    async paste() {\n        throw new Error(\"Not implemented.\");\n    }\n    async deleteSelected(): Promise<any> {\n        throw new Error(\"Not implemented.\");\n    }\n    async selectAll() {\n        throw new Error(\"Not implemented.\");\n    }\n    onUiResized() {\n        throw new Error(\"Not implemented.\");\n    }\n    async save() {\n        if (this.isReadonly) throw new Error(\"Cannot save readonly file\");\n        if (this.isInMemory) throw new Error(\"Cannot save in-memory instance\");\n        const data = await (this.file instanceof TemporaryProjectFile ? this.toTempData() : this.toFileData());\n        await this.file.save(data, this);\n        await this.emit(\"saved\");\n    }\n    async saveAs(parent: IProjectFolder, name: string) {\n        const data = await this.toFileData();\n        if (this.isTemporary) {\n            await this.file.saveAsCopy(parent, name, data);\n        } else if (this.isReadonly) {\n            await this.file.saveAs(parent, name, data, this);\n        } else if (this.isInMemory) {\n            this.file = await parent.addFile(name, data) as any;\n        } else {\n            await this.file.saveAs(parent, name, data, this);\n        }\n        this.isReadonly = false;\n        await this.emit(\"saved\");\n    }\n    async destroy() {\n        if (this.isDestroyed) return;\n        if (this.project) {\n            this.project.off(\"save\", this.handleProjectSave);\n            this.project.off(\"unload\", this.handleProjectUnload);\n        }\n        this.instance.off(\"destroy\", this.handleDestroy);\n        this.instance.removeObserver(this);\n        this.history.removeEditor(this);\n        this._isDestroyed = true;\n        await this.emit(\"destroy\");\n    }\n}\n","import TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport TemporaryProjectFile from \"./TemporaryProjectFile\";\nimport type History from \"./History\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IObservee } from \"../types\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IProjectFile } from \"./AbstractProjectFile\";\n\nexport interface FileInstanceEventMap {\n    \"observers\": Set<any>;\n    \"ready\": never;\n    \"changed\": never;\n    \"destroy\": never;\n}\n\nexport interface IFileInstance<EventMap extends Record<string, any> & Partial<FileInstanceEventMap> = {}, File extends IProjectFile = IProjectFile> extends ITypedEventEmitter<EventMap & FileInstanceEventMap>, IObservee {\n    file?: File;\n    readonly env: IJSPatcherEnv;\n    readonly project: IProject;\n    readonly ctx: File | IProject | IJSPatcherEnv;\n    /** Means it doesn't have a file to save */\n    readonly isInMemory: boolean;\n    /** Means it doesn't have a file to save in the backend */\n    readonly isTemporary: boolean;\n    isReadonly: boolean;\n    isReady: boolean;\n    readonly isActive: boolean;\n    readonly id: string;\n    readonly history: History<any, any>;\n    init(): Promise<this>;\n    setActive(): void;\n    getEditor(): Promise<IFileEditor>;\n    serialize(): Promise<ArrayBuffer>;\n    destroy(): Promise<void>;\n}\n\nexport default abstract class FileInstance<EventMap extends Record<string, any> & Partial<FileInstanceEventMap> = {}, File extends IProjectFile = IProjectFile> extends TypedEventEmitter<EventMap & FileInstanceEventMap> implements IFileInstance<EventMap, File> {\n    private readonly _env: IJSPatcherEnv;\n    get env() {\n        return this._env;\n    }\n    private readonly _project: IProject;\n    get project(): IProject {\n        return this._project;\n    }\n    private _file?: File;\n    get file(): File {\n        return this._file;\n    }\n    set file(value) {\n        if (value === this._file) return;\n        this._file?.removeObserver(this._id);\n        this._file = value;\n        this._file?.addObserver(this._id);\n    }\n    get ctx(): File | IProject | IJSPatcherEnv {\n        return this.file || this.project || this.env;\n    }\n    get isInMemory() {\n        return !this.file;\n    }\n    get isTemporary() {\n        return this.file instanceof TemporaryProjectFile;\n    }\n    private _isReadonly = false;\n    get isReadonly() {\n        return this._isReadonly;\n    }\n    set isReadonly(value) {\n        this._isReadonly = value;\n    }\n    protected _isReady = false;\n    get isReady() {\n        return this._isReady;\n    }\n    setActive() {\n        this.env.activeInstance = this;\n    }\n    get isActive(): boolean {\n        return this.env.activeInstance === this;\n    }\n    async getEditor(): Promise<IFileEditor> {\n        throw new Error(\"Not implemented.\");\n    }\n    protected readonly _observers = new Set<any>();\n    async addObserver(observer: any) {\n        this._observers.add(observer);\n        await this.emit(\"observers\", this._observers);\n    }\n    async removeObserver(observer: any) {\n        this._observers.delete(observer);\n        await this.emit(\"observers\", this._observers);\n        if (this._observers.size === 0) await this.destroy();\n    }\n    readonly _id: string;\n    get id() {\n        return this._id;\n    }\n    readonly _history: History<any, any>;\n    get history() {\n        return this._history;\n    }\n    constructor({ env, project, file, instanceId }: { env: IJSPatcherEnv; project?: IProject; file?: File; instanceId?: string }) {\n        super();\n        this._env = env;\n        this._project = project;\n        this._file = file;\n        this._id = this.env.registerInstance(this, instanceId);\n        this._file?.addObserver(this._id);\n    }\n    async init() {\n        return this;\n    }\n    async serialize(): Promise<ArrayBuffer> {\n        throw new Error(\"Not implemented.\");\n    }\n    async destroy() {\n        await this.emit(\"destroy\");\n        await this.file?.removeObserver(this._id);\n    }\n}\n","import FileEditor, { FileEditorEventMap } from \"./FileEditor\";\n\ninterface IHistoryEvent<EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> {\n    timestamp: number;\n    editorId: string;\n    eventName: keyof EventMap & string;\n    eventData?: EventMap[keyof EventMap & string];\n}\n\nexport interface IHistoryData<EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> {\n    /** Current index in the event queue */\n    $: number;\n    /** Last save Timestamp */\n    saveTime: number;\n    /** Queued events */\n    eventQueue: IHistoryEvent<EventMap>[];\n}\n\n/** The class records some events and allows to perform undo/redo with a specific editor. */\nexport default abstract class History<EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}, Editor extends FileEditor<any, EventMap> = FileEditor<any, EventMap>> implements IHistoryData<EventMap> {\n    /** Editors to sync and to listen */\n    editors: Set<Editor> = new Set();\n    saveTime = 0;\n    $ = 0;\n    eventQueue: IHistoryEvent<EventMap>[] = [];\n    /** Can be set to `false` to prevent recording events while undoing/redoing */\n    capture = true;\n    get eventListening(): (keyof EventMap & string)[] {\n        return [];\n    }\n    get now() {\n        if (globalThis.performance) {\n            return performance.now() + (performance.timeOrigin || performance.timing.navigationStart);\n        }\n        return Date.now();\n    }\n    addEditor(editor: Editor) {\n        this.editors.add(editor);\n        editor.onAny(this.handleEditorEvent);\n        editor.on(\"saved\", this.handleSaved);\n        editor.once(\"destroy\", () => this.removeEditor(editor));\n    }\n    removeEditor(editor: Editor) {\n        editor.offAny(this.handleEditorEvent);\n        this.editors.delete(editor);\n    }\n    handleEditorEvent = async (eventName: keyof EventMap & string, eventData: any, editor: Editor) => {\n        if (this.eventListening.indexOf(eventName) === -1) return;\n        if (!this.capture) return;\n        this.capture = false;\n        await Promise.all(Array.from(this.editors).filter($editor => $editor !== editor).map($editor => $editor.emit(eventName, eventData)));\n        this.capture = true;\n        this.eventQueue.splice(this.$);\n        this.$ = this.eventQueue.push({ eventName, eventData, timestamp: this.now, editorId: editor.editorId });\n        this.emitChanged();\n    };\n    emitChanged() {\n        this.editors.forEach(editor => editor.emit(\"changed\"));\n        this.emitDirty();\n    }\n    emitDirty() {\n        const { isDirty } = this;\n        this.editors.forEach(editor => editor.emit(\"dirty\", isDirty));\n    }\n    destroy() {\n        this.editors.forEach(editor => this.removeEditor(editor));\n    }\n    get isDirty() {\n        if (!this.saveTime) return this.isUndoable;\n        return this.saveTime !== this.eventQueue[this.$ - 1]?.timestamp;\n    }\n    get isUndoable() {\n        return this.$ !== 0;\n    }\n    get isRedoable() {\n        return this.$ !== this.eventQueue.length;\n    }\n    handleSaved = () => {\n        this.saveTime = this.eventQueue[this.$ - 1]?.timestamp;\n        this.emitDirty();\n    };\n    abstract undoOf(editor: Editor, eventName: keyof EventMap, eventData?: any): Promise<void>;\n    async undo() {\n        if (!this.editors.size) return;\n        if (!this.isUndoable) return;\n        this.capture = false;\n        const { eventName, eventData } = this.eventQueue[this.$ - 1];\n        await Promise.all(Array.from(this.editors).map(editor => this.undoOf(editor, eventName, eventData)));\n        this.$--;\n        this.capture = true;\n        this.emitChanged();\n    }\n    abstract redoOf(editor: Editor, eventName: keyof EventMap, eventData?: any): Promise<void>;\n    async redo() {\n        if (!this.editors.size) return;\n        if (!this.isRedoable) return;\n        this.capture = false;\n        const { eventName, eventData } = this.eventQueue[this.$];\n        await Promise.all(Array.from(this.editors).map(editor => this.redoOf(editor, eventName, eventData)));\n        this.$++;\n        this.capture = true;\n        this.emitChanged();\n    }\n    /** event at timestamp exclusive */\n    async undoUntil(timestamp: number) {\n        while (this.isUndoable && this.eventQueue[this.$ - 1].timestamp >= timestamp) {\n            await this.undo();\n        }\n    }\n    /** event at timestamp inclusive */\n    async redoUntil(timestamp: number) {\n        while (this.isRedoable && this.eventQueue[this.$].timestamp <= timestamp) {\n            await this.redo();\n        }\n    }\n    async setIndex($: number) {\n        if ($ < this.$) await this.undoUntil(this.eventQueue[$].timestamp);\n        else if ($ > this.$) await this.redoUntil(this.eventQueue[$ - 1].timestamp);\n    }\n    getSyncData(): IHistoryData<EventMap> {\n        const { $, saveTime, eventQueue } = this;\n        return { $, saveTime, eventQueue };\n    }\n    async syncData(data: IHistoryData<EventMap>) {\n        this.saveTime = data.saveTime;\n        for (let i = 0; i < this.eventQueue.length; i++) {\n            const { timestamp } = this.eventQueue[i];\n            if (timestamp !== data.eventQueue[i]?.timestamp) {\n                await this.undoUntil(timestamp);\n                break;\n            }\n        }\n        this.eventQueue = data.eventQueue;\n        await this.setIndex(data.$);\n    }\n}\n","import AbstractProjectFile from \"./AbstractProjectFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IPersistentProjectItemManager } from \"./PersistentProjectItemManager\";\n\nexport default class PersistentProjectFile extends AbstractProjectFile<ArrayBuffer, IPersistentProjectItemManager> {\n    private _sab: SharedArrayBuffer;\n    get sab() {\n        return this._sab;\n    }\n    get data() {\n        return this._data;\n    }\n    set data(dataIn: ArrayBuffer) {\n        this._data = dataIn;\n        if (dataIn instanceof SharedArrayBuffer) {\n            this._sab = dataIn;\n            return;\n        }\n        this._sab = new SharedArrayBuffer(dataIn.byteLength);\n        const ui8ab = new Uint8Array(dataIn);\n        const ui8sab = new Uint8Array(this._sab);\n        for (let i = 0; i < ui8ab.length; i++) {\n            ui8sab[i] = ui8ab[i];\n        }\n    }\n    lastModifiedId: string;\n    constructor(fileMgrIn: IPersistentProjectItemManager, parentIn: IProjectFolder, nameIn: string, dataIn?: ArrayBuffer) {\n        super(fileMgrIn, parentIn, nameIn);\n        this.lastModifiedId = this.id;\n        this._data = dataIn;\n    }\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        if (!this.data) this.data = await this.fileMgr.readFile(this.path);\n        await this.emit(\"ready\");\n        await this.fileMgr.emitChanged();\n    }\n    clone(parentIn = this.parent, nameIn = this._name, dataIn = this.data) {\n        const Ctor = this.constructor as typeof PersistentProjectFile;\n        return new Ctor(this._fileMgr, parentIn, nameIn, dataIn);\n    }\n    async save(newData: ArrayBuffer, by: any) {\n        this.data = newData;\n        this.lastModifiedId = this.fileMgr.generateItemId(this);\n        await this._fileMgr.putFile(this);\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n    }\n    async saveAsCopy(parent: IProjectFolder, name: string, newData: ArrayBuffer) {\n        const item = this.clone(parent, name, newData);\n        await this._fileMgr.putFile(item);\n        parent.items.add(item);\n        await this.emitTreeChanged();\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n    async saveAs(to: IProjectFolder, newName: string, newData: ArrayBuffer, by: any) {\n        const { parent, name, data } = this;\n        const from = parent;\n        this.data = newData;\n        this.lastModifiedId = this.fileMgr.generateItemId(this);\n        await this.move(to, newName);\n        await this._fileMgr.putFile(this);\n        const item = this.clone(parent, name, data);\n        await this._fileMgr.putFile(item);\n        parent.items.add(item);\n        await parent.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        await this.fileMgr.rename(this.path, `${this.parentPath}/${newNameIn}`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this as any) return;\n        if (to === this.parent && newName === this.name) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        await this._fileMgr.rename(this.path, `${to.path}/${newName}`);\n        const from = this.parent;\n        from.items.delete(this as any);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this as any);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async destroy() {\n        await this._fileMgr.remove(this.path, this.isFolder);\n        this.parent.items.delete(this as any);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n        await this.fileMgr.emitChanged();\n    }\n    async instantiate({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance> {\n        const { type } = this;\n        const Constructor = {\n            patcher: (await import(\"../patcher/Patcher\")).default,\n            audio: (await import(\"../audio/PatcherAudio\")).default,\n            image: (await import(\"../image/PatcherImage\")).default,\n            text: (await import(\"../text/PatcherText\")).default,\n            video: undefined,\n            unknown: (await import(\"../text/PatcherText\")).default\n        }[type];\n        if (Constructor) return Constructor.fromProjectItem({ file: this as any, env, project, instanceId }) as Promise<IFileInstance>;\n        throw new Error(\"Not implemented.\");\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor> {\n        const { type } = this;\n        const Constructor = {\n            patcher: (await import(\"../patcher/PatcherEditor\")).default,\n            audio: (await import(\"../audio/AudioEditor\")).default,\n            image: (await import(\"../image/ImageEditor\")).default,\n            text: (await import(\"../text/TextEditor\")).default,\n            video: undefined,\n            unknown: (await import(\"../text/TextEditor\")).default\n        }[type];\n        if (Constructor) return Constructor.fromProjectItem({ file: this as any, env, project, instanceId }) as Promise<IFileEditor>;\n        throw new Error(\"Not implemented.\");\n    }\n}\n","import PersistentProjectFile from \"./PersistentProjectFile\";\nimport AbstractProjectFolder, { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IPersistentProjectItemManager } from \"./PersistentProjectItemManager\";\n\nexport default class PersistentProjectFolder extends AbstractProjectFolder<IPersistentProjectItemManager> {\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        const items = await this.fileMgr.readDir(this.path || \"/\");\n        for (const rawItem of items) {\n            const { name, isFolder } = rawItem;\n            const item = this.createProjectItem(name, isFolder);\n            this.items.add(item);\n            await this.emitTreeChanged();\n            await item.init();\n        }\n        await this.emit(\"ready\");\n        await this.fileMgr.emitChanged();\n    }\n    clone(parentIn = this.parent, nameIn = this._name) {\n        const Ctor = this.constructor as typeof PersistentProjectFolder;\n        return new Ctor(this._fileMgr, parentIn, nameIn);\n    }\n    createProjectItem(nameIn: string, isFolder: boolean, dataIn?: ArrayBuffer): PersistentProjectFolder | PersistentProjectFile {\n        if (isFolder) return new PersistentProjectFolder(this.fileMgr, this, nameIn);\n        return new PersistentProjectFile(this.fileMgr, this, nameIn, dataIn);\n    }\n    async addFile(nameIn: string, dataIn?: ArrayBuffer) {\n        if (this.existItem(nameIn)) throw new Error(`${nameIn} already exists.`);\n        const tempItem = new PersistentProjectFile(this.fileMgr, this, nameIn, dataIn);\n        await this.fileMgr.putFile(tempItem);\n        const fileDetail = await this.fileMgr.getFileDetails(this.path, nameIn);\n        const item = this.createProjectItem(nameIn, fileDetail.isFolder, dataIn);\n        this.items.add(item);\n        await this.emitTreeChanged();\n        item.init();\n        return item;\n    }\n    async addFolder(name: string) {\n        if (this.existItem(name)) throw new Error(`${name} already exists.`);\n        const folder = new PersistentProjectFolder(this.fileMgr, this, name);\n        await this.fileMgr.putFile(folder);\n        this.items.add(folder);\n        await folder.init();\n        await this.emitTreeChanged();\n        return folder;\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        await this.fileMgr.rename(this.path, `${this.parentPath}/${newNameIn}`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this) return;\n        if (to === this.parent && newName === this.name) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        await this._fileMgr.rename(this.path, `${to.path}/${newName}`);\n        const from = this.parent;\n        from.items.delete(this);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n    }\n    async destroy() {\n        await this._fileMgr.remove(this.path, this.isFolder);\n        this.parent.items.delete(this as any);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n    }\n}\n","import TemporaryProjectFile from \"./TemporaryProjectFile\";\n\nexport default class TempData extends TemporaryProjectFile {\n    get type() {\n        return \"unknown\" as const;\n    }\n    async instantiate(): Promise<any> {\n        return this.data;\n    }\n}\n","import AbstractProjectFile from \"./AbstractProjectFile\";\nimport PersistentProjectFile from \"./PersistentProjectFile\";\nimport type TemporaryProjectItemManager from \"./TemporaryProjectItemManager\";\nimport type PersistentProjectItemManager from \"./PersistentProjectItemManager\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IFileInstance } from \"./FileInstance\";\n\n/**\n * An item under TempMgr, this contains in-memory data/instance.\n */\nexport default class TemporaryProjectFile<Data = any> extends AbstractProjectFile<Data, TemporaryProjectItemManager> {\n    async removeObserver(observer: string) {\n        await super.removeObserver(observer);\n        await this.fileMgr.emitChanged();\n        if (this._observers.size === 0) await this.destroy();\n    }\n    /**\n     * Creating alias (do not copy the data, new item has the same ref)\n     */\n    clone(parentIn = this.parent, nameIn = this._name, dataIn = this.data) {\n        const Ctor = this.constructor as typeof TemporaryProjectFile;\n        return new Ctor(this._fileMgr, parentIn, nameIn, dataIn);\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this as any) return;\n        if (to === this.parent) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        const from = this.parent;\n        from.items.delete(this);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async destroy() {\n        this.parent.items.delete(this);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n        await this.fileMgr.emitChanged();\n    }\n    async save(newData: Data, by: any) {\n        this._data = newData;\n        this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n    }\n    async saveAsCopy(parent: IProjectFolder, name: string, newData: ArrayBuffer, persistentMgr?: PersistentProjectItemManager) {\n        const item = new PersistentProjectFile(persistentMgr, parent, name, newData);\n        await persistentMgr.putFile(item);\n        parent.items.add(item);\n        await this.emitTreeChanged();\n        await item.init();\n        return item;\n    }\n    async saveAs(to: IProjectFolder, name: string, newData: ArrayBuffer, by: any, persistentMgr: PersistentProjectItemManager) {\n        const item = new PersistentProjectFile(persistentMgr, to, name, newData);\n        await persistentMgr.putFile(item);\n        const from = this.parent;\n        this.parent = to;\n        this._name = name;\n        const _this: PersistentProjectFile = Object.setPrototypeOf(this, PersistentProjectFile.prototype);\n        this.parent.items.add(_this);\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        await this.emit(\"saved\", by);\n        await item.init();\n        return this;\n    }\n    async instantiate(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance> {\n        throw new Error(\"Not implemented.\");\n        // new instance Patcher / AudioBuffer etc\n    }\n    async instantiateEditor(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor> {\n        throw new Error(\"Not implemented.\");\n    }\n}\n","import TempAudioFile from \"../audio/TempAudioFile\";\nimport TempPatcherFile from \"../patcher/TempPatcherFile\";\nimport TempTextFile from \"../text/TempTextFile\";\nimport TempData from \"./TempData\";\nimport AbstractProjectFolder, { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type TemporaryProjectFile from \"./TemporaryProjectFile\";\nimport type { TempItemType } from \"../types\";\nimport type TemporaryProjectItemManager from \"./TemporaryProjectItemManager\";\n\nexport default class TemporaryProjectFolder extends AbstractProjectFolder<TemporaryProjectItemManager> {\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        await this.emit(\"ready\");\n    }\n    clone(parentIn = this.parent, nameIn = this._name) {\n        const Ctor = this.constructor as typeof TemporaryProjectFolder;\n        return new Ctor(this._fileMgr, parentIn, nameIn);\n    }\n    createProjectItem(name: string, isFolder: boolean, data?: any, typeIn?: TempItemType): TemporaryProjectFile {\n        const type = typeIn || this.fileMgr.getTypeFromFileName(name);\n        if (type === \"patcher\") return new TempPatcherFile(this.fileMgr, this, name, data);\n        if (type === \"audio\") return new TempAudioFile(this.fileMgr, this, name, data);\n        if (type === \"text\") return new TempTextFile(this.fileMgr, this, name, data);\n        return new TempData(this.fileMgr, this, name, data);\n    }\n    async addFile(name: string, data?: any, typeIn?: TempItemType) {\n        if (this.existItem(name)) throw new Error(`${name} already exists.`);\n        const item = this.createProjectItem(name, false, data, typeIn);\n        this.items.add(item);\n        await this.emitTreeChanged();\n        await item.init();\n        return item;\n    }\n    async addFolder(name: string) {\n        if (this.existItem(name)) throw new Error(`${name} already exists.`);\n        const folder = new TemporaryProjectFolder(this.fileMgr, this, name);\n        this.items.add(folder);\n        await folder.init();\n        await this.emitTreeChanged();\n        await this.fileMgr.emitChanged();\n        return folder;\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this) return;\n        if (to === this.parent) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        const from = this.parent;\n        from.items.delete(this);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async destroy() {\n        this.parent.items.delete(this);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n        await this.fileMgr.emitChanged();\n    }\n}\n","import TemporaryProjectFolder from \"./TemporaryProjectFolder\";\nimport AbstractProjectItemManager from \"./AbstractProjectItemManager\";\nimport type { IProjectFileOrFolder } from \"./AbstractProjectItem\";\n\nexport default class TemporaryProjectItemManager extends AbstractProjectItemManager {\n    root: TemporaryProjectFolder;\n    async empty() {\n        return true;\n    }\n    async init(clean?: boolean) {\n        this.root = new TemporaryProjectFolder(this, null, null);\n        await this.root.init();\n        this.emit(\"ready\");\n        return this;\n    }\n    getProjectItemFromPath(path: string) {\n        const pathArray = path.split(\"/\");\n        const itemArray: IProjectFileOrFolder[] = [this.root];\n        for (let i = 0; i < pathArray.length; i++) {\n            const id = pathArray[i];\n            if (id.length === 0) continue;\n            if (id === \".\") continue;\n            if (id === \"..\") {\n                itemArray.pop();\n                continue;\n            }\n            const cur = itemArray[itemArray.length - 1];\n            if (cur.isFolder === false) throw new Error(`${cur.name} from path ${path} is not a folder`);\n            const next = cur.findItem(id);\n            if (!next) throw new Error(`Cannot find ${id} from path ${path}`);\n            itemArray.push(next);\n        }\n        return itemArray[itemArray.length - 1];\n    }\n}\n","import AbstractProjectItemManager, { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport PersistentProjectFolder from \"./PersistentProjectFolder\";\nimport type { TypedMessagePort } from \"../workers/Worker\";\nimport type WorkletEnvProcessor from \"../worklets/WorkletEnv.worklet\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IPersistentProjectItemManager, ProjectItemManagerDataForDiff } from \"./PersistentProjectItemManager\";\nimport type { IProjectItem } from \"./AbstractProjectItem\";\nimport type PersistentProjectFile from \"./PersistentProjectFile\";\n\nexport default class WorkletProjectItemManager extends AbstractProjectItemManager implements IPersistentProjectItemManager {\n    readonly port: TypedMessagePort;\n    readonly env: WorkletEnvProcessor;\n    cachedPathIdMap: Record<string, string> = {};\n    disabled = false;\n    constructor(envIn: WorkletEnvProcessor) {\n        super(envIn);\n        this.env = envIn;\n    }\n    empty(): Promise<any> {\n        throw new Error(\"Empty is not allowed from other threads.\");\n    }\n    async init() {\n        this.cachedPathIdMap = await this.env.fileMgrGetPathIdMap();\n        this.root = new PersistentProjectFolder(this, null, null);\n        await this.root.init();\n        if (!this.projectRoot) await this.root.addFolder(this.projectFolderName);\n        this.emit(\"ready\");\n        return this;\n    }\n    getDataForDiff() {\n        const map: ProjectItemManagerDataForDiff = {};\n        const { allItems } = this;\n        for (const id in allItems) {\n            const item = allItems[id] as PersistentProjectFile | PersistentProjectFolder;\n            if (item.isFolder === true) map[id] = { isFolder: item.isFolder, parent: item.parent?.id, name: item.name, path: item.path };\n            else map[id] = { isFolder: item.isFolder, data: item.sab, lastModifiedId: item.lastModifiedId, parent: item.parent?.id, name: item.name, path: item.path };\n        }\n        return map;\n    }\n    async processDiff(diff: ProjectItemManagerDataForDiff) {\n        this.disabled = true;\n        for (const id in diff) {\n            const process = async (id: string): Promise<void> => {\n                const $item = diff[id];\n                const $parentId = $item.parent;\n                if (!$parentId) return;\n                let parent = this.getProjectItemFromId($parentId);\n                if (!parent) await process($parentId);\n                parent = this.getProjectItemFromId($parentId) as PersistentProjectFolder;\n                const current = this.getProjectItemFromId(id) as PersistentProjectFile | PersistentProjectFolder;\n                if (!current) {\n                    if (parent.isFolder === true) {\n                        this.cachedPathIdMap[$item.path] = id;\n                        if ($item.isFolder === true) {\n                            await parent.addFolder($item.name);\n                        } else {\n                            const newFile = await parent.addFile($item.name, $item.data) as PersistentProjectFile;\n                            newFile.lastModifiedId = $item.lastModifiedId;\n                        }\n                    }\n                } else {\n                    if (current.isFolder === false && $item.isFolder === false) {\n                        if (current.lastModifiedId !== $item.lastModifiedId) await current.save($item.data, this);\n                        if (current.name !== $item.name) await current.rename($item.name);\n                        if (current.parent?.id !== $item.parent) await current.move(parent);\n                    }\n                }\n            };\n            await process(id);\n        }\n        this.disabled = false;\n    }\n    generateItemId(item: IProjectItem) {\n        const id = this.cachedPathIdMap[item.path];\n        if (!id) return this.env.generateId(item);\n        delete this.cachedPathIdMap[item.path];\n        return id;\n    }\n    readFile(path: string) {\n        return this.env.fileMgrReadFile(path);\n    }\n    readDir(path?: string): Promise<{ isFolder: boolean; name: string }[]> {\n        return this.env.fileMgrReadDir(path);\n    }\n    getFileDetails(path: string, name: string) {\n        return this.env.fileMgrGetFileDetails(path, name);\n    }\n    exists(path: string) {\n        return this.env.fileMgrExists(path);\n    }\n    putFile(item: { isFolder: boolean; path: string; data?: ArrayBuffer | SharedArrayBuffer }) {\n        if (this.disabled) return null;\n        return this.env.fileMgrPutFile(item);\n    }\n    async writeFile(path: string, data: ArrayBuffer | SharedArrayBuffer) {\n        if (this.disabled) return null;\n        return this.env.fileMgrWriteFile(path, data);\n    }\n    async remove(path: string, isFolder?: boolean) {\n        return true;\n    }\n    async rename(oldPath: string, newPath: string) {\n        return true;\n    }\n    importFileZip(data: ArrayBuffer, subfolder?: string, to?: IProjectFolder<IProjectItemManager<{}>>, taskHost?: any): Promise<void> {\n        throw new Error(\"Import is not allowed from other threads.\");\n    }\n    exportProjectZip(): Promise<ArrayBuffer> {\n        throw new Error(\"Import is not allowed from other threads.\");\n    }\n}\n","import type { SemanticICONS } from \"semantic-ui-react\";\nimport TypedEventEmitter from \"../../../utils/TypedEventEmitter\";\nimport { stringifyError } from \"../../../utils/utils\";\nimport Line from \"../../patcher/Line\";\nimport type Box from \"../../patcher/Box\";\nimport type Patcher from \"../../patcher/Patcher\";\nimport type { ProjectItemType, TempItemByType, SharedItemByType, TempItemType, TAudioNodeInletConnection, TAudioNodeOutletConnection } from \"../../types\";\nimport type AbstractUI from \"./AbstracttUI\";\nimport type { IJSPatcherEnv } from \"../../Env\";\n\nexport const isJSPatcherObjectConstructor = (x: any): x is typeof AbstractObject => typeof x === \"function\" && x?.isJSPatcherObjectConstructor;\n\nexport const isJSPatcherObject = (x: any): x is AbstractObject => typeof x === \"object\" && x?.isJSPatcherObject;\n\nexport type TMetaType = \"anything\" | \"signal\" | \"object\" | \"number\" | \"boolean\" | \"string\" | \"function\" | \"bang\" | \"color\" | \"enum\";\nexport interface IInletMeta {\n    isHot: boolean;\n    type: TMetaType;\n    enums?: string[];\n    varLength?: boolean;\n    description: string;\n}\nexport type IInletsMeta = IInletMeta[];\nexport interface IOutletMeta {\n    type: TMetaType;\n    enums?: string[];\n    varLength?: boolean;\n    description: string;\n}\nexport type IOutletsMeta = IOutletMeta[];\nexport interface IArgMeta {\n    type: TMetaType;\n    enums?: string[];\n    optional: boolean;\n    default?: any;\n    varLength?: boolean;\n    description: string;\n}\nexport type IArgsMeta = IArgMeta[];\nexport interface IPropMeta<T extends any = any> {\n    type: TMetaType;\n    enums?: T[];\n    default: T;\n    group?: string;\n    description: string;\n    isUIState?: boolean;\n}\nexport type IPropsMeta<T extends Record<string, any> = Record<string, any>> = { [K in keyof T]: IPropMeta<T[K]> };\nexport interface IJSPatcherObjectMeta<P extends Record<string, any> = Record<string, any>> {\n    package: string; // div will have class \"package-name\" \"package-name-objectname\"\n    name: string;\n    icon: SemanticICONS; // semantic icon to display in UI\n    author: string;\n    version: string;\n    description: string;\n    inlets: IInletsMeta;\n    outlets: IOutletsMeta;\n    args: IArgsMeta;\n    props: IPropsMeta<P>;\n    isPatcherInlet: \"data\" | \"audio\" | \"parameter\" | false;\n    isPatcherOutlet: \"data\" | \"audio\" | false;\n}\n\nexport interface ObjectUpdateOptions {\n    undoable?: boolean;\n}\n\nexport type Data<T> = T extends IJSPatcherObject<infer D, any, any, any, any, any, any, any> ? D : never;\nexport type State<T> = T extends IJSPatcherObject<any, infer S, any, any, any, any, any, any> ? S : never;\nexport type Inputs<T> = T extends IJSPatcherObject<any, any, infer I, any, any, any, any, any> ? I : never;\nexport type Outputs<T> = T extends IJSPatcherObject<any, any, any, infer O, any, any, any, any> ? O : never;\nexport type Args<T> = T extends IJSPatcherObject<any, any, any, any, infer A, any, any, any> ? A : never;\nexport type Props<T> = T extends IJSPatcherObject<any, any, any, any, any, infer P, any, any> ? P : never;\nexport type UIState<T> = T extends IJSPatcherObject<any, any, any, any, any, any, infer U, any> ? U : never;\nexport type EventMap<T> = T extends IJSPatcherObject<any, any, any, any, any, any, any, infer E> ? E : never;\nexport type TInletEvent<I extends any[] = any[], $ extends keyof Pick<I, number> = keyof Pick<I, number>> = { inlet: $; data: I[$] };\nexport type TOutletEvent<O extends any[] = any[], $ extends keyof Pick<O, number> = keyof Pick<O, number>> = { outlet: $; data: O[$] };\nexport type JSPatcherObjectEventMap<D, S, I extends any[], A extends any[], P, U, E> = {\n    /** Emitted before any connection */\n    \"preInit\": never;\n    /** Emitted after connections */\n    \"postInit\": never;\n    /** Emitted immediately when the editor request changes to the args */\n    \"updateArgs\": Partial<A>;\n    /** Emitted immediately when the editor request changes to the props */\n    \"updateProps\": Partial<P>;\n    /** Emitted immediately when the editor request changes to the state */\n    \"updateState\": Partial<S>;\n    /** The UI will listen to this event type */\n    \"updateUI\": Partial<U> | never;\n    /** Emitted if received any input */\n    \"inlet\": TInletEvent<I>;\n    /** Emitted when a new connection/disconnection is made on any I/O */\n    \"connectedInlet\": { inlet: number; srcBoxId: string; srcOutlet: number; lineId: string };\n    \"connectedOutlet\": { outlet: number; destBoxId: string; destInlet: number; lineId: string };\n    \"disconnectedInlet\": { inlet: number; srcBoxId: string; srcOutlet: number; lineId: string };\n    \"disconnectedOutlet\": { outlet: number; destBoxId: string; destInlet: number; lineId: string };\n    /** Emitted when the object will be destroyed, attach a callback to clean up */\n    \"destroy\": never;\n    /** Emitted when the object's metadata is changed (by itself) */\n    \"metaUpdated\": { oldMeta: IJSPatcherObjectMeta; meta: IJSPatcherObjectMeta };\n    /** Emitted when the object's args is changed */\n    \"argsUpdated\": { oldArgs: A; args: A };\n    /** Emitted when the object's data is changed */\n    \"propsUpdated\": { oldProps: Partial<P>; props: Partial<P> };\n    /** Emitted when the object's data is changed (by itself) */\n    \"dataUpdated\": { oldData: D; data: D };\n    /** Emitted when the object's state is changed */\n    \"stateUpdated\": { oldState: S; state: S };\n} & E;\n\n/**\n * All JSPatcher Object should extends this class\n *\n * @template D serializable, type of `data` property, use `setData` to update. Data will be stored with the box in the serialized patcher. Will mark the patcher `dirty`.\n * @template S serializable, type of `state` property, use `setState` to update. State is temporary to the object instance. Can be updated from the host.\n * @template I type of inlets as an array.\n * @template O type of outlets as an array.\n * @template A serializable, type of args as an array.\n * @template P serializable, type of props as a map.\n * @template U type of UI state as a map, the UI will listen to any update of this map. If the object can be running on another thread, this should be serializable.\n * @template E type of additional event map\n */\nexport interface IJSPatcherObject<\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends {} = {},\n    U extends {} = {},\n    E extends Partial<JSPatcherObjectEventMap<D, S, I, A, P, U, {}>> & Record<string, any> = {}\n> extends TypedEventEmitter<JSPatcherObjectEventMap<D, S, I, A, P, U, E>> {\n    /** Should be true */\n    readonly isJSPatcherObject: true;\n    /** Unique identifier of the object */\n    readonly id: string;\n    /** constructor (class) name */\n    readonly class: string;\n    /** the patcher that the object lives in */\n    readonly patcher: Patcher;\n    /** Patcher constructor */\n    readonly Patcher: typeof Patcher;\n    /** the box that the object lives in */\n    readonly box: Box<this>;\n    /** the env that the object lives in */\n    readonly env: IJSPatcherEnv;\n    readonly audioCtx?: AudioContext;\n    readonly meta: IJSPatcherObjectMeta<P>;\n    setMeta(metaIn: Partial<IJSPatcherObjectMeta>): void;\n    /** Serializable, use `setState` to update. State is temporary to the object instance. Can be updated from the host. */\n    state: S;\n    setState(stateIn: Partial<S>): void;\n    /** Serializable, type of `data` property, use `setData` to update. Data will be stored with the box in the serialized patcher. */\n    readonly data: D;\n    setData(dataIn: Partial<D>): void;\n    /** Get all props from box, if not defined, get from metadata default */\n    readonly props: Partial<P>;\n    /** Get prop value from box, if not defined, get from metadata default. */\n    getProp<K extends keyof P = keyof P>(key: K): P[K];\n    setProps(props: Partial<P>): void;\n    readonly args: Partial<A>;\n    setArgs(args: Partial<A>): void;\n    inlets: number;\n    outlets: number;\n    readonly inletLines: Set<Line>[];\n    readonly outletLines: Set<Line>[];\n    inletAudioConnections: TAudioNodeInletConnection<AudioNode | AudioParam>[];\n    outletAudioConnections: TAudioNodeOutletConnection[];\n\n    // for box\n    /** Will be called just after constructed */\n    init(): Promise<void>;\n    /** Will be called after the object attached to box */\n    postInit(): Promise<void>;\n    /** Will be called when need to change arguments */\n    updateArgs(args: A, options?: ObjectUpdateOptions): Promise<void>;\n    /** Will be called when need to change properties */\n    updateProps(props: Partial<P>, options?: ObjectUpdateOptions): Promise<void>;\n    /** Will be called when need to change state */\n    updateState(state: Partial<S>, options?: ObjectUpdateOptions): Promise<void>;\n    /** Main function when receive data from a inlet (base 0). */\n    fn<$ extends number = number>(inlet: $, data: I[$]): void;\n    /** Called when object will be destroyed. */\n    destroy(): Promise<void>;\n    // called when inlet or outlet are connected or disconnected\n    connectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string): void;\n    disconnectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string): void;\n    connectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string): void;\n    disconnectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string): void;\n    /** Highlight the UI box. */\n    highlight(): void;\n\n    // for developer\n    /** Update UI's React State. */\n    updateUI(state: Partial<U>): void;\n    /** Output data with ith outlet. */\n    outlet<$ extends number>(outlet: $, data: O[$]): void;\n    /**\n     * Outlet all values in an array with corresponding index,\n     * use sparse array to omit an outlet,\n     * `[, 1]` will outlet 1 on second outlet,\n     * but `[undefined, 1]` will also outlet undefined on first outlet\n     */\n    outletAll(outputs: Partial<O>): void;\n    /** Record an undoable operation to the patcher history */\n    undoable(e: { oldArgs?: A; args?: A; oldProps?: Partial<P>; props?: Partial<P>; oldState?: S; state?: S }): void;\n    /**\n     * Get a shared item from files or temp\n     * If no ID provided, this will create a new key in temp\n     * if no such ID found in files or in temp, will put the result of data() into it.\n     */\n    getSharedItem<T extends ProjectItemType>(id?: string, type?: T, data?: () => Promise<TempItemByType<T>[\"data\"]>, onceCreate?: (aitem: SharedItemByType<T>) => any): Promise<{ id: string; item: SharedItemByType<T>; newItem: boolean; off?: () => any }>;\n    // output to console\n    post(data: any): void;\n    error(data: any): void;\n    info(data: any): void;\n    warn(data: any): void;\n    connectAudio(): void;\n    connectAudioInlet(portIn?: number): void;\n    connectAudioOutlet(portIn?: number): void;\n    disconnectAudio(): void;\n    disconnectAudioInlet(portIn?: number): void;\n    disconnectAudioOutlet(portIn?: number): void;\n    applyBPF(param: AudioParam, bpf: number[][]): void;\n}\nexport declare const IJSPatcherObject: {\n    /** Should be true */\n    readonly isJSPatcherObjectConstructor: true;\n    /** div will have class \"packageName\" \"packageName-objectName\" */\n    package: string;\n    readonly _name: string;\n    icon: SemanticICONS;\n    author: string;\n    version: string;\n    description: string;\n    inlets: IInletsMeta;\n    outlets: IOutletsMeta;\n    args: IArgsMeta;\n    props: IPropsMeta;\n    isPatcherInlet: \"data\" | \"audio\" | false;\n    isPatcherOutlet: \"data\" | \"audio\" | false;\n    readonly meta: IJSPatcherObjectMeta;\n    /**\n     * The UI that the object uses to display in the patcher, not available in other threads.\n     * is `BaseUI` by default\n     */\n    UI?: typeof AbstractUI;\n    new (box: Box, patcher: Patcher): IJSPatcherObject;\n};\n\nexport interface AnyJSPatcherObject extends IJSPatcherObject<Record<string, any>, Record<string, any>, any[], any[], any[], Record<string, any>, Record<string, any>, Record<string, any>> {}\n\nexport default abstract class AbstractObject<\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends {} = {},\n    U extends {} = {},\n    E extends Partial<JSPatcherObjectEventMap<D, S, I, A, P, U, {}>> & Record<string, any> = {}\n> extends TypedEventEmitter<JSPatcherObjectEventMap<D, S, I, A, P, U, E>> implements IJSPatcherObject<D, S, I, O, A, P, U, E> {\n    static readonly isJSPatcherObjectConstructor = true as const;\n    static package = \"Base\";\n    static get _name() {\n        return this.name;\n    }\n    static icon = null as SemanticICONS;\n    static author = \"\";\n    static version = \"0.0.0\";\n    static description = \"\";\n    static inlets: IInletsMeta = [];\n    static outlets: IOutletsMeta = [];\n    static args: IArgsMeta = [];\n    static props: IPropsMeta = {};\n    static isPatcherInlet: \"data\" | \"audio\" | false = false;\n    static isPatcherOutlet: \"data\" | \"audio\" | false = false;\n    static get meta(): IJSPatcherObjectMeta {\n        return {\n            package: this.package, // div will have class \"package-name\" \"package-name-objectname\"\n            name: this._name,\n            icon: this.icon, // semantic icon to display in UI\n            author: this.author,\n            version: this.version,\n            description: this.description,\n            inlets: this.inlets,\n            outlets: this.outlets,\n            args: this.args,\n            props: this.props,\n            isPatcherInlet: this.isPatcherInlet,\n            isPatcherOutlet: this.isPatcherOutlet\n        };\n    }\n    static UI: typeof AbstractUI;\n\n    readonly isJSPatcherObject = true as const;\n    readonly id: string;\n    get class() {\n        return this.constructor.name;\n    }\n    protected readonly _patcher: Patcher;\n    get patcher() {\n        return this._patcher;\n    }\n    get Patcher() {\n        return this._patcher.constructor as typeof Patcher;\n    }\n    protected readonly _box: Box<this>;\n    get box() {\n        return this._box;\n    }\n    get env() {\n        return this.patcher.env;\n    }\n    get audioCtx() {\n        return this.patcher.audioCtx;\n    }\n    private _meta = (this.constructor as typeof AbstractObject).meta as IJSPatcherObjectMeta<P>;\n    get meta(): IJSPatcherObjectMeta<P> {\n        return this._meta;\n    }\n    setMeta(metaIn: Partial<IJSPatcherObjectMeta<P>>) {\n        const oldMeta = { ...this.meta };\n        this._meta = Object.assign(this.meta, metaIn);\n        this.emit(\"metaUpdated\", { oldMeta, meta: { ...this.meta } });\n    }\n    state: S;\n    setState = (stateIn: Partial<S>) => {\n        const oldState = { ...this.state };\n        this.state = Object.assign(this.state, stateIn);\n        this.emit(\"stateUpdated\", { oldState, state: { ...this.state } });\n    };\n    get data(): D {\n        return this._box.data;\n    }\n    setData(dataIn: Partial<D>) {\n        const oldData = { ...this._box.data };\n        this._box.data = Object.assign(this.data, dataIn) as any;\n        this.emit(\"dataUpdated\", { oldData, data: { ...this.data } });\n    }\n    get props(): Partial<P> {\n        const props: Partial<P> = {};\n        for (const key in this.meta.props) {\n            props[key as keyof P] = this.getProp(key as keyof P);\n        }\n        return props;\n    }\n    getProp<K extends keyof P = keyof P>(key: K): P[K] {\n        if (key === \"rect\") return this.box.rect as any;\n        if (key === \"presentationRect\") return this.box.presentationRect as any;\n        if (key === \"background\") return this.box.background as any;\n        if (key === \"presentation\") return this.box.presentation as any;\n        return typeof this.box.props[key] === \"undefined\" ? this.meta.props[key].default : this.box.props[key];\n    }\n    setProps = (propsIn: Partial<P>) => {\n        const keys = Object.keys(propsIn);\n        const oldProps = { ...this.props } as Partial<P>;\n        this.box.update({ props: propsIn });\n        const props = { ...this.props } as Partial<P>;\n        for (const key in oldProps) {\n            if (keys.indexOf(key) === -1) {\n                delete oldProps[key];\n                delete props[key];\n            }\n        }\n        this.emit(\"propsUpdated\", { oldProps, props });\n    };\n    get args(): Partial<A> {\n        return this.box.args as any;\n    }\n    setArgs = (args: Partial<A>) => {\n        const oldArgs = this.args.slice() as A;\n        this.box.update({ args });\n        this.emit(\"argsUpdated\", { oldArgs, args: this.args.slice() as A });\n    };\n    get inlets() {\n        return this._box.inlets;\n    }\n    set inlets(i: number) {\n        this._box.setInlets(i);\n    }\n    get outlets() {\n        return this._box.outlets;\n    }\n    set outlets(i: number) {\n        this._box.setOutlets(i);\n    }\n    get outletLines() {\n        return this._box.outletLines;\n    }\n    get inletLines() {\n        return this._box.inletLines;\n    }\n    inletAudioConnections: TAudioNodeInletConnection[] = [];\n    outletAudioConnections: TAudioNodeOutletConnection[] = [];\n    constructor(box: Box, patcher: Patcher) {\n        super();\n        // line connected = metaChange event subscribed\n        // patcher object outside, use _ for prevent recursive stringify\n        this._patcher = patcher;\n        // the box which create this instance, use _ for prevent recursive stringify\n        this._box = box as Box<this>;\n        this.id = this.env.generateId(this);\n    }\n    async init() {\n        // process args and props\n        this.subscribe();\n        await this.emit(\"preInit\");\n    }\n    async postInit() {\n        await this.emit(\"postInit\");\n    }\n    /** Do everything here */\n    subscribe(): void {}\n    updateUI(state: Partial<U>) {\n        this.emit(\"updateUI\", state);\n    }\n    async updateArgs(args: A, options?: ObjectUpdateOptions) {\n        if (args?.length) {\n            const oldArgs = this.args.slice() as A;\n            await this.emit(\"updateArgs\", args);\n            if (options?.undoable) this.undoable({ oldArgs, args: this.args.slice() as A });\n        }\n    }\n    async updateProps(propsIn: Partial<P>, options?: ObjectUpdateOptions) {\n        if (propsIn && Object.keys(propsIn).length) {\n            const keys = Object.keys(propsIn);\n            const oldProps = { ...this.props };\n            await this.emit(\"updateProps\", propsIn);\n            const props = { ...this.props };\n            for (const key in oldProps) {\n                if (keys.indexOf(key) === -1) {\n                    delete oldProps[key];\n                    delete props[key];\n                }\n            }\n            if (options?.undoable) this.undoable({ oldProps, props });\n        }\n    }\n    async updateState(state: Partial<S>, options?: ObjectUpdateOptions) {\n        if (state && Object.keys(state).length) {\n            const oldState = { ...this.state };\n            await this.emit(\"updateState\", state);\n            if (options?.undoable) this.undoable({ oldState, state: { ...this.state } });\n        }\n    }\n    fn<$ extends keyof Pick<I, number> = keyof Pick<I, number>>(inlet: $, data: I[$]) {\n        if (inlet === 0) { // allow change props via first inlet with an props object\n            if (data !== null && typeof data === \"object\") {\n                const propsInKeys = Object.keys(data);\n                const propsKeys = Object.keys(this.meta.props);\n                if (propsInKeys.length && propsInKeys.every(k => propsKeys.indexOf(k) !== -1)) {\n                    this.updateProps(data);\n                    return;\n                }\n            }\n        }\n        this.emit(\"inlet\", { data, inlet });\n    }\n    outlet<$ extends keyof Pick<O, number>>(outlet: $, data: O[$]) {\n        if (outlet >= this.outlets) return;\n        Array.from(this.outletLines[outlet]).sort(Line.compare).map(line => line.pass(data));\n    }\n    outletAll(outputs: Partial<O>) {\n        for (let i = outputs.length - 1; i >= 0; i--) {\n            if (i in outputs) this.outlet(i, outputs[i]);\n        }\n    }\n    undoable(e: { oldArgs?: A; args?: A; oldProps?: Partial<P>; props?: Partial<P>; oldState?: S; state?: S }) {\n        this.box.undoable(e as any);\n    }\n    async destroy() {\n        await this.emit(\"destroy\");\n    }\n    connectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        this.emit(\"connectedOutlet\", { outlet, destBoxId, destInlet, lineId });\n    }\n    connectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        this.emit(\"connectedInlet\", { inlet, srcBoxId, srcOutlet, lineId });\n    }\n    disconnectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        this.emit(\"disconnectedOutlet\", { outlet, destBoxId, destInlet, lineId });\n    }\n    disconnectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        this.emit(\"disconnectedInlet\", { inlet, srcBoxId, srcOutlet, lineId });\n    }\n    post(data: any) {\n        this._patcher.newLog(\"none\", this.meta.name, stringifyError(data), this._box);\n    }\n    error(data: any) {\n        const s = stringifyError(data);\n        this._patcher.newLog(\"error\", this.meta.name, s, this._box);\n        this._box.error(s);\n    }\n    info(data: any) {\n        this._patcher.newLog(\"info\", this.meta.name, stringifyError(data), this._box);\n    }\n    warn(data: any) {\n        this._patcher.newLog(\"warn\", this.meta.name, stringifyError(data), this._box);\n    }\n    highlight() {\n        this._box.highlight();\n    }\n\n    connectAudio() {\n        this.box.allLines.forEach(line => line.enable());\n    }\n    connectAudioInlet(portIn?: number) {\n        this.inletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.enable());\n        });\n    }\n    connectAudioOutlet(portIn?: number) {\n        this.outletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.enable());\n        });\n    }\n    disconnectAudio() {\n        this.box.allLines.forEach(line => line.disable());\n    }\n    disconnectAudioInlet(portIn?: number) {\n        this.inletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.disable());\n        });\n    }\n    disconnectAudioOutlet(portIn?: number) {\n        this.outletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.disable());\n        });\n    }\n    applyBPF(param: AudioParam, bpf: number[][]) {\n        const { audioCtx } = this;\n        const { currentTime } = audioCtx;\n        param.cancelScheduledValues(currentTime);\n        param.setValueAtTime(param.value, currentTime);\n        let t = 0;\n        bpf.forEach((a) => {\n            if (a.length === 1) {\n                param.setValueAtTime(a[0], currentTime + t);\n            } else if (a.length > 1) {\n                t += a[1];\n                param.linearRampToValueAtTime(a[0], currentTime + t);\n            }\n        });\n    }\n    async getSharedItem<T extends ProjectItemType>(id = this.box.id, type: T = \"unknown\" as T, data?: () => Promise<TempItemByType<T>[\"data\"]>, onceCreate?: (aitem: SharedItemByType<T>) => any): Promise<{ id: string; item: SharedItemByType<T>; newItem: boolean; off?: () => any }> {\n        let item: SharedItemByType<T>;\n        let newItem = false;\n        const { fileMgr, tempMgr } = this.patcher.env;\n        try {\n            item = fileMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n        } catch {\n            try {\n                item = tempMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n            } catch {\n                if (data) {\n                    const d = await data();\n                    try {\n                        item = await tempMgr.root.addFile(id, d, type as TempItemType) as SharedItemByType<T>;\n                        newItem = true;\n                    } catch {\n                        item = tempMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n                    }\n                } else {\n                    if (onceCreate) {\n                        const off = () => {\n                            fileMgr.off(\"treeChanged\", handleFileMgrTreeChanged);\n                            tempMgr.off(\"treeChanged\", handleTempMgrTreeChanged);\n                        };\n                        const handleFileMgrTreeChanged = () => {\n                            try {\n                                item = fileMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n                                off();\n                                onceCreate(item);\n                            } catch {}\n                        };\n                        const handleTempMgrTreeChanged = () => {\n                            try {\n                                item = tempMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n                                off();\n                                onceCreate(item);\n                            } catch {}\n                        };\n                        fileMgr.on(\"treeChanged\", handleFileMgrTreeChanged);\n                        tempMgr.on(\"treeChanged\", handleTempMgrTreeChanged);\n                        return { id, item: null, newItem, off };\n                    }\n                    return { id, item: null, newItem };\n                }\n            }\n        }\n        if (item.type !== type) throw new Error(`Getting shared item ${id}, but returned item is of type ${item.type}, not of type ${type}.`);\n        return { id, item, newItem };\n    }\n}\n","export default class Bang {\n    isBang = true;\n    toString() {\n        return \"bang\";\n    }\n}\n\nexport const isBang = (x: any): x is Bang => typeof x === \"object\" && x?.isBang;\n","import AbstractObject, { IJSPatcherObjectMeta, IPropsMeta } from \"./AbstractObject\";\nimport type { TRect } from \"../../types\";\nimport type { BaseUIState } from \"./BaseUI\";\n\nexport interface BaseObjectAdditionalProps {\n    background: boolean;\n    presentation: boolean;\n    rect: TRect;\n    presentationRect: TRect;\n}\nexport interface BaseObjectProps extends BaseObjectAdditionalProps, BaseUIState {}\nexport default class BaseObject<\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends Partial<BaseObjectProps> & Record<string, any> = {},\n    U extends Partial<BaseUIState> & Record<string, any> = {},\n    E extends {} = {}\n> extends AbstractObject<D, S, I, O, A, P & BaseObjectProps, U & BaseUIState, E> {\n    static props: IPropsMeta = {\n        hidden: {\n            type: \"boolean\",\n            default: false,\n            description: \"Hide on lock\",\n            isUIState: true\n        },\n        background: {\n            type: \"boolean\",\n            default: false,\n            description: \"Include in background\"\n        },\n        presentation: {\n            type: \"boolean\",\n            default: false,\n            description: \"Include in presentation\"\n        },\n        rect: {\n            type: \"object\",\n            default: [0, 0, 90, 20],\n            description: \"Position and dimensions in patch\"\n        },\n        presentationRect: {\n            type: \"object\",\n            default: [0, 0, 90, 20],\n            description: \"Position and dimensions in presentation\"\n        },\n        ignoreClick: {\n            type: \"boolean\",\n            default: false,\n            description: \"Ignore Click\",\n            isUIState: true\n        },\n        hint: {\n            type: \"string\",\n            default: \"\",\n            description: \"Hint on hover\",\n            isUIState: true\n        }\n    };\n    static get meta(): IJSPatcherObjectMeta {\n        const thisName = this._name;\n        const superMeta = Object.getPrototypeOf(this).meta;\n        const superProps = superMeta.props;\n        const thisProps = this.props;\n        for (const key in thisProps) {\n            thisProps[key as keyof IPropsMeta<BaseObjectProps>].group = key in superProps ? superProps[key].group : thisName;\n        }\n        return {\n            package: this.package,\n            name: this._name,\n            icon: this.icon,\n            author: this.author,\n            version: this.version,\n            description: this.description,\n            inlets: [...this.inlets],\n            outlets: [...this.outlets],\n            args: [...this.args],\n            props: {\n                ...superProps,\n                ...thisProps\n            },\n            isPatcherInlet: this.isPatcherInlet,\n            isPatcherOutlet: this.isPatcherOutlet\n        };\n    }\n    isUIStateKey = (x: any) => this.meta.props[x] && this.meta.props[x].isUIState;\n    updateUIFromProps = (props: Partial<P & BaseObjectProps>) => {\n        if (props) {\n            const uiState: Partial<U & BaseUIState> = {};\n            for (const key in props) {\n                if (this.isUIStateKey(key)) uiState[key as keyof (U & BaseUIState)] = props[key] as any;\n            }\n            this.updateUI(uiState);\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", e => this.box.emit(\"metaUpdated\", e));\n        this.on(\"argsUpdated\", e => this.box.emit(\"argsUpdated\", e));\n        this.on(\"propsUpdated\", e => this.box.emit(\"propsUpdated\", e));\n        this.on(\"dataUpdated\", e => this.box.emit(\"dataUpdated\", e));\n        this.on(\"stateUpdated\", e => this.box.emit(\"stateUpdated\", e));\n        this.on(\"updateArgs\", this.setArgs);\n        this.on(\"updateProps\", this.setProps);\n        this.on(\"updateProps\", this.updateUIFromProps);\n    }\n}\n","import type BaseObject from \"./BaseObject\";\n\nexport interface RemotedObjectEventMap {\n    \"outlet\": { outlet: number; data: any };\n}\n\n/** Generate an object that can be used in the AudioWorklet as remoted. */\nexport default <\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends {} = {},\n    U extends {} = {},\n    E extends Partial<RemotedObjectEventMap> & Record<string, any> = {}\n>(O: typeof BaseObject) => class RemotedObject extends O<D, S, I, O, A, P, U, E & RemotedObjectEventMap> {\n    get proxy() {\n        return this.patcher.state.patcherProcessor;\n    }\n    subscribe() {\n        super.subscribe();\n        const handleBoxIoCountChanged = () => {\n            const { id, inlets, outlets } = this.box;\n            this.proxy?.objectEmitFromWorklet(id, \"boxIoCountChanged\", { inlets, outlets });\n        };\n        this.box.on(\"ioCountChanged\", handleBoxIoCountChanged);\n        this.on(\"outlet\", ({ outlet, data }) => this.outlet(outlet, data));\n        this.on(\"destroy\", () => this.box.off(\"ioCountChanged\", handleBoxIoCountChanged));\n    }\n};\n","import BaseObject from \"./BaseObject\";\nimport { Func, New } from \"../importer/RemotedImporter\";\nimport getIO from \"../jsaw/index.jsdsppkg.aw\";\n\nexport default async () => ({\n    BaseObject,\n    EmptyObject: BaseObject,\n    InvalidObject: BaseObject,\n    func: Func,\n    new: New,\n    ...await getIO()\n});\n","import RemotedImporter from \"../importer/RemotedImporter\";\n\nexport default async () => RemotedImporter.import(\"globalThis\", globalThis, true);\n","import StaticMethod from \"./StaticMethod\";\nimport Method from \"./Method\";\nimport BaseObject from \"../base/BaseObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type ImportedObject from \"./ImportedObject\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\n\ntype TAnyFunction = (...args: any[]) => any;\ntype TWrapper = typeof StaticMethod | typeof Method;\ntype S = { Wrapper: TWrapper };\nexport default class Func extends BaseObject<{}, S, [Bang], [TAnyFunction], any[], {}, { loading: boolean }> {\n    static description = \"Get the function itself\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Bang to get the function itself\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"function\",\n        description: \"function\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"string\",\n        optional: false,\n        varLength: false,\n        description: \"Function name\"\n    }];\n    state: S = { Wrapper: null };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n        });\n        this.on(\"updateArgs\", (args) => {\n            if (typeof args[0] !== \"undefined\") {\n                const Wrapper = this.patcher.activeLib[args[0]];\n                if (!Wrapper) this.error(`Function ${args[0]} not found.`);\n                else if (Wrapper.prototype instanceof StaticMethod || Wrapper.prototype instanceof Method) {\n                    this.state.Wrapper = Wrapper as TWrapper;\n                } else {\n                    this.error(\"Given identifier function is not a function\");\n                }\n            } else {\n                this.error(\"A function identifier is needed.\");\n            }\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (isBang(data)) this.output();\n            }\n        });\n    }\n    callback = () => this.outlet(0, this.imported);\n    output() {\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n    get name() {\n        const c = this.state.Wrapper;\n        return c.path[c.path.length - 1];\n    }\n    get imported(): TAnyFunction {\n        const c = this.state.Wrapper || this.patcher.activeLib.Object as TWrapper;\n        let r: TAnyFunction;\n        try {\n            r = c.path.reduce((acc, cur) => acc[cur], c.root);\n        } catch (e) {\n            this.error(e);\n        }\n        return r;\n    }\n    set imported(v: TAnyFunction) {\n        const c = (this.constructor as typeof ImportedObject);\n        let parent = c.root;\n        try {\n            if (!c.path.length) {\n                c.root = v;\n            } else {\n                c.path.slice(0, -1).forEach(key => parent = parent[key]);\n                parent[c.path[c.path.length - 1]] = v;\n            }\n        } catch (e) {\n            this.error(e);\n        }\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ntype S<Static extends boolean> = { instance: Static extends true ? undefined : any; result: any };\ntype I<Static extends boolean> = Static extends true ? [Bang] : [any | Bang];\ntype O<Static extends boolean> = Static extends true ? [any] : [any, any];\nexport default class Getter<Static extends boolean = false> extends ImportedObject<any, S<Static>, I<Static>, O<Static>, [], { sync: boolean }, { loading: boolean }> {\n    static importedObjectType: ImportedObjectType = \"Getter\";\n    static description = \"Auto-imported getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to read\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    static props: IJSPatcherObjectMeta[\"props\"] = {\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    state: S<Static> = { instance: undefined, result: null };\n    handlePreInit = () => {\n        this.inlets = 1;\n        this.outlets = 2;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this.state.instance = data;\n            if (this.execute()) this.output();\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", this.handlePreInit);\n        this.on(\"inlet\", this.handleInlet);\n    }\n    execute() {\n        try {\n            this.state.result = this.state.instance[this.name];\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this.state.result, this.state.instance] as O<Static>);\n    output() {\n        if (this.state.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this.state.result.then((r) => {\n                this.loading = false;\n                this.state.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\n/**\n* ```JavaScript\n*   class A {\n*       static a = {} // A.a\n*       static b() {} // A.b\n*       static get c() {} // A.c (get)\n*       static set d(x) {} // A.d (set)\n*       e = {} // Nothing\n*       f() {} // A.prototype.f\n*       get g() {} // A.prototype.g (get)\n*       set h(x) {} // A.prototype.h (set)\n*       constructor() {} // A.prototype.constructor\n*   }\n*   const B = {\n*       a: {}, // B.a\n*       b() {} // B.b\n*   }\n*   const C = function() {\n*       this.a = null; // C.prototype.constructor\n*   }\n* ```\n*/\n\nexport default abstract class ImportedObject<T, S, I extends any[], O extends any[], A extends any[], P, U> extends BaseObject<{}, S, I, O, A, P, U> {\n    static importedObjectType: ImportedObjectType;\n    static root: Record<string, any>;\n    static path: string[];\n    static description = \"Auto-imported object\";\n    get name() {\n        const c = (this.constructor as typeof ImportedObject);\n        return c.path[c.path.length - 1];\n    }\n    get imported(): T {\n        const c = (this.constructor as typeof ImportedObject);\n        let r: T;\n        try {\n            r = c.path.reduce((acc, cur) => acc[cur], c.root);\n        } catch (e) {\n            this.error(e);\n        }\n        return r;\n    }\n    set imported(v: T) {\n        const c = (this.constructor as typeof ImportedObject);\n        let parent = c.root;\n        try {\n            if (!c.path.length) {\n                c.root = v;\n            } else {\n                c.path.slice(0, -1).forEach(key => parent = parent[key]);\n                parent[c.path[c.path.length - 1]] = v;\n            }\n        } catch (e) {\n            this.error(e);\n        }\n    }\n}\nexport class AnyImportedObject extends ImportedObject<any, any, any, any, any, any, any> {}\n","import { ImporterDirSelfObject } from \"../../../utils/symbols\";\nimport { getPropertyDescriptors } from \"../../../utils/utils\";\nimport { IJSPatcherObject, isJSPatcherObjectConstructor } from \"../base/AbstractObject\";\nimport type { TPackage } from \"../../types\";\n\nexport default abstract class Importer {\n    static $self = ImporterDirSelfObject;\n    static getObject(p: PropertyDescriptor, pkgName: string, root: Record<string, any>, path: string[]): typeof IJSPatcherObject {\n        throw new Error(\"getObject not implemented\");\n    }\n    /*\n    static async test() {\n        await Importer.importFrom(\"https://unpkg.com/@tensorflow/tfjs\", \"tf\").then(console.log);\n        await Importer.importFrom(\"https://unpkg.com/three\", \"THREE\").then(console.log);\n        await Importer.importFrom(\"https://unpkg.com/webmidi\", \"MIDI\").then(console.log);\n    }\n    */\n    static writeInPath(pkgIn: TPackage, pathIn: string[], object: typeof IJSPatcherObject) {\n        if (pathIn.length === 0) {\n            Object.assign(pkgIn, { [this.$self]: object });\n            return;\n        }\n        const path = pathIn.slice();\n        let pkg = pkgIn;\n        while (path.length > 1) {\n            const key = path.shift();\n            if (!pkg[key]) pkg[key] = {};\n            else if (isJSPatcherObjectConstructor(pkg[key])) pkg[key] = { [this.$self]: pkg[key] };\n            pkg = pkg[key] as TPackage;\n        }\n        pkg[path[0]] = object;\n    }\n    /**\n     * Recursive transform JavaScript object to JSPatcher Package\n     *\n     * @param {string} pkgName package identifier\n     * @param {Record<string, any>} root imported JavaScript object\n     * @param {boolean} [all] import non-iterables\n     * @param {TPackage} [outIn]\n     * @param {string[]} [pathIn]\n     * @param {any[]} [stackIn]\n     * @param {number} [depthIn]\n     */\n    static import(pkgName: string, root: Record<string, any>, all?: boolean, outIn?: TPackage, pathIn?: string[], stackIn?: any[], depthIn?: number) {\n        const depth = typeof depthIn === \"undefined\" ? 0 : depthIn;\n        const out = outIn || {};\n        const path = pathIn || [];\n        const stack = stackIn ? stackIn.slice() : [];\n        let o: any;\n        try {\n            o = path.reduce((acc, cur) => acc[cur], root);\n        } catch (e) {\n            return out;\n        }\n        if (typeof o === \"undefined\" || o === null || stack.indexOf(o) !== -1 || (depth && o === globalThis) || o === (globalThis as any).jspatcherEnv) return out; // cyclic object\n        stack[depth] = o;\n        let props: Record<string, TypedPropertyDescriptor<any> | PropertyDescriptor>;\n        try { // mitigate opener.location.href error\n            props = getPropertyDescriptors(o);\n        } catch (e) {\n            return out;\n        }\n        if (path.length === 0) {\n            const newObj = this.getObject({ value: root }, pkgName, root, []);\n            if (newObj) this.writeInPath(out, [], newObj);\n        }\n        for (const key in props) {\n            if (typeof o === \"function\" && [\"arguments\", \"caller\", \"length\", \"name\", \"__proto__\"].indexOf(key) >= 0) continue;\n            if (typeof o === \"object\" && [\"constructor\", \"__proto__\"].indexOf(key) >= 0) continue;\n            const prop = props[key];\n            const newPath = [...path, key];\n            if (!all && !prop.enumerable && key.startsWith(\"_\") && key !== \"prototype\") continue;\n            const newObj = this.getObject(prop, pkgName, root, newPath);\n            if (newObj) this.writeInPath(out, newPath.map((s, i) => (i !== newPath.length - 1 && s === \"prototype\" ? \"\" : s)), newObj);\n            const value = prop.value;\n            if ((typeof value === \"object\" || typeof value === \"function\") && value !== null && (value === Array.prototype || !Array.isArray(value))) {\n                this.import(pkgName, root, all, out, newPath, stack, depth + 1);\n            }\n        }\n        return out;\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ntype TAnyFunction = (...args: any[]) => any;\ntype S<Static extends boolean> = { instance: Static extends true ? undefined : any; inputs: any[]; result: any };\ntype I<Static extends boolean> = Static extends true ? [any | Bang, ...any[]] : [any | Bang, any, ...any[]];\ntype O<Static extends boolean> = Static extends true ? [any, ...any[]] : [any, any, ...any[]];\ninterface P {\n    args: number;\n    spreadArgs: boolean;\n    sync: boolean;\n}\n\nexport default class Method<Static extends boolean = false> extends ImportedObject<TAnyFunction, S<Static>, I<Static>, O<Static>, any[], P, { loading: boolean }> {\n    static importedObjectType: ImportedObjectType = \"Method\";\n    static description = \"Auto-imported method\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to read\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Method argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Method return value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after method called\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        varLength: true,\n        description: \"Set arguments while loaded\"\n    }];\n    static props: IPropsMeta<P> = {\n        args: {\n            type: \"number\",\n            default: 0,\n            description: \"arguments count for method\"\n        },\n        spreadArgs: {\n            type: \"boolean\",\n            default: false,\n            description: \"arguments input will be spreaded if true\"\n        },\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    state: S<Static> = { instance: undefined, inputs: [], result: null };\n    initialInlets = 1;\n    initialOutlets = 2;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this.state.instance = data;\n            if (this.execute()) this.output();\n        } else {\n            this.state.inputs[inlet - 1] = data;\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", () => {\n            const fn = this.imported;\n            const argsCount = Math.max(fn.length, this.box.args.length, ~~+this.getProp(\"args\"));\n            this.inlets = Math.max(1, this.initialInlets + argsCount);\n            this.outlets = this.initialOutlets + argsCount;\n        });\n        this.on(\"updateArgs\", (args) => {\n            this.state.inputs = args.slice();\n            const fn = this.imported;\n            const argsCount = Math.max(fn.length, args.length, ~~+this.getProp(\"args\"));\n            this.inlets = Math.max(1, this.initialInlets + argsCount);\n            this.outlets = this.initialOutlets + argsCount;\n        });\n        this.on(\"updateProps\", (props) => {\n            if (props.args && typeof props.args === \"number\" && props.args >= 0) {\n                const fn = this.imported;\n                const argsCount = Math.max(fn.length, this.box.args.length, ~~props.args);\n                this.inlets = Math.max(1, this.initialInlets + argsCount);\n                this.outlets = this.initialOutlets + argsCount;\n            }\n        });\n        this.on(\"inlet\", this.handleInlet);\n    }\n    execute() {\n        const fn = this.imported;\n        try {\n            this.state.result = fn.call(this.state.instance, ...(this.getProp(\"spreadArgs\") ? this.state.inputs.reduce<any[]>((acc, cur) => [...acc, ...cur], []) : this.state.inputs));\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this.state.result, this.state.instance, ...this.state.inputs] as O<Static>);\n    output() {\n        if (this.state.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this.state.result.then((r) => {\n                this.loading = false;\n                this.state.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\n","import StaticMethod from \"./StaticMethod\";\nimport BaseObject from \"../base/BaseObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type ImportedObject from \"./ImportedObject\";\nimport type { IJSPatcherObjectMeta, IPropsMeta } from \"../base/AbstractObject\";\n\ntype TAnyConstructor = new (...args: any[]) => any;\ninterface P {\n    args: number;\n    spreadArgs: boolean;\n}\ninterface S {\n    Wrapper: typeof StaticMethod;\n    inputs: any[];\n    result: any;\n}\n\nexport default class New extends BaseObject<{}, S, [any | Bang, ...any[]], [any, ...any[]], any[], P, { loading: boolean }> {\n    static description = \"Call function as a constructor\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Constructor argument, output instance constructed\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Constructor argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Instance constructed\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after constructor called\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"string\",\n        optional: false,\n        varLength: false,\n        description: \"Constructor name\"\n    }, {\n        type: \"anything\",\n        optional: true,\n        varLength: true,\n        description: \"Set arguments while loaded\"\n    }];\n    static props: IPropsMeta<P> = {\n        args: {\n            type: \"number\",\n            default: 0,\n            description: \"arguments count for method\"\n        },\n        spreadArgs: {\n            type: \"boolean\",\n            default: false,\n            description: \"arguments input will be spreaded if true\"\n        }\n    };\n    state: S = { Wrapper: null, inputs: [], result: null };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", () => {\n            const Fn = this.imported;\n            const argsCount = Math.max(Fn.length, this.box.args.length - 1, ~~+this.getProp(\"args\"));\n            this.inlets = Math.max(1, argsCount);\n            this.outlets = 1 + this.inlets;\n        });\n        this.on(\"updateArgs\", (args) => {\n            if (typeof args[0] !== \"undefined\") {\n                const Wrapper = this.patcher.activeLib[args[0]];\n                if (!Wrapper) this.error(`Function ${args[0]} not found.`);\n                else if (Wrapper.prototype instanceof StaticMethod) {\n                    this.state.Wrapper = Wrapper as typeof StaticMethod;\n                    const Fn = this.imported;\n                    const argsCount = Math.max(Fn.length, args.length - 1, ~~+this.getProp(\"args\"));\n                    this.inlets = Math.max(1, argsCount);\n                    this.outlets = 1 + this.inlets;\n                } else {\n                    this.error(\"Given function is not constructable\");\n                }\n            } else {\n                this.error(\"A constructor is needed.\");\n            }\n            this.state.inputs = args.slice(1);\n        });\n        this.on(\"updateProps\", (props) => {\n            if (props.args && typeof props.args === \"number\" && props.args >= 0) {\n                const Fn = this.imported;\n                const argsCount = Math.max(Fn.length, this.box.args.length - 1, ~~+props.args);\n                this.inlets = Math.max(1, argsCount);\n                this.outlets = 1 + this.inlets;\n            }\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (!isBang(data)) this.state.inputs[inlet] = data;\n                if (this.execute()) this.output();\n            } else {\n                this.state.inputs[inlet] = data;\n            }\n        });\n    }\n    execute() {\n        const Fn = this.imported;\n        try {\n            this.state.result = new Fn(...(this.getProp(\"spreadArgs\") ? this.state.inputs.reduce<any[]>((acc, cur) => [...acc, ...cur], []) : this.state.inputs));\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this.state.result, ...this.state.inputs]);\n    output() {\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n    get name() {\n        const c = this.state.Wrapper;\n        return c.path[c.path.length - 1];\n    }\n    get imported(): TAnyConstructor {\n        const c = this.state.Wrapper || this.patcher.activeLib.Object as typeof StaticMethod;\n        let r: TAnyConstructor;\n        try {\n            r = c.path.reduce((acc, cur) => acc[cur], c.root);\n        } catch (e) {\n            this.error(e);\n        }\n        return r;\n    }\n    set imported(v: TAnyConstructor) {\n        const c = (this.constructor as typeof ImportedObject);\n        let parent = c.root;\n        try {\n            if (!c.path.length) {\n                c.root = v;\n            } else {\n                c.path.slice(0, -1).forEach(key => parent = parent[key]);\n                parent[c.path[c.path.length - 1]] = v;\n            }\n        } catch (e) {\n            this.error(e);\n        }\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ntype S<Static extends boolean> = { instance: Static extends true ? undefined : any };\ntype I<Static extends boolean> = Static extends true ? [Bang, any] : [any | Bang, any];\ntype O<Static extends boolean> = Static extends true ? [any] : [any, any];\ntype A<Static extends boolean> = Static extends true ? [any] : [];\n\nexport default class Property<Static extends boolean = false> extends ImportedObject<any, S<Static>, I<Static>, O<Static>, A<Static>, {}, {}> {\n    static importedObjectType: ImportedObjectType = \"Property\";\n    static description = \"Auto-imported property\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Constructor argument, output instance constructed\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Constructor argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    state: S<Static> = { instance: undefined };\n    handlePreInit = () => {\n        this.inlets = 2;\n        this.outlets = 2;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this.state.instance = data;\n            let result;\n            try {\n                result = this.state.instance[this.name];\n            } catch (e) {\n                this.error(e);\n            }\n            this.outletAll([result, this.state.instance] as O<Static>);\n        } else if (inlet === 1) {\n            try {\n                this.state.instance[this.name] = data;\n            } catch (e) {\n                this.error(e);\n            }\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", this.handlePreInit);\n        this.on(\"inlet\", this.handleInlet);\n    }\n}\n","import NewBase from \"./New\";\nimport FuncBase from \"./Func\";\nimport PropertyBase from \"./Property\";\nimport GetterBase from \"./Getter\";\nimport SetterBase from \"./Setter\";\nimport SetterGetterBase from \"./SetterGetter\";\nimport MethodBase from \"./Method\";\nimport StaticPropertyBase from \"./StaticProperty\";\nimport StaticGetterBase from \"./StaticGetter\";\nimport StaticSetterBase from \"./StaticSetter\";\nimport StaticSetterGetterBase from \"./StaticSetterGetter\";\nimport StaticMethodBase from \"./StaticMethod\";\nimport generateRemotedObject from \"../base/generateRemotedObject\";\nimport Importer from \"./Importer\";\nimport type BaseObject from \"../base/BaseObject\";\nimport type { IJSPatcherObject } from \"../base/AbstractObject\";\n\nexport class New extends generateRemotedObject(NewBase as typeof BaseObject) {\n}\nexport class Func extends generateRemotedObject(FuncBase as typeof BaseObject) {\n}\nexport class Property extends generateRemotedObject(PropertyBase as typeof BaseObject) {\n}\nexport class Getter extends generateRemotedObject(GetterBase as typeof BaseObject) {\n}\nexport class Setter extends generateRemotedObject(SetterBase as typeof BaseObject) {\n}\nexport class SetterGetter extends generateRemotedObject(SetterGetterBase as typeof BaseObject) {\n}\nexport class Method extends generateRemotedObject(MethodBase as typeof BaseObject) {\n}\nexport class StaticProperty extends generateRemotedObject(StaticPropertyBase as typeof BaseObject) {\n}\nexport class StaticGetter extends generateRemotedObject(StaticGetterBase as typeof BaseObject) {\n}\nexport class StaticSetter extends generateRemotedObject(StaticSetterBase as typeof BaseObject) {\n}\nexport class StaticSetterGetter extends generateRemotedObject(StaticSetterGetterBase as typeof BaseObject) {\n}\nexport class StaticMethod extends generateRemotedObject(StaticMethodBase as typeof BaseObject) {\n}\n\nexport default class DefaultImporter extends Importer {\n    static getObject(p: PropertyDescriptor, pkgName: string, root: Record<string, any>, path: string[]): typeof IJSPatcherObject {\n        const isStatic = path[path.length - 2] !== \"prototype\";\n        let Super: typeof IJSPatcherObject;\n        const type = typeof p.value;\n        if (type === \"function\") {\n            if (isStatic) Super = StaticMethod;\n            else Super = Method;\n        } else if (type === \"undefined\") {\n            const setter = p.set;\n            const getter = p.get;\n            if (isStatic) {\n                if (setter && getter) Super = StaticSetterGetter;\n                else if (setter) Super = StaticSetter;\n                else if (getter) Super = StaticGetter;\n                else return null;\n            } else {\n                if (setter && getter) Super = SetterGetter;\n                else if (setter) Super = Setter;\n                else if (getter) Super = Getter;\n                else return null;\n            }\n        } else {\n            if (isStatic) Super = StaticProperty;\n            else Super = Property;\n        }\n        return class extends Super {\n            static package = pkgName;\n            static root = root;\n            static path = path;\n            static get _name() { return path[path.length - 1] || pkgName; }\n        };\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ntype S<Static extends boolean> = { instance: Static extends true ? undefined : any; input: any };\ntype I<Static extends boolean> = Static extends true ? [any] : [any | Bang, any];\ntype O<Static extends boolean> = Static extends true ? [] : [any];\n\nexport default class Setter<Static extends boolean = false> extends ImportedObject<any, S<Static>, I<Static>, O<Static>, [any], {}, {}> {\n    static importedObjectType: ImportedObjectType = \"Setter\";\n    static description = \"Auto-imported setter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to set property\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        varLength: false,\n        description: \"Initial value to set\"\n    }];\n    initialInlets = 2;\n    initialOutlets = 1;\n    state: S<Static> = { instance: undefined, input: null };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this.state.instance = data;\n            if (typeof this.state.instance === \"undefined\") return;\n            try {\n                this.state.instance[this.name] = this.state.input;\n            } catch (e) {\n                this.error(e);\n                return;\n            }\n            this.outlet(0, this.state.instance);\n        } else {\n            this.state.input = data;\n        }\n    };\n    handleUpdateArgs = (args: [any?]) => {\n        if (args.length) this.state.input = args[0];\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = this.initialInlets;\n            this.outlets = this.initialOutlets;\n        });\n        this.on(\"updateArgs\", this.handleUpdateArgs);\n        this.on(\"inlet\", this.handleInlet);\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ntype S<Static extends boolean> = { instance: Static extends true ? undefined : any; input: any; result: any };\ntype I<Static extends boolean> = Static extends true ? [any] : [any | Bang, any];\ntype O<Static extends boolean> = Static extends true ? [any] : [any, any];\n\nexport default class SetterGetter<Static extends boolean = false> extends ImportedObject<any, S<Static>, I<Static>, O<Static>, [any], { sync: boolean }, { loading: boolean }> {\n    static importedObjectType: ImportedObjectType = \"SetterGetter\";\n    static description = \"Auto-imported setter / getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to manipulate\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        varLength: false,\n        description: \"Initial value to set\"\n    }];\n    static props: IJSPatcherObjectMeta[\"props\"] = {\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    initialInlets = 2;\n    initialOutlets = 2;\n    state: S<Static> = { instance: undefined, input: null, result: null };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this.state.instance = data;\n            if (typeof this.state.instance === \"undefined\") return;\n            if (typeof this.state.input !== \"undefined\") {\n                try {\n                    this.state.instance[this.name] = this.state.input;\n                } catch (e) {\n                    this.error(e);\n                    return;\n                }\n            }\n            if (this.execute()) this.output();\n        } else if (inlet === 1) {\n            this.state.input = data;\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = this.initialInlets;\n            this.outlets = this.initialOutlets;\n        });\n        this.on(\"updateArgs\", (args) => {\n            if (args.length) this.state.input = args[0];\n        });\n        this.on(\"inlet\", this.handleInlet);\n    }\n    execute() {\n        try {\n            this.state.result = this.state.instance[this.name];\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this.state.result, this.state.instance] as O<Static>);\n    output() {\n        if (this.state.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this.state.result.then((r) => {\n                this.loading = false;\n                this.state.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\n","import Getter from \"./Getter\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticGetter extends Getter<true> {\n    static importedObjectType: ImportedObjectType = \"StaticGetter\";\n    static description = \"Auto-imported static getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Get the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    handlePreInit = () => {\n        this.inlets = 1;\n        this.outlets = 1;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0 && isBang(data) && this.execute()) this.output();\n    };\n    execute() {\n        try {\n            this.state.result = this.imported;\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outlet(0, this.state.result);\n}\n","import Method from \"./Method\";\nimport { ImportedStaticMethodObject } from \"../../../utils/symbols\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticMethod extends Method<true> {\n    static importedObjectType: ImportedObjectType = \"StaticMethod\";\n    static [ImportedStaticMethodObject] = true;\n    static description = \"Auto-imported static method\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        varLength: true,\n        description: \"Method argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Method return value\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after method called\"\n    }];\n    initialInlets = 0;\n    initialOutlets = 1;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this.state.inputs[inlet] = data;\n            if (this.execute()) this.output();\n        } else {\n            this.state.inputs[inlet] = data;\n        }\n    };\n    execute() {\n        const fn = this.imported;\n        try {\n            this.state.result = fn(...(this.getProp(\"spreadArgs\") ? this.state.inputs.reduce<any[]>((acc, cur) => [...acc, ...cur], []) : this.state.inputs));\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this.state.result, ...this.state.inputs]);\n}\n","import Property from \"./Property\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticProperty extends Property<true> {\n    static importedObjectType: ImportedObjectType = \"StaticProperty\";\n    static description = \"Auto-imported static property\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Get the value\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        description: \"Set the value while loaded.\"\n    }];\n    handlePreInit = () => {\n        this.inlets = 2;\n        this.outlets = 1;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (isBang(data)) this.outlet(0, this.imported);\n        } else if (inlet === 1) {\n            this.imported = data;\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"updateArgs\", (args) => {\n            if (args.length) this.imported = args[0];\n        });\n        this.on(\"inlet\", this.handleInlet);\n    }\n}\n","import Setter from \"./Setter\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticSetter extends Setter<true> {\n    static importedObjectType: ImportedObjectType = \"StaticSetter\";\n    static description = \"Auto-imported static setter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [];\n    initialInlets = 1;\n    initialOutlets = 0;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) this.imported = data;\n    };\n    handleUpdateArgs = (args: [any?]) => {\n        if (args.length) this.imported = args[0];\n    };\n}\n","import SetterGetter from \"./SetterGetter\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticSetterGetter extends SetterGetter<true> {\n    static importedObjectType: ImportedObjectType = \"StaticSetterGetter\";\n    static description = \"Auto-imported static setter / getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Get the value\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    initialInlets = 2;\n    initialOutlets = 1;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) return;\n            if (typeof this.state.input !== \"undefined\") {\n                try {\n                    this.imported = this.state.input;\n                } catch (e) {\n                    this.error(e);\n                    return;\n                }\n            }\n            if (this.execute()) this.output();\n        } else if (inlet === 1) {\n            this.state.input = data;\n        }\n    };\n    execute() {\n        try {\n            this.state.result = this.imported;\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outlet(0, this.state.result);\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\n\ninterface P {\n    description: string;\n}\n\nexport default class AudioIn extends BaseObject<{}, {}, [], [number, number], [number], P> {\n    static isPatcherInlet = \"audio\" as const;\n    static description = \"Patcher inlet (audio)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"number\",\n        description: \"Sample value\"\n    }, {\n        type: \"number\",\n        description: \"Sample index\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected handlePatcherInput = ({ input, index, sample }: PatcherEventMap[\"audioInput\"]) => {\n        if (input === this.index - 1) this.outletAll([sample, index]);\n    };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 2;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        if (this.env.thread === \"AudioWorklet\") this.patcher.on(\"audioInput\", this.handlePatcherInput);\n        this.on(\"destroy\", () => {\n            this.patcher.off(\"audioInput\", this.handlePatcherInput);\n            this.patcher.changeIO();\n        });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IInletsMeta, IPropsMeta } from \"../base/AbstractObject\";\n\ninterface P {\n    description: string;\n}\n\nexport default class AudioOut extends BaseObject<{}, {}, [], [number, number], [number, number], P> {\n    static isPatcherOutlet = \"audio\" as const;\n    static description = \"Patcher outlet (audio)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index, sampleIndex: 0 };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 2;\n            this.outlets = 0;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const inlet0 = { ...this.meta.inlets[0] };\n            if (typeof props.description === \"string\") inlet0.description = props.description;\n            this.setMeta({ inlets: [inlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 1) this._.sampleIndex = +~~data;\n            else if (inlet === 0) this.patcher.outputAudio(this.index - 1, this._.sampleIndex, +data);\n        });\n        this.on(\"destroy\", this.emitPatcherChangeIO);\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta, TMetaType } from \"../base/AbstractObject\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\n\ninterface P {\n    description: string;\n    type: Exclude<TMetaType, \"signal\" | \"enum\">;\n}\n\nexport default class In extends BaseObject<{}, {}, [], [any], [number], P> {\n    static isPatcherInlet = \"data\" as const;\n    static description = \"Patcher inlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        },\n        type: {\n            type: \"enum\",\n            enums: [\"string\", \"number\", \"boolean\", \"object\", \"function\", \"anything\", \"bang\", \"color\"],\n            default: \"anything\",\n            description: \"Inlet data type\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected handlePatcherInput = ({ data, inlet }: PatcherEventMap[\"dataInput\"]) => {\n        if (inlet === this.index - 1) this.outlet(0, data);\n    };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            if (typeof props.type === \"string\") outlet0.type = props.type || \"anything\";\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        if (this.env.thread === \"AudioWorklet\") this.patcher.on(\"dataInput\", this.handlePatcherInput);\n        this.on(\"destroy\", () => {\n            this.patcher.off(\"dataInput\", this.handlePatcherInput);\n            this.patcher.changeIO();\n        });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IInletsMeta, IPropsMeta, TMetaType } from \"../base/AbstractObject\";\n\ninterface P {\n    description: string;\n    type: Exclude<TMetaType, \"signal\" | \"enum\">;\n}\n\nexport default class Out extends BaseObject<{}, {}, [], [any], [number], P> {\n    static isPatcherOutlet = \"data\" as const;\n    static description = \"Patcher outlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        },\n        type: {\n            type: \"enum\",\n            enums: [\"string\", \"number\", \"boolean\", \"object\", \"function\", \"anything\", \"bang\", \"color\"],\n            default: \"anything\",\n            description: \"Inlet data type\"\n        }\n    };\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 0;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const inlet0 = { ...this.meta.inlets[0] };\n            if (typeof props.description === \"string\") inlet0.description = props.description;\n            if (typeof props.type === \"string\") inlet0.type = props.type || \"anything\";\n            this.setMeta({ inlets: [inlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) this.patcher.outlet(this.index - 1, data);\n        });\n        this.on(\"destroy\", this.emitPatcherChangeIO);\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\n\ninterface P {\n    description: string;\n}\n\nexport default class Param extends BaseObject<{}, {}, [], [number, number], [string], P> {\n    static description = \"Patcher outlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"string\",\n        optional: false,\n        default: \"\",\n        description: \"Parameter name\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected handlePatcherInput = ({ param, index, sample }: PatcherEventMap[\"paramInput\"]) => {\n        if (this.args[0] === param) this.outletAll([sample, index]);\n    };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", this.emitPatcherChangeIO);\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        if (this.env.thread === \"AudioWorklet\") this.patcher.on(\"paramInput\", this.handlePatcherInput);\n        this.on(\"destroy\", () => {\n            this.patcher.off(\"paramInput\", this.handlePatcherInput);\n            this.patcher.changeIO();\n        });\n    }\n}\n","import generateRemotedObject from \"../base/generateRemotedObject\";\nimport In from \"./In\";\nimport Out from \"./Out\";\nimport Param from \"./Param\";\nimport AudioIn from \"./AudioIn\";\nimport AudioOut from \"./AudioOut\";\nimport type BaseObject from \"../base/BaseObject\";\n\nexport default async () => ({\n    in: generateRemotedObject(In as typeof BaseObject),\n    out: generateRemotedObject(Out as typeof BaseObject),\n    \"param~\": generateRemotedObject(Param as typeof BaseObject),\n    \"in~\": generateRemotedObject(AudioIn as typeof BaseObject),\n    \"out~\": generateRemotedObject(AudioOut as typeof BaseObject)\n});\n","import TypedEventEmitter from \"../../utils/TypedEventEmitter\";\nimport { isTRect, parseToPrimitive, isTPresentationRect, isRectMovable, isRectResizable } from \"../../utils/utils\";\nimport type Patcher from \"./Patcher\";\nimport type Line from \"./Line\";\nimport type { TBox, TMaxBox, TRect, TPresentationRect } from \"../types\";\nimport type { Args, Data, IJSPatcherObject, JSPatcherObjectEventMap, Props, State } from \"../objects/base/AbstractObject\";\n\nexport interface BoxEventMap extends Pick<JSPatcherObjectEventMap<any, any, any, any, any, any, any>, \"metaUpdated\" | \"argsUpdated\" | \"propsUpdated\" | \"dataUpdated\" | \"stateUpdated\"> {\n    \"rectChanged\": Box;\n    \"presentationRectChanged\": Box;\n    \"backgroundChanged\": Box;\n    \"presentationChanged\": Box;\n    \"textChanged\": Box;\n    \"highlight\": Box;\n    \"error\": string;\n    \"highlightPort\": { isSrc: boolean; i: number; highlight: boolean };\n    \"connectedPort\": { isSrc: boolean; i: number; last?: false };\n    \"disconnectedPort\": { isSrc: boolean; i: number; last: boolean };\n    \"ioCountChanged\": Box;\n}\n\nexport default class Box<T extends IJSPatcherObject = IJSPatcherObject> extends TypedEventEmitter<BoxEventMap> {\n    readonly id: string;\n    text = \"\";\n    inlets = 0;\n    outlets = 0;\n    rect: TRect;\n    background: boolean;\n    presentation: boolean;\n    presentationRect: TPresentationRect;\n    data: Data<T>;\n    args: Args<T>;\n    props: Props<T>;\n    _editing: boolean;\n    private _parsed: { class: string; args: Args<T>; props: Props<T> };\n    private _object: T;\n    private _Object: typeof IJSPatcherObject;\n    private readonly _patcher: Patcher;\n    private readonly _inletLines: Set<Line>[];\n    private readonly _outletLines: Set<Line>[];\n    constructor(patcherIn: Patcher, boxIn: TBox) {\n        super();\n        this.id = boxIn.id;\n        this.text = boxIn.text;\n        this.args = (boxIn.args || []) as Args<T>;\n        this.props = (boxIn.props || {}) as Props<T>;\n        this.inlets = boxIn.inlets;\n        this.outlets = boxIn.outlets;\n        this._inletLines = new Array(this.inlets).fill(null).map(() => new Set<Line>());\n        this._outletLines = new Array(this.outlets).fill(null).map(() => new Set<Line>());\n        const maxBoxIn = boxIn as unknown as TMaxBox[\"box\"];\n        this.rect = boxIn.rect || maxBoxIn.patching_rect;\n        this.background = boxIn.background || !!maxBoxIn.background;\n        this.presentation = boxIn.presentation || !!maxBoxIn.presentation;\n        this.presentationRect = boxIn.presentationRect || maxBoxIn.presentation_rect;\n        if (!this.presentationRect) this.presentationRect = this.rect.slice() as TRect;\n        this.data = boxIn.data || (boxIn as any).prevData?.storage || {};\n        this._editing = !!boxIn._editing;\n        this._patcher = patcherIn;\n        this.on(\"dataUpdated\", () => this._patcher.emitChanged());\n        this.on(\"argsUpdated\", () => this._patcher.emitChanged());\n        this.on(\"propsUpdated\", () => this._patcher.emitChanged());\n    }\n    async init() {\n        this._parsed = Box.parseObjText(this.text) as { class: string; args: Args<T>; props: Props<T> };\n        const newMeta = this._patcher.getObjectMeta(this._parsed);\n        for (const key in this.props) {\n            if (!newMeta.props[key]) delete this.props[key];\n        }\n        if (this._parsed.args.length) this.args = this._parsed.args;\n        Object.assign(this.props, this._parsed.props);\n        const Constructor = this._patcher.getObjectConstructor(this._parsed);\n        this._Object = Constructor;\n        if (!this.size.every(v => v > 0)) this.size = this.defaultSize;\n        if (!isTPresentationRect(this.presentationRect) || (this.presentationSize.every(v => typeof v === \"number\") && !this.presentationSize.every(v => v > 0))) this.presentationSize = this.defaultSize;\n        this._object = new Constructor(this, this._patcher) as T;\n        await this._object.init();\n        return this;\n    }\n    async postInit() {\n        await this._object.postInit();\n        return this;\n    }\n    /**\n     * Main function when receive data from a inlet (base 0)\n     */\n    fn(inlet: number, data: any) {\n        this._object.fn(inlet, data);\n        return this;\n    }\n    get UI() {\n        return this._Object.UI;\n    }\n    get defaultSize() {\n        return this.UI?.defaultSize || [90, 20];\n    }\n    get meta() {\n        return this._object.meta;\n    }\n    get outletLines() {\n        return this._outletLines;\n    }\n    get inletLines() {\n        return this._inletLines;\n    }\n    get object() {\n        return this._object;\n    }\n    set object(oIn: T) {\n        this._object = oIn;\n    }\n    get Object() {\n        return this._Object;\n    }\n    get parsed() {\n        return this._parsed;\n    }\n    addInletLine(line: Line) {\n        const index = line.destInlet;\n        if (!this._inletLines[index]) this._inletLines[index] = new Set<Line>();\n        this._inletLines[index].add(line);\n    }\n    removeInletLine(line: Line) {\n        const index = line.destInlet;\n        if (this._inletLines[index]) this._inletLines[index].delete(line);\n    }\n    addOutletLine(line: Line) {\n        const index = line.srcOutlet;\n        if (!this._outletLines[index]) this._outletLines[index] = new Set<Line>();\n        this._outletLines[index].add(line);\n    }\n    removeOutletLine(line: Line) {\n        const index = line.srcOutlet;\n        if (this._outletLines[index]) this._outletLines[index].delete(line);\n    }\n    setInlets(count: number) {\n        const lines = this.allLines;\n        lines.forEach(line => line.disable());\n        this.inlets = count;\n        // Lines that should be removed will destroy themselves when enable()\n        lines.forEach(line => line.enable());\n        const linesSetLength = this._inletLines.length;\n        if (count > linesSetLength) this._inletLines.push(...new Array(count - linesSetLength).fill(null).map(() => new Set<Line>()));\n        else if (count < linesSetLength) this._inletLines.splice(count);\n        this._inletLines.forEach(set => set.forEach(line => line.uiUpdateDest()));\n        this.emit(\"ioCountChanged\", this);\n    }\n    setOutlets(count: number) {\n        const lines = this.allLines;\n        lines.forEach(line => line.disable());\n        this.outlets = count;\n        // Lines that should be removed will destroy themselves when enable()\n        lines.forEach(line => line.enable());\n        const linesSetLength = this._outletLines.length;\n        if (count > linesSetLength) this._outletLines.push(...new Array(count - linesSetLength).fill(null).map(() => new Set<Line>()));\n        else if (count < linesSetLength) this._outletLines.splice(count);\n        this._outletLines.forEach(set => set.forEach(line => line.uiUpdateSrc()));\n        this.emit(\"ioCountChanged\", this);\n    }\n    getInletPos(port: number) {\n        const { rect, inlets } = this;\n        const [left, top, width] = rect;\n        return { top, left: ((left + 10) + (width - 20) * port / (inlets > 1 ? inlets - 1 : 1)) };\n    }\n    getOutletPos(port: number) {\n        const { rect, outlets } = this;\n        const [left, top, width, height] = rect;\n        return { top: top + height, left: ((left + 10) + (width - 20) * port / (outlets > 1 ? outlets - 1 : 1)) };\n    }\n    get inletsPositions() {\n        const positions = [];\n        for (let i = 0; i < this.inlets; i++) {\n            positions[i] = this.getInletPos(i);\n        }\n        return positions;\n    }\n    get outletsPositions() {\n        const positions = [];\n        for (let i = 0; i < this.outlets; i++) {\n            positions[i] = this.getOutletPos(i);\n        }\n        return positions;\n    }\n    get allLines() {\n        const lines = new Set<Line>();\n        this._inletLines.forEach(set => set.forEach(line => lines.add(line)));\n        this._outletLines.forEach(set => set.forEach(line => lines.add(line)));\n        return lines;\n    }\n    // called when inlet or outlet are connected or disconnected\n    connectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        if (this._object) this._object.connectedOutlet(outlet, destBoxId, destInlet, lineId);\n        this.emit(\"connectedPort\", { isSrc: true, i: outlet });\n        return this;\n    }\n    connectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        if (this._object) this._object.connectedInlet(inlet, srcBoxId, srcOutlet, lineId);\n        this.emit(\"connectedPort\", { isSrc: false, i: inlet });\n        return this;\n    }\n    disconnectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        if (this._object) this._object.disconnectedOutlet(outlet, destBoxId, destInlet, lineId);\n        const last = this._patcher.getLinesBySrcID(this.id)[outlet].length === 1;\n        this.emit(\"disconnectedPort\", { isSrc: true, i: outlet, last });\n        return this;\n    }\n    disconnectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        if (this._object) this._object.disconnectedInlet(inlet, srcBoxId, srcOutlet, lineId);\n        const last = this._patcher.getLinesByDestID(this.id)[inlet].length === 1;\n        this.emit(\"disconnectedPort\", { isSrc: false, i: inlet, last });\n        return this;\n    }\n    isOutletTo(outlet: number, box: Box, inlet: number) {\n        const iterator = this._outletLines[outlet].values();\n        let r: IteratorResult<Line, Line>;\n        while (!(r = iterator.next()).done) {\n            const line = r.value;\n            if (line.destBox === box && line.destInlet === inlet) return true;\n        }\n        return false;\n    }\n    isInletFrom(inlet: number, box: Box, outlet: number) {\n        const iterator = this._inletLines[inlet].values();\n        let r: IteratorResult<Line, Line>;\n        while (!(r = iterator.next()).done) {\n            const line = r.value;\n            if (line.srcBox === box && line.srcOutlet === outlet) return true;\n        }\n        return false;\n    }\n    async changeText(textIn: string, force?: boolean) {\n        if (!force && textIn === this.text) return this;\n        const { defaultSize: oldDefaultSize } = this;\n        this.allLines.forEach(line => line.disable());\n        await this._object.destroy();\n        this.text = textIn;\n        this.args = [] as Args<T>;\n        await this.init();\n        this.allLines.forEach(line => line.enable());\n        const { defaultSize } = this;\n        if (!defaultSize.every((v, i) => v === oldDefaultSize[i])) {\n            this.size = defaultSize;\n            this.presentationSize = defaultSize;\n        }\n        this.emit(\"textChanged\", this);\n        this._object.setMeta(this._object.meta);\n        await this.postInit();\n        return this;\n    }\n    update(e: { args?: any[]; props?: Record<string, any> }) {\n        const { args, props } = e;\n        if (args) this.args = args as Args<T>;\n        if (props) {\n            if (isTRect(props.rect)) {\n                this.setRect(props.rect);\n                delete props.rect;\n            }\n            if (isTPresentationRect(props.presentationRect)) {\n                this.setPresentationRect(props.presentationRect);\n                delete props.presentationRect;\n            }\n            if (typeof props.presentation === \"boolean\") {\n                this.setPresentation(props.presentation);\n                delete props.presentation;\n            }\n            if (typeof props.background === \"boolean\") {\n                this.setBackground(props.background);\n                delete props.background;\n            }\n            this.props = Object.assign(this.props, props);\n        }\n        return this;\n    }\n    get position() {\n        return this.rect.slice(0, 2) as [number, number];\n    }\n    set position([leftIn, topIn]: [number, number]) {\n        const [left, top, width, height] = this.rect;\n        this.setRect([typeof leftIn === \"number\" ? leftIn : left, typeof topIn === \"number\" ? topIn : top, width, height] as TRect);\n    }\n    get presentationPosition() {\n        return this.presentationRect.slice(0, 2) as [number | string, number | string];\n    }\n    set presentationPosition([leftIn, topIn]: [number | string, number | string]) {\n        const [left, top, width, height] = this.presentationRect;\n        this.setPresentationRect([typeof leftIn === \"number\" || typeof leftIn === \"string\" ? leftIn : left, typeof topIn === \"number\" || typeof topIn === \"string\" ? topIn : top, width, height] as TPresentationRect);\n    }\n    get size() {\n        return this.rect.slice(2) as [number, number];\n    }\n    set size([widthIn, heightIn]: [number, number]) {\n        const [left, top, width, height] = this.rect;\n        this.setRect([left, top, widthIn || width, heightIn || height] as TRect);\n    }\n    get presentationSize() {\n        return this.presentationRect.slice(2) as [number | string, number | string];\n    }\n    set presentationSize([widthIn, heightIn]: [number | string, number | string]) {\n        const [left, top, width, height] = this.presentationRect;\n        this.setPresentationRect([left, top, widthIn || width, heightIn || height] as TPresentationRect);\n    }\n    getLeft(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][0];\n    }\n    setLeft(leftIn: number | string, inPresentation = false) {\n        const positionKey = inPresentation ? \"presentationPosition\" : \"position\";\n        this[positionKey] = [leftIn as any, undefined];\n    }\n    getTop(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][1];\n    }\n    setTop(topIn: number | string, inPresentation = false) {\n        const positionKey = inPresentation ? \"presentationPosition\" : \"position\";\n        this[positionKey] = [undefined, topIn as any];\n    }\n    getWidth(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][2];\n    }\n    setWidth(widthIn: number | string, inPresentation = false) {\n        const sizeKey = inPresentation ? \"presentationSize\" : \"size\";\n        this[sizeKey] = [widthIn as any, undefined];\n    }\n    getHeight(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][3];\n    }\n    setHeight(heightIn: number | string, inPresentation = false) {\n        const sizeKey = inPresentation ? \"presentationSize\" : \"size\";\n        this[sizeKey] = [undefined, heightIn as any];\n    }\n    setBackground(bool: boolean) {\n        if (!!this.background === !!bool) return this;\n        this.background = bool;\n        this.emit(\"backgroundChanged\", this);\n        return this;\n    }\n    setPresentation(bool: boolean) {\n        if (!!this.presentation === !!bool) return this;\n        this.presentation = bool;\n        if (bool) this.presentationRect = this.rect.slice() as TRect;\n        this.emit(\"presentationChanged\", this);\n        return this;\n    }\n    setRect(rect: TRect) {\n        if (!isTRect(rect)) return this;\n        rect[0] = Math.max(0, rect[0]);\n        rect[1] = Math.max(0, rect[1]);\n        rect[2] = Math.max(15, rect[2]);\n        rect[3] = Math.max(15, rect[3]);\n        this.rect = rect;\n        this.inletLines.forEach(set => set.forEach(line => line.uiUpdateDest()));\n        this.outletLines.forEach(set => set.forEach(line => line.uiUpdateSrc()));\n        this.emit(\"rectChanged\", this);\n        return this;\n    }\n    setPresentationRect(rect: TPresentationRect) {\n        if (!isTPresentationRect(rect)) return this;\n        if (typeof rect[0] === \"number\") rect[0] = Math.max(0, rect[0]);\n        if (typeof rect[1] === \"number\") rect[1] = Math.max(0, rect[1]);\n        if (typeof rect[2] === \"number\") rect[2] = Math.max(15, rect[2]);\n        if (typeof rect[3] === \"number\") rect[3] = Math.max(15, rect[3]);\n        this.presentationRect = rect;\n        this.emit(\"presentationRectChanged\", this);\n        return this;\n    }\n    getIsMovable(inPresentation = false) {\n        if (!inPresentation) return true;\n        return isRectMovable(this.presentationRect);\n    }\n    getIsResizable(inPresentation = false) {\n        if (!inPresentation) return true;\n        return isRectResizable(this.presentationRect);\n    }\n    error(text: string) {\n        this.emit(\"error\", text);\n    }\n    highlight() {\n        this.emit(\"highlight\", this);\n    }\n    highlightPort(isSrc: boolean, i: number, highlight: boolean) {\n        this.emit(\"highlightPort\", { isSrc, i, highlight });\n    }\n    undoable(e: { oldArgs?: Args<T>; args?: Args<T>; oldProps?: Props<T>; props?: Props<T>; oldState?: State<T>; state?: State<T> }) {\n        this._patcher.boxChanged(this.id, e);\n    }\n    async changeObject({ args, props, state }: { args?: Args<T>; props?: Props<T>; state?: State<T> }, options?: { undoable?: boolean }) {\n        if (args) await this._object.updateArgs(args, options);\n        if (props) await this._object.updateProps(props, options);\n        if (state) await this._object.updateState(state, options);\n    }\n    async destroy() {\n        this.allLines.forEach(line => this._patcher.deleteLine(line.id));\n        await this._object.destroy();\n        delete this._patcher.boxes[this.id];\n        return this;\n    }\n    static parseObjText(strIn: string) {\n        const REGEX = /`([^`]*)`|[^\\s]+/gi;\n        const strArray = [];\n        let match = REGEX.exec(strIn);\n        while (match != null) {\n            // Index 1 in the array is the captured group if it exists\n            // Index 0 is the matched text, which we use if no captured group exists\n            strArray.push(match[1] ? match[1] : match[0]);\n            // Each call to exec returns the next regex match as an array\n            match = REGEX.exec(strIn);\n        }\n        const objOut: { class: string; args: any[]; props: Record<string, any> } = { class: \"\", args: [], props: {} };\n        let lastProp;\n        if (strArray.length) objOut.class = strArray.shift();\n        while (strArray.length) {\n            const el = strArray.shift();\n            if (typeof lastProp === \"undefined\" && el.charAt(0) !== \"@\") { // is arg, to push\n                try {\n                    objOut.args.push(JSON.parse(el));\n                } catch (e) {\n                    objOut.args.push(el);\n                }\n                continue;\n            }\n            if (el.length > 1 && el.charAt(0) === \"@\") { // is prop key\n                lastProp = el.substr(1);\n                objOut.props[lastProp] = [];\n                continue;\n            }\n            try { // is prop value\n                objOut.props[lastProp].push(JSON.parse(el));\n            } catch (e) {\n                objOut.props[lastProp].push(el);\n            }\n        }\n        for (const key in objOut.props) { // no value = true, one value need to parse, else array\n            if (objOut.props[key].length === 0) objOut.props[key] = true;\n            else if (objOut.props[key].length === 1) objOut.props[key] = parseToPrimitive(objOut.props[key][0]);\n            else objOut.props[key] = parseToPrimitive(objOut.props[key].join(\" \"));\n        }\n        return objOut;\n    }\n    toString() {\n        const { id, text, inlets, outlets, rect, background, presentation, presentationRect, args, props, data } = this;\n        return JSON.stringify({ id, text, inlets, outlets, rect, background, presentation, presentationRect, args, props, data });\n    }\n    toSerializable(): TBox {\n        return JSON.parse(this.toString());\n    }\n}\n","import type { Rec, Receive, Import, Iterator, FaustOp, Effect, In, Out, TLineMap } from \"../objects/Faust\";\nimport type Box from \"./Box\";\nimport type Line from \"./Line\";\nimport type Patcher from \"./Patcher\";\n\nconst mapLines = (box: Box, patcher: Patcher, visitedBoxes: Box[], ins: In[], recs: Rec[], lineMap: Map<Line, string>) => {\n    if (visitedBoxes.indexOf(box) >= 0) return;\n    visitedBoxes.push(box);\n    if (box.object.class === \"Iterator\" && box !== visitedBoxes[0]) return;\n    const inletLines = Array.from(box.inletLines);\n    if (box.object.class === \"Receive\") {\n        const { sendID, state: { sendMap } } = box.object as Receive;\n        if (sendMap[sendID]) {\n            sendMap[sendID].forEach(s => inletLines.push(...s.inletLines));\n        }\n    }\n    inletLines.forEach(lines => lines.forEach((line) => {\n        const { srcBox } = line;\n        if (srcBox.object.class === \"In\" && ins.indexOf(srcBox.object as In) === -1) ins.push(srcBox.object as In);\n        else if (srcBox.object.class === \"Rec\" && recs.indexOf(srcBox.object as Rec) === -1) recs.push(srcBox.object as Rec);\n        if (srcBox.object.class === \"Effect\") lineMap.set(line, \"_\");\n        else lineMap.set(line, `${(srcBox.object as FaustOp).resultID}_${line.srcOutlet}`);\n        mapLines(srcBox, patcher, visitedBoxes, ins, recs, lineMap);\n    }));\n};\nexport const toFaustLambda = (patcher: Patcher, outs: FaustOp[], lambdaName: string) => {\n    const exprs: string[] = [];\n    const onces: string[] = [];\n    const mainIns: string[] = [];\n    const mainOuts: string[] = [];\n    const recIns: string[] = [];\n    const recOuts: string[] = [];\n    const visitedBoxes: Box[] = [];\n    let ins: In[] = [];\n    const recs: Rec[] = [];\n    const lineMap: TLineMap = new Map<Line, string>();\n    // Build graph\n    outs.forEach(out => mapLines(out.box, patcher, visitedBoxes, ins, recs, lineMap));\n    visitedBoxes.forEach((box) => {\n        if (box.object.class === \"In\") return;\n        if (box.object.class === \"Out\") return;\n        if (box.object.class === \"Rec\") return;\n        if (outs.indexOf(box.object as FaustOp) !== -1) return;\n        const { onces: o, exprs: e } = (box.object as FaustOp).toExpr(lineMap);\n        if (o) onces.push(...o.filter(v => onces.indexOf(v) === -1));\n        if (e) exprs.push(...e);\n    });\n    // Reverse order for readibility\n    exprs.reverse();\n    // Build rec in/outs\n    recs.forEach((rec) => {\n        exprs.push(...rec.toExpr(lineMap).exprs || []);\n        const recIn = rec.resultID;\n        const recOut = `${recIn}_0`;\n        recIns.push(recIn);\n        recOuts.push(recOut);\n    });\n    // Build main in/outs\n    ins = ins.sort((a, b) => a.index - b.index);\n    ins.forEach((in_) => {\n        const id = `${in_.resultID}_0`;\n        if (mainIns.indexOf(id) === -1) mainIns.push(id);\n    });\n    outs.forEach((out) => {\n        if (out.class === \"Iterator\") exprs.push(...(out as Iterator).toNormalExpr(lineMap).exprs || []);\n        else exprs.push(...out.toExpr(lineMap).exprs || []);\n        const id = out.resultID;\n        if (mainIns.indexOf(id) === -1) mainOuts.push(id);\n    });\n    // Generate Final expressions\n    exprs.forEach((s, i) => exprs[i] = `    ${s.replace(/\\n/g, \"\\n    \")}`); // indent\n    if (recIns.length) {\n        exprs.unshift(`Main(${[...recOuts, ...mainIns].join(\", \")}) = ${[...recIns, ...mainOuts].join(\", \")} with {`);\n        exprs.push(\n            \"};\",\n            `Rec = ${recIns.map(() => \"_\").join(\", \")} : ${recOuts.map(() => \"_\").join(\", \")};`,\n            `${lambdaName} = Main ~ Rec : ${[...recIns.map(() => \"!\"), ...mainOuts.map(() => \"_\")].join(\", \")};`\n        );\n    } else if (mainIns.length) {\n        exprs.unshift(`${lambdaName}(${mainIns.join(\", \")}) = ${mainOuts.join(\", \")} with {`);\n        exprs.push(\"};\");\n    } else if (exprs.length) {\n        exprs.unshift(`${lambdaName} = ${mainOuts.join(\", \")} with {`);\n        exprs.push(\"};\");\n    } else {\n        exprs.push(`${lambdaName} = 0;`);\n    }\n    return { onces, exprs, ins, outs };\n};\nexport const toFaustDspCode = (patcher: Patcher) => inspectFaustPatcher(patcher).code;\nexport const inspectFaustPatcher = (patcher: Patcher) => {\n    const imports: Import[] = [];\n    let outs: Out[] = [];\n    const effects: Effect[] = [];\n    // Find outs and imports\n    for (const boxId in patcher.boxes) {\n        const box = patcher.boxes[boxId];\n        if (box.object.class === \"Effect\") effects.push(box.object as Effect);\n        else if (box.object.class === \"Out\") outs.push(box.object as Out);\n        else if (box.object.class === \"Import\") imports.push(box.object as Import);\n    }\n    outs = outs.sort((a, b) => a.index - b.index);\n    const { onces, exprs, ins } = toFaustLambda(patcher, outs, \"process\");\n    if (effects.length) {\n        const { onces: fxOnces, exprs: fxExprs, ins: fxIns } = toFaustLambda(patcher, [effects[0]], \"effect\");\n        onces.push(...fxOnces.filter(v => onces.indexOf(v) === -1));\n        exprs.push(...fxExprs);\n        ins.push(...fxIns);\n    }\n    imports.map(i => i.toOnceExpr()).forEach(o => onces.push(...o.filter(v => onces.indexOf(v) === -1)));\n    const code = `${onces.join(\"\\n\")}${onces.length ? \"\\n\" : \"\"}${exprs.join(\"\\n\")}\\n`;\n    return { code, onces, exprs, ins, outs };\n};\n","import type { WamNode } from \"wamsdk\";\nimport TypedEventEmitter from \"../../utils/TypedEventEmitter\";\nimport type Patcher from \"./Patcher\";\nimport type { TLine, TLineType } from \"../types\";\nimport type { IJSPatcherObject, TMetaType } from \"../objects/base/AbstractObject\";\n\nexport interface LineEventMap {\n    \"passData\": any;\n    \"destPosChanged\": { top: number; left: number };\n    \"srcPosChanged\": { top: number; left: number };\n    \"posChanged\": Line;\n    \"typeChanged\": TLineType;\n}\n\nexport default class Line extends TypedEventEmitter<LineEventMap> {\n    static isConnectableByAudio(from: IJSPatcherObject, outlet: number, to: IJSPatcherObject, inlet: number) {\n        const fromConnection = from.outletAudioConnections[outlet];\n        const toConnection = to.inletAudioConnections[inlet];\n        if (!fromConnection) return false;\n        if (!toConnection) return false;\n        if (!fromConnection.node) return false;\n        if (!toConnection.node) return false;\n        return true;\n    }\n    static isWamNode(x: any): x is WamNode {\n        return typeof x === \"object\" && x !== null && x?.module?.isWebAudioModule;\n    }\n    static compare(line1: Line, line2: Line) {\n        return line2.positionHash - line1.positionHash;\n    }\n    readonly id: string;\n    src: [string, number];\n    dest: [string, number];\n    disabled = true;\n    private _type: TLineType;\n    private readonly _patcher: Patcher;\n    constructor(patcherIn: Patcher, lineIn: TLine) {\n        super();\n        this.id = lineIn.id;\n        this.src = lineIn.src;\n        this.dest = lineIn.dest;\n        this.disabled = true;\n        this._patcher = patcherIn;\n        const { srcBox, destBox } = this;\n        this._type = this.calcType();\n        if (srcBox) {\n            srcBox.on(\"metaUpdated\", this.updateType);\n            srcBox.addOutletLine(this);\n        }\n        if (destBox) {\n            destBox.on(\"metaUpdated\", this.updateType);\n            destBox.addInletLine(this);\n        }\n    }\n    get isConnectableByAudio() {\n        if (this._patcher.props.mode !== \"js\") return false;\n        return Line.isConnectableByAudio(this.srcBox.object, this.srcOutlet, this.destBox.object, this.destInlet);\n    }\n    get presentation() {\n        return this.srcBox && this.srcBox.presentation && this.destBox && this.destBox.presentation;\n    }\n    setSrc(src: [string, number]) {\n        const srcId = src[0];\n        const srcOutlet = src[1];\n        if (srcId === this.src[0] && srcOutlet === this.src[1]) return this;\n        this.srcBox.off(\"metaUpdated\", this.updateType);\n        this.disable();\n        this.srcBox.removeOutletLine(this);\n        this.src = [srcId, srcOutlet];\n        this.srcBox.addOutletLine(this);\n        this.enable();\n        this.srcBox.on(\"metaUpdated\", this.updateType);\n        this.updateType();\n        return this.uiUpdateSrc();\n    }\n    getSrc() {\n        return this.src;\n    }\n    uiUpdateSrc() {\n        this.emit(\"srcPosChanged\", this.srcPos);\n        return this;\n    }\n    setDest(dest: [string, number]) {\n        const destId = dest[0];\n        const destInlet = dest[1];\n        if (destId === this.dest[0] && destInlet === this.dest[1]) return this;\n        this.destBox.off(\"metaUpdated\", this.updateType);\n        this.disable();\n        this.destBox.removeInletLine(this);\n        this.dest = [destId, destInlet];\n        this.destBox.addInletLine(this);\n        this.enable();\n        this.destBox.on(\"metaUpdated\", this.updateType);\n        this.updateType();\n        return this.uiUpdateDest();\n    }\n    getDest() {\n        return this.dest;\n    }\n    uiUpdateDest() {\n        this.emit(\"destPosChanged\", this.destPos);\n        return this;\n    }\n    disable(bool?: boolean): Line {\n        if (bool === false) return this.enable();\n        if (this.disabled) return this;\n        this.disabled = true;\n        const { srcBox, destBox } = this;\n        if (this._patcher.getLinesByBox(this.srcId, this.destId, this.srcOutlet, this.destInlet).length > 1) return this; // not last cable\n        if (this.isConnectableByAudio) {\n            const from = this.srcBox.object.outletAudioConnections[this.srcOutlet];\n            const to = this.destBox.object.inletAudioConnections[this.destInlet];\n            if (from && to && from.node && to.node) {\n                const isAudioParam = to.node instanceof AudioParam;\n                try {\n                    if (isAudioParam) from.node.disconnect(to.node as AudioParam, from.index);\n                    else from.node.disconnect(to.node as AudioNode, from.index, to.index);\n                    if (Line.isWamNode(from.node) && Line.isWamNode(to.node)) from.node.disconnectEvents(to.node);\n                } catch (e) {\n                    this._patcher.error((e as Error).message);\n                }\n            }\n        }\n        srcBox.disconnectedOutlet(this.srcOutlet, destBox.id, this.destInlet, this.id);\n        destBox.disconnectedInlet(this.destInlet, srcBox.id, this.srcOutlet, this.id);\n        return this;\n    }\n    enable(bool?: boolean): Line {\n        if (bool === false) return this.disable();\n        if (!this.disabled) return this;\n        const { srcBox, destBox } = this;\n        if (this.srcOutlet >= srcBox.outlets || this.destInlet >= destBox.inlets) return this._patcher.deleteLine(this.id);\n        if (this._patcher.getLinesByBox(this.srcId, this.destId, this.srcOutlet, this.destInlet).length > 1) return this; // not last cable\n        if (this.isConnectableByAudio) {\n            const from = this.srcBox.object.outletAudioConnections[this.srcOutlet];\n            const to = this.destBox.object.inletAudioConnections[this.destInlet];\n            if (from && to && from.node && to.node) {\n                const isAudioParam = to.node instanceof AudioParam;\n                try {\n                    if (isAudioParam) from.node.connect(to.node as AudioParam, from.index);\n                    else from.node.connect(to.node as AudioNode, from.index, to.index);\n                    if (Line.isWamNode(from.node) && Line.isWamNode(to.node)) from.node.connectEvents(to.node);\n                } catch (e) {\n                    this._patcher.error((e as Error).message);\n                }\n            }\n        }\n        srcBox.connectedOutlet(this.srcOutlet, destBox.id, this.destInlet, this.id);\n        destBox.connectedInlet(this.destInlet, srcBox.id, this.srcOutlet, this.id);\n        this.disabled = false;\n        return this;\n    }\n    destroy() {\n        this.destBox.off(\"metaUpdated\", this.updateType);\n        this.srcBox.off(\"metaUpdated\", this.updateType);\n        this.disable();\n        this.srcBox.removeOutletLine(this);\n        this.destBox.removeInletLine(this);\n        delete this._patcher.lines[this.id];\n        return this;\n    }\n    pass(data: any) {\n        this.emit(\"passData\", data);\n        return this.disabled ? this : this.destBox.fn(this.destInlet, data);\n    }\n    get positionHash() {\n        const { top, left } = this._patcher.boxes[this.dest[0]].getInletPos(this.dest[1]);\n        return left * 65536 + top;\n    }\n    get srcPos() {\n        return this._patcher.boxes[this.src[0]].getOutletPos(this.src[1]);\n    }\n    get destPos() {\n        return this._patcher.boxes[this.dest[0]].getInletPos(this.dest[1]);\n    }\n    get srcId() {\n        return this.src[0];\n    }\n    get srcOutlet() {\n        return this.src[1];\n    }\n    get destId() {\n        return this.dest[0];\n    }\n    get destInlet() {\n        return this.dest[1];\n    }\n    get srcBox() {\n        return this._patcher.boxes[this.src[0]];\n    }\n    get destBox() {\n        return this._patcher.boxes[this.dest[0]];\n    }\n    private calcType() {\n        const srcMeta = this.srcBox.object.meta.outlets;\n        const destMeta = this.destBox.object.meta.inlets;\n        let srcType: TMetaType = \"anything\";\n        let destType: TMetaType = \"anything\";\n        if (srcMeta[this.srcOutlet]) srcType = srcMeta[this.srcOutlet].type;\n        else if (srcMeta[srcMeta.length - 1] && srcMeta[srcMeta.length - 1].varLength) srcType = srcMeta[srcMeta.length - 1].type;\n        if (destMeta[this.destInlet]) destType = destMeta[this.destInlet].type;\n        else if (destMeta[destMeta.length - 1] && destMeta[destMeta.length - 1].varLength) destType = destMeta[destMeta.length - 1].type;\n        return srcType === \"signal\" && destType === \"signal\" ? \"audio\" : \"normal\";\n    }\n    updateType = () => {\n        const type = this.calcType();\n        if (type !== this._type) {\n            this._type = type;\n            this.emit(\"typeChanged\", type);\n        }\n    };\n    get type(): TLineType {\n        return this._type;\n    }\n    toString() {\n        return JSON.stringify(this.toSerializable());\n    }\n    toSerializable(): TLine {\n        const { id, src, dest, disabled } = this;\n        return { id, src: [...src], dest: [...dest], disabled };\n    }\n}\n","import FileInstance from \"../file/FileInstance\";\nimport PatcherEditor from \"./PatcherEditor\";\nimport Line from \"./Line\";\nimport Box from \"./Box\";\nimport PatcherHistory from \"./PatcherHistory\";\nimport PackageManager, { IPackageManager } from \"../PackageManager\";\nimport { max2js, js2max } from \"../../utils/utils\";\nimport { toFaustDspCode } from \"./FaustPatcherAnalyser\";\nimport type Env from \"../Env\";\nimport type Project from \"../Project\";\nimport type TempPatcherFile from \"./TempPatcherFile\";\nimport type PersistentProjectFile from \"../file/PersistentProjectFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { TInletEvent, TOutletEvent, IJSPatcherObjectMeta, IPropsMeta, IJSPatcherObject, TMetaType } from \"../objects/base/AbstractObject\";\nimport type { TLine, TBox, PatcherMode, RawPatcher, TMaxPatcher, TErrorLevel, TPatcherAudioConnection, TFlatPackage, TPackage, TPatcherLog, TDependencies } from \"../types\";\nimport type PatcherNode from \"../worklets/PatcherNode\";\nimport type PatcherProcessor from \"../worklets/Patcher.worklet\";\n\nexport interface TPatcherProps {\n    mode: PatcherMode;\n    dependencies: TDependencies;\n    bgColor: string;\n    editingBgColor: string;\n    grid: [number, number];\n    boxIndexCount: number;\n    lineIndexCount: number;\n    package?: string;\n    name?: string;\n    author?: string;\n    version?: string;\n    description?: string;\n    openInPresentation: boolean;\n}\nexport type TPublicPatcherProps = Pick<TPatcherProps, \"dependencies\" | \"bgColor\" | \"editingBgColor\" | \"grid\" | \"openInPresentation\">;\n\nexport interface TPatcherState {\n    name: string;\n    isReady: boolean;\n    log: TPatcherLog[];\n    selected: string[];\n    pkgMgr: IPackageManager;\n    preventEmitChanged: boolean;\n    patcherNode?: PatcherNode;\n    patcherProcessor?: PatcherProcessor;\n}\n\nexport interface PatcherEventMap extends TPublicPatcherProps {\n    \"postInited\": never;\n    \"ready\": never;\n    \"unload\": never;\n    \"changeBoxText\": { boxId: string; oldText: string; text: string };\n    \"boxChanged\": { boxId: string; oldArgs?: any[]; args?: any[]; oldProps?: Record<string, any>; props?: Record<string, any>; oldState?: Record<string, any>; state?: Record<string, any> };\n    \"passiveDeleteLine\": Line;\n    \"graphChanged\": never;\n    \"changed\": never;\n    \"ioChanged\": IJSPatcherObjectMeta;\n    \"dataInput\": TInletEvent<any[]>;\n    \"dataOutput\": TOutletEvent<any[]>;\n    \"audioInput\": { input: number; index: number; sample: number };\n    \"paramInput\": { param: string; index: number; sample: number };\n    \"audioOutput\": { output: number; index: number; sample: number };\n    \"disconnectAudioInlet\": number;\n    \"disconnectAudioOutlet\": number;\n    \"connectAudioInlet\": number;\n    \"connectAudioOutlet\": number;\n    \"propsChanged\": Partial<TPublicPatcherProps>;\n    \"libChanged\": { pkg: TPackage; lib: TFlatPackage };\n}\n\nexport default class Patcher extends FileInstance<PatcherEventMap, PersistentProjectFile | TempPatcherFile> {\n    static props: IPropsMeta<TPublicPatcherProps> = {\n        dependencies: {\n            type: \"object\",\n            description: \"Patcher dependencies\",\n            default: []\n        },\n        bgColor: {\n            type: \"color\",\n            description: \"Background color\",\n            default: \"rgba(61, 65, 70, 1)\"\n        },\n        editingBgColor: {\n            type: \"color\",\n            description: \"Background color while unlocked\",\n            default: \"rgba(82, 87, 94, 1)\"\n        },\n        grid: {\n            type: \"object\",\n            description: \"Grid size\",\n            default: [15, 15]\n        },\n        openInPresentation: {\n            type: \"boolean\",\n            description: \"Open patcher in presentation\",\n            default: false\n        }\n    };\n    static async fromProjectItem(options: { file: PersistentProjectFile | TempPatcherFile; env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<Patcher> {\n        return new this(options).init();\n    }\n    async getEditor() {\n        const editor = new PatcherEditor(this);\n        return editor.init();\n    }\n    lines: Record<string, Line> = {};\n    boxes: Record<string, Box> = {};\n    props: TPatcherProps;\n    _state: TPatcherState;\n    _inletAudioConnections: TPatcherAudioConnection[] = [];\n    _outletAudioConnections: TPatcherAudioConnection[] = [];\n    _history = new PatcherHistory();\n    constructor(options: { env: IJSPatcherEnv; project?: IProject; file?: PersistentProjectFile | TempPatcherFile; instanceId?: string }) {\n        super(options);\n        this._state = {\n            name: \"patcher\",\n            isReady: false,\n            log: [],\n            selected: [],\n            pkgMgr: undefined,\n            preventEmitChanged: false\n        };\n        this.lines = {};\n        this.boxes = {};\n        this.props = {\n            mode: \"js\",\n            dependencies: Patcher.props.dependencies.default,\n            bgColor: Patcher.props.bgColor.default,\n            editingBgColor: Patcher.props.editingBgColor.default,\n            grid: Patcher.props.grid.default,\n            openInPresentation: Patcher.props.openInPresentation.default,\n            boxIndexCount: 0,\n            lineIndexCount: 0\n        };\n    }\n    get state() {\n        return this._state;\n    }\n    get activePkg() {\n        return this._state.pkgMgr.pkg;\n    }\n    get activeLib() {\n        return this._state.pkgMgr.lib;\n    }\n    get isReady() {\n        return true;\n    }\n    get audioCtx() {\n        return (this.project as Project)?.audioCtx || (this.env as Env).audioCtx;\n    }\n    get fileExtension() {\n        return {\n            js: \"jspat\",\n            max: \"maxpat\",\n            gen: \"gendsp\",\n            faust: \"dsppat\",\n            jsaw: \"jsdsp\"\n        }[this.props.mode];\n    }\n    get fileName() {\n        return this.file?.name || `${this._state.name}.${this.fileExtension}`;\n    }\n    emitGraphChanged() {\n        if (this._state.preventEmitChanged) return;\n        this.emit(\"graphChanged\");\n        this.emitChanged();\n    }\n    emitChanged() {\n        if (this._state.preventEmitChanged) return;\n        this.emit(\"changed\");\n    }\n    boxChanged(boxId: string, changed: { oldArgs?: any[]; args?: any[]; oldProps?: Record<string, any>; props?: Record<string, any>; oldState?: Record<string, any>; state?: Record<string, any> }) {\n        this.emit(\"boxChanged\", { boxId, ...changed });\n    }\n    async init(data = this.file?.data, fileName = this.fileName) {\n        if (data instanceof ArrayBuffer) {\n            if (!data.byteLength) return this.load({});\n            const patcherIn = await new Response(data).json();\n            const splitName = fileName.split(\".\");\n            const ext = splitName.pop();\n            const extMap: Record<string, PatcherMode> = { json: \"js\", jspat: \"js\", maxpat: \"max\", gendsp: \"gen\", dsppat: \"faust\" };\n            return this.load(patcherIn, extMap[ext] || \"js\");\n        }\n        return this.load(data || {});\n    }\n    async load(patcherIn: RawPatcher | TMaxPatcher | any, modeIn?: PatcherMode) {\n        this._state.isReady = false;\n        this._state.preventEmitChanged = true;\n        await this.unload();\n        if (typeof patcherIn !== \"object\") {\n            this._state.isReady = true;\n            this._state.preventEmitChanged = false;\n            this.emit(\"ready\");\n            return this;\n        }\n        this.props.mode = patcherIn.props?.mode || modeIn || \"js\";\n        this.state.pkgMgr = new PackageManager(this);\n        const { mode } = this.props;\n        const $init: Promise<Box>[] = [];\n        let patcher;\n        if (mode === \"max\" || mode === \"gen\") {\n            if (!(patcherIn as TMaxPatcher).patcher) {\n                patcher = patcherIn;\n            } else {\n                patcher = max2js(patcherIn as TMaxPatcher);\n            }\n        } else if (mode === \"js\" || mode === \"faust\" || mode === \"jsaw\") {\n            if (\"data\" in patcherIn && \"patcher\" in patcherIn) {\n                patcher = patcherIn.patcher;\n            } else {\n                patcher = patcherIn;\n            }\n        }\n        if (patcher.props) this.props = { ...this.props, ...patcher.props, mode };\n        if (Array.isArray(this.props.bgColor)) this.props.bgColor = `rgba(${this.props.bgColor.join(\", \")})`;\n        if (Array.isArray(this.props.editingBgColor)) this.props.editingBgColor = `rgba(${this.props.editingBgColor.join(\", \")})`;\n        if (mode === \"js\" && this.props.dependencies) {\n            const { dependencies } = this.props;\n            if (!Array.isArray(dependencies)) {\n                this.props.dependencies = [];\n                for (const key in dependencies as Record<string, string>) {\n                    this.props.dependencies.push([key, dependencies[key]]);\n                }\n            }\n            let depNames = this.props.dependencies.map(t => t[0]);\n            try {\n                await this.env.taskMgr.newTask(this, `${this.file?.name || \"\"} Loading dependencies`, async (onUpdate: (newMsg: string) => any) => {\n                    for (let i = 0; i < this.props.dependencies.length; i++) {\n                        const [name, url] = this.props.dependencies[i];\n                        onUpdate(`${name} from ${url}`);\n                        try {\n                            await this._state.pkgMgr.importFromURL(url, name);\n                        } catch (e) {\n                            throw new Error(`Loading dependency: ${name} from ${url} failed`);\n                        }\n                        depNames = depNames.splice(i, 1);\n                    }\n                });\n            } catch (error) {\n                this.error((error as Error).message);\n            }\n        }\n        if (patcher.boxes) { // Boxes & data\n            for (const id in patcher.boxes) {\n                const $ = this.createBox(patcher.boxes[id]);\n                $init.push($);\n                const numID = parseInt(id.match(/\\d+/)[0]);\n                if (numID > this.props.boxIndexCount) this.props.boxIndexCount = numID;\n            }\n        }\n        await Promise.all($init);\n        if (patcher.lines) { // Lines\n            for (const id in patcher.lines) {\n                this.createLine(patcher.lines[id]);\n                const numID = parseInt(id.match(/\\d+/)[0]);\n                if (numID > this.props.lineIndexCount) this.props.lineIndexCount = numID;\n            }\n        }\n        this._state.isReady = true;\n        this._state.preventEmitChanged = false;\n        this.emitGraphChanged();\n        this.emit(\"ready\");\n        await Promise.all(Object.keys(this.boxes).map(id => this.boxes[id].postInit()));\n        this.emit(\"postInited\");\n        return this;\n    }\n    async getPatcherNode() {\n        if (this.props.mode === \"jsaw\" && this.env.thread === \"main\") {\n            const PatcherNode = (await import(\"../worklets/PatcherNode\")).default;\n            await PatcherNode.register(this.audioCtx.audioWorklet);\n            this.state.patcherNode = new PatcherNode(this.audioCtx, { env: this.env, instanceId: this.id, fileId: this.file?.id, data: this.file ? undefined : this.toSerializable() });\n            await this.state.patcherNode.init();\n            return this.state.patcherNode;\n        }\n        return null;\n    }\n    async loadFromURL(url: string) {\n        try {\n            const file = await fetch(url);\n            const parsed = await file.json() as RawPatcher | TMaxPatcher;\n            return this.load(parsed);\n        } catch (e) {\n            this.error(`Fetch file ${url} failed.`);\n        }\n        return this;\n    }\n    async loadFromString(sIn: string) {\n        try {\n            const parsed = JSON.parse(sIn) as RawPatcher | TMaxPatcher;\n            return this.load(parsed);\n        } catch (e) {\n            this.error(`Load from string: ${sIn.slice(20)}... failed.`);\n        }\n        return this;\n    }\n    async loadFromFile(file: File) {\n        const splitName = file.name.split(\".\");\n        const ext = splitName.pop();\n        const name = splitName.join(\".\");\n        const extMap: Record<string, PatcherMode> = { json: \"js\", jspat: \"js\", maxpat: \"max\", gendsp: \"gen\", dsppat: \"faust\" };\n        if (!extMap[ext]) return this;\n        const reader = new FileReader();\n        reader.onload = () => {\n            let parsed: RawPatcher | TMaxPatcher;\n            try {\n                parsed = JSON.parse(reader.result.toString());\n            } catch (e) {\n                this.error((e as Error).message);\n            }\n            if (parsed) {\n                this.load(parsed, extMap[ext]);\n                this._state.name = name;\n            }\n        };\n        reader.onerror = () => this.error(reader.error.message);\n        reader.readAsText(file, \"UTF-8\");\n        return this;\n    }\n    async unload() {\n        await this.emit(\"unload\");\n        if (Object.keys(this.boxes).length) {\n            this._state.preventEmitChanged = true;\n            await Promise.all(Object.keys(this.boxes).map(id => this.boxes[id].destroy()));\n            this._state.preventEmitChanged = false;\n            this.emitGraphChanged();\n        }\n        this.lines = {};\n        this.boxes = {};\n        this.props = {\n            mode: \"js\",\n            dependencies: Patcher.props.dependencies.default,\n            bgColor: Patcher.props.bgColor.default,\n            editingBgColor: Patcher.props.editingBgColor.default,\n            grid: Patcher.props.grid.default,\n            openInPresentation: Patcher.props.openInPresentation.default,\n            boxIndexCount: 0,\n            lineIndexCount: 0\n        };\n        this._state.selected = [];\n    }\n    async destroy() {\n        await this.unload();\n        await super.destroy();\n    }\n    async addPackage(namespace: string, url: string) {\n        const { dependencies } = this.props;\n        await this.state.pkgMgr.importFromURL(url, namespace);\n        dependencies.push([namespace, url]);\n        this.setProps({ dependencies: dependencies.slice() });\n    }\n    removePackage(id: string) {\n        const { dependencies } = this.props;\n        const i = dependencies.findIndex(t => t[0] === id);\n        if (i === -1) return;\n        dependencies.splice(i, 1);\n        this.state.pkgMgr.remove(id);\n        this.setProps({ dependencies: dependencies.slice() });\n    }\n    async createBox(boxIn: TBox) {\n        if (!boxIn.id || (boxIn.id in this.boxes)) boxIn.id = \"box-\" + ++this.props.boxIndexCount;\n        const box = new Box(this, boxIn);\n        this.boxes[box.id] = box;\n        await box.init();\n        this.emitGraphChanged();\n        return box;\n    }\n    getObjectConstructor(parsed: { class: string; args: any[]; props: Record<string, any> }) {\n        const className = parsed.class;\n        if (typeof className !== \"string\" || className.length === 0) return this.activeLib.EmptyObject;\n        if (this.activeLib[className]) return this.activeLib[className];\n        this.error(`Object ${className} not found.`);\n        return this.activeLib.InvalidObject;\n    }\n    getObjectMeta(parsed: { class: string; args: any[]; props: Record<string, any> }) {\n        return this.getObjectConstructor(parsed).meta;\n    }\n    async changeBoxText(boxId: string, text: string) {\n        const oldText = this.boxes[boxId].text;\n        if (oldText === text) return this.boxes[boxId];\n        await this.boxes[boxId].changeText(text);\n        this.emit(\"changeBoxText\", { oldText, text, boxId });\n        return this.boxes[boxId];\n    }\n    async deleteBox(boxId: string) {\n        const box = this.boxes[boxId];\n        if (!box) return null;\n        await box.destroy();\n        this.emitGraphChanged();\n        return box;\n    }\n    createLine(lineIn: TLine) {\n        if (!this.canCreateLine(lineIn)) return null;\n        if (!lineIn.id || (lineIn.id in this.lines)) lineIn.id = \"line-\" + ++this.props.lineIndexCount;\n        const line = new Line(this, lineIn);\n        this.lines[line.id] = line;\n        line.enable();\n        this.emitGraphChanged();\n        return line;\n    }\n    canCreateLine(lineIn: TLine) {\n        if (lineIn.src[1] >= this.boxes[lineIn.src[0]].outlets) return false;\n        if (lineIn.dest[1] >= this.boxes[lineIn.dest[0]].inlets) return false;\n        if (this.getLinesByBox(lineIn.src[0], lineIn.dest[0], lineIn.src[1], lineIn.dest[1]).length > 0) return false;\n        return true;\n    }\n    deleteLine(lineId: string) {\n        const line = this.lines[lineId];\n        if (!line) return null;\n        line.destroy();\n        if (!this._state.preventEmitChanged) this.emit(\"passiveDeleteLine\", line);\n        this.emitGraphChanged();\n        return line;\n    }\n    changeLineSrc(lineId: string, srcId: string, srcOutlet: number) {\n        const line = this.lines[lineId];\n        // if (this.instance.getLinesByBox(srcId, line.destId, srcOutlet, line.destInlet).length > 0) return line;\n        const oldSrc: [string, number] = [line.srcId, line.srcOutlet];\n        const src: [string, number] = [srcId, srcOutlet];\n        line.setSrc(src);\n        this.emitGraphChanged();\n        return { lineId, oldSrc, src };\n    }\n    changeLineDest(lineId: string, destId: string, destOutlet: number) {\n        const line = this.lines[lineId];\n        // if (this.getLinesByBox(line.srcId, destId, line.destInlet, destOutlet).length > 0) return line;\n        const oldDest: [string, number] = [line.destId, line.destInlet];\n        const dest: [string, number] = [destId, destOutlet];\n        line.setDest(dest);\n        this.emitGraphChanged();\n        return { lineId, oldDest, dest };\n    }\n    getLinesBySrcID(srcId: string) {\n        const result = [];\n        for (let i = 0; i < this.boxes[srcId].outlets; i++) { // Array.fill fills the array with same instance\n            result[i] = [];\n        }\n        for (const id in this.lines) {\n            const line = this.lines[id];\n            if (line && line.srcId === srcId) {\n                const srcOutlet = line.srcOutlet;\n                if (!result[srcOutlet]) result[srcOutlet] = [id];\n                else result[srcOutlet].push(id);\n            }\n        }\n        return result;\n    }\n    getLinesByDestID(destId: string) {\n        const result = [];\n        for (let i = 0; i < this.boxes[destId].inlets; i++) {\n            result[i] = [];\n        }\n        for (const id in this.lines) {\n            const line = this.lines[id];\n            if (line && line.destId === destId) {\n                const destInlet = line.destInlet;\n                if (!result[destInlet]) result[destInlet] = [id];\n                else result[destInlet].push(id);\n            }\n        }\n        return result;\n    }\n    getLinesByBox(srcId: string, destId: string, srcOutlet?: number, destInlet?: number) {\n        const result: string[] = [];\n        let srcOuts: string[] = [];\n        let destIns: string[] = [];\n        const srcOutsWraped = this.getLinesBySrcID(srcId);\n        if (srcOutlet !== undefined) srcOuts = srcOutsWraped[srcOutlet];\n        else srcOutsWraped.forEach(el => srcOuts = srcOuts.concat(el));\n        const destInsWraped = this.getLinesByDestID(destId);\n        if (destInlet !== undefined) destIns = destInsWraped[destInlet];\n        else destInsWraped.forEach(el => destIns = destIns.concat(el));\n        if (!srcOuts || !destIns) return result;\n        srcOuts.forEach(idOut => destIns.forEach(idIn => (idIn === idOut ? result.push(idIn) : undefined)));\n        return result;\n    }\n    fn(data: any, inlet: number) {\n        this.emit(\"dataInput\", { data, inlet });\n    }\n    inputAudio(input: number, index: number, sample: number) {\n        this.emit(\"audioInput\", { input, index, sample });\n    }\n    inputParam(param: string, index: number, sample: number) {\n        this.emit(\"paramInput\", { param, index, sample });\n    }\n    outputAudio(output: number, index: number, sample: number) {\n        this.emit(\"audioOutput\", { output, index, sample });\n    }\n    outlet(outlet: number, data: any) {\n        this.emit(\"dataOutput\", { data, outlet });\n    }\n    get inletAudioConnections() {\n        return this._inletAudioConnections;\n    }\n    get outletAudioConnections() {\n        return this._outletAudioConnections;\n    }\n    connectAudioInlet(index: number) {\n        this.emit(\"connectAudioInlet\", index);\n    }\n    connectAudioOutlet(index: number) {\n        this.emit(\"connectAudioOutlet\", index);\n    }\n    disconnectAudioInlet(index: number) {\n        this.emit(\"disconnectAudioInlet\", index);\n    }\n    disconnectAudioOutlet(index: number) {\n        this.emit(\"disconnectAudioOutlet\", index);\n    }\n    changeIO() {\n        this.emit(\"ioChanged\", this.meta);\n    }\n    inspectAudioIO() {\n        const inputBoxes: Box[] = [];\n        const outputBoxes: Box[] = [];\n        const parametersBoxes: [string, Box][] = [];\n        for (const boxId in this.boxes) {\n            const box = this.boxes[boxId];\n            const arg0 = box.args[0];\n            const port = Math.max(1, ~~arg0) - 1;\n            if (box.meta.isPatcherInlet === \"audio\") inputBoxes[port] = box;\n            else if (box.meta.isPatcherInlet === \"parameter\") parametersBoxes.push([arg0, box]);\n            else if (box.meta.isPatcherOutlet === \"audio\") outputBoxes[port] = box;\n        }\n        for (let i = 0; i < this._inletAudioConnections.length; i++) {\n            if (!inputBoxes[i]) delete this._inletAudioConnections[i];\n        }\n        for (let i = 0; i < this._outletAudioConnections.length; i++) {\n            if (!outputBoxes[i]) delete this._outletAudioConnections[i];\n        }\n        return { inputBoxes, outputBoxes, parametersBoxes };\n    }\n    get meta(): IJSPatcherObjectMeta {\n        const { metaFromPatcher } = this;\n        return {\n            package: this.props.package || \"\",\n            name: this.props.name || \"\",\n            icon: null,\n            author: this.props.author || \"\",\n            version: this.props.version || \"\",\n            description: this.props.description || \"\",\n            isPatcherInlet: false,\n            isPatcherOutlet: false,\n            ...metaFromPatcher\n        };\n    }\n    get metaFromPatcher(): Pick<IJSPatcherObjectMeta, \"inlets\" | \"outlets\" | \"args\" | \"props\"> {\n        const inlets: IJSPatcherObjectMeta[\"inlets\"] = [];\n        const outlets: IJSPatcherObjectMeta[\"outlets\"] = [];\n        for (const boxId in this.boxes) {\n            const box = this.boxes[boxId] as Box<IJSPatcherObject<any, any, any[], any[], any[], { description: string; type: TMetaType }>>;\n            const port = Math.max(1, ~~box.args[0]) - 1;\n            const description = box.props.description || \"\";\n            if (box.meta.isPatcherInlet === \"data\" && !inlets[port]) {\n                inlets[port] = {\n                    isHot: true,\n                    type: box.props.type || \"anything\",\n                    description\n                };\n            } else if (box.meta.isPatcherInlet === \"audio\") {\n                inlets[port] = {\n                    isHot: true,\n                    type: \"signal\",\n                    description\n                };\n            } else if (box.meta.isPatcherOutlet === \"data\" && !outlets[port]) {\n                outlets[port] = {\n                    type: box.props.type || \"anything\",\n                    description\n                };\n            } else if (box.meta.isPatcherOutlet === \"audio\") {\n                outlets[port] = {\n                    type: \"signal\",\n                    description\n                };\n            }\n        }\n        return { inlets, outlets, args: [], props: {} };\n    }\n    log(message: string) {\n        this.newLog(\"none\", \"Patcher\", message, this);\n    }\n    error(message: string) {\n        this.newLog(\"error\", \"Patcher\", message, this);\n    }\n    newLog(errorLevel: TErrorLevel, title: string, message: string, emitter?: any) {\n        this.env.newLog(errorLevel, title, message, emitter);\n    }\n    setProps(props: Partial<TPublicPatcherProps>) {\n        let changed = false;\n        for (const keyIn in props) {\n            const key = keyIn as keyof TPublicPatcherProps;\n            if (this.props[key] === props[key]) continue;\n            changed = true;\n            (this.props as any)[key] = props[key];\n            this.emit(key, props[key]);\n        }\n        if (changed) {\n            this.emit(\"propsChanged\", props);\n            this.emitChanged();\n        }\n    }\n    get publicProps() {\n        const { dependencies, bgColor, editingBgColor, grid, openInPresentation } = this.props;\n        return { dependencies, bgColor, editingBgColor, grid, openInPresentation } as TPublicPatcherProps;\n    }\n    toFaustDspCode() {\n        const code = toFaustDspCode(this);\n        return code;\n    }\n    toString(spacing?: number) {\n        if (this.props.mode === \"max\" || this.props.mode === \"gen\") {\n            return JSON.stringify(js2max(this), undefined, spacing);\n        }\n        const { props } = this;\n        const boxes: RawPatcher[\"boxes\"] = {};\n        const lines: RawPatcher[\"lines\"] = {};\n        for (const id in this.boxes) {\n            boxes[id] = this.boxes[id].toSerializable();\n        }\n        for (const id in this.lines) {\n            lines[id] = this.lines[id].toSerializable();\n        }\n        return JSON.stringify({ boxes, lines, props }, undefined, spacing);\n    }\n    toSerializable(): RawPatcher {\n        return JSON.parse(this.toString());\n    }\n    serialize() {\n        return new Blob([this.toString()]).arrayBuffer();\n    }\n}\n","import type { SemanticICONS } from \"semantic-ui-react\";\nimport { isRectMovable, isRectResizable, isTRect } from \"../../utils/utils\";\nimport FileEditor from \"../file/FileEditor\";\nimport Box from \"./Box\";\nimport Line from \"./Line\";\nimport type { RawPatcher, TBox, TLine, TMaxClipboard, TRect, TResizeHandlerType } from \"../types\";\nimport type Patcher from \"./Patcher\";\nimport type PersistentProjectFile from \"../file/PersistentProjectFile\";\nimport type TempPatcherFile from \"./TempPatcherFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { PatcherEventMap } from \"./Patcher\";\n\nexport interface PatcherEditorEventMap extends PatcherEditorState {\n    \"create\": RawPatcher;\n    \"delete\": RawPatcher;\n    \"changeBoxText\": { boxId: string; oldText: string; text: string };\n    \"boxChanged\": { boxId: string; oldArgs?: any[]; args?: any[]; oldProps?: Record<string, any>; props?: Record<string, any>; oldState?: Record<string, any>; state?: Record<string, any> };\n    \"changeLineSrc\": { lineId: string; oldSrc: [string, number]; src: [string, number] };\n    \"changeLineDest\": { lineId: string; oldDest: [string, number]; dest: [string, number] };\n    \"selected\": string[];\n    \"moving\": { selected: string[]; delta: { x: number; y: number }; presentation: boolean };\n    \"moved\": { selected: string[]; delta: { x: number; y: number }; presentation: boolean };\n    \"resized\": { selected: string[]; delta: { x: number; y: number }; type: TResizeHandlerType; presentation: boolean };\n    \"tempLine\": { findSrc: boolean; from: [string, number] };\n    \"inspector\": never;\n    \"dockUI\": string;\n}\n\nexport interface PatcherHistoryEventMap extends Pick<PatcherEditorEventMap, \"create\" | \"delete\" | \"changeBoxText\" | \"changeLineSrc\" | \"changeLineDest\" | \"moved\" | \"resized\" | \"boxChanged\"> {}\n\nexport interface PatcherEditorState {\n    locked: boolean;\n    presentation: boolean;\n    showGrid: boolean;\n    snapToGrid: boolean;\n    selected: string[];\n}\n\nexport default class PatcherEditor extends FileEditor<Patcher, PatcherEditorEventMap> {\n    static async fromProjectItem({ file, env, project, instanceId }: { file: PersistentProjectFile | TempPatcherFile; env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<PatcherEditor> {\n        const patcher = await file.instantiate({ env, project, instanceId }) as Patcher;\n        const editor = new this(patcher);\n        return editor.init();\n    }\n    state: PatcherEditorState = {\n        locked: true,\n        presentation: false,\n        showGrid: true,\n        snapToGrid: true,\n        selected: []\n    };\n    get isLocked() {\n        return this.state.locked;\n    }\n    get boxes() {\n        return this.instance.boxes;\n    }\n    get lines() {\n        return this.instance.lines;\n    }\n    get props() {\n        return this.instance.props;\n    }\n    get publicProps() {\n        return this.instance.publicProps;\n    }\n    get fileExtension() {\n        return this.instance.fileExtension;\n    }\n    get fileName() {\n        return this.instance.fileName;\n    }\n    get fileIcon(): SemanticICONS {\n        return \"sitemap\";\n    }\n    handleChangeBoxText = (e: PatcherEventMap[\"changeBoxText\"]) => this.emit(\"changeBoxText\", e);\n    handlePassiveDeleteLine = (e: PatcherEventMap[\"passiveDeleteLine\"]) => this.emit(\"delete\", { boxes: {}, lines: { [e.id]: e } });\n    handleBoxChanged = (e: PatcherEventMap[\"boxChanged\"]) => this.emit(\"boxChanged\", e);\n    handleChanged = () => this.instance.emitChanged();\n    constructor(instance: Patcher) {\n        super(instance);\n        const { openInPresentation } = this.props;\n        this.setState({\n            locked: true,\n            presentation: !!openInPresentation,\n            showGrid: true,\n            snapToGrid: true,\n            selected: []\n        });\n    }\n    async init() {\n        if (!this.instance.isReady) {\n            await new Promise<void>((resolve, reject) => {\n                const handleReady = () => {\n                    resolve();\n                    this.instance.off(\"ready\", handleReady);\n                };\n                this.instance.on(\"ready\", handleReady);\n            });\n        }\n        this.on(\"changed\", this.handleChanged);\n        this.instance.on(\"changeBoxText\", this.handleChangeBoxText);\n        this.instance.on(\"passiveDeleteLine\", this.handlePassiveDeleteLine);\n        this.instance.on(\"boxChanged\", this.handleBoxChanged);\n        const { openInPresentation } = this.props;\n        this.setState({\n            locked: true,\n            presentation: !!openInPresentation,\n            showGrid: true,\n            snapToGrid: true,\n            selected: []\n        });\n        this._isReady = true;\n        this.emit(\"ready\");\n        return this;\n    }\n    setState(state: Partial<PatcherEditorState>) {\n        let changed = false;\n        for (const keyIn in state) {\n            const key = keyIn as keyof PatcherEditorState;\n            if (this.state[key] === state[key]) continue;\n            changed = true;\n            if (key === \"locked\" || key === \"presentation\") this.deselectAll();\n            this.state[key] = state[key] as any;\n            this.emit(key, state[key]);\n        }\n        // if (changed) this.emit(\"stateChanged\", this.state);\n        return changed;\n    }\n    async createBox(boxIn: TBox) {\n        const box = await this.instance.createBox(boxIn);\n        this.emit(\"create\", { boxes: { [box.id]: box.toSerializable() }, lines: {} });\n        await box.postInit();\n        return box;\n    }\n    async createBoxFromFile(file: PersistentProjectFile, boxIn: Omit<TBox, \"text\">) {\n        const path = file.projectPath;\n        const type = file.type;\n        const ext = file.fileExtension;\n        if (type === \"patcher\") {\n            const extMap: Record<string, string> = this.props.mode === \"js\"\n                ? { json: \"p\", jspat: \"p\", maxpat: \"max\", gendsp: \"gen\", dsppat: \"pfaust\" }\n                : this.props.mode === \"faust\"\n                    ? { gendsp: \"gen\", dsppat: \"p\" }\n                    : this.props.mode === \"gen\"\n                        ? { gendsp: \"gen\" }\n                        : {};\n            const obj = extMap[ext];\n            if (obj) await this.createBox({ text: `${obj} ${path}`, ...boxIn });\n        } else if (type === \"audio\") {\n            await this.createBox({ text: `buffer~ ${path}`, ...boxIn });\n        } else if (type === \"image\") {\n            await this.createBox({ text: `img ${path}`, ...boxIn });\n        }\n    }\n    async deleteBox(boxId: string) {\n        this.deselect(boxId);\n        const box = await this.instance.deleteBox(boxId);\n        if (!box) return null;\n        this.emit(\"delete\", { boxes: { [box.id]: box.toSerializable() }, lines: {} });\n        return box;\n    }\n    createLine(lineIn: TLine) {\n        const line = this.instance.createLine(lineIn);\n        if (!line) return null;\n        this.emit(\"create\", { boxes: {}, lines: { [line.id]: line.toSerializable() } });\n        return line;\n    }\n    deleteLine(lineId: string) {\n        this.deselect(lineId);\n        const line = this.instance.deleteLine(lineId);\n        if (!line) return null;\n        this.emit(\"delete\", { boxes: {}, lines: { [line.id]: line.toSerializable() } });\n        return line;\n    }\n    changeLineSrc(lineId: string, srcId: string, srcOutlet: number) {\n        const e = this.instance.changeLineSrc(lineId, srcId, srcOutlet);\n        this.emit(\"changeLineSrc\", e);\n    }\n    changeLineDest(lineId: string, destId: string, destOutlet: number) {\n        const e = this.instance.changeLineDest(lineId, destId, destOutlet);\n        this.emit(\"changeLineDest\", e);\n    }\n    async changeBox(boxId: string, change: { args?: any[]; props?: Record<string, any>; state?: Record<string, any> }) {\n        await this.instance.boxes[boxId]?.changeObject(change);\n    }\n\n    select(...ids: string[]) {\n        ids.forEach((id) => {\n            if (this.state.selected.indexOf(id) >= 0) return;\n            if (this.boxes[id] || this.lines[id]) this.state.selected.push(id);\n        });\n        this.emit(\"selected\", this.state.selected.slice());\n    }\n    selectAllBoxes() {\n        let ids = Object.keys(this.boxes);\n        if (this.state.presentation) ids = ids.filter(id => this.boxes[id].presentation);\n        this.state.selected = ids;\n        this.emit(\"selected\", ids);\n    }\n    selectOnly(...ids: string[]) {\n        this.state.selected = [];\n        this.select(...ids);\n    }\n    deselect(...ids: string[]) {\n        ids.forEach((id) => {\n            const i = this.state.selected.indexOf(id);\n            if (i === -1) return;\n            this.state.selected.splice(i, 1);\n        });\n        this.emit(\"selected\", this.state.selected.slice());\n    }\n    deselectAll() {\n        this.state.selected = [];\n        this.emit(\"selected\", []);\n    }\n    selectedToString() {\n        const lineSet = new Set<Line>();\n        const patcher: RawPatcher = { lines: {}, boxes: {} };\n        this.state.selected\n            .filter(id => id.startsWith(\"box\") && this.boxes[id])\n            .map(id => this.boxes[id])\n            .forEach((box) => {\n                box.allLines.forEach(line => lineSet.add(line));\n                patcher.boxes[box.id] = box.toSerializable();\n            });\n        lineSet.forEach((line) => {\n            if (patcher.boxes[line.srcId] && patcher.boxes[line.destId]) patcher.lines[line.id] = line.toSerializable();\n        });\n        if (!Object.keys(patcher.boxes)) return undefined;\n        return JSON.stringify(patcher, undefined, 4);\n    }\n    async pasteToPatcher(clipboard: RawPatcher | TMaxClipboard) {\n        const idMap: Record<string, string> = {};\n        const pasted: RawPatcher = { boxes: {}, lines: {} };\n        if (!clipboard || !clipboard.boxes) return pasted;\n        const $init: Promise<Box>[] = [];\n        const $postInit: Promise<Box>[] = [];\n        if (Array.isArray(clipboard.boxes)) { // Max Patcher\n            this.instance.state.preventEmitChanged = true;\n            const maxBoxes = clipboard.boxes;\n            for (let i = 0; i < maxBoxes.length; i++) {\n                const maxBox = maxBoxes[i].box;\n                const numID = parseInt(maxBox.id.match(/\\d+/)[0]);\n                let id = \"box-\" + numID;\n                if (this.boxes[id]) {\n                    idMap[id] = \"box-\" + ++this.props.boxIndexCount;\n                    id = idMap[id];\n                } else {\n                    idMap[id] = id;\n                    if (numID > this.props.boxIndexCount) this.props.boxIndexCount = numID;\n                }\n                const box: TBox = {\n                    id,\n                    inlets: maxBox.numinlets,\n                    outlets: maxBox.numoutlets,\n                    rect: maxBox.patching_rect,\n                    text: (maxBox.maxclass === \"newobj\" ? \"\" : maxBox.maxclass + \" \") + (maxBox.text ? maxBox.text : \"\")\n                };\n                $init.push(this.instance.createBox(box));\n            }\n            const createdBoxes = (await Promise.all($init)).filter(box => !!box);\n            createdBoxes.forEach((box) => {\n                pasted.boxes[box.id] = box.toSerializable();\n                $postInit.push(box.postInit());\n            });\n            if (Array.isArray(clipboard.lines)) {\n                const maxLines = clipboard.lines;\n                for (let i = 0; i < maxLines.length; i++) {\n                    const lineArgs = maxLines[i].patchline;\n                    const id = \"line-\" + ++this.props.lineIndexCount;\n                    const line: TLine = {\n                        id,\n                        src: [idMap[lineArgs.source[0].replace(/obj/, \"box\")], lineArgs.source[1]],\n                        dest: [idMap[lineArgs.destination[0].replace(/obj/, \"box\")], lineArgs.destination[1]]\n                    };\n                    const createdLine = this.instance.createLine(line);\n                    if (createdLine) pasted.lines[createdLine.id] = createdLine.toSerializable();\n                }\n            }\n            this.instance.state.preventEmitChanged = false;\n            if (Object.keys(pasted.boxes).length) {\n                this.deselectAll();\n                this.select(...Object.keys(pasted.boxes));\n                this.emit(\"create\", pasted);\n                this.instance.emitGraphChanged();\n                await Promise.all($postInit);\n            }\n            return pasted;\n        }\n        if (Array.isArray(clipboard.boxes) || Array.isArray(clipboard.lines)) return pasted;\n        this.instance.state.preventEmitChanged = true;\n        for (const boxId in clipboard.boxes) {\n            const box = clipboard.boxes[boxId];\n            if (this.boxes[box.id]) {\n                idMap[box.id] = \"box-\" + ++this.props.boxIndexCount;\n                box.id = idMap[box.id];\n            } else {\n                idMap[box.id] = box.id;\n                const numID = parseInt(box.id.match(/\\d+/)[0]);\n                if (numID > this.props.boxIndexCount) this.props.boxIndexCount = numID;\n            }\n            box.rect = [box.rect[0] + 30, box.rect[1] + 30, box.rect[2], box.rect[3]];\n            $init.push(this.instance.createBox(box));\n        }\n        const createdBoxes = (await Promise.all($init)).filter(box => !!box);\n        createdBoxes.forEach((box) => {\n            pasted.boxes[box.id] = box.toSerializable();\n            $postInit.push(box.postInit());\n        });\n        await Promise.all($postInit);\n        for (const lineId in clipboard.lines) {\n            const line = clipboard.lines[lineId];\n            line.id = \"line-\" + ++this.props.lineIndexCount;\n            line.src[0] = idMap[line.src[0]];\n            line.dest[0] = idMap[line.dest[0]];\n            const createdLine = this.instance.createLine(line);\n            if (createdLine) pasted.lines[createdLine.id] = createdLine.toSerializable();\n        }\n        this.instance.state.preventEmitChanged = false;\n        if (Object.keys(pasted.boxes).length) {\n            this.deselectAll();\n            this.select(...Object.keys(pasted.boxes));\n            this.emit(\"create\", pasted);\n            this.instance.emitGraphChanged();\n        }\n        return pasted;\n    }\n    async create(objects: RawPatcher) {\n        const $init: Promise<Box>[] = [];\n        const $postInit: Promise<Box>[] = [];\n        const created: RawPatcher = { boxes: {}, lines: {} };\n        for (const boxId in objects.boxes) {\n            const boxIn = objects.boxes[boxId];\n            const box = new Box(this.instance, boxIn);\n            this.boxes[box.id] = box;\n            created.boxes[box.id] = box.toSerializable();\n            $init.push(box.init());\n            $postInit.push(box.postInit());\n        }\n        await Promise.all($init);\n        await Promise.all($postInit);\n        for (const lineId in objects.lines) {\n            const lineIn = objects.lines[lineId];\n            if (!this.instance.canCreateLine(lineIn)) continue;\n            const line = new Line(this.instance, lineIn);\n            this.lines[line.id] = line;\n            created.lines[line.id] = line.toSerializable();\n            line.enable();\n        }\n        this.deselectAll();\n        this.select(...Object.keys(objects.boxes));\n        this.emit(\"create\", created);\n        this.instance.emitGraphChanged();\n    }\n    async deleteSelected() {\n        const boxSet = new Set<Box>();\n        const lineSet = new Set<Line>();\n        this.state.selected.filter(id => id.startsWith(\"line\")).forEach(id => lineSet.add(this.lines[id]));\n        this.state.selected.filter(id => id.startsWith(\"box\")).forEach((id) => {\n            boxSet.add(this.boxes[id]);\n            this.boxes[id].allLines.forEach(line => lineSet.add(line));\n        });\n        if (!boxSet.size && !lineSet.size) return undefined;\n        this.state.selected = [];\n        const deleted: RawPatcher = { boxes: {}, lines: {} };\n        const promises: Promise<Box>[] = [];\n        lineSet.forEach((line) => {\n            deleted.lines[line.id] = line.toSerializable();\n            line.destroy();\n        });\n        boxSet.forEach((box) => {\n            deleted.boxes[box.id] = box.toSerializable();\n            promises.push(box.destroy());\n        });\n        await Promise.all(promises);\n        this.emit(\"selected\", this.state.selected.slice());\n        this.emit(\"delete\", deleted);\n        this.instance.emitGraphChanged();\n        return deleted;\n    }\n    async delete(objects: RawPatcher) {\n        const deleted: RawPatcher = { boxes: {}, lines: {} };\n        for (const id in objects.lines) {\n            deleted.lines[id] = this.lines[id].destroy().toSerializable();\n        }\n        const promises: Promise<Box>[] = [];\n        for (const id in objects.boxes) {\n            deleted.boxes[id] = this.boxes[id].toSerializable();\n            promises.push(this.boxes[id].destroy());\n        }\n        await Promise.all(promises);\n        this.emit(\"selected\", this.state.selected.slice());\n        this.emit(\"delete\", deleted);\n        this.instance.emitGraphChanged();\n    }\n    async cut() {\n        if (this.state.locked) return;\n        await this.copy();\n        this.deleteSelected();\n    }\n    async copy() {\n        if (this.state.locked) return;\n        const s = this.selectedToString();\n        if (!s) return;\n        await navigator.clipboard.writeText(s);\n    }\n    async paste() {\n        if (this.state.locked) return;\n        const s = await navigator.clipboard.readText();\n        if (!s) return;\n        let parsed: RawPatcher | TMaxClipboard;\n        try {\n            parsed = JSON.parse(s);\n        } catch (e) {} // eslint-disable-line no-empty\n        await this.pasteToPatcher(parsed);\n    }\n    async duplicate() {\n        if (this.state.locked) return;\n        const s = this.selectedToString();\n        if (!s) return;\n        let parsed: RawPatcher | TMaxClipboard;\n        try {\n            parsed = JSON.parse(s);\n        } catch (e) {} // eslint-disable-line no-empty\n        await this.pasteToPatcher(parsed);\n    }\n    async selectAll() {\n        this.selectAllBoxes();\n    }\n    selectRegion(selectionRect: number[], selectedBefore: string[]) {\n        let [left, top, right, bottom] = selectionRect;\n        if (left > right) [left, right] = [right, left];\n        if (top > bottom) [top, bottom] = [bottom, top];\n        const { presentation } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        const select = selectedBefore.slice();\n        for (const boxId in this.boxes) {\n            const box = this.boxes[boxId];\n            if (presentation && !box.presentation) continue;\n            const rect = box[rectKey];\n            if (!isTRect(rect)) continue;\n            const [boxLeft, boxTop, boxWidth, boxHeight] = rect;\n            const [boxRight, boxBottom] = [boxLeft + boxWidth, boxTop + boxHeight];\n            if (boxLeft < right && boxTop < bottom && boxRight > left && boxBottom > top) {\n                const i = select.indexOf(boxId);\n                if (i === -1) select.push(boxId);\n                else select.splice(i, 1);\n            }\n        }\n        const deselect = this.state.selected.filter(id => select.indexOf(id) === -1);\n        this.select(...select);\n        this.deselect(...deselect);\n    }\n    moveSelectedBox(dragOffset: { x: number; y: number }, refBoxID?: string) {\n        const { presentation, snapToGrid, selected } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        const delta = { ...dragOffset };\n        if (refBoxID) {\n            const rect = this.boxes[refBoxID][rectKey];\n            if (!isRectMovable(rect)) return { x: 0, y: 0 };\n            delta.x = snapToGrid ? Math.round((rect[0] + dragOffset.x) / this.props.grid[0]) * this.props.grid[0] - rect[0] : dragOffset.x;\n            delta.y = snapToGrid ? Math.round((rect[1] + dragOffset.y) / this.props.grid[1]) * this.props.grid[1] - rect[1] : dragOffset.y;\n        }\n        if (!delta.x && !delta.y) return dragOffset;\n        this.move(selected, delta, presentation);\n        return { x: dragOffset.x - delta.x, y: dragOffset.y - delta.y };\n    }\n    moveEnd(delta: { x: number; y: number }) {\n        const { presentation, selected } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        let ids = selected.filter(id => id.startsWith(\"box\") && this.boxes[id]);\n        if (presentation) ids = ids.filter(id => isRectMovable(this.boxes[id][rectKey]));\n        const boxes = ids.map(id => this.boxes[id]);\n        boxes.forEach(box => box.emit(presentation ? \"presentationRectChanged\" : \"rectChanged\", box));\n        this.emit(\"moved\", { delta, selected: ids, presentation: this.state.presentation });\n    }\n    move(selected: string[], delta: { x: number; y: number }, presentation: boolean) {\n        this.select(...selected);\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        let ids = selected.filter(id => id.startsWith(\"box\") && this.boxes[id]);\n        if (presentation) ids = ids.filter(id => isRectMovable(this.boxes[id][rectKey]));\n        const boxes = ids.map(id => this.boxes[id]);\n        if (boxes.length === 0) return;\n        let [left, top] = boxes[0][rectKey] as TRect;\n        for (let i = 1; i < boxes.length; i++) {\n            const box = boxes[i];\n            const [$left, $top] = box[rectKey] as TRect;\n            if ($left < left) left = $left;\n            if ($top < top) top = $top;\n        }\n        // Not allowing resize out of bound\n        delta.x = Math.max(delta.x, -left);\n        delta.y = Math.max(delta.y, -top);\n        if (delta.x) boxes.forEach(box => (box[rectKey] as TRect)[0] += delta.x);\n        if (delta.y) boxes.forEach(box => (box[rectKey] as TRect)[1] += delta.y);\n        // Emit events\n        if (!delta.x && !delta.y) return;\n        if (presentation !== this.state.presentation) return;\n        // boxes.forEach(box => box.emit(presentation ? \"presentationRectChanged\" : \"rectChanged\", box));\n        this.emit(\"moving\", { selected: ids, delta, presentation });\n        if (presentation) return;\n        const lineSet = new Set<Line>();\n        boxes.forEach((box) => {\n            box.inletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n            box.outletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n        });\n        lineSet.forEach(line => line.emit(\"posChanged\", line));\n    }\n    resizeSelectedBox(boxId: string, dragOffset: { x: number; y: number }, type: TResizeHandlerType) {\n        const { presentation, snapToGrid, selected } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        const rect = this.boxes[boxId][rectKey];\n        if (!isRectResizable(rect)) return { x: 0, y: 0 };\n        const delta = { x: 0, y: 0 };\n        // Round delta to grid\n        if (type === \"e\" || type === \"se\" || type === \"ne\") {\n            delta.x = snapToGrid ? Math.round((rect[0] + rect[2] + dragOffset.x) / this.props.grid[0]) * this.props.grid[0] - rect[0] - rect[2] : dragOffset.x;\n        }\n        if (type === \"s\" || type === \"se\" || type === \"sw\") {\n            delta.y = snapToGrid ? Math.round((rect[1] + rect[3] + dragOffset.y) / this.props.grid[1]) * this.props.grid[1] - rect[1] - rect[3] : dragOffset.y;\n        }\n        if (type === \"w\" || type === \"nw\" || type === \"sw\") {\n            delta.x = snapToGrid ? Math.round((rect[0] + dragOffset.x) / this.props.grid[0]) * this.props.grid[0] - rect[0] : dragOffset.x;\n        }\n        if (type === \"n\" || type === \"nw\" || type === \"ne\") {\n            delta.y = snapToGrid ? Math.round((rect[1] + dragOffset.y) / this.props.grid[1]) * this.props.grid[1] - rect[1] : dragOffset.y;\n        }\n        if (!delta.x && !delta.y) return dragOffset;\n        this.resize(selected, delta, type, presentation);\n        return { x: dragOffset.x - delta.x, y: dragOffset.y - delta.y };\n    }\n    resizeEnd(delta: { x: number; y: number }, type: TResizeHandlerType) {\n        const { selected, presentation } = this.state;\n        this.emit(\"resized\", { delta, type, selected, presentation });\n    }\n    resize(selected: string[], delta: { x: number; y: number }, type: TResizeHandlerType, presentation: boolean) {\n        this.select(...selected);\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        let ids = selected.filter(id => id.startsWith(\"box\") && this.boxes[id]);\n        if (presentation) ids = ids.filter(id => isRectResizable(this.boxes[id][rectKey]));\n        const boxes = ids.map(id => this.boxes[id]);\n        if (boxes.length === 0) return;\n        let [left, top, width, height] = boxes[0][rectKey] as TRect;\n        for (let i = 1; i < boxes.length; i++) {\n            const box = boxes[i];\n            const [$left, $top, $width, $height] = box[rectKey] as TRect;\n            if ($left < left) left = $left;\n            if ($top < top) top = $top;\n            if ($width < width) width = $width;\n            if ($height < height) height = $height;\n        }\n        // Not allowing resize out of bound\n        if (type === \"sw\" || type === \"w\" || type === \"nw\") delta.x = Math.max(delta.x, -left);\n        if (type === \"nw\" || type === \"n\" || type === \"ne\") delta.y = Math.max(delta.y, -top);\n        // Not allowing resize below 15px width or height\n        if (type === \"ne\" || type === \"e\" || type === \"se\") delta.x = Math.max(delta.x, 15 - width);\n        if (type === \"sw\" || type === \"w\" || type === \"nw\") delta.x = Math.min(delta.x, width - 15);\n        if (type === \"se\" || type === \"s\" || type === \"sw\") delta.y = Math.max(delta.y, 15 - height);\n        if (type === \"nw\" || type === \"n\" || type === \"ne\") delta.y = Math.min(delta.y, height - 15);\n        boxes.forEach((box) => {\n            const sizingX = box.UI ? box.UI?.sizing === \"horizontal\" || box.UI?.sizing === \"both\" : true;\n            const sizingY = box.UI ? box.UI?.sizing === \"vertical\" || box.UI?.sizing === \"both\" : true;\n            if (delta.x && sizingX) {\n                if (type === \"ne\" || type === \"e\" || type === \"se\") (box[rectKey] as TRect)[2] += delta.x;\n                if (type === \"sw\" || type === \"w\" || type === \"nw\") {\n                    (box[rectKey] as TRect)[2] -= delta.x;\n                    (box[rectKey] as TRect)[0] += delta.x;\n                }\n            }\n            if (delta.y && sizingY) {\n                if (type === \"se\" || type === \"s\" || type === \"sw\") (box[rectKey] as TRect)[3] += delta.y;\n                if (type === \"nw\" || type === \"n\" || type === \"ne\") {\n                    (box[rectKey] as TRect)[3] -= delta.y;\n                    (box[rectKey] as TRect)[1] += delta.y;\n                }\n            }\n        });\n        // Emit events\n        if (!delta.x && !delta.y) return;\n        if (presentation !== this.state.presentation) return;\n        boxes.forEach(box => box.emit(presentation ? \"presentationRectChanged\" : \"rectChanged\", box));\n        if (presentation) return;\n        const lineSet = new Set<Line>();\n        boxes.forEach((box) => {\n            box.inletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n            box.outletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n        });\n        lineSet.forEach(line => line.emit(\"posChanged\", line));\n    }\n    findNearestPort(findSrc: boolean, left: number, top: number, from: [string, number], to?: [string, number]) {\n        let nearest: [string, number] = [null, null];\n        let minDistance = 100;\n        if (to) {\n            const currentPos = this.boxes[to[0]][findSrc ? \"getOutletPos\" : \"getInletPos\"](to[1]);\n            const currentDistance = ((currentPos.left - left) ** 2 + (currentPos.top - top) ** 2) ** 0.5;\n            if (currentDistance < 100) {\n                nearest = to;\n                minDistance = currentDistance;\n            }\n        }\n        for (const id in this.boxes) {\n            const box = this.boxes[id];\n            box[findSrc ? \"outletsPositions\" : \"inletsPositions\"].forEach((pos, i) => {\n                const distance = ((pos.left - left) ** 2 + (pos.top - top) ** 2) ** 0.5;\n                if (distance < minDistance) {\n                    const canCreate = this.instance.canCreateLine({ src: findSrc ? [id, i] : from, dest: findSrc ? from : [id, i] });\n                    if (!canCreate) return;\n                    nearest = [id, i];\n                    minDistance = distance;\n                }\n            });\n        }\n        return nearest;\n    }\n    highlightNearestPort(findSrc: boolean, dragOffset: { x: number; y: number }, from: [string, number], to?: [string, number]) { // to = the port need to be reconnect\n        const origPos = to ? this.boxes[to[0]][findSrc ? \"getOutletPos\" : \"getInletPos\"](to[1]) : this.boxes[from[0]][findSrc ? \"getInletPos\" : \"getOutletPos\"](from[1]);\n        const left = origPos.left + dragOffset.x;\n        const top = origPos.top + dragOffset.y;\n        const nearest = this.findNearestPort(findSrc, left, top, from, to);\n        for (const id in this.boxes) {\n            const box = this.boxes[id];\n            for (let i = 0; i < box[findSrc ? \"outlets\" : \"inlets\"]; i++) {\n                box.highlightPort(findSrc, i, nearest[0] === id && nearest[1] === i);\n            }\n        }\n        return nearest;\n    }\n    tempLine(findSrc: boolean, from: [string, number]) {\n        this.emit(\"tempLine\", { findSrc, from });\n        return this;\n    }\n    inspector(box?: Box) {\n        if (box) this.emit(\"inspector\");\n        else if (this.state.selected.length) {\n            const found = this.state.selected.find(id => id.startsWith(\"box\"));\n            if (found && this.boxes[found]) this.emit(\"inspector\");\n        }\n    }\n    dockUI(box?: Box) {\n        if (box && box.UI.dockable) this.emit(\"dockUI\", box.id);\n        else if (this.state.selected.length) {\n            const found = this.state.selected.find(id => id.startsWith(\"box\"));\n            if (found && this.boxes[found] && this.boxes[found].UI.dockable) this.emit(\"dockUI\", found);\n        }\n    }\n    onUiResized() {}\n    async toTempData() {\n        return this.instance.toSerializable();\n    }\n}\n","import History from \"../file/History\";\nimport PatcherEditor, { PatcherHistoryEventMap } from \"./PatcherEditor\";\n\nexport default class PatcherHistory extends History<PatcherHistoryEventMap, PatcherEditor> {\n    get eventListening(): (keyof PatcherHistoryEventMap)[] {\n        return [\n            \"create\", \"delete\", \"changeBoxText\", \"boxChanged\",\n            \"changeLineSrc\", \"changeLineDest\", \"moved\", \"resized\"\n        ];\n    }\n    async undoOf(editor: PatcherEditor, eventName: keyof PatcherHistoryEventMap, eventData?: any) {\n        if (eventName === \"delete\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.create(e);\n        } else if (eventName === \"changeBoxText\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, oldText } = e;\n            await editor.instance.changeBoxText(boxId, oldText);\n        } else if (eventName === \"boxChanged\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, oldArgs, oldProps, oldState } = e;\n            await editor.changeBox(boxId, { args: oldArgs, props: oldProps, state: oldState });\n        } else if (eventName === \"moved\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, presentation } = e;\n            const d = { x: -1 * delta.x, y: -1 * delta.y };\n            editor.move(selected, d, presentation);\n            editor.moveEnd(d);\n        } else if (eventName === \"changeLineSrc\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, oldSrc } = e;\n            editor.changeLineSrc(lineId, oldSrc[0], oldSrc[1]);\n        } else if (eventName === \"changeLineDest\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, oldDest } = e;\n            editor.changeLineDest(lineId, oldDest[0], oldDest[1]);\n        } else if (eventName === \"create\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.delete(e);\n        } else if (eventName === \"resized\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, type: t, presentation } = e;\n            const d = { x: -1 * delta.x, y: -1 * delta.y };\n            editor.resize(selected, d, t, presentation);\n            editor.resizeEnd(d, t);\n        }\n    }\n    async redoOf(editor: PatcherEditor, eventName: keyof PatcherHistoryEventMap, eventData?: any) {\n        if (eventName === \"create\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.create(e);\n        } else if (eventName === \"changeBoxText\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, text } = e;\n            await editor.instance.changeBoxText(boxId, text);\n        } else if (eventName === \"boxChanged\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, args, props, state } = e;\n            await editor.changeBox(boxId, { args, props, state });\n        } else if (eventName === \"moved\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, presentation } = e;\n            editor.move(selected, delta, presentation);\n            editor.moveEnd(delta);\n        } else if (eventName === \"changeLineSrc\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, src } = e;\n            editor.changeLineSrc(lineId, src[0], src[1]);\n        } else if (eventName === \"changeLineDest\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, dest } = e;\n            editor.changeLineDest(lineId, dest[0], dest[1]);\n        } else if (eventName === \"delete\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.delete(e);\n        } else if (eventName === \"resized\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, type: t, presentation } = e;\n            editor.resize(selected, delta, t, presentation);\n            editor.resizeEnd(delta, t);\n        }\n    }\n}\n","import TemporaryProjectFile from \"../file/TemporaryProjectFile\";\nimport type { RawPatcher } from \"../types\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\n\nexport default class TempPatcherFile extends TemporaryProjectFile<RawPatcher> {\n    get type() {\n        return \"patcher\" as const;\n    }\n    async instantiate({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const Patcher = (await import(\"./Patcher\")).default;\n        const patcher = new Patcher({ file: this, env, project, instanceId });\n        await patcher.load(this.data);\n        return patcher;\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const PatcherEditor = (await import(\"./PatcherEditor\")).default;\n        return PatcherEditor.fromProjectItem({ file: this, env, project, instanceId });\n    }\n}\n","import TemporaryProjectFile from \"../file/TemporaryProjectFile\";\nimport type PatcherText from \"./PatcherText\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\n\nexport default class TempTextFile extends TemporaryProjectFile<PatcherText> {\n    get type() {\n        return \"text\" as const;\n    }\n    async instantiate() {\n        return this.data;\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const TextEditor = (await import(\"./TextEditor\")).default;\n        return TextEditor.fromProjectItem({ file: this, env, project, instanceId });\n    }\n}\n","import { AudioWorkletGlobalScope, MessagePortRequest, MessagePortResponse, TypedMessageEvent } from \"./TypedAudioWorklet\";\nimport { AudioWorkletProxyProcessor } from \"./AudioWorkletProxyProcessor.types\";\n\ndeclare const globalThis: AudioWorkletGlobalScope;\nconst { AudioWorkletProcessor } = globalThis;\n\nconst Processor = class extends AudioWorkletProcessor {\n    static get fnNames(): string[] {\n        return [];\n    }\n    _disposed = false;\n    constructor(options: AudioWorkletNodeOptions) {\n        super(options);\n        const resolves: Record<number, ((...args: any[]) => any)> = {};\n        const rejects: Record<number, ((...args: any[]) => any)> = {};\n        let messagePortRequestId = -1;\n        const handleDisposed = () => {\n            this.port.removeEventListener(\"message\", handleMessage);\n            this.port.close();\n        };\n        const handleMessage = async (e: TypedMessageEvent<MessagePortResponse & MessagePortRequest>) => {\n            const { id, call, args, value, error } = e.data;\n            if (call) {\n                const r: MessagePortResponse = { id };\n                try {\n                    r.value = await (this as any)[call](...args);\n                } catch (e) {\n                    r.error = e;\n                }\n                this.port.postMessage(r as any);\n                if (this._disposed) handleDisposed();\n            } else {\n                if (error) {\n                    if (rejects[id]) rejects[id](error);\n                    delete rejects[id];\n                    return;\n                }\n                if (resolves[id]) {\n                    resolves[id](value);\n                    delete resolves[id];\n                }\n            }\n        };\n        const call = (call: string, ...args: any[]) => new Promise<any>((resolve, reject) => {\n            const id = messagePortRequestId--;\n            resolves[id] = resolve;\n            rejects[id] = reject;\n            this.port.postMessage({ id, call, args });\n        });\n        const Ctor = (this.constructor as typeof AudioWorkletProxyProcessor);\n        Ctor.fnNames.forEach(name => (this as any)[name] = (...args: any[]) => call(name, ...args));\n        this.port.start();\n        this.port.addEventListener(\"message\", handleMessage);\n    }\n} as typeof AudioWorkletProxyProcessor;\n\nexport default Processor;\n","export const $AnyEventType = Symbol(\"__TypedEventListener_AnyEventType\");\nexport interface ITypedEventEmitter<M> extends Omit<TypedEventEmitter<M>, \"_listeners\" | \"getListeners\"> {\n}\nexport interface IEmitOptions {\n    /** if true, the emission will not trigger `onAny` listeners */\n    excludeAny?: boolean;\n    /** Exclude listeners with emit */\n    exclude?: ((...args: any[]) => any)[];\n}\nexport class TypedEventEmitter<M> {\n    private _listeners: { [eventName: string]: ((e?: any, emitter?: any) => any | Promise<any>)[]; [$AnyEventType]: ((eventName: string, eventData?: any, emitter?: any) => any | Promise<any>)[] } = { [$AnyEventType]: [] };\n    get listeners() {\n        return this._listeners;\n    }\n    private getListeners<K extends keyof M & string>(eventName: K) {\n        if (!(eventName in this._listeners)) this._listeners[eventName] = [];\n        return this._listeners[eventName];\n    }\n    on<K extends keyof M & string>(eventName: K, listener: (e: M[K], emitter?: this) => any) {\n        if (this.getListeners(eventName).indexOf(listener) === -1) this.getListeners(eventName).push(listener);\n    }\n    once<K extends keyof M & string>(eventName: K, listener: (e: M[K], emitter?: this) => any) {\n        const listenerWithOff = (arg: M[K], emitter?: this) => {\n            const returnValue = listener(arg, emitter);\n            this.off(eventName, listenerWithOff);\n            return returnValue;\n        };\n        this.on(eventName, listenerWithOff);\n    }\n    onAny<K extends keyof M & string>(listener: <KK extends K>(eventName: KK, eventData?: M[KK], emitter?: this) => any) {\n        this._listeners[$AnyEventType].push(listener);\n    }\n    off<K extends keyof M & string>(eventName: K, listener: (e: M[K], emitter?: this) => any) {\n        const i = this.getListeners(eventName).indexOf(listener);\n        if (i !== -1) this.getListeners(eventName).splice(i, 1);\n    }\n    offAny<K extends keyof M & string>(listener: <KK extends K>(eventName: KK, eventData?: M[KK], emitter?: this) => any) {\n        const i = this._listeners[$AnyEventType].indexOf(listener);\n        if (i !== -1) this._listeners[$AnyEventType].splice(i, 1);\n    }\n    async emit<K extends keyof M & string>(eventName: K, eventData?: M[K], options?: IEmitOptions) {\n        let listeners = this.getListeners(eventName);\n        let anyListeners = options?.excludeAny ? [] : this._listeners[$AnyEventType];\n        if (!listeners.length && !anyListeners.length) return [];\n        if (options?.exclude?.length) {\n            const { exclude } = options;\n            listeners = listeners.filter(l => exclude.indexOf(l) === -1);\n            anyListeners = anyListeners.filter(l => exclude.indexOf(l) === -1);\n        }\n        return Promise.all([...listeners.map(f => f(eventData, this)), ...anyListeners.map(f => f(eventName, eventData, this))]);\n    }\n    async emitSerial<K extends keyof M & string>(eventName: K, eventData?: M[K], options?: IEmitOptions) {\n        let listeners = this.getListeners(eventName);\n        let anyListeners = options?.excludeAny ? [] : this._listeners[$AnyEventType];\n        if (!listeners.length && !anyListeners.length) return [];\n        if (options?.exclude?.length) {\n            const { exclude } = options;\n            listeners = listeners.filter(l => exclude.indexOf(l) === -1);\n            anyListeners = anyListeners.filter(l => exclude.indexOf(l) === -1);\n        }\n        const returnValues = [];\n        for (let i = 0; i < listeners.length; i++) {\n            const listener = listeners[i];\n            returnValues[i] = await listener(eventData, this);\n        }\n        for (let i = 0; i < anyListeners.length; i++) {\n            const listener = anyListeners[i];\n            returnValues[listeners.length + i] = await listener(eventName, eventData, this);\n        }\n        return returnValues;\n    }\n    emitSync<K extends keyof M & string>(eventName: K, eventData?: M[K], options?: IEmitOptions) {\n        let listeners = this.getListeners(eventName);\n        let anyListeners = options?.excludeAny ? [] : this._listeners[$AnyEventType];\n        if (!listeners.length && !anyListeners.length) return [];\n        if (options?.exclude?.length) {\n            const { exclude } = options;\n            listeners = listeners.filter(l => exclude.indexOf(l) === -1);\n            anyListeners = anyListeners.filter(l => exclude.indexOf(l) === -1);\n        }\n        return [...listeners.map(f => f(eventData, this)), ...anyListeners.map(f => f(eventName, eventData, this))];\n    }\n    offAll(eventName?: keyof M & string) {\n        if (eventName) {\n            this._listeners[eventName] = [];\n        } else {\n            this._listeners = { [$AnyEventType]: [] };\n        }\n    }\n    listenerCount(eventName: keyof M & string) {\n        const anyListenerCount = this._listeners[$AnyEventType].length;\n        if (!(eventName in this._listeners)) return anyListenerCount;\n        return this._listeners[eventName].length + anyListenerCount;\n    }\n}\n\nexport default TypedEventEmitter;\n","export const ImporterDirSelfObject = Symbol(\"__JSPatcher_ImporterDirSelfObject\");\nexport const ImportedStaticMethodObject = Symbol(\"__JSPatcher_ImportedStaticMethodObject\");\nexport const SharedDataNoValue = Symbol(\"__JSPatcher_ShareDataNoValue\");\nexport const TempManagerFolder = Symbol(\"__JSPatcher_TempManagerFolder\");\n","/* eslint-disable arrow-body-style */\nimport type { TPatcherProps } from \"../core/patcher/Patcher\";\nimport type { TMIDIEvent, TBPF, TRect, TPresentationRect, ProjectItemType, RawPatcher, TMaxPatcher, TAudioUnit } from \"../core/types\";\n\nexport const isStringArray = (x: any): x is string[] => Array.isArray(x) && x.every(e => typeof e === \"string\");\nexport const isNumberArray = (x: any): x is number[] => Array.isArray(x) && x.every(e => typeof e === \"number\");\nexport const isTRect = (x: any): x is TRect => {\n    return isNumberArray(x)\n        && x.length === 4\n        && x[0] >= 0\n        && x[1] >= 0\n        && x[2] >= 15\n        && x[3] >= 15;\n};\nexport const isTPresentationRect = (x: any): x is TPresentationRect => {\n    return Array.isArray(x)\n        && x.length === 4\n        && x.every(v => typeof v === \"number\" || typeof v === \"string\");\n};\nexport const isRectMovable = (x: any): x is [number, number, number | string, number | string] => {\n    return isTPresentationRect(x) && typeof x[0] === \"number\" && typeof x[1] === \"number\";\n};\nexport const isRectResizable = (x: any): x is TRect => isTRect(x);\nexport const isMIDIEvent = (x: any): x is TMIDIEvent => (isNumberArray(x) || x instanceof Uint8Array) && x.length === 3;\nexport const stringifyError = (data: any) => {\n    if (typeof data === \"string\") return data;\n    if (data instanceof Error) return data.message;\n    if (typeof data === \"object\") return JSON.stringify(data);\n    return `${data}`;\n};\nexport const parseToPrimitive = (value: any) => {\n    try {\n        return JSON.parse(value);\n    } catch (e) {\n        return value.toString();\n    }\n};\nexport const rgbaMax2Css = (maxColor: number[]) => {\n    const cssColor = [255, 255, 255, 1] as TRect;\n    if (Array.isArray(maxColor)) {\n        for (let i = 0; i < 3; i++) {\n            if (typeof maxColor[i] === \"number\") cssColor[i] = Math.floor(maxColor[i] * 255);\n        }\n        if (typeof maxColor[3] === \"number\") cssColor[3] = maxColor[3];\n    }\n    return `rgba(${cssColor.join(\",\")})`;\n};\nexport const css2RgbaMax = (color: string) => {\n    const maxColor = [0.2, 0.2, 0.2, 1] as TRect;\n    const matched = color.match(/rgba\\((.+)\\)/);\n    if (!matched) return maxColor;\n    const cssColor = matched[1].split(\",\").map(s => +s);\n    for (let i = 0; i < 3; i++) {\n        if (typeof cssColor[i] === \"number\") maxColor[i] = cssColor[i] / 255;\n        if (typeof cssColor[3] === \"number\") maxColor[3] = cssColor[3];\n    }\n    return maxColor;\n};\n/**\n * A BPF can be described as a succesion of three number tuples.\n * i.e. `1 1 0.5 2 1 1` curve mode means go to 0 immediately then go to 1 in 1s with a curve of e^0.5, then go to 2 in 1s linear.\n * The function transform the string to number[][], i.e. `[[1, 1, 0.5], [2, 1, 1]]`\n *\n * @param {TBPF} sIn\n * @returns {number[][]}\n */\nexport const decodeBPF = (sIn: TBPF, tupleLength: number): number[][] => {\n    if (typeof sIn === \"number\") return [[sIn]];\n    if (isNumberArray(sIn)) return [sIn];\n    if (Array.isArray(sIn) && sIn.every(a => isNumberArray(a))) return sIn;\n    if (typeof sIn !== \"string\") throw new Error(\"Failed to decode curve.\");\n    const numbers = sIn.split(\" \").filter(s => !!s).map(s => +s);\n    if (numbers.find(v => !isFinite(v))) throw new Error(\"BPF contains invalid number.\");\n    const tuples: number[][] = [];\n    for (let i = 0; i < numbers.length; i++) {\n        const $tuple = ~~(i / tupleLength);\n        const $ = i % tupleLength;\n        if (!tuples[$tuple]) tuples[$tuple] = [];\n        tuples[$tuple][$] = numbers[i];\n    }\n    return tuples;\n};\nexport const decodeCurve = (sIn: TBPF) => decodeBPF(sIn, 3);\nexport const decodeLine = (sIn: TBPF) => decodeBPF(sIn, 2);\n\n/**\n * Gives OS name as follows:\n * \"Windows\"    for all versions of Windows,\n * \"MacOS\"      for all versions of Macintosh OS,\n * \"Linux\"      for all versions of Linux,\n * \"UNIX\"       for all other UNIX flavors,\n * \"Unknown\" indicates failure to detect the OS\n *\n * @returns {\"Windows\" | \"MacOS\" | \"UNIX\" | \"Linux\" | \"Unknown\"} OS name\n */\nexport const detectOS = (): \"Windows\" | \"MacOS\" | \"UNIX\" | \"Linux\" | \"Unknown\" => {\n    const { appVersion } = navigator;\n    if (appVersion.indexOf(\"Win\") !== -1) return \"Windows\";\n    if (appVersion.indexOf(\"Mac\") !== -1) return \"MacOS\";\n    if (appVersion.indexOf(\"X11\") !== -1) return \"UNIX\";\n    if (appVersion.indexOf(\"Linux\") !== -1) return \"Linux\";\n    return \"Unknown\";\n};\nexport const detectBrowserCore = () => {\n    if ((window as any).chrome) return \"Chromium\";\n    if ((window as any).InstallTrigger) return \"Gecko\";\n    if (navigator.vendor.indexOf(\"Apple\") !== -1) return \"WebKit\";\n    return \"Unknown\";\n};\nexport const roundedRect = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number | number[]) => {\n    const radii = [0, 0, 0, 0];\n    if (typeof radius === \"number\") radii.fill(radius);\n    else radius.forEach((v, i) => radii[i] = v);\n    ctx.beginPath();\n    ctx.moveTo(x + radii[0], y);\n    ctx.lineTo(x + width - radii[1], y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radii[1]);\n    ctx.lineTo(x + width, y + height - radii[2]);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radii[2], y + height);\n    ctx.lineTo(x + radii[3], y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radii[3]);\n    ctx.lineTo(x, y + radii[0]);\n    ctx.quadraticCurveTo(x, y, x + radii[0], y);\n    ctx.closePath();\n    ctx.stroke();\n};\nexport const fillRoundedRect = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number | number[]) => {\n    const radii = [0, 0, 0, 0];\n    if (typeof radius === \"number\") radii.fill(radius);\n    else radius.forEach((v, i) => radii[i] = v);\n    ctx.beginPath();\n    ctx.moveTo(x + radii[0], y);\n    ctx.lineTo(x + width - radii[1], y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radii[1]);\n    ctx.lineTo(x + width, y + height - radii[2]);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radii[2], y + height);\n    ctx.lineTo(x + radii[3], y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radii[3]);\n    ctx.lineTo(x, y + radii[0]);\n    ctx.quadraticCurveTo(x, y, x + radii[0], y);\n    ctx.closePath();\n    ctx.fill();\n};\nexport const selectElementRange = (e: HTMLElement) => {\n    const elementIsEditable = (e: HTMLElement): e is HTMLInputElement | HTMLTextAreaElement => !!e.nodeName.match(/^(INPUT|TEXTAREA)$/i);\n    const selection = window.getSelection();\n    if (elementIsEditable(e)) {\n        e.focus();\n        e.select();\n        return;\n    }\n    if (selection.setBaseAndExtent) {\n        // Safari\n        selection.setBaseAndExtent(e, 0, e, e.hasChildNodes() ? 1 : 0);\n        return;\n    }\n    if (selection.addRange && selection.removeAllRanges && document.createRange) {\n        // Mozilla or Opera 10.5+\n        const range = document.createRange();\n        range.selectNodeContents(e);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n};\nexport const selectElementPos = (e: HTMLElement, pos: number) => {\n    const range = document.createRange();\n    const selection = window.getSelection();\n    range.setStart(e.childNodes[0], pos);\n    range.collapse(true);\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\nexport const findFromAscendants = (e: HTMLElement, predict: (e: HTMLElement) => boolean) => {\n    const ascendants = [];\n    let parent = e.parentElement;\n    while (parent !== document.body) {\n        ascendants.push(parent);\n        parent = parent.parentElement;\n    }\n    return ascendants.find(predict);\n};\n// eslint-disable-next-line arrow-body-style\nexport const getPropertyDescriptor = (obj: Record<string, any>, key: string): PropertyDescriptor => {\n    return Object.getOwnPropertyDescriptor(obj, key) || getPropertyDescriptor(Object.getPrototypeOf(obj), key);\n};\nexport const getPropertyDescriptors = (obj: Function | Record<string, any>): PropertyDescriptorMap => {\n    if (typeof obj === \"function\") return Object.getOwnPropertyDescriptors(obj);\n    const proto = Object.getPrototypeOf(obj);\n    if (obj !== Object.prototype && proto === Object.prototype) return Object.getOwnPropertyDescriptors(obj);\n    return Object.assign(proto ? getPropertyDescriptors(proto) : {}, Object.getOwnPropertyDescriptors(obj));\n};\n\nexport const extToType = (ext: string): Exclude<ProjectItemType, \"folder\"> => {\n    if ([\"jspat\", \"maxpat\", \"gendsp\", \"dsppat\"].indexOf(ext) !== -1) return \"patcher\";\n    if ([\"wav\", \"aif\", \"aiff\", \"mp3\", \"aac\", \"flac\", \"ogg\", \"m4a\"].indexOf(ext) !== -1) return \"audio\";\n    if ([\"txt\", \"json\"].indexOf(ext) !== -1) return \"text\";\n    if ([\"apng\", \"avif\", \"gif\", \"jpg\", \"jpeg\", \"jfif\", \"pjpeg\", \"pjp\", \"png\", \"svg\", \"webp\", \"bmp\", \"ico\", \"cur\", \"tif\", \"tiff\"].indexOf(ext) !== -1) return \"image\";\n    if ([\"mp4\", \"webm\", \"3gp\"].indexOf(ext) !== -1) return \"video\";\n    return \"unknown\";\n};\n\nexport const max2js = (patcherIn: TMaxPatcher, mode = \"max\" as TPatcherProps[\"mode\"]): RawPatcher => {\n    const patcher: RawPatcher = { boxes: {}, lines: {} };\n    const maxPatcher = (patcherIn as TMaxPatcher).patcher;\n    patcher.props = {\n        bgColor: rgbaMax2Css(maxPatcher.bgcolor),\n        editingBgColor: rgbaMax2Css(maxPatcher.editing_bgcolor),\n        dependencies: [],\n        grid: maxPatcher.gridsize,\n        openInPresentation: !!maxPatcher.openinpresentation,\n        mode\n    };\n    const maxBoxes = maxPatcher.boxes;\n    const maxLines = maxPatcher.lines;\n    for (let i = 0; i < maxBoxes.length; i++) {\n        const maxBox = maxBoxes[i].box;\n        const numID = parseInt(maxBox.id.match(/\\d+/)[0]);\n        const id = \"box-\" + numID;\n        patcher.boxes[id] = {\n            id,\n            inlets: maxBox.numinlets,\n            outlets: maxBox.numoutlets,\n            rect: maxBox.patching_rect,\n            presentationRect: maxBox.presentation_rect,\n            background: !!maxBox.background,\n            presentation: !!maxBox.presentation,\n            text: (maxBox.maxclass === \"newobj\" ? \"\" : maxBox.maxclass + \" \") + (maxBox.text ? maxBox.text : \"\")\n        };\n    }\n    for (let i = 0; i < maxLines.length; i++) {\n        const lineArgs = maxLines[i].patchline;\n        const id = \"line-\" + i;\n        patcher.lines[id] = {\n            id,\n            src: [lineArgs.source[0].replace(/obj/, \"box\"), lineArgs.source[1]],\n            dest: [lineArgs.destination[0].replace(/obj/, \"box\"), lineArgs.destination[1]]\n        };\n    }\n    return patcher;\n};\n\nexport const js2max = (patcherIn: RawPatcher): TMaxPatcher => {\n    const maxPatcher: TMaxPatcher[\"patcher\"] = {\n        boxes: [],\n        lines: [],\n        rect: undefined,\n        bgcolor: css2RgbaMax(patcherIn.props.bgColor),\n        editing_bgcolor: css2RgbaMax(patcherIn.props.editingBgColor),\n        gridsize: patcherIn.props.grid,\n        openinpresentation: +patcherIn.props.openInPresentation\n    };\n    for (const id in patcherIn.boxes) {\n        const box = patcherIn.boxes[id];\n        const numID = parseInt(id.match(/\\d+/)[0]);\n        maxPatcher.boxes.push({\n            box: {\n                id: `obj-${numID}`,\n                maxclass: \"newobj\",\n                numinlets: box.inlets,\n                numoutlets: box.outlets,\n                patching_rect: box.rect,\n                presentation: +box.presentation,\n                background: +box.background,\n                text: box.text\n            }\n        });\n    }\n    for (const id in patcherIn.lines) {\n        const line = patcherIn.lines[id];\n        maxPatcher.lines.push({\n            patchline: {\n                source: [line.src[0].replace(/box/, \"obj\"), line.src[1]],\n                destination: [line.dest[0].replace(/box/, \"obj\"), line.dest[1]]\n            }\n        });\n    }\n    return { patcher: maxPatcher };\n};\n\nexport const convertSampleToUnit = (sample: number, unit: TAudioUnit, { sampleRate = 48000, bpm = 60, beatsPerMeasure = 4, division = 16 }) => {\n    if (unit === \"sample\") return { unit, str: sample.toString(), value: sample, values: [sample] };\n    const milliseconds = sample * 1000 / sampleRate;\n    const roundedMs = Math.round(milliseconds);\n    if (unit === \"measure\") {\n        const dpms = bpm * division / 60000;\n        const totalDivisions = dpms * milliseconds;\n        const roundedTotalDivisions = dpms * milliseconds;\n        const divisions = ~~(roundedTotalDivisions % division);\n        const beats = ~~(roundedTotalDivisions / division) % beatsPerMeasure + 1;\n        const measure = ~~(roundedTotalDivisions / beatsPerMeasure / division) + 1;\n        const str = `${measure}:${beats}.${divisions.toString().padStart(2, \"0\")}`;\n        return { unit, str, value: totalDivisions / division, values: [measure, beats, divisions] };\n    }\n    // if (unit === \"time\")\n    const ms = roundedMs % 1000;\n    const s = ~~(roundedMs / 1000) % 60;\n    const min = ~~(roundedMs / 60000) % 60;\n    const h = ~~(roundedMs / 3600000);\n    const str = !min ? `${s}.${ms.toString().padStart(3, \"0\")}`\n        : !h ? `${min}:${s.toString().padStart(2, \"0\")}.${ms.toString().padStart(3, \"0\")}`\n            : `${h}:${min.toString().padStart(2, \"0\")}:${s.toString().padStart(2, \"0\")}.${ms.toString().padStart(3, \"0\")}`;\n    return { unit, str, value: milliseconds / 1000, values: [h, min, s, ms] };\n};\nexport const MEASURE_UNIT_REGEX = /^((\\d+):)?(\\d+)\\.?(\\d+)?$/;\nexport const TIME_UNIT_REGEX = /^((\\d+):)??((\\d+):)?(\\d+)\\.?(\\d+)?$/;\nexport const convertUnitToSample = (str: string, unit: TAudioUnit, { sampleRate = 48000, bpm = 60, beatsPerMeasure = 4, division = 16 }) => {\n    if (unit === \"sample\") return +str || 0;\n    if (unit === \"measure\") {\n        const matched = str.match(MEASURE_UNIT_REGEX);\n        if (!matched) throw new Error(`String ${str} cannot be parsed to ${unit}`);\n        const [, , measureIn, beatsIn, divisionsIn] = matched;\n        const bps = bpm / 60;\n        const samplesPerBeat = sampleRate / bps;\n        let measures = +measureIn || 0;\n        let beats = +beatsIn || 0;\n        let divisions = +divisionsIn || 0;\n        beats += ~~(divisions / division);\n        divisions %= division;\n        measures += ~~(beats / beatsPerMeasure);\n        beats %= beatsPerMeasure;\n        return (measures * beatsPerMeasure + beats + divisions / division) * samplesPerBeat;\n    }\n    const matched = str.match(TIME_UNIT_REGEX);\n    if (!matched) throw new Error(`String ${str} cannot be parsed to ${unit}`);\n    const [, , hIn, , minIn, sIn, msIn] = matched;\n    let h = +hIn || 0;\n    let min = +minIn || 0;\n    let s = +sIn || 0;\n    let ms = +msIn || 0;\n    s += ~~(ms / 1000);\n    ms %= 1000;\n    min += ~~(s / 60);\n    s %= 60;\n    h += ~~(min / 60);\n    min %= 60;\n    return (h * 3600 + min * 60 + s + ms / 1000) * sampleRate;\n};\n\nexport const ab2sab = (ab: SharedArrayBuffer | ArrayBuffer) => {\n    if (ab instanceof ArrayBuffer) return ab;\n    const sab = new SharedArrayBuffer(ab.byteLength);\n    const ui8ab = new Uint8Array(ab);\n    const ui8sab = new Uint8Array(sab);\n    for (let i = 0; i < ui8ab.length; i++) {\n        ui8sab[i] = ui8ab[i];\n    }\n    return sab;\n};\n\nexport const sab2ab = (sab: SharedArrayBuffer | ArrayBuffer) => {\n    if (sab instanceof SharedArrayBuffer) return sab;\n    const ab = new ArrayBuffer(sab.byteLength);\n    const ui8ab = new Uint8Array(ab);\n    const ui8sab = new Uint8Array(sab);\n    for (let i = 0; i < ui8sab.length; i++) {\n        ui8ab[i] = ui8sab[i];\n    }\n    return ab;\n};\nexport const ab2str = (buf: ArrayBuffer) => {\n    return String.fromCharCode.apply(null, new Uint16Array(buf));\n};\n\nexport const str2ab = (str: string) => {\n    const buf = new ArrayBuffer(str.length * 2); // 2 bytes for each char\n    const bufView = new Uint16Array(buf);\n    for (let i = 0, strLen = str.length; i < strLen; i++) {\n        bufView[i] = str.charCodeAt(i);\n    }\n    return buf;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","import AudioWorkletProxyProcessor from \"./AudioWorkletProxyProcessor\";\nimport TaskManager from \"../TaskMgr\";\nimport TemporaryProjectItemManager from \"../file/TemporaryProjectItemManager\";\nimport TypedEventEmitter from \"../../utils/TypedEventEmitter\";\nimport WorkletProjectItemManager from \"../file/WorkletProjectItemManager\";\nimport WorkletGlobalPackageManager from \"../WorkletGlobalPackageManager\";\nimport Project from \"../Project\";\nimport JSPatcherWorkletSDK from \"../WorkletSDK\";\nimport type { WorkletEnvParameters, IWorkletEnvNode, IWorkletEnvProcessor, WorkletEnvOptions } from \"./WorkletEnv.types\";\nimport type { AudioWorkletGlobalScope, TypedAudioWorkletNodeOptions } from \"./TypedAudioWorklet\";\nimport type { Task, TaskError } from \"../TaskMgr\";\nimport type { EnvEventMap, IJSPatcherEnv } from \"../Env\";\nimport type { IFileEditor } from \"../file/FileEditor\";\nimport type { IFileInstance } from \"../file/FileInstance\";\nimport type { ProjectItemManagerDataForDiff } from \"../file/PersistentProjectItemManager\";\nimport type { TErrorLevel } from \"../types\";\n\nexport const processorId = \"__JSPatcher_WorkletEnv\";\ndeclare const globalThis: AudioWorkletGlobalScope;\nconst { registerProcessor } = globalThis;\n\nexport default class WorkletEnvProcessor extends AudioWorkletProxyProcessor<IWorkletEnvProcessor, IWorkletEnvNode, WorkletEnvParameters, WorkletEnvOptions> implements IWorkletEnvProcessor, IJSPatcherEnv {\n    static fnNames: (keyof IWorkletEnvNode)[] = [\"envNewLog\", \"taskBegin\", \"taskUpdate\", \"taskError\", \"taskEnd\", \"fileMgrExists\", \"fileMgrGetFileDetails\", \"fileMgrPutFile\", \"fileMgrReadDir\", \"fileMgrReadFile\", \"fileMgrWriteFile\", \"fileMgrGetPathIdMap\", \"fileMgrDiff\", \"addObjects\", \"addWorkletModule\"];\n    private readonly ee = new TypedEventEmitter<EnvEventMap>();\n    readonly thread = \"AudioWorklet\";\n    readonly os: \"Windows\" | \"MacOS\" | \"UNIX\" | \"Linux\" | \"Unknown\";\n    readonly browser: \"Unknown\" | \"Chromium\" | \"Gecko\" | \"WebKit\";\n    readonly language: string;\n    readonly generatedId: Uint32Array;\n    readonly taskMgr = new TaskManager();\n    readonly fileMgr: WorkletProjectItemManager;\n    readonly tempMgr: TemporaryProjectItemManager;\n    readonly pkgMgr: WorkletGlobalPackageManager;\n    readonly sdk = new JSPatcherWorkletSDK();\n    currentProject: Project;\n    constructor(options?: TypedAudioWorkletNodeOptions<WorkletEnvOptions>) {\n        super(options);\n        globalThis.jspatcherEnv = this;\n        const { os, browser, language, generatedId } = options.processorOptions;\n        this.os = os;\n        this.browser = browser;\n        this.language = language;\n        this.generatedId = generatedId;\n        this.fileMgr = new WorkletProjectItemManager(this);\n        this.tempMgr = new TemporaryProjectItemManager(this);\n        this.pkgMgr = new WorkletGlobalPackageManager(this);\n    }\n    async init() {\n        await this.pkgMgr.init();\n        this.currentProject = new Project(this);\n        await this.fileMgr.init();\n        await this.tempMgr.init();\n        this.bindTaskMgr();\n        this.bindFileMgr();\n    }\n    instances = new Set<IFileInstance>();\n    activeInstance: IFileInstance;\n    activeEditor: IFileEditor;\n    newLog(errorLevel: TErrorLevel, title: string, message: string, emitterIn?: any) {\n        const emitter = typeof emitterIn === \"string\" ? emitterIn : typeof emitterIn === \"object\" ? emitterIn.constructor.name : typeof emitterIn === \"function\" ? emitterIn.name : \"\";\n        this.envNewLog(errorLevel, title, message, emitter);\n    }\n    generateId(objectIn: object) {\n        return this.thread + objectIn.constructor.name + Atomics.add(this.generatedId, 0, 1);\n    }\n    registerInstance(i: IFileInstance, id?: string) {\n        this.instances.add(i);\n        i.on(\"destroy\", () => {\n            this.instances.delete(i);\n            this.ee.emit(\"instances\", Array.from(this.instances));\n        });\n        this.ee.emit(\"instances\", Array.from(this.instances));\n        if (!id) return this.generateId(i);\n        return id;\n    }\n    getInstanceById(id: string) {\n        for (const instance of this.instances) {\n            if (instance.id === id) return instance;\n        }\n        return null;\n    }\n    // get _listeners() { return this.ee._listeners; }\n    // get getListeners() { return this.ee.getListeners; }\n    get listeners() { return this.ee.listeners; }\n    get on() { return this.ee.on; }\n    get once() { return this.ee.once; }\n    get onAny() { return this.ee.onAny; }\n    get off() { return this.ee.off; }\n    get offAny() { return this.ee.offAny; }\n    get offAll() { return this.ee.offAll; }\n    get emit() { return this.ee.emit; }\n    get emitSerial() { return this.ee.emitSerial; }\n    get emitSync() { return this.ee.emitSync; }\n    get listenerCount() { return this.ee.listenerCount; }\n    bindTaskMgr() {\n        const handleTaskBegin = ({ id, message, emitter }: Task) => this.taskBegin({ id, message, emitter: typeof emitter === \"string\" ? emitter : emitter.constructor?.name });\n        const handleTaskUpdate = ({ id, message }: Task) => this.taskUpdate({ id, message });\n        const handleTaskError = ({ id, error }: TaskError) => this.taskError({ id, error });\n        const handleTaskEnd = ({ id }: Task) => this.taskEnd({ id });\n        this.taskMgr.on(\"taskBegin\", handleTaskBegin);\n        this.taskMgr.on(\"taskUpdate\", handleTaskUpdate);\n        this.taskMgr.on(\"taskError\", handleTaskError);\n        this.taskMgr.on(\"taskEnd\", handleTaskEnd);\n    }\n    handleFileMgrChange = () => {\n        if (this.fileMgr.disabled) return;\n        this.fileMgrDiff(this.fileMgr.getDataForDiff());\n    };\n    bindFileMgr() {\n        this.fileMgr.on(\"changed\", this.handleFileMgrChange);\n    }\n    async workletFileMgrDiff(diff: ProjectItemManagerDataForDiff) {\n        this.fileMgr.off(\"changed\", this.handleFileMgrChange);\n        await this.fileMgr.processDiff(diff);\n        this.fileMgr.on(\"changed\", this.handleFileMgrChange);\n    }\n    async importPackage(url: string, id: string) {\n        await this.pkgMgr.importPackage(url, id);\n    }\n    process(inputs: Float32Array[][], outputs: Float32Array[][]) {\n        if (this._disposed) return false;\n        return true;\n    }\n}\n\ntry {\n    registerProcessor(processorId, WorkletEnvProcessor);\n} catch (error) {\n    // eslint-disable-next-line no-console\n    console.warn(error);\n}\n"],"names":["TypedEventEmitter","ImporterDirSelfObject","isJSPatcherObjectConstructor","PackageManager","global","patcher","env","pkgMgr","mode","props","constructor","init","pkg","lib","packageRegister","remove","id","importFromURL","url","Error","emit","libOut","rootifyDepth","Infinity","pathIn","path","slice","length","el","full","join","p","k","shift","key","searchInLib","query","limit","staticMethodOnly","keys","Object","sort","items","i","startsWith","o","push","object","searchInPkg","outs","indexOf","getFromPath","ab2str","str2ab","Project","audioCtx","envIn","name","default","author","version","setProps","changed","keyIn","save","load","clean","fileMgr","item","getProjectItemFromPath","projectFilename","json","JSON","parse","data","error","stringify","projectRoot","addFile","unload","instances","project","destroy","type","description","TaskManager","tasks","_tasks","filter","e","errors","_errors","newTask","emitter","message","callback","thread","globalThis","timestamp","Date","now","_id","task","$","returnValue","handleUpdate","msg","taskError","lastError","a","b","lastTask","getTasksFromEmitter","getErrorsFromEmitter","dismissLastError","dismissAllErrors","getBase","getGlobalThis","WorkletGlobalPackageManager","Map","jsaw","Base","addObjects","getDescriptors","toDescriptor","O","pkgName","isObjectDescriptor","ctor","importedObjectType","pkgIn","$self","entries","reduce","acc","v","descriptor","add","assign","fetchModule","toExport","exports","module","addWorkletModule","exported","importPackage","getter","BaseObject","Patcher","Box","Line","generateRemotedObject","Bang","isBang","JSPatcherWorkletSDK","TemporaryProjectFile","TempAudioFile","instantiate","instantiateEditor","instanceId","AudioEditor","fromProjectItem","file","AbstractProjectItem","AbstractProjectFile","getTypeFromFileName","_data","dataIn","fileExtension","splitted","split","fileMgrIn","parentIn","nameIn","onAny","eventName","eventData","isFolder","newData","by","emitChanged","saveAsCopy","parent","manager","clone","emitTreeChanged","saveAs","to","newName","from","move","AbstractProjectFolder","isDirty","getDescendantFiles","every","f","Set","findItem","itemIn","Array","find","existItem","has","uniqueName","empty","getTree","map","cur","isParentOf","getOrderedItems","folders","localeCompare","files","_fileMgr","_name","_isDirty","parentPath","projectPath","replace","RegExp","projectFolderName","addObserver","observer","_observers","removeObserver","delete","on","dirty","generateItemId","extToType","AbstractProjectItemManager","allItems","rec","forEach","root","allProjectItems","generateId","taskMgr","emptyProject","ext","getProjectItemFromId","pathArray","itemArray","pop","next","getPathIdMap","instantiateProjectPath","projectIn","FileEditor","instance","value","ctx","isInMemory","isTemporary","isReadonly","isReady","_isReady","isDestroyed","_isDestroyed","history","isLocked","fileIcon","setActive","activeEditor","isActive","handleDestroy","addEditor","handleReady","off","editorId","registerInstance","handleProjectSave","handleProjectUnload","toFileData","serialize","toTempData","undo","redo","copy","cut","paste","deleteSelected","selectAll","onUiResized","removeEditor","FileInstance","_env","_project","_file","_isReadonly","activeInstance","getEditor","size","_history","History","editor","eventListening","capture","Promise","all","editors","$editor","eventQueue","splice","saveTime","emitDirty","performance","timeOrigin","timing","navigationStart","handleEditorEvent","handleSaved","once","offAny","isUndoable","isRedoable","undoOf","redoOf","undoUntil","redoUntil","setIndex","getSyncData","syncData","PersistentProjectFile","sab","_sab","SharedArrayBuffer","byteLength","ui8ab","Uint8Array","ui8sab","lastModifiedId","readFile","Ctor","putFile","rename","newNameIn","trim","oldName","Constructor","audio","image","text","video","undefined","unknown","PersistentProjectFolder","readDir","rawItem","createProjectItem","tempItem","fileDetail","getFileDetails","addFolder","folder","TempData","persistentMgr","_this","setPrototypeOf","prototype","options","TempPatcherFile","TempTextFile","TemporaryProjectFolder","typeIn","TemporaryProjectItemManager","WorkletProjectItemManager","cachedPathIdMap","fileMgrGetPathIdMap","getDataForDiff","processDiff","diff","disabled","process","$item","$parentId","current","newFile","fileMgrReadFile","fileMgrReadDir","fileMgrGetFileDetails","exists","fileMgrExists","fileMgrPutFile","writeFile","fileMgrWriteFile","oldPath","newPath","importFileZip","subfolder","taskHost","exportProjectZip","stringifyError","x","isJSPatcherObject","AbstractObject","meta","package","icon","inlets","outlets","args","isPatcherInlet","isPatcherOutlet","class","_patcher","box","_box","_meta","setMeta","metaIn","oldMeta","setData","oldData","getProp","rect","presentationRect","background","presentation","setInlets","setOutlets","outletLines","inletLines","stateIn","oldState","state","propsIn","oldProps","update","oldArgs","subscribe","postInit","updateUI","updateArgs","undoable","updateProps","updateState","fn","inlet","propsInKeys","propsKeys","outlet","compare","line","pass","outletAll","outputs","connectedOutlet","destBoxId","destInlet","lineId","connectedInlet","srcBoxId","srcOutlet","disconnectedOutlet","disconnectedInlet","post","newLog","s","info","warn","highlight","connectAudio","allLines","enable","connectAudioInlet","portIn","lines","port","connectAudioOutlet","disconnectAudio","disable","disconnectAudioInlet","disconnectAudioOutlet","applyBPF","param","bpf","currentTime","cancelScheduledValues","setValueAtTime","t","linearRampToValueAtTime","getSharedItem","onceCreate","newItem","tempMgr","d","handleFileMgrTreeChanged","handleTempMgrTreeChanged","toString","isUIState","uiState","isUIStateKey","thisName","superMeta","getPrototypeOf","superProps","thisProps","group","setArgs","updateUIFromProps","hidden","ignoreClick","hint","RemotedObject","proxy","patcherProcessor","handleBoxIoCountChanged","objectEmitFromWorklet","Func","New","getIO","EmptyObject","InvalidObject","func","new","RemotedImporter","import","StaticMethod","Method","Wrapper","imported","activeLib","output","loading","c","r","isHot","optional","varLength","ImportedObject","Getter","result","execute","handlePreInit","handleInlet","then","sync","AnyImportedObject","getPropertyDescriptors","Importer","getObject","writeInPath","outIn","stackIn","depthIn","depth","out","stack","jspatcherEnv","newObj","prop","enumerable","isArray","inputs","argsCount","Math","max","initialInlets","initialOutlets","call","spreadArgs","Fn","Property","NewBase","FuncBase","PropertyBase","GetterBase","SetterBase","SetterGetterBase","MethodBase","StaticPropertyBase","StaticGetterBase","StaticSetterBase","StaticSetterGetterBase","StaticMethodBase","Setter","SetterGetter","StaticProperty","StaticGetter","StaticSetter","StaticSetterGetter","DefaultImporter","isStatic","Super","setter","set","get","input","handleUpdateArgs","ImportedStaticMethodObject","AudioIn","index","sample","changeIO","emitPatcherChangeIO","_","outlet0","handlePatcherInput","AudioOut","sampleIndex","inlet0","outputAudio","In","enums","Out","Param","in","isTRect","parseToPrimitive","isTPresentationRect","isRectMovable","isRectResizable","patcherIn","boxIn","_inletLines","fill","_outletLines","maxBoxIn","patching_rect","presentation_rect","prevData","storage","_editing","_parsed","parseObjText","newMeta","getObjectMeta","getObjectConstructor","_Object","defaultSize","presentationSize","_object","UI","oIn","parsed","addInletLine","removeInletLine","addOutletLine","removeOutletLine","count","linesSetLength","uiUpdateDest","uiUpdateSrc","getInletPos","left","top","width","getOutletPos","height","inletsPositions","positions","outletsPositions","isSrc","last","getLinesBySrcID","getLinesByDestID","isOutletTo","iterator","values","done","destBox","isInletFrom","srcBox","changeText","textIn","force","oldDefaultSize","setRect","setPresentationRect","setPresentation","setBackground","position","leftIn","topIn","presentationPosition","widthIn","heightIn","getLeft","inPresentation","rectKey","setLeft","positionKey","getTop","setTop","getWidth","setWidth","sizeKey","getHeight","setHeight","bool","getIsMovable","getIsResizable","highlightPort","boxChanged","changeObject","deleteLine","boxes","strIn","REGEX","strArray","match","exec","objOut","lastProp","charAt","substr","toSerializable","mapLines","visitedBoxes","ins","recs","lineMap","sendID","sendMap","resultID","toFaustLambda","lambdaName","exprs","onces","mainIns","mainOuts","recIns","recOuts","toExpr","reverse","recIn","recOut","in_","toNormalExpr","unshift","toFaustDspCode","inspectFaustPatcher","code","imports","effects","boxId","fxOnces","fxExprs","fxIns","toOnceExpr","isConnectableByAudio","fromConnection","outletAudioConnections","toConnection","inletAudioConnections","node","isWamNode","isWebAudioModule","line1","line2","positionHash","lineIn","calcType","_type","src","dest","updateType","setSrc","srcId","getSrc","srcPos","setDest","destId","getDest","destPos","getLinesByBox","isAudioParam","AudioParam","disconnect","disconnectEvents","connect","connectEvents","srcMeta","destMeta","srcType","destType","PatcherEditor","PatcherHistory","max2js","js2max","_state","log","selected","preventEmitChanged","dependencies","bgColor","editingBgColor","grid","openInPresentation","boxIndexCount","lineIndexCount","activePkg","js","gen","faust","fileName","emitGraphChanged","ArrayBuffer","Response","splitName","extMap","jspat","maxpat","gendsp","dsppat","modeIn","$init","depNames","onUpdate","createBox","numID","parseInt","createLine","getPatcherNode","PatcherNode","register","audioWorklet","patcherNode","fileId","loadFromURL","fetch","loadFromString","sIn","loadFromFile","reader","FileReader","onload","onerror","readAsText","addPackage","namespace","removePackage","findIndex","className","changeBoxText","oldText","deleteBox","canCreateLine","changeLineSrc","oldSrc","changeLineDest","destOutlet","oldDest","srcOuts","destIns","srcOutsWraped","concat","destInsWraped","idOut","idIn","inputAudio","inputParam","_inletAudioConnections","_outletAudioConnections","inspectAudioIO","inputBoxes","outputBoxes","parametersBoxes","arg0","metaFromPatcher","errorLevel","title","publicProps","spacing","Blob","arrayBuffer","locked","showGrid","snapToGrid","setState","resolve","reject","handleChanged","handleChangeBoxText","handlePassiveDeleteLine","handleBoxChanged","deselectAll","createBoxFromFile","obj","deselect","changeBox","change","select","ids","selectAllBoxes","selectOnly","selectedToString","lineSet","pasteToPatcher","clipboard","idMap","pasted","$postInit","maxBoxes","maxBox","numinlets","numoutlets","maxclass","createdBoxes","maxLines","lineArgs","patchline","source","destination","createdLine","create","objects","created","boxSet","deleted","promises","navigator","writeText","readText","duplicate","selectRegion","selectionRect","selectedBefore","right","bottom","boxLeft","boxTop","boxWidth","boxHeight","boxRight","boxBottom","moveSelectedBox","dragOffset","refBoxID","delta","y","round","moveEnd","$left","$top","resizeSelectedBox","resize","resizeEnd","$width","$height","min","sizingX","sizing","sizingY","findNearestPort","findSrc","nearest","minDistance","currentPos","currentDistance","pos","distance","canCreate","highlightNearestPort","origPos","tempLine","inspector","found","dockUI","dockable","TextEditor","AudioWorkletProcessor","Processor","fnNames","resolves","rejects","messagePortRequestId","handleDisposed","removeEventListener","handleMessage","close","postMessage","_disposed","start","addEventListener","$AnyEventType","Symbol","listeners","_listeners","getListeners","listener","listenerWithOff","arg","anyListeners","excludeAny","exclude","l","emitSerial","returnValues","emitSync","offAll","listenerCount","anyListenerCount","SharedDataNoValue","TempManagerFolder","isStringArray","isNumberArray","isMIDIEvent","rgbaMax2Css","maxColor","cssColor","floor","css2RgbaMax","color","matched","decodeBPF","tupleLength","numbers","isFinite","tuples","$tuple","decodeCurve","decodeLine","detectOS","appVersion","detectBrowserCore","window","chrome","InstallTrigger","vendor","roundedRect","radius","radii","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","stroke","fillRoundedRect","selectElementRange","elementIsEditable","nodeName","selection","getSelection","focus","setBaseAndExtent","hasChildNodes","addRange","removeAllRanges","document","createRange","range","selectNodeContents","selectElementPos","setStart","childNodes","collapse","findFromAscendants","predict","ascendants","parentElement","body","getPropertyDescriptor","getOwnPropertyDescriptor","getOwnPropertyDescriptors","proto","maxPatcher","bgcolor","editing_bgcolor","gridsize","openinpresentation","convertSampleToUnit","unit","sampleRate","bpm","beatsPerMeasure","division","str","milliseconds","roundedMs","dpms","totalDivisions","roundedTotalDivisions","divisions","beats","measure","padStart","ms","h","MEASURE_UNIT_REGEX","TIME_UNIT_REGEX","convertUnitToSample","measureIn","beatsIn","divisionsIn","bps","samplesPerBeat","measures","hIn","minIn","msIn","ab2sab","ab","sab2ab","buf","String","fromCharCode","apply","Uint16Array","bufView","strLen","charCodeAt","AudioWorkletProxyProcessor","processorId","registerProcessor","WorkletEnvProcessor","fileMgrDiff","os","browser","language","generatedId","processorOptions","currentProject","bindTaskMgr","bindFileMgr","emitterIn","envNewLog","objectIn","Atomics","ee","getInstanceById","handleTaskBegin","taskBegin","handleTaskUpdate","taskUpdate","handleTaskError","handleTaskEnd","taskEnd","handleFileMgrChange","workletFileMgrDiff","console"],"sourceRoot":""}