{"version":3,"file":"js/6ffef2c1e894b956992c.worker.js","mappings":";;;;;;;;;;;;;;AAAA;AAGA,MAAM,SAAS,YAAM;AAAA,EAGjB,cAAc;AADd,qBAAY;AAER,UAAM,WAAsD;AAC5D,UAAM,UAAqD;AAC3D,QAAI,uBAAuB;AAC3B,UAAM,iBAAiB,MAAM;AACzB,0BAAoB,WAAW;AAC/B;AAAA;AAEJ,UAAM,gBAAgB,OAAO,MAAmE;AAC5F,YAAM,EAAE,IAAI,aAAM,MAAM,OAAO,UAAU,EAAE;AAC3C,UAAI,OAAM;AACN,cAAM,IAAyB,EAAE;AACjC,YAAI;AACA,YAAE,QAAQ,MAAO,KAAa,OAAM,GAAG;AAAA,iBAClC,IAAP;AACE,YAAE,QAAQ;AAAA;AAEd,oBAAY;AACZ,YAAI,KAAK;AAAW;AAAA,aACjB;AACH,YAAI,OAAO;AACP,cAAI,QAAQ;AAAK,oBAAQ,IAAI;AAC7B,iBAAO,QAAQ;AACf;AAAA;AAEJ,YAAI,SAAS,KAAK;AACd,mBAAS,IAAI;AACb,iBAAO,SAAS;AAAA;AAAA;AAAA;AAI5B,UAAM,OAAO,CAAC,UAAiB,SAAgB,IAAI,QAAa,CAAC,SAAS,WAAW;AACjF,YAAM,KAAK;AACX,eAAS,MAAM;AACf,cAAQ,MAAM;AACd,kBAAY,EAAE,IAAI,aAAM;AAAA;AAE5B,UAAM,OAAQ,KAAK;AACnB,SAAK,QAAQ,QAAQ,UAAS,KAAa,QAAQ,IAAI,SAAgB,KAAK,MAAM,GAAG;AACrF,qBAAiB,WAAW;AAAA;AAAA,GAzCzB,aAAoB,IADhB;AA8Cf,iEAAe,MAAM,EAAC;;;;;;;UCjDtB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,sDAAsD;WACtD,sCAAsC,iEAAiE;WACvG;WACA;WACA;WACA;WACA;WACA;;;;;WCzBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;;;;;WCAA;;WAEA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,aAAa;WACb;WACA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;;WAEA;;;;;;;;;;;;AClCwC;AAGxC,oBAAoB,iDAAW,CAAuC;AAAA,EAAtE,cALA;AAKA;AAQY,iBAAuB;AAE/B,oBAA2B;AAC3B,mBAAsC;AACtC,kBAAS;AACT,mBAAU;AAAA;AAAA,EAEF,IAAI,GAAW;AACnB,WAAO,KAAK,MAAM;AAAA;AAAA,EAEd,IAAI,GAAgB;AACxB,UAAM,IAAI,KAAK,MAAM,QAAQ;AAC7B,QAAI,MAAM;AAAI,aAAO;AACrB,WAAO,KAAK,MAAM,KAAK,KAAK;AAAA;AAAA,QAG1B,OAAO;AACT,QAAI,KAAK;AAAS,aAAO,QAAQ;AACjC,QAAI,KAAK,QAAQ;AACb,aAAO,IAAI,QAAc,CAAC,SAAS,WAAW;AAC1C,aAAK,SAAS,KAAK;AACnB,aAAK,QAAQ,KAAK;AAAA;AAAA;AAG1B,QAAI;AACA,WAAK,SAAS;AACd,YAAM,aAAa,CAAC,KAAa,QAAgB,aAAa;AAC9D,YAAM,SAAU,OAAM,2NAAyB,EAAS;AACxD,WAAK,SAAS,MAAM,IAAI,OAAO,EAAE;AACjC,WAAK,UAAU,IAAI,KAAK,OAAO;AAC/B,WAAK,YAAY,IAAI,KAAK,OAAO;AACjC,WAAK,aAAa,IAAI,KAAK,OAAO;AAClC,WAAK,WAAW,IAAI,KAAK,OAAO;AAChC,WAAK,OAAO,IAAI,KAAK,OAAO;AAC5B,WAAK,QAAQ;AACb,WAAK,UAAU;AACf,WAAK,SAAS;AACd,WAAK,SAAS,QAAQ,OAAK;AAAA,aACtB,OAAP;AACE,WAAK,QAAQ,QAAQ,OAAK,EAAE;AAAA,cAC9B;AACE,WAAK,WAAW;AAChB,WAAK,UAAU;AAAA;AAEnB,WAAO,QAAQ;AAAA;AAAA,EAKnB,QAAQ;AAAE,SAAK,QAAQ;AAAA;AAAA,EACvB,WAAW;AAAE,SAAK,QAAQ;AAAA;AAAA,EAE1B,MAAM,IAAgB;AAAE,WAAO,KAAK,IAAI,KAAK,QAAQ,MAAM,KAAK,IAAI;AAAA;AAAA,EACpE,cAAc,IAAgB,UAA+B;AAAE,WAAO,KAAK,IAAI,KAAK,QAAQ,cAAc,KAAK,IAAI,KAAK;AAAA;AAAA,EACxH,SAAS,IAAgB;AAAE,WAAO,KAAK,QAAQ,SAAS,KAAK,IAAI;AAAA;AAAA,EACjE,iBAAiB,IAAgB,UAA+B;AAAE,WAAO,KAAK,QAAQ,iBAAiB,KAAK,IAAI,KAAK;AAAA;AAAA,EACrH,OAAO,IAAgB;AAAE,SAAK,QAAQ,OAAO,KAAK,IAAI;AAAA;AAAA,EACtD,OAAO,IAAgB;AAAE,SAAK,QAAQ,OAAO,KAAK,IAAI;AAAA;AAAA,EACtD,2BAA2B;AAAE,WAAO,KAAK,QAAQ;AAAA;AAAA,EAEjD,kBAAkB,IAAgB;AAAE,WAAO,KAAK,QAAQ,kBAAkB,KAAK,IAAI;AAAA;AAAA,EACnF,eAAe,SAAuB;AAAE,WAAO,KAAK,QAAQ,eAAe;AAAA;AAAA,EAC3E,YAAY,IAAgB,KAAa,QAAiB;AAAE,WAAO,KAAK,QAAQ,YAAY,KAAK,IAAI,KAAK,KAAK;AAAA;AAAA,EAE/G,YAAY,IAAgB;AAAE,WAAO,KAAK,QAAQ,YAAY,KAAK,IAAI;AAAA;AAAA,EACvE,aAAa,IAAgB;AAAE,WAAO,KAAK,QAAQ,aAAa,KAAK,IAAI;AAAA;AAAA,EACzE,eAAe,IAAgB,MAAc;AAAE,WAAO,KAAK,QAAQ,eAAe,KAAK,IAAI,KAAK;AAAA;AAAA,EAChG,SAAS,IAAgB;AAAE,WAAO,KAAK,QAAQ,SAAS,KAAK,IAAI;AAAA;AAAA,EAEjE,cAAc,IAAgB,MAAiB;AAAE,WAAO,KAAK,QAAQ,cAAc,KAAK,IAAI,KAAK;AAAA;AAAA,EACjG,WAAW,IAAgB,MAAiB;AAAE,WAAO,KAAK,QAAQ,WAAW,KAAK,IAAI,KAAK;AAAA;AAAA,EAC3F,YAAY,IAAgB,SAAiB;AAAE,WAAO,KAAK,QAAQ,YAAY,KAAK,IAAI,KAAK;AAAA;AAAA,EAE7F,OAAO,IAAgB,MAAc,WAAoB,aAAqB;AAAE,WAAO,KAAK,QAAQ,OAAO,KAAK,IAAI,KAAK,MAAM,WAAW;AAAA;AAAA,EAC1I,cAAc,IAAgB,MAAc,GAAW,GAAW,GAAW,WAAoB;AAAE,WAAO,KAAK,QAAQ,cAAc,KAAK,IAAI,KAAK,MAAM,GAAG,GAAG,GAAG;AAAA;AAAA,EAElK,eAAe,IAAgB,MAAc;AAAE,WAAO,KAAK,QAAQ,eAAe,KAAK,IAAI,KAAK;AAAA;AAAA,EAChG,aAAa,IAAgB,MAAc;AAAE,WAAO,KAAK,QAAQ,aAAa,KAAK,IAAI,KAAK;AAAA;AAAA,EAC5F,SAAS,IAAgB,MAAc;AAAE,WAAO,KAAK,QAAQ,iBAAiB,KAAK,IAAI,KAAK;AAAA;AAAA,EAE5F,qBAAqB,QAAyB;AAAE,SAAK,QAAQ,qBAAqB;AAAA;AAAA,EAClF,uBAAuB;AAAE,WAAO,KAAK,QAAQ;AAAA;AAAA,EAE7C,qBAAqB,MAAc;AAAE,SAAK,QAAQ,qBAAqB;AAAA;AAAA,EACvE,uBAAuB;AAAE,WAAO,KAAK,QAAQ;AAAA;AAAA,EAC7C,cAAc,IAAgB,MAAc;AAAE,WAAO,KAAK,QAAQ,cAAc,KAAK,IAAI,KAAK;AAAA;AAAA,EAE9F,QAAQ,KAAa;AAAE,WAAO,KAAK,QAAQ,QAAQ;AAAA;AAAA,EACnD,QAAQ,KAAa;AAAE,WAAO,KAAK,QAAQ,QAAQ;AAAA;AAAA,EACnD,YAAY,KAAa;AAAE,WAAO,KAAK,QAAQ,YAAY;AAAA;AAAA,EAC3D,YAAY,KAAa;AAAE,WAAO,KAAK,QAAQ,YAAY;AAAA;AAAA,EAC3D,eAAe;AAAE,WAAO,KAAK,QAAQ;AAAA;AAAA,EAErC,aAAa;AAAE,WAAO,KAAK,QAAQ;AAAA;AAAA,EACnC,kBAAkB;AAAE,UAAM,IAAI,KAAK,QAAQ;AAAc,WAAO,WAAW,EAAE,QAAQ,MAAM,EAAE,QAAQ,EAAE;AAAA;AAAA,EACvG,gBAAgB;AAAE,WAAO,KAAK,QAAQ;AAAA;AAAA,EACtC,iBAAiB,OAAe,OAAe,KAAa;AAAE,WAAO,KAAK,QAAQ,iBAAiB,OAAO,OAAO;AAAA;AAAA,EAEjH,UAAU,IAAgB,UAAkB,MAAiB,UAAqB,GAAW,GAAW,GAAW;AAAE,WAAO,KAAK,QAAQ,UAAU,KAAK,IAAI,KAAK,UAAU,MAAM,UAAU,GAAG,GAAG;AAAA;AAAA,EAEjM,aAAa;AAAE,WAAO,KAAK,IAAI,KAAK,QAAQ;AAAA;AAAA,EAC5C,YAAY,GAAiB;AAAE,WAAO,KAAK,QAAQ,YAAY,KAAK,IAAI;AAAA;AAAA,EACxE,QAAQ,GAAiB,MAAc;AAAE,WAAO,KAAK,IAAI,KAAK,QAAQ,QAAQ,KAAK,IAAI,IAAI;AAAA;AAAA,EAC3F,UAAU,GAAiB,KAAa;AAAE,WAAO,KAAK,IAAI,KAAK,QAAQ,UAAU,KAAK,IAAI,IAAI;AAAA;AAAA,EAC9F,mBAAmB,GAAiB;AAAE,WAAO,KAAK,QAAQ,mBAAmB,KAAK,IAAI;AAAA;AAAA,EAEtF,aAAa;AAAE,WAAO,KAAK,IAAI,KAAK,QAAQ;AAAA;AAAA,EAC5C,YAAY,GAAiB;AAAE,WAAO,KAAK,QAAQ,YAAY,KAAK,IAAI;AAAA;AAAA,EACxE,UAAU,GAAiB;AAAE,WAAO,KAAK,QAAQ,UAAU,KAAK,IAAI;AAAA;AAAA,EACpE,UAAU,GAAiB,QAAsB;AAAE,WAAO,KAAK,IAAI,KAAK,QAAQ,UAAU,KAAK,IAAI,IAAI,KAAK,IAAI;AAAA;AAAA,EAChH,YAAY,GAAiB,KAAa;AAAE,WAAO,KAAK,QAAQ,YAAY,KAAK,IAAI,IAAI;AAAA;AAAA,EACzF,YAAY,GAAiB;AAAE,WAAO,KAAK,QAAQ,YAAY,KAAK,IAAI;AAAA;AAAA,EAExE,eAAe,IAAgB;AAAE,WAAO,KAAK,QAAQ,eAAe,KAAK,IAAI;AAAA;AAAA,EAC7E,aAAa,IAAgB;AAAE,WAAO,KAAK,QAAQ,aAAa,KAAK,IAAI;AAAA;AAAA,EACzE,cAAc,IAAgB;AAAE,WAAO,KAAK,QAAQ,cAAc,KAAK,IAAI;AAAA;AAAA,EAI3E,WAAW,IAAgB,MAAc,GAAW,GAAW;AAAE,WAAO,KAAK,UAAU,WAAW,KAAK,IAAI,KAAK,MAAM,GAAG;AAAA;AAAA,EACzH,YAAY,IAAgB,MAAc,GAAW,GAAW,OAAe;AAAE,WAAO,KAAK,UAAU,YAAY,KAAK,IAAI,KAAK,MAAM,GAAG,GAAG;AAAA;AAAA,EAC7I,YAAY,IAAgB,MAAc,GAAW,GAAW,OAAe;AAAE,WAAO,KAAK,UAAU,YAAY,KAAK,IAAI,KAAK,MAAM,GAAG,GAAG;AAAA;AAAA,EAC7I,aAAa,IAAgB,MAAc,GAAW,GAAW;AAAE,WAAO,KAAK,UAAU,aAAa,KAAK,IAAI,KAAK,MAAM,GAAG;AAAA;AAAA,EAC7H,QAAQ,MAAiB,KAAa;AAAE,WAAO,KAAK,UAAU,QAAQ,MAAM;AAAA;AAAA,EAC5E,SAAS,GAAW,GAAW,KAAa;AAAE,WAAO,KAAK,UAAU,SAAS,GAAG,GAAG;AAAA;AAAA,EACnF,WAAW,IAAgB;AAAE,WAAO,KAAK,UAAU,WAAW,KAAK,IAAI;AAAA;AAAA,EACvE,gBAAgB,IAAgB,OAAe,QAAgB;AAAE,WAAO,KAAK,UAAU,gBAAgB,KAAK,IAAI,KAAK,OAAO;AAAA;AAAA,EAI5H,YAAY;AAAE,WAAO,KAAK;AAAA;AAAA,EAE1B,aAAa,MAAqB,IAAgB;AAAE,WAAO,KAAK,IAAI,KAAK,WAAW,aAAa,MAAM,KAAK,IAAI;AAAA;AAAA,EAChH,iBAAiB,IAAgB;AAAE,WAAO,KAAK,WAAW,iBAAiB,KAAK,IAAI;AAAA;AAAA,EACpF,YAAY,IAAgB,QAAqB;AAAE,WAAO,KAAK,WAAW,UAAU,KAAK,IAAI,KAAK;AAAA;AAAA,EAClG,iBAAiB,IAAgB,QAAiB;AAAE,WAAO,KAAK,WAAW,eAAe,KAAK,IAAI,KAAK;AAAA;AAAA,EACxG,mBAAmB,IAAgB,QAAgB;AAAE,WAAO,KAAK,WAAW,iBAAiB,KAAK,IAAI,KAAK;AAAA;AAAA,EAC3G,6BAA6B,IAAgB,QAAiB;AAAE,WAAO,KAAK,WAAW,2BAA2B,KAAK,IAAI,KAAK;AAAA;AAAA,EAEhI,gBAAgB,IAAgB,OAAe,GAAW,GAAW,GAAW,GAAW;AAAE,WAAO,KAAK,WAAW,mBAAmB,KAAK,IAAI,KAAK,OAAO,GAAG,GAAG,GAAG;AAAA;AAAA,EACrK,qBAAqB,IAAgB,OAAe,GAAW;AAAE,WAAO,KAAK,WAAW,gBAAgB,KAAK,IAAI,KAAK,OAAO;AAAA;AAAA,EAC7H,mBAAmB,IAAgB,OAAe;AAAE,WAAO,KAAK,WAAW,mBAAmB,KAAK,IAAI,KAAK;AAAA;AAAA,EAC5G,oBAAoB,IAAgB,QAAiB;AAAE,WAAO,KAAK,WAAW,kBAAkB,KAAK,IAAI,KAAK;AAAA;AAAA,EAC9G,2BAA2B,IAAgB,MAAc;AAAE,WAAO,KAAK,WAAW,yBAAyB,KAAK,IAAI,KAAK;AAAA;AAAA,EAEzH,UAAU,IAAgB,GAAW,GAAW;AAAE,WAAO,KAAK,WAAW,UAAU,KAAK,IAAI,KAAK,GAAG;AAAA;AAAA,EACpG,SAAS,IAAgB,OAAe,QAAgB;AAAE,WAAO,KAAK,WAAW,OAAO,KAAK,IAAI,KAAK,OAAO;AAAA;AAAA,EAE7G,YAAY,IAAgB,OAAe,QAAgB;AAAE,WAAO,KAAK,WAAW,UAAU,KAAK,IAAI,KAAK,OAAO;AAAA;AAAA,EACnH,WAAW,IAAgB,OAAe,QAAgB;AAAE,WAAO,KAAK,WAAW,iBAAiB,KAAK,IAAI,KAAK,OAAO;AAAA;AAAA,EAKzH,cAAc;AAAE,WAAO,KAAK;AAAA;AAAA,EAI5B,aAAa;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EACpC,cAAc;AAAE,WAAO,KAAK,IAAI,KAAK,SAAS;AAAA;AAAA,EAC9C,aAAa;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EACpC,cAAc;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EACrC,aAAa;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EACpC,cAAc;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EACrC,iBAAiB;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EAExC,WAAW,MAAc;AAAE,WAAO,KAAK,SAAS,UAAU;AAAA;AAAA,EAC1D,cAAc;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EACrC,YAAY;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EACnC,WAAW;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EAClC,cAAc,MAAc;AAAE,WAAO,KAAK,SAAS,aAAa;AAAA;AAAA,EAChE,qBAAqB,KAAa;AAAE,WAAO,KAAK,SAAS,oBAAoB;AAAA;AAAA,EAC7E,WAAW,KAAa;AAAE,WAAO,KAAK,SAAS,UAAU;AAAA;AAAA,EACzD,aAAa,WAAmB,aAAqB;AAAE,WAAO,KAAK,SAAS,YAAY,WAAW;AAAA;AAAA,EAEnG,SAAS,MAAc,OAAe;AAAE,WAAO,KAAK,SAAS,QAAQ,MAAM;AAAA;AAAA,EAC3E,cAAc,MAAc,OAAe;AAAE,WAAO,KAAK,SAAS,aAAa,MAAM;AAAA;AAAA,EACrF,UAAU;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EACjC,YAAY;AAAE,WAAO,KAAK,SAAS;AAAA;AAAA,EACnC,uBAAuB,KAAa;AAAE,WAAO,KAAK,SAAS,sBAAsB;AAAA;AAAA,EACjF,oBAAoB,KAAa;AAAE,WAAO,KAAK,SAAS,mBAAmB;AAAA;AAAA,EAC3E,sBAAsB,KAAa;AAAE,WAAO,KAAK,SAAS,qBAAqB;AAAA;AAAA,EAE/E,kBAAkB,MAAc;AAAE,WAAO,KAAK,SAAS,iBAAiB;AAAA;AAAA,EACxE,kBAAkB,MAAc;AAAE,WAAO,KAAK,SAAS,iBAAiB;AAAA;AAAA,EAExE,aAAa,cAAmD;AAC5D,eAAW,WAAW,cAAc;AAChC,YAAM,EAAE,MAAM,SAAS;AACvB,YAAM,eAAe,IAAI;AACzB,MAAC,KAAK,cAAsB,GAAG;AAAA;AAEnC,WAAO,KAAK;AAAA;AAAA;AAIpB,IAAI","sources":["webpack://JSPatcher/./src/core/workers/ProxyWorker.ts","webpack://JSPatcher/webpack/bootstrap","webpack://JSPatcher/webpack/runtime/create fake namespace object","webpack://JSPatcher/webpack/runtime/define property getters","webpack://JSPatcher/webpack/runtime/ensure chunk","webpack://JSPatcher/webpack/runtime/get javascript chunk filename","webpack://JSPatcher/webpack/runtime/global","webpack://JSPatcher/webpack/runtime/hasOwnProperty shorthand","webpack://JSPatcher/webpack/runtime/make namespace object","webpack://JSPatcher/webpack/runtime/node module decorator","webpack://JSPatcher/webpack/runtime/publicPath","webpack://JSPatcher/webpack/runtime/importScripts chunk loading","webpack://JSPatcher/./src/core/workers/Guido.worker.ts"],"sourcesContent":["import { ProxyWorker } from \"./ProxyWorker.types\";\nimport { TypedMessageEvent, MessagePortResponse, MessagePortRequest } from \"./Worker\";\n\nconst Worker = class {\n    static fnNames: string[] = [];\n    _disposed = false;\n    constructor() {\n        const resolves: Record<number, ((...args: any[]) => any)> = {};\n        const rejects: Record<number, ((...args: any[]) => any)> = {};\n        let messagePortRequestId = -1;\n        const handleDisposed = () => {\n            removeEventListener(\"message\", handleMessage);\n            close();\n        };\n        const handleMessage = async (e: TypedMessageEvent<MessagePortResponse & MessagePortRequest>) => {\n            const { id, call, args, value, error } = e.data;\n            if (call) {\n                const r: MessagePortResponse = { id };\n                try {\n                    r.value = await (this as any)[call](...args);\n                } catch (e) {\n                    r.error = e;\n                }\n                postMessage(r as any);\n                if (this._disposed) handleDisposed();\n            } else {\n                if (error) {\n                    if (rejects[id]) rejects[id](error);\n                    delete rejects[id];\n                    return;\n                }\n                if (resolves[id]) {\n                    resolves[id](value);\n                    delete resolves[id];\n                }\n            }\n        };\n        const call = (call: string, ...args: any[]) => new Promise<any>((resolve, reject) => {\n            const id = messagePortRequestId--;\n            resolves[id] = resolve;\n            rejects[id] = reject;\n            postMessage({ id, call, args });\n        });\n        const Ctor = (this.constructor as typeof ProxyWorker);\n        Ctor.fnNames.forEach(name => (this as any)[name] = (...args: any[]) => call(name, ...args));\n        addEventListener(\"message\", handleMessage);\n    }\n} as typeof ProxyWorker;\n\nexport default Worker;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"js/\" + \"c905f55ecbc3a91ecbea\" + \".worker.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"../\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t\"Guido.worker\": 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkJSPatcher\"] = self[\"webpackChunkJSPatcher\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","import type * as GuidoModule from \"@shren/guidolib\";\nimport { IGuidoFactory, IGuidoWorker } from \"./GuidoWorker.types\";\nimport ProxyWorker from \"./ProxyWorker\";\nimport { MessagePortRequest } from \"./Worker\";\n\nclass Guido extends ProxyWorker<IGuidoWorker> implements IGuidoWorker {\n    private module: GuidoModule;\n    private fEngine: GuidoEngineAdapter;\n    private fPianoRoll: GUIDOPianoRollAdapter;\n    private fScoreMap: GUIDOScoreMap;\n    private fFactory: GUIDOFactoryAdapter;\n    private fSPR: GUIDOReducedProportionalAdapter;\n\n    private $oMap: ClassHandle[] = [];\n\n    resolves: (() => void)[] = [];\n    rejects: ((reason?: any) => void)[] = [];\n    isBusy = false;\n    isReady = false;\n\n    private $2o($: number) {\n        return this.$oMap[$];\n    }\n    private o2$(o: ClassHandle) {\n        const i = this.$oMap.indexOf(o);\n        if (i !== -1) return i;\n        return this.$oMap.push(o) - 1;\n    }\n\n    async init() {\n        if (this.isReady) return Promise.resolve();\n        if (this.isBusy) {\n            return new Promise<void>((resolve, reject) => {\n                this.resolves.push(resolve);\n                this.rejects.push(reject);\n            });\n        }\n        try {\n            this.isBusy = true;\n            const locateFile = (url: string, dir: string) => \"../deps/\" + url;\n            const Module = (await import(\"@shren/guidolib\") as any).default as typeof GuidoModule;\n            this.module = await new Module({ locateFile });\n            this.fEngine = new this.module.GuidoEngineAdapter();\n            this.fScoreMap = new this.module.GUIDOScoreMap();\n            this.fPianoRoll = new this.module.GUIDOPianoRollAdapter();\n            this.fFactory = new this.module.GUIDOFactoryAdapter();\n            this.fSPR = new this.module.GUIDOReducedProportionalAdapter();\n            this.fEngine.init();\n            this.isReady = true;\n            this.isBusy = false;\n            this.resolves.forEach(r => r());\n        } catch (error) {\n            this.rejects.forEach(r => r(error));\n        } finally {\n            this.resolves = [];\n            this.rejects = [];\n        }\n        return Promise.resolve();\n    }\n\n    // ------------------------------------------------------------------------\n    // Guido Engine interface\n    start() { this.fEngine.init(); }\n    shutdown() { this.fEngine.shutdown(); }\n\n    ar2gr(ar: $ARHandler) { return this.o2$(this.fEngine.ar2gr(this.$2o(ar))); }\n    ar2grSettings(ar: $ARHandler, settings: GuidoLayoutSettings) { return this.o2$(this.fEngine.ar2grSettings(this.$2o(ar), settings)); }\n    updateGR(gr: $GRHandler) { return this.fEngine.updateGR(this.$2o(gr)); }\n    updateGRSettings(gr: $GRHandler, settings: GuidoLayoutSettings) { return this.fEngine.updateGRSettings(this.$2o(gr), settings); }\n    freeAR(ar: $ARHandler) { this.fEngine.freeAR(this.$2o(ar)); }\n    freeGR(gr: $GRHandler) { this.fEngine.freeGR(this.$2o(gr)); }\n    getDefaultLayoutSettings() { return this.fEngine.getDefaultLayoutSettings(); }\n\n    resizePageToMusic(gr: $GRHandler) { return this.fEngine.resizePageToMusic(this.$2o(gr)); }\n    getErrorString(errCode: GuidoErrCode) { return this.fEngine.getErrorString(errCode); }\n    showElement(gr: $GRHandler, elt: number, status: boolean) { return this.fEngine.showElement(this.$2o(gr), elt, status); }\n\n    countVoices(ar: $ARHandler) { return this.fEngine.countVoices(this.$2o(ar)); }\n    getPageCount(gr: $GRHandler) { return this.fEngine.getPageCount(this.$2o(gr)); }\n    getSystemCount(gr: $GRHandler, page: number) { return this.fEngine.getSystemCount(this.$2o(gr), page); }\n    duration(gr: $GRHandler) { return this.fEngine.duration(this.$2o(gr)); }\n\n    findEventPage(gr: $GRHandler, date: GuidoDate) { return this.fEngine.findEventPage(this.$2o(gr), date); }\n    findPageAt(gr: $GRHandler, date: GuidoDate) { return this.fEngine.findPageAt(this.$2o(gr), date); }\n    getPageDate(gr: $GRHandler, pageNum: number) { return this.fEngine.getPageDate(this.$2o(gr), pageNum); }\n\n    gr2SVG(gr: $GRHandler, page: number, embedFont: boolean, mappingMode: number) { return this.fEngine.gr2SVG(this.$2o(gr), page, embedFont, mappingMode); }\n    gr2SVGColored(gr: $GRHandler, page: number, r: number, g: number, b: number, embedFont: boolean) { return this.fEngine.gr2SVGColored(this.$2o(gr), page, r, g, b, embedFont); }\n\n    abstractExport(gr: $GRHandler, page: number) { return this.fEngine.abstractExport(this.$2o(gr), page); }\n    binaryExport(gr: $GRHandler, page: number) { return this.fEngine.binaryExport(this.$2o(gr), page); }\n    jsExport(gr: $GRHandler, page: number) { return this.fEngine.javascriptExport(this.$2o(gr), page); }\n\n    setDefaultPageFormat(format: GuidoPageFormat) { this.fEngine.setDefaultPageFormat(format); }\n    getDefaultPageFormat() { return this.fEngine.getDefaultPageFormat(); }\n\n    setDrawBoundingBoxes(bmap: number) { this.fEngine.setDrawBoundingBoxes(bmap); }\n    getDrawBoundingBoxes() { return this.fEngine.getDrawBoundingBoxes(); }\n    getPageFormat(gr: $GRHandler, page: number) { return this.fEngine.getPageFormat(this.$2o(gr), page); }\n\n    unit2CM(val: number) { return this.fEngine.unit2CM(val); }\n    cm2Unit(val: number) { return this.fEngine.cm2Unit(val); }\n    unit2Inches(val: number) { return this.fEngine.unit2Inches(val); }\n    inches2Unit(val: number) { return this.fEngine.inches2Unit(val); }\n    getLineSpace() { return this.fEngine.getLineSpace(); }\n\n    getVersion() { return this.fEngine.getVersion(); }\n    getFloatVersion() { const v = this.fEngine.getVersion(); return parseFloat(v.major + \".\" + v.minor + v.sub); }\n    getVersionStr() { return this.fEngine.getVersionStr(); }\n    checkVersionNums(major: number, minor: number, sub: number) { return this.fEngine.checkVersionNums(major, minor, sub); }\n\n    markVoice(ar: $ARHandler, voicenum: number, date: GuidoDate, duration: GuidoDate, r: number, g: number, b: number) { return this.fEngine.markVoice(this.$2o(ar), voicenum, date, duration, r, g, b); }\n\n    openParser() { return this.o2$(this.fEngine.openParser()); }\n    closeParser(p: $GuidoParser) { return this.fEngine.closeParser(this.$2o(p)); }\n    file2AR(p: $GuidoParser, file: string) { return this.o2$(this.fEngine.file2AR(this.$2o(p), file)); }\n    string2AR(p: $GuidoParser, gmn: string) { return this.o2$(this.fEngine.string2AR(this.$2o(p), gmn)); }\n    parserGetErrorCode(p: $GuidoParser) { return this.fEngine.parserGetErrorCode(this.$2o(p)); }\n\n    openStream() { return this.o2$(this.fEngine.openStream()); }\n    closeStream(s: $GuidoStream) { return this.fEngine.closeStream(this.$2o(s)); }\n    getStream(s: $GuidoStream) { return this.fEngine.getStream(this.$2o(s)); }\n    stream2AR(p: $GuidoParser, stream: $GuidoStream) { return this.o2$(this.fEngine.stream2AR(this.$2o(p), this.$2o(stream))); }\n    writeStream(s: $GuidoStream, str: string) { return this.fEngine.writeStream(this.$2o(s), str); }\n    resetStream(s: $GuidoStream) { return this.fEngine.resetStream(this.$2o(s)); }\n\n    getParsingTime(ar: $ARHandler) { return this.fEngine.getParsingTime(this.$2o(ar)); }\n    getAR2GRTime(gr: $GRHandler) { return this.fEngine.getAR2GRTime(this.$2o(gr)); }\n    getOnDrawTime(gr: $GRHandler) { return this.fEngine.getOnDrawTime(this.$2o(gr)); }\n\n    // ------------------------------------------------------------------------\n    // Guido mappings interface\n    getPageMap(gr: $GRHandler, page: number, w: number, h: number) { return this.fScoreMap.getPageMap(this.$2o(gr), page, w, h); }\n    getStaffMap(gr: $GRHandler, page: number, w: number, h: number, staff: number) { return this.fScoreMap.getStaffMap(this.$2o(gr), page, w, h, staff); }\n    getVoiceMap(gr: $GRHandler, page: number, w: number, h: number, voice: number) { return this.fScoreMap.getVoiceMap(this.$2o(gr), page, w, h, voice); }\n    getSystemMap(gr: $GRHandler, page: number, w: number, h: number) { return this.fScoreMap.getSystemMap(this.$2o(gr), page, w, h); }\n    getTime(date: GuidoDate, map: string) { return this.fScoreMap.getTime(date, map); }\n    getPoint(x: number, y: number, map: string) { return this.fScoreMap.getPoint(x, y, map); }\n    getTimeMap(ar: $ARHandler) { return this.fScoreMap.getTimeMap(this.$2o(ar)); }\n    getPianoRollMap(pr: $PianoRoll, width: number, height: number) { return this.fScoreMap.getPianoRollMap(this.$2o(pr), width, height); }\n\n    // ------------------------------------------------------------------------\n    // Guido piano roll interface\n    pianoRoll() { return this.fPianoRoll; }\n\n    ar2PianoRoll(type: PianoRollType, ar: $ARHandler) { return this.o2$(this.fPianoRoll.ar2PianoRoll(type, this.$2o(ar))); }\n    destroyPianoRoll(pr: $PianoRoll) { return this.fPianoRoll.destroyPianoRoll(this.$2o(pr)); }\n    prSetLimits(pr: $PianoRoll, limits: LimitParams) { return this.fPianoRoll.setLimits(this.$2o(pr), limits); }\n    prEnableKeyboard(pr: $PianoRoll, status: boolean) { return this.fPianoRoll.enableKeyboard(this.$2o(pr), status); }\n    prGetKeyboardWidth(pr: $PianoRoll, height: number) { return this.fPianoRoll.getKeyboardWidth(this.$2o(pr), height); }\n    prEnableAutoVoicesColoration(pr: $PianoRoll, status: boolean) { return this.fPianoRoll.enableAutoVoicesColoration(this.$2o(pr), status); }\n\n    prSetVoiceColor(pr: $PianoRoll, voice: number, r: number, g: number, b: number, a: number) { return this.fPianoRoll.setRGBColorToVoice(this.$2o(pr), voice, r, g, b, a); }\n    prSetVoiceNamedColor(pr: $PianoRoll, voice: number, c: string) { return this.fPianoRoll.setColorToVoice(this.$2o(pr), voice, c); }\n    prRemoveVoiceColor(pr: $PianoRoll, voice: number) { return this.fPianoRoll.removeColorToVoice(this.$2o(pr), voice); }\n    prEnableMeasureBars(pr: $PianoRoll, status: boolean) { return this.fPianoRoll.enableMeasureBars(this.$2o(pr), status); }\n    prSetPitchLinesDisplayMode(pr: $PianoRoll, mode: number) { return this.fPianoRoll.setPitchLinesDisplayMode(this.$2o(pr), mode); }\n\n    proll2svg(pr: $PianoRoll, w: number, h: number) { return this.fPianoRoll.svgExport(this.$2o(pr), w, h); }\n    prGetMap(pr: $PianoRoll, width: number, height: number) { return this.fPianoRoll.getMap(this.$2o(pr), width, height); }\n\n    prSvgExport(pr: $PianoRoll, width: number, height: number) { return this.fPianoRoll.svgExport(this.$2o(pr), width, height); }\n    prJsExport(pr: $PianoRoll, width: number, height: number) { return this.fPianoRoll.javascriptExport(this.$2o(pr), width, height); }\n\n    // ------------------------------------------------------------------------\n    // Reduced Proportional representation\n    // no relay for the interface\n    reducedProp() { return this.fSPR; }\n\n    // ------------------------------------------------------------------------\n    // Guido factory interface\n    _openMusic() { return this.fFactory.openMusic(); }\n    _closeMusic() { return this.o2$(this.fFactory.closeMusic()); }\n    _openVoice() { return this.fFactory.openVoice(); }\n    _closeVoice() { return this.fFactory.closeVoice(); }\n    _openChord() { return this.fFactory.openChord(); }\n    _closeChord() { return this.fFactory.closeChord(); }\n    _insertCommata() { return this.fFactory.insertCommata(); }\n\n    _openEvent(name: string) { return this.fFactory.openEvent(name); }\n    _closeEvent() { return this.fFactory.closeEvent(); }\n    _addSharp() { return this.fFactory.addSharp(); }\n    _addFlat() { return this.fFactory.addFlat(); }\n    _setEventDots(dots: number) { return this.fFactory.setEventDots(dots); }\n    _setEventAccidentals(acc: number) { return this.fFactory.setEventAccidentals(acc); }\n    _setOctave(oct: number) { return this.fFactory.setOctave(oct); }\n    _setDuration(numerator: number, denominator: number) { return this.fFactory.setDuration(numerator, denominator); }\n\n    _openTag(name: string, tagID: number) { return this.fFactory.openTag(name, tagID); }\n    _openRangeTag(name: string, tagID: number) { return this.fFactory.openRangeTag(name, tagID); }\n    _endTag() { return this.fFactory.endTag(); }\n    _closeTag() { return this.fFactory.closeTag(); }\n    _addTagParameterString(val: string) { return this.fFactory.addTagParameterString(val); }\n    _addTagParameterInt(val: number) { return this.fFactory.addTagParameterInt(val); }\n    _addTagParameterFloat(val: number) { return this.fFactory.addTagParameterFloat(val); }\n\n    _setParameterName(name: string) { return this.fFactory.setParameterName(name); }\n    _setParameterUnit(unit: string) { return this.fFactory.setParameterUnit(unit); }\n\n    __closeMusic(factoryQueue: MessagePortRequest<IGuidoFactory>[]) {\n        for (const request of factoryQueue) {\n            const { call, args } = request;\n            const internalCall = `_${call}` as `_${keyof IGuidoFactory}`;\n            (this[internalCall] as any)(...args);\n        }\n        return this._closeMusic();\n    }\n}\n// eslint-disable-next-line no-new\nnew Guido();\n"],"names":[],"sourceRoot":""}