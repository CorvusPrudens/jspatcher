{"version":3,"sources":["webpack://JSPatcher/./src/core/workers/Guido.worker.ts","webpack://JSPatcher/./src/core/workers/ProxyWorker.ts","webpack://JSPatcher/webpack/bootstrap","webpack://JSPatcher/webpack/runtime/create fake namespace object","webpack://JSPatcher/webpack/runtime/define property getters","webpack://JSPatcher/webpack/runtime/ensure chunk","webpack://JSPatcher/webpack/runtime/get javascript chunk filename","webpack://JSPatcher/webpack/runtime/global","webpack://JSPatcher/webpack/runtime/hasOwnProperty shorthand","webpack://JSPatcher/webpack/runtime/make namespace object","webpack://JSPatcher/webpack/runtime/node module decorator","webpack://JSPatcher/webpack/runtime/publicPath","webpack://JSPatcher/webpack/runtime/importScripts chunk loading","webpack://JSPatcher/webpack/startup"],"names":["Guido","ProxyWorker","$2o","$","$oMap","o2$","o","i","indexOf","push","init","console","log","locateFile","url","dir","Module","default","Promise","resolve","reject","module","onRuntimeInitialized","fEngine","GuidoEngineAdapter","fScoreMap","GUIDOScoreMap","fPianoRoll","GUIDOPianoRollAdapter","fFactory","GUIDOFactoryAdapter","fSPR","GUIDOReducedProportionalAdapter","error","start","shutdown","ar2gr","ar","ar2grSettings","settings","updateGR","gr","updateGRSettings","freeAR","freeGR","getDefaultLayoutSettings","resizePageToMusic","getErrorString","errCode","showElement","elt","status","countVoices","getPageCount","getSystemCount","page","duration","findEventPage","date","findPageAt","getPageDate","pageNum","gr2SVG","embedFont","mappingMode","gr2SVGColored","r","g","b","abstractExport","binaryExport","jsExport","javascriptExport","setDefaultPageFormat","format","getDefaultPageFormat","setDrawBoundingBoxes","bmap","getDrawBoundingBoxes","getPageFormat","unit2CM","val","cm2Unit","unit2Inches","inches2Unit","getLineSpace","getVersion","getFloatVersion","v","parseFloat","major","minor","sub","getVersionStr","checkVersionNums","markVoice","voicenum","openParser","closeParser","p","file2AR","file","string2AR","gmn","parserGetErrorCode","openStream","closeStream","s","getStream","stream2AR","stream","writeStream","str","resetStream","getParsingTime","getAR2GRTime","getOnDrawTime","getPageMap","w","h","getStaffMap","staff","getVoiceMap","voice","getSystemMap","getTime","map","getPoint","x","y","getTimeMap","getPianoRollMap","pr","width","height","pianoRoll","ar2PianoRoll","type","destroyPianoRoll","prSetLimits","limits","setLimits","prEnableKeyboard","enableKeyboard","prGetKeyboardWidth","getKeyboardWidth","prEnableAutoVoicesColoration","enableAutoVoicesColoration","prSetVoiceColor","a","setRGBColorToVoice","prSetVoiceNamedColor","c","setColorToVoice","prRemoveVoiceColor","removeColorToVoice","prEnableMeasureBars","enableMeasureBars","prSetPitchLinesDisplayMode","mode","setPitchLinesDisplayMode","proll2svg","svgExport","prGetMap","getMap","prSvgExport","prJsExport","reducedProp","openMusic","closeMusic","openVoice","closeVoice","openChord","closeChord","insertCommata","openEvent","name","closeEvent","addSharp","addFlat","setEventDots","dots","setEventAccidentals","acc","setOctave","oct","setDuration","numerator","denominator","openTag","tagID","openRangeTag","endTag","closeTag","addTagParameterString","addTagParameterInt","addTagParameterFloat","setParameterName","setParameterUnit","unit","Worker","fnNames","constructor","resolves","rejects","messagePortRequestId","handleMessage","e","id","call","args","value","data","postMessage","Ctor","forEach","addEventListener"],"mappings":"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;AACAF,gBAAQ,CAACK,EAAD,CAAR,GAAe7L,OAAf;AACAyL,eAAO,CAACI,EAAD,CAAP,GAAc5L,MAAd;AACAiM,mBAAW,CAAC;AAAEL,YAAF;AAAMC,cAAI,EAAJA,KAAN;AAAYC;AAAZ,SAAD,CAAX;AACH,OAL8C,CAAlC;AAAA,KAAb;;AAMA,UAAMI,IAAI,GAAI,KAAKZ,WAAnB;AACAY,QAAI,CAACb,OAAL,CAAac,OAAb,CAAqBvC,IAAI,IAAK,IAAD,CAAcA,IAAd,IAAsB;AAAA,yCAAIkC,IAAJ;AAAIA,YAAJ;AAAA;;AAAA,aAAoBD,IAAI,CAACjC,IAAD,EAAO,GAAGkC,IAAV,CAAxB;AAAA,KAAnD;AACAM,oBAAgB,CAAC,SAAD,EAAYV,aAAZ,CAAhB;AACH;;AAvCgB,CAArB;AA0CA,iEAAeN,MAAf,E;;;;;;UC7CA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,sDAAsD;WACtD,qCAAqC,iEAAiE;WACtG;WACA;WACA;WACA;WACA;WACA,E;;;;;WCzBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF,E;;;;;WCRA;WACA;WACA;WACA;WACA,E;;;;;WCJA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA,CAAC,I;;;;;WCPD,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;WCNA;WACA;WACA;WACA;WACA,E;;;;;WCJA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,0C;;;;;WCfA;;WAEA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;;WAEA,kB;;;;UClCA;UACA;UACA;UACA","file":"js/d2e5ff1fb6356942f988.worker.js","sourcesContent":["import type * as GuidoModule from \"@shren/guidolib\";\nimport { IGuidoWorker } from \"./GuidoWorker.types\";\nimport ProxyWorker from \"./ProxyWorker\";\n\nclass Guido extends ProxyWorker<IGuidoWorker> implements IGuidoWorker {\n    private module: GuidoModule;\n    private fEngine: GuidoEngineAdapter;\n    private fPianoRoll: GUIDOPianoRollAdapter;\n    private fScoreMap: GUIDOScoreMap;\n    private fFactory: GUIDOFactoryAdapter;\n    private fSPR: GUIDOReducedProportionalAdapter;\n\n    private $oMap: ClassHandle[] = [];\n\n    private $2o($: number) {\n        return this.$oMap[$];\n    }\n    private o2$(o: ClassHandle) {\n        const i = this.$oMap.indexOf(o);\n        if (i !== -1) return i;\n        return this.$oMap.push(o) - 1;\n    }\n\n    async init() {\n        console.log(\"init\");\n        const locateFile = (url: string, dir: string) => \"../deps/\" + url;\n        const Module = (await import(\"@shren/guidolib\") as any).default as typeof GuidoModule;\n        console.log(Module);\n        return new Promise<void>((resolve, reject) => {\n            try {\n                const module = new Module({ locateFile });\n                module.onRuntimeInitialized = () => {\n                    this.module = module;\n                    this.fEngine = new this.module.GuidoEngineAdapter();\n                    this.fScoreMap = new this.module.GUIDOScoreMap();\n                    this.fPianoRoll = new this.module.GUIDOPianoRollAdapter();\n                    this.fFactory = new this.module.GUIDOFactoryAdapter();\n                    this.fSPR = new this.module.GUIDOReducedProportionalAdapter();\n                    this.fEngine.init();\n                    resolve();\n                };\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n\n    // ------------------------------------------------------------------------\n    // Guido Engine interface\n    start() { this.fEngine.init(); }\n    shutdown() { this.fEngine.shutdown(); }\n\n    ar2gr(ar: $ARHandler) { return this.o2$(this.fEngine.ar2gr(this.$2o(ar))); }\n    ar2grSettings(ar: $ARHandler, settings: GuidoLayoutSettings) { return this.o2$(this.fEngine.ar2grSettings(this.$2o(ar), settings)); }\n    updateGR(gr: $GRHandler) { return this.fEngine.updateGR(this.$2o(gr)); }\n    updateGRSettings(gr: $GRHandler, settings: GuidoLayoutSettings) { return this.fEngine.updateGRSettings(this.$2o(gr), settings); }\n    freeAR(ar: $ARHandler) { this.fEngine.freeAR(this.$2o(ar)); }\n    freeGR(gr: $GRHandler) { this.fEngine.freeGR(this.$2o(gr)); }\n    getDefaultLayoutSettings() { return this.fEngine.getDefaultLayoutSettings(); }\n\n    resizePageToMusic(gr: $GRHandler) { return this.fEngine.resizePageToMusic(this.$2o(gr)); }\n    getErrorString(errCode: GuidoErrCode) { return this.fEngine.getErrorString(errCode); }\n    showElement(gr: $GRHandler, elt: number, status: boolean) { return this.fEngine.showElement(this.$2o(gr), elt, status); }\n\n    countVoices(ar: $ARHandler) { return this.fEngine.countVoices(this.$2o(ar)); }\n    getPageCount(gr: $GRHandler) { return this.fEngine.getPageCount(this.$2o(gr)); }\n    getSystemCount(gr: $GRHandler, page: number) { return this.fEngine.getSystemCount(this.$2o(gr), page); }\n    duration(gr: $GRHandler) { return this.fEngine.duration(this.$2o(gr)); }\n\n    findEventPage(gr: $GRHandler, date: GuidoDate) { return this.fEngine.findEventPage(this.$2o(gr), date); }\n    findPageAt(gr: $GRHandler, date: GuidoDate) { return this.fEngine.findPageAt(this.$2o(gr), date); }\n    getPageDate(gr: $GRHandler, pageNum: number) { return this.fEngine.getPageDate(this.$2o(gr), pageNum); }\n\n    gr2SVG(gr: $GRHandler, page: number, embedFont: boolean, mappingMode: number) { return this.fEngine.gr2SVG(this.$2o(gr), page, embedFont, mappingMode); }\n    gr2SVGColored(gr: $GRHandler, page: number, r: number, g: number, b: number, embedFont: boolean) { return this.fEngine.gr2SVGColored(this.$2o(gr), page, r, g, b, embedFont); }\n\n    abstractExport(gr: $GRHandler, page: number) { return this.fEngine.abstractExport(this.$2o(gr), page); }\n    binaryExport(gr: $GRHandler, page: number) { return this.fEngine.binaryExport(this.$2o(gr), page); }\n    jsExport(gr: $GRHandler, page: number) { return this.fEngine.javascriptExport(this.$2o(gr), page); }\n\n    setDefaultPageFormat(format: GuidoPageFormat) { this.fEngine.setDefaultPageFormat(format); }\n    getDefaultPageFormat() { return this.fEngine.getDefaultPageFormat(); }\n\n    setDrawBoundingBoxes(bmap: number) { this.fEngine.setDrawBoundingBoxes(bmap); }\n    getDrawBoundingBoxes() { return this.fEngine.getDrawBoundingBoxes(); }\n    getPageFormat(gr: $GRHandler, page: number) { return this.fEngine.getPageFormat(this.$2o(gr), page); }\n\n    unit2CM(val: number) { return this.fEngine.unit2CM(val); }\n    cm2Unit(val: number) { return this.fEngine.cm2Unit(val); }\n    unit2Inches(val: number) { return this.fEngine.unit2Inches(val); }\n    inches2Unit(val: number) { return this.fEngine.inches2Unit(val); }\n    getLineSpace() { return this.fEngine.getLineSpace(); }\n\n    getVersion() { return this.fEngine.getVersion(); }\n    getFloatVersion() { const v = this.fEngine.getVersion(); return parseFloat(v.major + \".\" + v.minor + v.sub); }\n    getVersionStr() { return this.fEngine.getVersionStr(); }\n    checkVersionNums(major: number, minor: number, sub: number) { return this.fEngine.checkVersionNums(major, minor, sub); }\n\n    markVoice(ar: $ARHandler, voicenum: number, date: GuidoDate, duration: GuidoDate, r: number, g: number, b: number) { return this.fEngine.markVoice(this.$2o(ar), voicenum, date, duration, r, g, b); }\n\n    openParser() { return this.o2$(this.fEngine.openParser()); }\n    closeParser(p: $GuidoParser) { return this.fEngine.closeParser(this.$2o(p)); }\n    file2AR(p: $GuidoParser, file: string) { return this.o2$(this.fEngine.file2AR(this.$2o(p), file)); }\n    string2AR(p: $GuidoParser, gmn: string) { return this.o2$(this.fEngine.string2AR(this.$2o(p), gmn)); }\n    parserGetErrorCode(p: $GuidoParser) { return this.fEngine.parserGetErrorCode(this.$2o(p)); }\n\n    openStream() { return this.o2$(this.fEngine.openStream()); }\n    closeStream(s: $GuidoStream) { return this.fEngine.closeStream(this.$2o(s)); }\n    getStream(s: $GuidoStream) { return this.fEngine.getStream(this.$2o(s)); }\n    stream2AR(p: $GuidoParser, stream: $GuidoStream) { return this.o2$(this.fEngine.stream2AR(this.$2o(p), this.$2o(stream))); }\n    writeStream(s: $GuidoStream, str: string) { return this.fEngine.writeStream(this.$2o(s), str); }\n    resetStream(s: $GuidoStream) { return this.fEngine.resetStream(this.$2o(s)); }\n\n    getParsingTime(ar: $ARHandler) { return this.fEngine.getParsingTime(this.$2o(ar)); }\n    getAR2GRTime(gr: $GRHandler) { return this.fEngine.getAR2GRTime(this.$2o(gr)); }\n    getOnDrawTime(gr: $GRHandler) { return this.fEngine.getOnDrawTime(this.$2o(gr)); }\n\n    // ------------------------------------------------------------------------\n    // Guido mappings interface\n    getPageMap(gr: $GRHandler, page: number, w: number, h: number) { return this.fScoreMap.getPageMap(this.$2o(gr), page, w, h); }\n    getStaffMap(gr: $GRHandler, page: number, w: number, h: number, staff: number) { return this.fScoreMap.getStaffMap(this.$2o(gr), page, w, h, staff); }\n    getVoiceMap(gr: $GRHandler, page: number, w: number, h: number, voice: number) { return this.fScoreMap.getVoiceMap(this.$2o(gr), page, w, h, voice); }\n    getSystemMap(gr: $GRHandler, page: number, w: number, h: number) { return this.fScoreMap.getSystemMap(this.$2o(gr), page, w, h); }\n    getTime(date: GuidoDate, map: string) { return this.fScoreMap.getTime(date, map); }\n    getPoint(x: number, y: number, map: string) { return this.fScoreMap.getPoint(x, y, map); }\n    getTimeMap(ar: $ARHandler) { return this.fScoreMap.getTimeMap(this.$2o(ar)); }\n    getPianoRollMap(pr: $PianoRoll, width: number, height: number) { return this.fScoreMap.getPianoRollMap(this.$2o(pr), width, height); }\n\n    // ------------------------------------------------------------------------\n    // Guido piano roll interface\n    pianoRoll() { return this.fPianoRoll; }\n\n    ar2PianoRoll(type: PianoRollType, ar: $ARHandler) { return this.o2$(this.fPianoRoll.ar2PianoRoll(type, this.$2o(ar))); }\n    destroyPianoRoll(pr: $PianoRoll) { return this.fPianoRoll.destroyPianoRoll(this.$2o(pr)); }\n    prSetLimits(pr: $PianoRoll, limits: LimitParams) { return this.fPianoRoll.setLimits(this.$2o(pr), limits); }\n    prEnableKeyboard(pr: $PianoRoll, status: boolean) { return this.fPianoRoll.enableKeyboard(this.$2o(pr), status); }\n    prGetKeyboardWidth(pr: $PianoRoll, height: number) { return this.fPianoRoll.getKeyboardWidth(this.$2o(pr), height); }\n    prEnableAutoVoicesColoration(pr: $PianoRoll, status: boolean) { return this.fPianoRoll.enableAutoVoicesColoration(this.$2o(pr), status); }\n\n    prSetVoiceColor(pr: $PianoRoll, voice: number, r: number, g: number, b: number, a: number) { return this.fPianoRoll.setRGBColorToVoice(this.$2o(pr), voice, r, g, b, a); }\n    prSetVoiceNamedColor(pr: $PianoRoll, voice: number, c: string) { return this.fPianoRoll.setColorToVoice(this.$2o(pr), voice, c); }\n    prRemoveVoiceColor(pr: $PianoRoll, voice: number) { return this.fPianoRoll.removeColorToVoice(this.$2o(pr), voice); }\n    prEnableMeasureBars(pr: $PianoRoll, status: boolean) { return this.fPianoRoll.enableMeasureBars(this.$2o(pr), status); }\n    prSetPitchLinesDisplayMode(pr: $PianoRoll, mode: number) { return this.fPianoRoll.setPitchLinesDisplayMode(this.$2o(pr), mode); }\n\n    proll2svg(pr: $PianoRoll, w: number, h: number) { return this.fPianoRoll.svgExport(this.$2o(pr), w, h); }\n    prGetMap(pr: $PianoRoll, width: number, height: number) { return this.fPianoRoll.getMap(this.$2o(pr), width, height); }\n\n    prSvgExport(pr: $PianoRoll, width: number, height: number) { return this.fPianoRoll.svgExport(this.$2o(pr), width, height); }\n    prJsExport(pr: $PianoRoll, width: number, height: number) { return this.fPianoRoll.javascriptExport(this.$2o(pr), width, height); }\n\n    // ------------------------------------------------------------------------\n    // Reduced Proportional representation\n    // no relay for the interface\n    reducedProp() { return this.fSPR; }\n\n    // ------------------------------------------------------------------------\n    // Guido factory interface\n    openMusic() { return this.fFactory.openMusic(); }\n    closeMusic() { return this.o2$(this.fFactory.closeMusic()); }\n    openVoice() { return this.fFactory.openVoice(); }\n    closeVoice() { return this.fFactory.closeVoice(); }\n    openChord() { return this.fFactory.openChord(); }\n    closeChord() { return this.fFactory.closeChord(); }\n    insertCommata() { return this.fFactory.insertCommata(); }\n\n    openEvent(name: string) { return this.fFactory.openEvent(name); }\n    closeEvent() { return this.fFactory.closeEvent(); }\n    addSharp() { return this.fFactory.addSharp(); }\n    addFlat() { return this.fFactory.addFlat(); }\n    setEventDots(dots: number) { return this.fFactory.setEventDots(dots); }\n    setEventAccidentals(acc: number) { return this.fFactory.setEventAccidentals(acc); }\n    setOctave(oct: number) { return this.fFactory.setOctave(oct); }\n    setDuration(numerator: number, denominator: number) { return this.fFactory.setDuration(numerator, denominator); }\n\n    openTag(name: string, tagID: number) { return this.fFactory.openTag(name, tagID); }\n    openRangeTag(name: string, tagID: number) { return this.fFactory.openRangeTag(name, tagID); }\n    endTag() { return this.fFactory.endTag(); }\n    closeTag() { return this.fFactory.closeTag(); }\n    addTagParameterString(val: string) { return this.fFactory.addTagParameterString(val); }\n    addTagParameterInt(val: number) { return this.fFactory.addTagParameterInt(val); }\n    addTagParameterFloat(val: number) { return this.fFactory.addTagParameterFloat(val); }\n\n    setParameterName(name: string) { return this.fFactory.setParameterName(name); }\n    setParameterUnit(unit: string) { return this.fFactory.setParameterUnit(unit); }\n}\n// eslint-disable-next-line no-new\nnew Guido();\n","import { ProxyWorker } from \"./ProxyWorker.types\";\nimport { TypedMessageEvent, MessagePortResponse, MessagePortRequest } from \"./Worker\";\n\nconst Worker = class {\n    static get fnNames(): string[] {\n        return [];\n    }\n    constructor() {\n        const resolves: Record<number, ((...args: any[]) => any)> = {};\n        const rejects: Record<number, ((...args: any[]) => any)> = {};\n        let messagePortRequestId = -1;\n        const handleMessage = async (e: TypedMessageEvent<MessagePortResponse & MessagePortRequest>) => {\n            const { id, call, args, value, error } = e.data;\n            if (call) {\n                const r: MessagePortResponse = { id };\n                try {\n                    r.value = await (this as any)[call](...args);\n                } catch (e) {\n                    r.error = e;\n                }\n                postMessage(r as any);\n            } else {\n                if (error) {\n                    if (rejects[id]) rejects[id](error);\n                    delete rejects[id];\n                    return;\n                }\n                if (resolves[id]) {\n                    resolves[id](value);\n                    delete resolves[id];\n                }\n            }\n        };\n        const call = (call: string, ...args: any[]) => new Promise<any>((resolve, reject) => {\n            const id = messagePortRequestId--;\n            resolves[id] = resolve;\n            rejects[id] = reject;\n            postMessage({ id, call, args });\n        });\n        const Ctor = (this.constructor as typeof ProxyWorker);\n        Ctor.fnNames.forEach(name => (this as any)[name] = (...args: any[]) => call(name, ...args));\n        addEventListener(\"message\", handleMessage);\n    }\n} as typeof ProxyWorker;\n\nexport default Worker;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var getProto = Object.getPrototypeOf ? (obj) => Object.getPrototypeOf(obj) : (obj) => obj.__proto__;\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(key => def[key] = () => value[key]);\n\t}\n\tdef['default'] = () => value;\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"js/\" + \"0bbfbb294afa5615f79c\" + \".worker.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t\"Guido.worker\": 1\n};\n\n// importScripts chunk loading\nvar chunkLoadingCallback = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\timportScripts(\"../\" + __webpack_require__.u(chunkId));\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkJSPatcher\"] = self[\"webpackChunkJSPatcher\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = chunkLoadingCallback;\n\n// no HMR\n\n// no HMR manifest","// startup\n// Load entry module\n__webpack_require__(\"./node_modules/babel-loader/lib/index.js!./src/core/workers/Guido.worker.ts\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}