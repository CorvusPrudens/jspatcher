{"version":3,"file":"js/7f6b8d415915aa46eea1.worklet.js","mappings":"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","sources":["webpack://JSPatcher/./src/core/PackageManager.ts","webpack://JSPatcher/./src/core/Project.ts","webpack://JSPatcher/./src/core/TaskMgr.ts","webpack://JSPatcher/./src/core/WorkletGlobalPackageManager.ts","webpack://JSPatcher/./src/core/WorkletSDK.ts","webpack://JSPatcher/./src/core/audio/TempAudioFile.ts","webpack://JSPatcher/./src/core/file/AbstractProjectFile.ts","webpack://JSPatcher/./src/core/file/AbstractProjectFolder.ts","webpack://JSPatcher/./src/core/file/AbstractProjectItem.ts","webpack://JSPatcher/./src/core/file/AbstractProjectItemManager.ts","webpack://JSPatcher/./src/core/file/FileEditor.ts","webpack://JSPatcher/./src/core/file/FileInstance.ts","webpack://JSPatcher/./src/core/file/History.ts","webpack://JSPatcher/./src/core/file/PersistentProjectFile.ts","webpack://JSPatcher/./src/core/file/PersistentProjectFolder.ts","webpack://JSPatcher/./src/core/file/TempData.ts","webpack://JSPatcher/./src/core/file/TemporaryProjectFile.ts","webpack://JSPatcher/./src/core/file/TemporaryProjectFolder.ts","webpack://JSPatcher/./src/core/file/TemporaryProjectItemManager.ts","webpack://JSPatcher/./src/core/file/WorkletProjectItemManager.ts","webpack://JSPatcher/./src/core/objects/base/AbstractObject.ts","webpack://JSPatcher/./src/core/objects/base/Bang.ts","webpack://JSPatcher/./src/core/objects/base/BaseObject.ts","webpack://JSPatcher/./src/core/objects/base/Comment.ts","webpack://JSPatcher/./src/core/objects/base/generateRemotedObject.ts","webpack://JSPatcher/./src/core/objects/base/index.jsdsppkg.aw.ts","webpack://JSPatcher/./src/core/objects/globalThis/index.jsdsppkg.ts","webpack://JSPatcher/./src/core/objects/importer/Func.tsx","webpack://JSPatcher/./src/core/objects/importer/Getter.ts","webpack://JSPatcher/./src/core/objects/importer/ImportedObject.tsx","webpack://JSPatcher/./src/core/objects/importer/Importer.ts","webpack://JSPatcher/./src/core/objects/importer/Method.ts","webpack://JSPatcher/./src/core/objects/importer/New.tsx","webpack://JSPatcher/./src/core/objects/importer/Property.ts","webpack://JSPatcher/./src/core/objects/importer/RemotedImporter.ts","webpack://JSPatcher/./src/core/objects/importer/Setter.ts","webpack://JSPatcher/./src/core/objects/importer/SetterGetter.ts","webpack://JSPatcher/./src/core/objects/importer/StaticGetter.ts","webpack://JSPatcher/./src/core/objects/importer/StaticMethod.ts","webpack://JSPatcher/./src/core/objects/importer/StaticProperty.ts","webpack://JSPatcher/./src/core/objects/importer/StaticSetter.ts","webpack://JSPatcher/./src/core/objects/importer/StaticSetterGetter.ts","webpack://JSPatcher/./src/core/objects/jsaw/AudioIn.ts","webpack://JSPatcher/./src/core/objects/jsaw/AudioOut.ts","webpack://JSPatcher/./src/core/objects/jsaw/In.ts","webpack://JSPatcher/./src/core/objects/jsaw/Out.ts","webpack://JSPatcher/./src/core/objects/jsaw/Param.ts","webpack://JSPatcher/./src/core/objects/jsaw/index.jsdsppkg.aw.ts","webpack://JSPatcher/./src/core/patcher/Box.ts","webpack://JSPatcher/./src/core/patcher/FaustPatcherAnalyser.ts","webpack://JSPatcher/./src/core/patcher/Line.ts","webpack://JSPatcher/./src/core/patcher/Patcher.ts","webpack://JSPatcher/./src/core/patcher/PatcherEditor.ts","webpack://JSPatcher/./src/core/patcher/PatcherHistory.ts","webpack://JSPatcher/./src/core/patcher/TempPatcherFile.ts","webpack://JSPatcher/./src/core/text/TempTextFile.ts","webpack://JSPatcher/./src/core/worklets/AudioWorkletProxyProcessor.ts","webpack://JSPatcher/./src/utils/TypedEventEmitter.ts","webpack://JSPatcher/./src/utils/buffer.ts","webpack://JSPatcher/./src/utils/math.ts","webpack://JSPatcher/./src/utils/symbols.ts","webpack://JSPatcher/./src/utils/utils.ts","webpack://JSPatcher/webpack/bootstrap","webpack://JSPatcher/webpack/runtime/compat get default export","webpack://JSPatcher/webpack/runtime/define property getters","webpack://JSPatcher/webpack/runtime/ensure chunk","webpack://JSPatcher/webpack/runtime/hasOwnProperty shorthand","webpack://JSPatcher/webpack/runtime/make namespace object","webpack://JSPatcher/webpack/runtime/publicPath","webpack://JSPatcher/./src/core/worklets/WorkletEnv.worklet.ts"],"sourcesContent":["import TypedEventEmitter from \"../utils/TypedEventEmitter\";\nimport { ImporterDirSelfObject } from \"../utils/symbols\";\nimport { isJSPatcherObjectConstructor, IJSPatcherObject } from \"./objects/base/AbstractObject\";\nimport type { TFlatPackage, TPackage } from \"./types\";\nimport type Patcher from \"./patcher/Patcher\";\n\nexport interface PackageManagerEventMap {\n    \"pathDuplicated\": string;\n}\nexport interface PackageInfo {\n    id: string;\n    url: string;\n    enabled: boolean;\n    isBuiltIn: boolean;\n}\n\nexport interface IPackageManager extends TypedEventEmitter<PackageManagerEventMap> {\n    pkg: TPackage;\n    lib: TFlatPackage;\n    readonly packagesInfo: PackageInfo[];\n    init(): Promise<void>;\n    importFromURL(url: string, id: string): Promise<void>;\n    searchInPkg(query: string, limit: number, staticMethodOnly: boolean, pkg: TPackage, path?: string[]): { path: string[]; object?: typeof IJSPatcherObject | TPackage }[];\n    searchInLib(query: string, limit: number, staticMethodOnly: boolean, lib: TFlatPackage): { key: string; object: typeof IJSPatcherObject }[];\n    getFromPath(pathIn: (string | symbol)[], pkg: TPackage): TPackage | typeof IJSPatcherObject;\n}\n\nexport default class PackageManager extends TypedEventEmitter<PackageManagerEventMap> implements IPackageManager {\n    private readonly patcher: Patcher;\n    pkg: TPackage;\n    lib: TFlatPackage;\n    get global() {\n        return this.patcher.env.pkgMgr;\n    }\n    get mode() {\n        return this.patcher.props.mode;\n    }\n    get patcherDependencies() {\n        return this.patcher.props.dependencies;\n    }\n    get patcherDependenciesNames() {\n        return this.patcher.props.dependencies.map(t => t[0]);\n    }\n    get packagesInfo() {\n        return Object.keys(this.global[this.mode]).map(id => ({\n            id,\n            isBuiltIn: this.global.builtInPackagesNames.indexOf(id) !== -1,\n            url: this.global.importedPackages.find(p => p.name === id)?.baseUrl,\n            enabled: id in this.pkg\n        } as PackageInfo));\n    }\n    constructor(patcher: Patcher) {\n        super();\n        this.patcher = patcher;\n    }\n    async init() {\n        await this.loadPatcherDependencies();\n        this.pkg = {};\n        for (const pkgName of Object.keys(this.global[this.mode]).sort((a, b) => (b === \"globalThis\" ? -1 : 1))) {\n            if (this.global.builtInPackagesNames.indexOf(pkgName) !== -1) {\n                const pkg = this.global[this.mode][pkgName];\n                if (pkg) this.pkg[pkgName] = pkg;\n            }\n        }\n        for (const pkgName of this.patcherDependenciesNames) {\n            const pkg = this.global[this.mode][pkgName];\n            if (pkg) this.pkg[pkgName] = pkg;\n        }\n        this.lib = this.packageRegister(this.pkg);\n        this.emitLibChanged();\n    }\n    async loadPatcherDependencies() {\n        try {\n            await this.patcher.env.taskMgr.newTask(this, `${this.patcher.file?.name || \"\"} Loading dependencies`, async (onUpdate: (newMsg: string) => any) => {\n                for (let i = 0; i < this.patcherDependencies.length; i++) {\n                    const [name, url] = this.patcherDependencies[i];\n                    onUpdate(`${name} from ${url}`);\n                    if (this.global[this.mode][name]) return;\n                    try {\n                        await this.global.importFromURL?.(url, name);\n                    } catch (e) {\n                        throw new Error(`Loading dependency: ${name} from ${url} failed`);\n                    }\n                }\n            });\n        } catch (error) {\n            this.patcher.error((error as Error).message);\n        }\n    }\n    async importFromURL(url: string, id: string) {\n        if (!this.global.importFromURL) throw new Error(\"Cannot import from this context\");\n        await this.global.importFromURL(url, id);\n        this.init();\n        this.emitLibChanged();\n    }\n    emitLibChanged() {\n        this.patcher.emit(\"libChanged\", { pkg: this.pkg, lib: this.lib });\n    }\n    packageRegister(pkg: TPackage, libOut: TFlatPackage = {}, rootifyDepth = Infinity, pathIn?: string[]) {\n        const path = pathIn ? pathIn.slice() : [];\n        if (path.length && ImporterDirSelfObject in pkg) {\n            const el = pkg[ImporterDirSelfObject as any];\n            if (isJSPatcherObjectConstructor(el)) {\n                const full = path.join(\".\");\n                if (full in libOut) this.emit(\"pathDuplicated\", full);\n                // this.patcher.newLog(\"warn\", \"Patcher\", \"Path duplicated, cannot register \" + full, this);\n                else libOut[full] = el as typeof IJSPatcherObject;\n                const p = path.slice();\n                while (p.length && path.length - p.length < rootifyDepth) {\n                    const k = p.join(\".\");\n                    if (!(k in libOut)) libOut[k] = el as typeof IJSPatcherObject;\n                    p.shift();\n                }\n            }\n        }\n        for (const key in pkg) {\n            const el = pkg[key];\n            if (typeof el === \"object\") {\n                this.packageRegister(el, libOut, rootifyDepth, [...path, key]);\n            } else if (isJSPatcherObjectConstructor(el)) {\n                const full = [...path, key].join(\".\");\n                if (full in libOut) this.emit(\"pathDuplicated\", full);\n                // this.patcher.newLog(\"warn\", \"Patcher\", \"Path duplicated, cannot register \" + full, this);\n                else libOut[full] = el;\n                const p = [...path, key];\n                while (p.length && path.length + 1 - p.length < rootifyDepth) {\n                    const k = p.join(\".\");\n                    if (!(k in libOut)) libOut[k] = el;\n                    p.shift();\n                }\n            }\n        }\n        return libOut;\n    }\n    searchInLib(query: string, limit = Infinity, staticMethodOnly = false, lib: TFlatPackage) {\n        const keys = Object.keys(lib).sort();\n        const items: { key: string; object: typeof IJSPatcherObject }[] = [];\n        for (let i = 0; i < keys.length; i++) {\n            if (items.length >= limit) break;\n            const key = keys[i];\n            if (key.startsWith(query)) {\n                const o = lib[key];\n                if (staticMethodOnly) {\n                    if (o[ImporterDirSelfObject as unknown as keyof typeof IJSPatcherObject]) {\n                        items.push({ key, object: o });\n                    }\n                } else {\n                    items.push({ key, object: o });\n                }\n            }\n        }\n        return items;\n    }\n    searchInPkg(query: string, limit = Infinity, staticMethodOnly = false, pkg: TPackage, path: string[] = []): { path: string[]; object?: typeof IJSPatcherObject | TPackage }[] {\n        const outs: { path: string[]; object?: typeof IJSPatcherObject | TPackage }[] = [];\n        for (const key in pkg) {\n            if (outs.length >= limit) break;\n            const o = pkg[key];\n            if (typeof o === \"object\") {\n                if (key.indexOf(query) !== -1) outs.push({ path: [...path, key], object: o });\n                else outs.push(...this.searchInPkg(query, limit, staticMethodOnly, o, [...path, key]));\n            } else {\n                if (key.indexOf(query) !== -1) outs.push({ path: [...path, key], object: o });\n            }\n        }\n        return outs;\n    }\n    getFromPath(pathIn: (string | symbol)[], pkg: TPackage) {\n        const path = pathIn.slice();\n        let o: TPackage | typeof IJSPatcherObject = pkg;\n        while (path.length) {\n            const key = path.shift() as any;\n            o = (o as TPackage)[key];\n            if (!o) return null;\n            if (typeof o !== \"object\" && !isJSPatcherObjectConstructor(o)) return null;\n        }\n        return o;\n    }\n}\n","import TypedEventEmitter from \"../utils/TypedEventEmitter\";\nimport { ab2str, str2ab } from \"../utils/utils\";\nimport type Env from \"./Env\";\nimport type FileInstance from \"./file/FileInstance\";\nimport type PersistentProjectFile from \"./file/PersistentProjectFile\";\nimport type { IJSPatcherEnv } from \"./Env\";\nimport type { IPropsMeta } from \"./objects/base/AbstractObject\";\n\nexport interface ProjectEventMap {\n    \"propsChanged\": Partial<ProjectProps>;\n    \"save\": never;\n    \"unload\": never;\n}\nexport interface ProjectProps {\n    name: string;\n    author: string;\n    version: string;\n}\n\nexport interface IProject extends TypedEventEmitter<ProjectEventMap> {\n}\n\nexport default class Project extends TypedEventEmitter<ProjectEventMap> {\n    static props: IPropsMeta<ProjectProps> = {\n        name: {\n            type: \"string\",\n            description: \"Project name\",\n            default: \"Untitled\"\n        },\n        author: {\n            type: \"string\",\n            description: \"Author\",\n            default: \"Anonymous\"\n        },\n        version: {\n            type: \"string\",\n            description: \"Current version\",\n            default: \"0.0.0\"\n        }\n    };\n    readonly projectFilename = \".jspatproj\";\n    readonly env: IJSPatcherEnv;\n    readonly instances: FileInstance[];\n    readonly props: ProjectProps = {\n        name: Project.props.name.default,\n        author: Project.props.author.default,\n        version: Project.props.version.default\n    };\n    get audioCtx() {\n        return (this.env as Env).audioCtx;\n    }\n    constructor(envIn: IJSPatcherEnv) {\n        super();\n        this.env = envIn;\n    }\n    setProps(props: Partial<ProjectProps>) {\n        let changed = false;\n        for (const keyIn in props) {\n            const key = keyIn as keyof ProjectProps;\n            if (this.props[key] === props[key]) continue;\n            changed = true;\n            (this.props as any)[key] = props[key];\n        }\n        if (changed) this.emit(\"propsChanged\", props);\n    }\n    async save() {\n        await this.emit(\"save\");\n    }\n    async load(clean = false) {\n        await this.env.fileMgr.init(clean);\n        await this.init();\n    }\n    async init() {\n        try {\n            const item = this.env.fileMgr.getProjectItemFromPath(`./${this.projectFilename}`) as PersistentProjectFile;\n            const json = JSON.parse(ab2str(item.data)) as ProjectProps;\n            this.setProps(json);\n        } catch (error) {\n            const data = str2ab(JSON.stringify(this.props));\n            await this.env.fileMgr.projectRoot.addFile(this.projectFilename, data);\n        }\n    }\n    async unload() {\n        for (const i of this.env.instances) {\n            if (i.project === this) await i.destroy();\n        }\n        await this.emit(\"unload\");\n    }\n}\n","import TypedEventEmitter from \"../utils/TypedEventEmitter\";\n\nexport interface Task {\n    /** thread + numberId */\n    id: string;\n    timestamp: number;\n    thread: string;\n    emitter: Object | string;\n    message: string;\n    callback: (onUpdate?: (newMsg: string) => any) => any | Promise<any>;\n}\n\nexport interface TaskError {\n    id: string;\n    timestamp: number;\n    thread: string;\n    emitter: Object | string;\n    message: string;\n    error: Error;\n}\n\nexport interface TaskManagerEventMap {\n    \"taskBegin\": Task;\n    \"taskUpdate\": Task;\n    \"taskEnd\": Task;\n    \"taskError\": TaskError;\n    \"tasks\": Task[];\n    \"errors\": TaskError[];\n}\n\nexport default class TaskManager extends TypedEventEmitter<TaskManagerEventMap> {\n    _id = 0;\n    _tasks: { [thread: string]: Task[] } = {};\n    _errors: { [thread: string]: TaskError[] } = {};\n    get tasks() {\n        const tasks: Task[] = [];\n        for (const key in this._tasks) {\n            tasks.push(...this._tasks[key].filter(e => !!e));\n        }\n        return tasks;\n    }\n    get errors() {\n        const errors: TaskError[] = [];\n        for (const key in this._errors) {\n            errors.push(...this._errors[key].filter(e => !!e));\n        }\n        return errors;\n    }\n    async newTask<T extends Task[\"callback\"] = Task[\"callback\"]>(emitter: string | Object, message: string, callback: T) {\n        const thread = globalThis.constructor.name;\n        const timestamp = Date.now();\n        const id = thread + this._id++;\n        const task: Task = { id, thread, timestamp, emitter, message, callback };\n        if (!(thread in this._tasks)) this._tasks[thread] = [];\n        const $ = this._tasks[thread].push(task) - 1;\n        this.emit(\"tasks\", this.tasks);\n        this.emit(\"taskBegin\", task);\n        let returnValue: ReturnType<T> extends Promise<infer R> ? R : ReturnType<T>;\n        const handleUpdate = (msg: string) => {\n            const task: Task = { id, thread, timestamp, emitter, message: `${message}: ${msg}`, callback };\n            this._tasks[thread][$] = task;\n            this.emit(\"tasks\", this.tasks);\n            this.emit(\"taskUpdate\", task);\n        };\n        try {\n            returnValue = await callback(handleUpdate);\n        } catch (error) {\n            const taskError: TaskError = { id, thread, timestamp, emitter, message, error };\n            if (!(thread in this._errors)) this._errors[thread] = [];\n            this._errors[thread].push(taskError);\n            this.emit(\"errors\", this.errors);\n            this.emit(\"taskError\", taskError);\n            throw error;\n        } finally {\n            this._tasks[thread][$] = null;\n            this.emit(\"tasks\", this.tasks);\n            this.emit(\"taskEnd\", task);\n        }\n        return returnValue;\n    }\n    get lastError(): TaskError {\n        return this.errors.sort(((a, b) => b.timestamp - a.timestamp))[0];\n    }\n    get lastTask(): Task {\n        return this.tasks.sort(((a, b) => b.timestamp - a.timestamp))[0];\n    }\n    getTasksFromEmitter(emitter: string | Object) {\n        return this.tasks.filter(task => task.emitter === emitter);\n    }\n    getErrorsFromEmitter(emitter: string | Object) {\n        return this.errors.filter(error => error.emitter === emitter);\n    }\n    dismissLastError() {\n        const { lastError } = this;\n        if (!lastError) return;\n        const $ = this._errors[lastError.thread].indexOf(lastError);\n        this._errors[lastError.thread][$] = null;\n        this.emit(\"errors\", this.errors);\n    }\n    dismissAllErrors() {\n        this._errors = {};\n        this.emit(\"errors\", this.errors);\n    }\n}\n","import { ImporterDirSelfObject } from \"../utils/symbols\";\nimport { isJSPatcherObjectConstructor } from \"./objects/base/AbstractObject\";\nimport getBase from \"./objects/base/index.jsdsppkg.aw\";\nimport getGlobalThis from \"./objects/globalThis/index.jsdsppkg\";\nimport type { TPackage, PatcherMode, ObjectDescriptor, TAbstractPackage } from \"./types\";\nimport type { AnyImportedObject } from \"./objects/importer/ImportedObject\";\nimport type WorkletEnvProcessor from \"./worklets/WorkletEnv.worklet\";\nimport type { IExternalPackage, PackageGetter } from \"./GlobalPackageManager\";\n\nexport default class WorkletGlobalPackageManager {\n    js: TPackage;\n    jsaw: TPackage;\n    faust: TPackage;\n    max: TPackage;\n    gen: TPackage;\n    private readonly env: WorkletEnvProcessor;\n    externals = new Map<string, Record<string, any>>();\n    readonly importedPackages: IExternalPackage[] = [];\n    get builtInPackagesNames() {\n        return [...this.importedPackages.filter(p => p.isBuiltIn).map(p => p.name), \"Base\", \"globalThis\"];\n    }\n    get externalPackagesNames() {\n        return this.importedPackages.filter(p => !p.isBuiltIn).map(p => p.name);\n    }\n    constructor(envIn: WorkletEnvProcessor) {\n        this.env = envIn;\n    }\n    async init() {\n        this.jsaw = {\n            Base: await getBase(),\n            globalThis: await getGlobalThis()\n        };\n        await this.env.addObjects(this.getDescriptors(this.jsaw.globalThis, \"globalThis\"), \"globalThis\");\n    }\n    toDescriptor(O: typeof AnyImportedObject, pkgName: string): ObjectDescriptor {\n        const { path } = O;\n        return {\n            isObjectDescriptor: true as const,\n            ctor: O.importedObjectType,\n            path,\n            name: path[path.length - 1] || pkgName\n        };\n    }\n    getDescriptors(pkgIn = this.jsaw.globalThis, pkgName = \"globalThis\") {\n        const $self = \"__JSPatcher_Importer_ImporterDirSelfObject\";\n        const pkg = Object.entries(pkgIn).reduce((acc, [k, v]) => {\n            if (typeof v === \"function\") {\n                const descriptor = this.toDescriptor(v, pkgName);\n                if (k as any === ImporterDirSelfObject) acc[$self] = descriptor;\n                else acc[k] = descriptor;\n            } else {\n                acc[k] = this.getDescriptors(v, pkgName);\n            }\n            return acc;\n        }, {} as TAbstractPackage);\n        if (ImporterDirSelfObject in pkgIn) pkg[$self] = this.toDescriptor((pkgIn as any)[ImporterDirSelfObject], pkgName);\n        return pkg;\n    }\n    add(pkgIn: TPackage, lib: PatcherMode, pathIn: string[] = []) {\n        const path = pathIn.slice();\n        let pkg = this[lib];\n        while (path.length) {\n            const key = path.shift();\n            if (!pkg[key]) pkg[key] = {};\n            else if (isJSPatcherObjectConstructor(pkg[key])) pkg[key] = { [ImporterDirSelfObject]: pkg[key] };\n            pkg = pkg[key] as TPackage;\n        }\n        Object.assign(pkg, pkgIn);\n    }\n    async fetchModule(url: string) {\n        const toExport = {};\n        globalThis.exports = toExport;\n        globalThis.module = { exports: toExport } as any;\n        await this.env.addWorkletModule(url);\n        const exported = globalThis.module.exports;\n        delete globalThis.exports;\n        delete globalThis.module;\n        return exported;\n    }\n    async importPackage(url: string, pkgInfo: IExternalPackage) {\n        if (this.importedPackages.find(p => p.name === pkgInfo.name)) return;\n        const getter: PackageGetter = (await this.fetchModule(url)).default;\n        this.add(await getter(this.env), \"jsaw\", [pkgInfo.name]);\n        this.importedPackages.push(pkgInfo);\n    }\n}\n","import BaseObject from \"./objects/base/BaseObject\";\nimport Patcher from \"./patcher/Patcher\";\nimport Box from \"./patcher/Box\";\nimport Line from \"./patcher/Line\";\nimport generateRemotedObject from \"./objects/base/generateRemotedObject\";\nimport Bang, { isBang } from \"./objects/base/Bang\";\nimport * as MathUtils from \"../utils/math\";\nimport * as BufferUtils from \"../utils/buffer\";\nimport * as Utils from \"../utils/utils\";\nimport type { IJSPatcherSDK } from \"./SDK\";\n\nexport default class JSPatcherWorkletSDK implements IJSPatcherSDK {\n    readonly Patcher = Patcher;\n    readonly Box = Box;\n    readonly Line = Line;\n    readonly BaseObject = BaseObject;\n    readonly generateRemotedObject = generateRemotedObject;\n    readonly Bang = Bang;\n    readonly isBang = isBang;\n    readonly MathUtils = MathUtils;\n    readonly BufferUtils = BufferUtils;\n    readonly Utils = Utils;\n}\n","import TemporaryProjectFile from \"../file/TemporaryProjectFile\";\nimport type PatcherAudio from \"./PatcherAudio\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\n\nexport default class TempAudioFile extends TemporaryProjectFile<PatcherAudio> {\n    get type() {\n        return \"audio\" as const;\n    }\n    async instantiate() {\n        return this.data;\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const AudioEditor = (await import(\"./AudioEditor\")).default;\n        return AudioEditor.fromProjectItem({ file: this, env, project, instanceId });\n    }\n}\n","import type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { ProjectItemType } from \"../types\";\nimport type { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport AbstractProjectItem, { IProjectItem, ProjectItemEventMap } from \"./AbstractProjectItem\";\n\nexport interface ProjectFileEventMap extends ProjectItemEventMap {\n    \"saved\": any; // here emit with the object who performed the saving\n}\n\nexport interface IProjectFile<Data = any, Manager extends IProjectItemManager = IProjectItemManager> extends IProjectItem<ProjectFileEventMap, Manager> {\n    readonly type: Exclude<ProjectItemType, \"folder\">;\n    readonly isFolder: false;\n    readonly data: Data;\n    readonly fileExtension: string;\n    clone(parentIn?: IProjectFolder, nameIn?: string, dataIn?: Data): IProjectFile<Data>;\n    /**\n     * This method calls default instantiation (from the file manager).\n     * Please use `FileInstance.fromProjectItem(item)` for a better instantiation.\n     */\n    instantiate(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance>;\n    instantiateEditor(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor>;\n    /**\n     * Save the data to the file manager\n     *\n     * @param newDataIn new data to save\n     * @param by the editor who performs the save\n     */\n    save(newDataIn: Data, by: any): Promise<void>;\n    /** Save the data to a new file, not modifying the current file, nor point current editing file to the new one. */\n    saveAsCopy(parentIn: IProjectFolder, nameIn: string, newDataIn: any, manager?: IProjectItemManager): Promise<IProjectFile>;\n    /**\n     * Not modifying the current file, save to a new file and point current editing file to the new one.\n     *\n     * @param to the folder that will contain the new file to save\n     * @param newNameIn new file name to save\n     * @param newDataIn new data to save\n     * @param by the editor who performs the save\n     */\n    saveAs(to: IProjectFolder, newNameIn: string, newDataIn: any, by: any, manager?: IProjectItemManager): Promise<IProjectFile>;\n}\n\nexport default abstract class AbstractProjectFile<Data = ArrayBuffer, Manager extends IProjectItemManager<any> = IProjectItemManager> extends AbstractProjectItem<ProjectFileEventMap, Manager> implements IProjectFile<Data, Manager> {\n    get type() {\n        return this.fileMgr.getTypeFromFileName(this.name) as Exclude<ProjectItemType, \"folder\">;\n    }\n    readonly isFolder = false;\n    protected _data: Data;\n    get data() {\n        return this._data;\n    }\n    set data(dataIn: Data) {\n        this._data = dataIn;\n    }\n    get fileExtension() {\n        const splitted = this.name.split(\".\");\n        return splitted[splitted.length - 1];\n    }\n    constructor(fileMgrIn: Manager, parentIn: IProjectFolder, nameIn: string, dataIn?: Data) {\n        super(fileMgrIn, parentIn, nameIn);\n        if (dataIn) this._data = dataIn;\n        this.onAny((eventName, eventData) => {\n            const { id, isFolder, type, path, data } = this;\n            this.fileMgr.emit(\"itemChanged\", { id, isFolder, type, path, data, eventName, eventData });\n        });\n    }\n    abstract clone(parentIn?: IProjectFolder, nameIn?: string, dataIn?: Data): IProjectFile<Data>;\n    abstract instantiate(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance>;\n    abstract instantiateEditor(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor>;\n    async save(newData: Data, by: any) {\n        this._data = newData;\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n    }\n    async saveAsCopy(parent: IProjectFolder, name: string, newData: any, manager?: IProjectItemManager): Promise<IProjectFile> {\n        const item = this.clone(parent, name, newData);\n        parent.items.add(item);\n        await this.emitTreeChanged();\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n    async saveAs(to: IProjectFolder, newName: string, newData: any, by: any, manager?: IProjectItemManager): Promise<IProjectFile> {\n        const { parent, name, data } = this;\n        const from = parent;\n        this._data = newData;\n        await this.move(to, newName);\n        const item = this.clone(parent, name, data);\n        parent.items.add(item);\n        await parent.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n}\n","import type { RawProjectItem } from \"../types\";\nimport type { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport AbstractProjectItem, { IProjectFileOrFolder, IProjectItem } from \"./AbstractProjectItem\";\n\nexport interface IProjectFolder<Manager extends IProjectItemManager = IProjectItemManager> extends IProjectItem<{}, Manager> {\n    readonly type: \"folder\";\n    readonly isFolder: true;\n    readonly items: Set<IProjectFileOrFolder>;\n    clone(parentIn?: IProjectFolder, nameIn?: string): IProjectFolder;\n    createProjectItem(nameIn: string, isFolder: boolean, dataIn?: any): IProjectFileOrFolder;\n    findItem(itemIn: string): IProjectFileOrFolder;\n    existItem(itemIn: IProjectFileOrFolder | string): boolean;\n    uniqueName(nameIn: string): string;\n    addFile(nameIn: string, dataIn?: any): Promise<IProjectFileOrFolder>;\n    addFolder(nameIn: string): Promise<IProjectFolder>;\n    empty(): Promise<void>;\n    getTree(): RawProjectItem<\"folder\">;\n    getDescendantFiles(): IProjectFileOrFolder[];\n    isParentOf(itemIn: IProjectItem): boolean;\n    getOrderedItems(): IProjectFileOrFolder[];\n    emitTreeChanged(): Promise<void>;\n}\n\nexport default abstract class AbstractProjectFolder<Manager extends IProjectItemManager = IProjectItemManager> extends AbstractProjectItem<{}, Manager> implements IProjectFolder<Manager> {\n    get type(): \"folder\" {\n        return \"folder\";\n    }\n    readonly isFolder = true;\n    items: Set<IProjectFileOrFolder> = new Set();\n    get isDirty() {\n        return !this.getDescendantFiles().every(f => !f.isDirty);\n    }\n    constructor(fileMgrIn: Manager, parentIn: IProjectFolder, nameIn: string) {\n        super(fileMgrIn, parentIn, nameIn);\n        this.onAny((eventName, eventData) => {\n            const { id, isFolder, type, path } = this;\n            this.fileMgr.emit(\"itemChanged\", { id, isFolder, type, path, eventName, eventData });\n        });\n    }\n    abstract clone(parentIn?: IProjectFolder, nameIn?: string): IProjectFolder;\n    abstract createProjectItem(nameIn: string, isFolder: boolean, dataIn?: any): IProjectFileOrFolder;\n    findItem(itemIn: string) {\n        return Array.from(this.items).find(item => item.name === itemIn);\n    }\n    existItem(itemIn: IProjectFileOrFolder | string) {\n        return typeof itemIn === \"string\" ? !!this.findItem(itemIn) : this.items.has(itemIn);\n    }\n    uniqueName(nameIn: string) {\n        if (!this.existItem(nameIn)) return nameIn;\n        let i = 0;\n        let name;\n        do {\n            i++;\n            name = `nameIn_${i}`;\n        } while (this.existItem(nameIn));\n        return name;\n    }\n    abstract addFile(nameIn: string, dataIn?: any): Promise<IProjectFileOrFolder>;\n    abstract addFolder(nameIn: string): Promise<IProjectFolder>;\n    async empty() {\n        for (const item of this.items) {\n            await item.destroy();\n        }\n    }\n    getTree(): RawProjectItem<\"folder\"> {\n        return {\n            type: \"folder\",\n            id: this.id,\n            isFolder: true,\n            name: this.name,\n            items: Array.from(this.items).map((item) => {\n                if (item.isFolder === false) {\n                    const { id, isFolder, type, name, data } = item;\n                    return { id, isFolder, type, name, data };\n                }\n                return item.getTree();\n            })\n        };\n    }\n    getDescendantFiles() {\n        return Array.from(this.items).reduce((acc, cur) => {\n            if (cur.isFolder === false) acc.push(cur);\n            else acc.push(...cur.getDescendantFiles());\n            return acc;\n        }, [] as IProjectFileOrFolder[]);\n    }\n    isParentOf(itemIn: IProjectFileOrFolder) {\n        let { parent } = itemIn;\n        while (parent !== this) {\n            if (!parent) return false;\n            parent = parent.parent;\n        }\n        return true;\n    }\n    getOrderedItems() {\n        const items = Array.from(this.items);\n        const folders = items.filter(i => i.isFolder).sort((a, b) => a.name.localeCompare(b.name));\n        const files = items.filter(i => !i.isFolder).sort((a, b) => a.name.localeCompare(b.name));\n        return [...folders, ...files];\n    }\n}\n","import TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport type { IObservee, ProjectItemType } from \"../types\";\nimport type { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport type { IProjectFile } from \"./AbstractProjectFile\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\n\nexport type IProjectFileOrFolder = IProjectFolder | IProjectFile;\n\nexport interface ProjectItemEventMap {\n    \"ready\": never;\n    \"nameChanged\": { oldName: string; newName: string };\n    \"pathChanged\": { from: string; to: string };\n    \"treeChanged\": never;\n    \"destroyed\": never;\n    \"observers\": Set<string>;\n    \"dirty\": boolean;\n}\n\nexport interface IProjectItem<EventMap extends Record<string, any> = {}, Manager extends IProjectItemManager = IProjectItemManager> extends ITypedEventEmitter<ProjectItemEventMap & EventMap>, IObservee<string> {\n    readonly id: string;\n    readonly fileMgr: Manager;\n    readonly isFolder: boolean;\n    readonly type: ProjectItemType;\n    readonly name: string;\n    /** path used by the file manager */\n    readonly path: string;\n    /** parent path used by the file manager */\n    readonly parentPath: string;\n    /** path relative to the project root */\n    readonly projectPath: string;\n    /** Is the file is editing by some editor and modified (without saving the data), isDirty is true. */\n    readonly isDirty: boolean;\n    parent: IProjectFolder;\n    /** Load data */\n    init(): Promise<void>;\n    /** Clone with optional modifications */\n    clone(parentIn?: IProjectFolder, nameIn?: string): IProjectItem;\n    rename(newNameIn: string): Promise<void>;\n    move(to: IProjectFolder, newNameIn?: string): Promise<void>;\n    /** Delete current file from file manager and the parent folder. */\n    destroy(): Promise<void>;\n}\n\nexport default abstract class AbstractProjectItem<EventMap extends Partial<ProjectItemEventMap> & Record<string, any> = {}, Manager extends IProjectItemManager = IProjectItemManager> extends TypedEventEmitter<ProjectItemEventMap & EventMap> implements IProjectItem<EventMap, Manager> {\n    id: string;\n    get type(): ProjectItemType {\n        return \"unknown\";\n    }\n    readonly isFolder: boolean;\n    protected readonly _fileMgr;\n    get fileMgr() {\n        return this._fileMgr;\n    }\n    protected _name: string;\n    get name() {\n        return this._name;\n    }\n    parent: IProjectFolder;\n    private _isDirty: boolean;\n    get isDirty() {\n        return this._isDirty;\n    }\n    get path(): string {\n        return this.parent ? `${this.parentPath}/${this._name}` : \"\";\n    }\n    get parentPath() {\n        return this.parent?.path;\n    }\n    get projectPath() {\n        return this.path.replace(new RegExp(`^/${this._fileMgr.projectFolderName}`), \"\");\n    }\n    protected readonly _observers = new Set<string>();\n    async addObserver(observer: string) {\n        this._observers.add(observer);\n        await this.emit(\"observers\", this._observers);\n        await this.fileMgr.emitChanged();\n    }\n    async removeObserver(observer: string) {\n        this._observers.delete(observer);\n        await this.emit(\"observers\", this._observers);\n        await this.fileMgr.emitChanged();\n    }\n    constructor(fileMgrIn: Manager, parentIn: IProjectFolder, nameIn: string) {\n        super();\n        this._fileMgr = fileMgrIn;\n        this.parent = parentIn;\n        this._name = nameIn;\n        this.on(\"dirty\", dirty => this._isDirty = dirty);\n    }\n    abstract rename(newNameIn: string): Promise<void>;\n    abstract move(to: IProjectFolder, newNameIn?: string): Promise<void>;\n    abstract destroy(): Promise<void>;\n    abstract clone(parentIn?: IProjectFolder, nameIn?: string): IProjectItem;\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        await this.emit(\"ready\");\n        await this.fileMgr.emitChanged();\n    }\n    async emitTreeChanged() {\n        await this.emit(\"treeChanged\");\n        await (this.parent || this.fileMgr).emitTreeChanged();\n    }\n}\n","import TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport { extToType } from \"../../utils/utils\";\nimport type TaskMgr from \"../TaskMgr\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { ProjectItemType, RawProjectItem } from \"../types\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IProjectFileOrFolder, IProjectItem, ProjectItemEventMap } from \"./AbstractProjectItem\";\nimport { IProject } from \"../Project\";\n\nexport interface ItemChangedEvent<K extends keyof ProjectItemEventMap = keyof ProjectItemEventMap> {\n    id: string;\n    isFolder: boolean;\n    path: string;\n    type: ProjectItemType;\n    data?: any;\n    eventName: K;\n    eventData?: ProjectItemEventMap[K];\n}\n\nexport interface ProjectItemManagerEventMap {\n    \"ready\": never;\n    \"treeChanged\": RawProjectItem<\"folder\">;\n    \"itemChanged\": ItemChangedEvent;\n    \"changed\": never;\n}\n\nexport interface IProjectItemManager<EventMap extends Record<string, any> & Partial<ProjectItemManagerEventMap> = {}> extends ITypedEventEmitter<EventMap & ProjectItemManagerEventMap> {\n    readonly projectFolderName: string;\n    readonly id: string;\n    readonly taskMgr: TaskMgr;\n    readonly allItems: Record<string, IProjectFileOrFolder>;\n    readonly allProjectItems: Record<string, IProjectFileOrFolder>;\n    root: IProjectFolder;\n    /** Enpty the backend file manager */\n    empty(): Promise<any>;\n    /** Empty the project rool folder */\n    emptyProject(): Promise<void>;\n    /** Create all project items by analyzing the backend */\n    init(clean?: boolean): Promise<this>;\n    getTypeFromFileName(name: string): ProjectItemType;\n    getProjectItemFromId(id: string): IProjectFileOrFolder;\n    getProjectItemFromPath(path: string): IProjectFileOrFolder;\n    getPathIdMap(): Record<string, string>;\n    instantiateProjectPath(path: string, envIn: IJSPatcherEnv, projectIn?: IProject): Promise<IFileInstance>;\n    emitTreeChanged(): Promise<void>;\n    emitChanged(): Promise<void>;\n    generateItemId(item: IProjectItem): string;\n}\n\nexport default abstract class AbstractProjectItemManager<EventMap extends Record<string, any> & Partial<ProjectItemManagerEventMap> = {}> extends TypedEventEmitter<EventMap & ProjectItemManagerEventMap> implements IProjectItemManager<EventMap> {\n    readonly projectFolderName = \"project\";\n    readonly id: string;\n    readonly env: IJSPatcherEnv;\n    readonly taskMgr: TaskMgr;\n    get allItems() {\n        const items: Record<string, IProjectFileOrFolder> = {};\n        const rec = (cur: IProjectFileOrFolder) => {\n            items[cur.id] = cur;\n            if (cur.isFolder) cur.items.forEach(rec);\n        };\n        rec(this.root);\n        return items;\n    }\n    get allProjectItems() {\n        const items: Record<string, IProjectFileOrFolder> = {};\n        const rec = (cur: IProjectFileOrFolder) => {\n            items[cur.id] = cur;\n            if (cur.isFolder) cur.items.forEach(rec);\n        };\n        rec(this.projectRoot);\n        return items;\n    }\n    root: IProjectFolder;\n    constructor(envIn: IJSPatcherEnv) {\n        super();\n        this.env = envIn;\n        this.id = envIn.generateId(this);\n        this.taskMgr = envIn.taskMgr;\n    }\n    abstract empty(): Promise<any>;\n    emptyProject() {\n        return this.projectRoot.empty();\n    }\n    abstract init(clean?: boolean): Promise<this>;\n    getTypeFromFileName(name: string): ProjectItemType {\n        const splitted = name.split(\".\");\n        const ext = splitted[splitted.length - 1];\n        return extToType(ext);\n    }\n    getProjectItemFromId(id: string) {\n        return this.allItems[id];\n    }\n    getProjectItemFromPath(path: string) {\n        const pathArray = path.split(\"/\");\n        const itemArray: (IProjectFileOrFolder)[] = [this.root, this.projectRoot];\n        for (let i = 0; i < pathArray.length; i++) {\n            const id = pathArray[i];\n            if (id.length === 0) continue;\n            if (id === \".\") continue;\n            if (id === \"..\") {\n                itemArray.pop();\n                continue;\n            }\n            const cur = itemArray[itemArray.length - 1];\n            if (!cur.isFolder) throw new Error(`${cur.name} from path ${path} is not a folder`);\n            const next = cur.findItem(id);\n            if (!next) throw new Error(`Cannot find ${id} from path ${path}`);\n            itemArray.push(next);\n        }\n        return itemArray[itemArray.length - 1];\n    }\n    getPathIdMap() {\n        const map: Record<string, string> = {};\n        Object.entries(this.allItems).forEach(([id, { path }]) => map[path] = id);\n        return map;\n    }\n    instantiateProjectPath(path: string, envIn: IJSPatcherEnv, projectIn: IProject) {\n        const item = this.getProjectItemFromPath(path);\n        if (item.isFolder === false) return item.instantiate({ env: envIn, project: projectIn });\n        throw new Error(`Cannot instantiate ${item.name} from path ${path} as it is a folder`);\n    }\n    async emitTreeChanged() {\n        this.emit(\"treeChanged\", this.root.getTree());\n    }\n    async emitChanged() {\n        this.emit(\"changed\");\n    }\n    get projectRoot() {\n        return this.root.findItem(this.projectFolderName) as IProjectFolder;\n    }\n    generateItemId(item: IProjectItem) {\n        return this.env.generateId(item);\n    }\n}\n","import type { SemanticICONS } from \"semantic-ui-react\";\nimport TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport History from \"./History\";\nimport TemporaryProjectFile from \"./TemporaryProjectFile\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFile } from \"./AbstractProjectFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\n\nexport interface FileEditorEventMap {\n    \"ready\": never;\n    \"changed\": never;\n    \"dirty\": boolean;\n    \"saved\": never;\n    \"locked\": boolean;\n    \"destroy\": never;\n}\n\nexport interface IFileEditor<Instance extends IFileInstance = IFileInstance, EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> extends ITypedEventEmitter<EventMap & FileEditorEventMap> {\n    readonly instance: Instance;\n    readonly env: IJSPatcherEnv;\n    readonly project: IProject;\n    readonly ctx: IFileInstance[\"ctx\"];\n    readonly isInMemory: boolean;\n    readonly isTemporary: boolean;\n    isReadonly: boolean;\n    readonly isReady: boolean;\n    readonly isDestroyed: boolean;\n    readonly isDirty: boolean;\n    readonly isLocked: boolean;\n    readonly isActive: boolean;\n    readonly editorId: string;\n    readonly fileExtension: string;\n    readonly fileIcon: SemanticICONS;\n    file: IProjectFile;\n    setActive(): void;\n    undo(): Promise<void>;\n    redo(): Promise<void>;\n    copy(): Promise<void>;\n    cut(): Promise<void>;\n    paste(): Promise<void>;\n    deleteSelected(): Promise<any>;\n    selectAll(): Promise<void>;\n    onUiResized(): void;\n    save(): Promise<void>;\n    saveAs(parent: any, name: string): Promise<void>;\n    destroy(): Promise<void>;\n}\n\nexport type AnyFileEditor = FileEditor<any, Record<string, any>>;\n\nexport default class FileEditor<Instance extends IFileInstance = IFileInstance, EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> extends TypedEventEmitter<EventMap & FileEditorEventMap> implements IFileEditor<Instance, EventMap> {\n    static async fromProjectItem({ file, env, project, instanceId }: { file: IProjectFile; env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor> {\n        return new this(await file.instantiate({ env, project, instanceId }));\n    }\n    readonly instance: Instance;\n    get env() {\n        return this.instance.env;\n    }\n    get project() {\n        return this.instance.project;\n    }\n    get file() {\n        return this.instance.file;\n    }\n    set file(value) {\n        this.instance.file = value;\n    }\n    get ctx() {\n        return this.instance.ctx;\n    }\n    get isInMemory() {\n        return this.instance.isInMemory;\n    }\n    get isTemporary() {\n        return this.instance.isTemporary;\n    }\n    get isReadonly() {\n        return this.instance.isReadonly;\n    }\n    set isReadonly(value) {\n        this.instance.isReadonly = value;\n    }\n    protected _isReady = false;\n    get isReady() {\n        return this._isReady;\n    }\n    protected _isDestroyed = false;\n    get isDestroyed() {\n        return this._isDestroyed;\n    }\n    get isDirty() {\n        return this.history.isDirty;\n    }\n    get isLocked() {\n        return false;\n    }\n    get history(): History<Partial<EventMap>, this> {\n        return this.instance.history;\n    }\n    get fileExtension() {\n        return \"data\";\n    }\n    get fileIcon(): SemanticICONS {\n        return \"code\";\n    }\n    setActive() {\n        this.env.activeEditor = this;\n    }\n    get isActive(): boolean {\n        return this.env.thread === \"main\" && this.env.activeEditor === this;\n    }\n    readonly editorId: string;\n    handleProjectSave = async () => this.save();\n    handleProjectUnload = async () => this.destroy();\n    handleDestroy = () => this.destroy();\n    constructor(instance: Instance) {\n        super();\n        this.instance = instance;\n        this.instance?.addObserver(this);\n        this.instance.on(\"destroy\", this.handleDestroy);\n        this.history.addEditor(this);\n        this.on(\"dirty\", isDirty => this.file?.emit(\"dirty\", isDirty));\n        this.on(\"destroy\", () => this.file?.emit(\"dirty\", false));\n        const handleReady = () => {\n            this._isReady = true;\n            this.off(\"ready\", handleReady);\n        };\n        this.on(\"ready\", handleReady);\n        this.editorId = this.env.generateId(this);\n        if (this.env.thread === \"main\") this.env.registerInstance(this.instance);\n        if (this.project) {\n            this.project.on(\"save\", this.handleProjectSave);\n            this.project.on(\"unload\", this.handleProjectUnload);\n        }\n    }\n    async toFileData() {\n        return this.instance.serialize();\n    }\n    async toTempData(): Promise<any> {\n        return this.instance;\n    }\n    undo() {\n        return this.history.undo();\n    }\n    redo() {\n        return this.history.redo();\n    }\n    async copy() {\n        throw new Error(\"Not implemented.\");\n    }\n    async cut() {\n        throw new Error(\"Not implemented.\");\n    }\n    async paste() {\n        throw new Error(\"Not implemented.\");\n    }\n    async deleteSelected(): Promise<any> {\n        throw new Error(\"Not implemented.\");\n    }\n    async selectAll() {\n        throw new Error(\"Not implemented.\");\n    }\n    onUiResized() {\n        throw new Error(\"Not implemented.\");\n    }\n    async save() {\n        if (this.isReadonly) throw new Error(\"Cannot save readonly file\");\n        if (this.isInMemory) throw new Error(\"Cannot save in-memory instance\");\n        const data = await (this.file instanceof TemporaryProjectFile ? this.toTempData() : this.toFileData());\n        await this.file.save(data, this);\n        await this.emit(\"saved\");\n    }\n    async saveAs(parent: IProjectFolder, name: string) {\n        const data = await this.toFileData();\n        if (this.isTemporary) {\n            await this.file.saveAsCopy(parent, name, data);\n        } else if (this.isReadonly) {\n            await this.file.saveAs(parent, name, data, this);\n        } else if (this.isInMemory) {\n            this.file = await parent.addFile(name, data) as any;\n        } else {\n            await this.file.saveAs(parent, name, data, this);\n        }\n        this.isReadonly = false;\n        await this.emit(\"saved\");\n    }\n    async destroy() {\n        if (this.isDestroyed) return;\n        if (this.project) {\n            this.project.off(\"save\", this.handleProjectSave);\n            this.project.off(\"unload\", this.handleProjectUnload);\n        }\n        this.instance.off(\"destroy\", this.handleDestroy);\n        this.instance.removeObserver(this);\n        this.history.removeEditor(this);\n        this._isDestroyed = true;\n        await this.emit(\"destroy\");\n    }\n}\n","import TypedEventEmitter, { ITypedEventEmitter } from \"../../utils/TypedEventEmitter\";\nimport TemporaryProjectFile from \"./TemporaryProjectFile\";\nimport type History from \"./History\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IObservee } from \"../types\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IProjectFile } from \"./AbstractProjectFile\";\n\nexport interface FileInstanceEventMap {\n    \"observers\": Set<any>;\n    \"ready\": never;\n    \"changed\": never;\n    \"destroy\": never;\n}\n\nexport interface IFileInstance<EventMap extends Record<string, any> & Partial<FileInstanceEventMap> = {}, File extends IProjectFile = IProjectFile> extends ITypedEventEmitter<EventMap & FileInstanceEventMap>, IObservee {\n    file?: File;\n    readonly env: IJSPatcherEnv;\n    readonly project: IProject;\n    readonly ctx: File | IProject | IJSPatcherEnv;\n    /** Means it doesn't have a file to save */\n    readonly isInMemory: boolean;\n    /** Means it doesn't have a file to save in the backend */\n    readonly isTemporary: boolean;\n    isReadonly: boolean;\n    isReady: boolean;\n    readonly isActive: boolean;\n    readonly id: string;\n    readonly history: History<any, any>;\n    init(): Promise<this>;\n    setActive(): void;\n    getEditor(): Promise<IFileEditor>;\n    serialize(): Promise<ArrayBuffer>;\n    destroy(): Promise<void>;\n}\n\nexport default abstract class FileInstance<EventMap extends Record<string, any> & Partial<FileInstanceEventMap> = {}, File extends IProjectFile = IProjectFile> extends TypedEventEmitter<EventMap & FileInstanceEventMap> implements IFileInstance<EventMap, File> {\n    private readonly _env: IJSPatcherEnv;\n    get env() {\n        return this._env;\n    }\n    private readonly _project: IProject;\n    get project(): IProject {\n        return this._project;\n    }\n    private _file?: File;\n    get file(): File {\n        return this._file;\n    }\n    set file(value) {\n        if (value === this._file) return;\n        this._file?.removeObserver(this._id);\n        this._file = value;\n        this._file?.addObserver(this._id);\n    }\n    get ctx(): File | IProject | IJSPatcherEnv {\n        return this.file || this.project || this.env;\n    }\n    get isInMemory() {\n        return !this.file;\n    }\n    get isTemporary() {\n        return this.file instanceof TemporaryProjectFile;\n    }\n    private _isReadonly = false;\n    get isReadonly() {\n        return this._isReadonly;\n    }\n    set isReadonly(value) {\n        this._isReadonly = value;\n    }\n    protected _isReady = false;\n    get isReady() {\n        return this._isReady;\n    }\n    setActive() {\n        this.env.activeInstance = this;\n    }\n    get isActive(): boolean {\n        return this.env.activeInstance === this;\n    }\n    async getEditor(): Promise<IFileEditor> {\n        throw new Error(\"Not implemented.\");\n    }\n    protected readonly _observers = new Set<any>();\n    async addObserver(observer: any) {\n        this._observers.add(observer);\n        await this.emit(\"observers\", this._observers);\n    }\n    async removeObserver(observer: any) {\n        this._observers.delete(observer);\n        await this.emit(\"observers\", this._observers);\n        if (this._observers.size === 0) await this.destroy();\n    }\n    readonly _id: string;\n    get id() {\n        return this._id;\n    }\n    readonly _history: History<any, any>;\n    get history() {\n        return this._history;\n    }\n    constructor({ env, project, file, instanceId }: { env: IJSPatcherEnv; project?: IProject; file?: File; instanceId?: string }) {\n        super();\n        this._env = env;\n        this._project = project;\n        this._file = file;\n        this._id = this.env.registerInstance(this, instanceId);\n        this._file?.addObserver(this._id);\n    }\n    async init() {\n        return this;\n    }\n    async serialize(): Promise<ArrayBuffer> {\n        throw new Error(\"Not implemented.\");\n    }\n    async destroy() {\n        await this.emit(\"destroy\");\n        await this.file?.removeObserver(this._id);\n    }\n}\n","import FileEditor, { FileEditorEventMap } from \"./FileEditor\";\n\ninterface IHistoryEvent<EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> {\n    timestamp: number;\n    editorId: string;\n    eventName: keyof EventMap & string;\n    eventData?: EventMap[keyof EventMap & string];\n}\n\nexport interface IHistoryData<EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}> {\n    /** Current index in the event queue */\n    $: number;\n    /** Last save Timestamp */\n    saveTime: number;\n    /** Queued events */\n    eventQueue: IHistoryEvent<EventMap>[];\n}\n\n/** The class records some events and allows to perform undo/redo with a specific editor. */\nexport default abstract class History<EventMap extends Record<string, any> & Partial<FileEditorEventMap> = {}, Editor extends FileEditor<any, EventMap> = FileEditor<any, EventMap>> implements IHistoryData<EventMap> {\n    /** Editors to sync and to listen */\n    editors: Set<Editor> = new Set();\n    saveTime = 0;\n    $ = 0;\n    eventQueue: IHistoryEvent<EventMap>[] = [];\n    /** Can be set to `false` to prevent recording events while undoing/redoing */\n    capture = true;\n    get eventListening(): (keyof EventMap & string)[] {\n        return [];\n    }\n    get now() {\n        if (globalThis.performance) {\n            return performance.now() + (performance.timeOrigin || performance.timing.navigationStart);\n        }\n        return Date.now();\n    }\n    addEditor(editor: Editor) {\n        this.editors.add(editor);\n        editor.onAny(this.handleEditorEvent);\n        editor.on(\"saved\", this.handleSaved);\n        editor.once(\"destroy\", () => this.removeEditor(editor));\n    }\n    removeEditor(editor: Editor) {\n        editor.offAny(this.handleEditorEvent);\n        this.editors.delete(editor);\n    }\n    handleEditorEvent = async (eventName: keyof EventMap & string, eventData: any, editor: Editor) => {\n        if (this.eventListening.indexOf(eventName) === -1) return;\n        if (!this.capture) return;\n        this.capture = false;\n        await Promise.all(Array.from(this.editors).filter($editor => $editor !== editor).map($editor => $editor.emit(eventName, eventData)));\n        this.capture = true;\n        this.eventQueue.splice(this.$);\n        this.$ = this.eventQueue.push({ eventName, eventData, timestamp: this.now, editorId: editor.editorId });\n        this.emitChanged();\n    };\n    emitChanged() {\n        this.editors.forEach(editor => editor.emit(\"changed\"));\n        this.emitDirty();\n    }\n    emitDirty() {\n        const { isDirty } = this;\n        this.editors.forEach(editor => editor.emit(\"dirty\", isDirty));\n    }\n    destroy() {\n        this.editors.forEach(editor => this.removeEditor(editor));\n    }\n    get isDirty() {\n        if (!this.saveTime) return this.isUndoable;\n        return this.saveTime !== this.eventQueue[this.$ - 1]?.timestamp;\n    }\n    get isUndoable() {\n        return this.$ !== 0;\n    }\n    get isRedoable() {\n        return this.$ !== this.eventQueue.length;\n    }\n    handleSaved = () => {\n        this.saveTime = this.eventQueue[this.$ - 1]?.timestamp;\n        this.emitDirty();\n    };\n    abstract undoOf(editor: Editor, eventName: keyof EventMap, eventData?: any): Promise<void>;\n    async undo() {\n        if (!this.editors.size) return;\n        if (!this.isUndoable) return;\n        this.capture = false;\n        const { eventName, eventData } = this.eventQueue[this.$ - 1];\n        await Promise.all(Array.from(this.editors).map(editor => this.undoOf(editor, eventName, eventData)));\n        this.$--;\n        this.capture = true;\n        this.emitChanged();\n    }\n    abstract redoOf(editor: Editor, eventName: keyof EventMap, eventData?: any): Promise<void>;\n    async redo() {\n        if (!this.editors.size) return;\n        if (!this.isRedoable) return;\n        this.capture = false;\n        const { eventName, eventData } = this.eventQueue[this.$];\n        await Promise.all(Array.from(this.editors).map(editor => this.redoOf(editor, eventName, eventData)));\n        this.$++;\n        this.capture = true;\n        this.emitChanged();\n    }\n    /** event at timestamp exclusive */\n    async undoUntil(timestamp: number) {\n        while (this.isUndoable && this.eventQueue[this.$ - 1].timestamp >= timestamp) {\n            await this.undo();\n        }\n    }\n    /** event at timestamp inclusive */\n    async redoUntil(timestamp: number) {\n        while (this.isRedoable && this.eventQueue[this.$].timestamp <= timestamp) {\n            await this.redo();\n        }\n    }\n    async setIndex($: number) {\n        if ($ < this.$) await this.undoUntil(this.eventQueue[$].timestamp);\n        else if ($ > this.$) await this.redoUntil(this.eventQueue[$ - 1].timestamp);\n    }\n    getSyncData(): IHistoryData<EventMap> {\n        const { $, saveTime, eventQueue } = this;\n        return { $, saveTime, eventQueue };\n    }\n    async syncData(data: IHistoryData<EventMap>) {\n        this.saveTime = data.saveTime;\n        for (let i = 0; i < this.eventQueue.length; i++) {\n            const { timestamp } = this.eventQueue[i];\n            if (timestamp !== data.eventQueue[i]?.timestamp) {\n                await this.undoUntil(timestamp);\n                break;\n            }\n        }\n        this.eventQueue = data.eventQueue;\n        await this.setIndex(data.$);\n    }\n}\n","import AbstractProjectFile from \"./AbstractProjectFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IFileInstance } from \"./FileInstance\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IPersistentProjectItemManager } from \"./PersistentProjectItemManager\";\n\nexport default class PersistentProjectFile extends AbstractProjectFile<ArrayBuffer, IPersistentProjectItemManager> {\n    private _sab: SharedArrayBuffer;\n    get sab() {\n        return this._sab;\n    }\n    get data() {\n        return this._data;\n    }\n    set data(dataIn: ArrayBuffer) {\n        this._data = dataIn;\n        if (dataIn instanceof SharedArrayBuffer) {\n            this._sab = dataIn;\n            return;\n        }\n        this._sab = new SharedArrayBuffer(dataIn.byteLength);\n        const ui8ab = new Uint8Array(dataIn);\n        const ui8sab = new Uint8Array(this._sab);\n        for (let i = 0; i < ui8ab.length; i++) {\n            ui8sab[i] = ui8ab[i];\n        }\n    }\n    lastModifiedId: string;\n    constructor(fileMgrIn: IPersistentProjectItemManager, parentIn: IProjectFolder, nameIn: string, dataIn?: ArrayBuffer) {\n        super(fileMgrIn, parentIn, nameIn);\n        this.lastModifiedId = this.id;\n        this._data = dataIn;\n    }\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        if (!this.data) this.data = await this.fileMgr.readFile(this.path);\n        await this.emit(\"ready\");\n        await this.fileMgr.emitChanged();\n    }\n    clone(parentIn = this.parent, nameIn = this._name, dataIn = this.data) {\n        const Ctor = this.constructor as typeof PersistentProjectFile;\n        return new Ctor(this._fileMgr, parentIn, nameIn, dataIn);\n    }\n    async save(newData: ArrayBuffer, by: any) {\n        this.data = newData;\n        this.lastModifiedId = this.fileMgr.generateItemId(this);\n        await this._fileMgr.putFile(this);\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n    }\n    async saveAsCopy(parent: IProjectFolder, name: string, newData: ArrayBuffer) {\n        const item = this.clone(parent, name, newData);\n        await this._fileMgr.putFile(item);\n        parent.items.add(item);\n        await this.emitTreeChanged();\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n    async saveAs(to: IProjectFolder, newName: string, newData: ArrayBuffer, by: any) {\n        const { parent, name, data } = this;\n        const from = parent;\n        this.data = newData;\n        this.lastModifiedId = this.fileMgr.generateItemId(this);\n        await this.move(to, newName);\n        await this._fileMgr.putFile(this);\n        const item = this.clone(parent, name, data);\n        await this._fileMgr.putFile(item);\n        parent.items.add(item);\n        await parent.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        await this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n        return item;\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        await this.fileMgr.rename(this.path, `${this.parentPath}/${newNameIn}`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this as any) return;\n        if (to === this.parent && newName === this.name) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        await this._fileMgr.rename(this.path, `${to.path}/${newName}`);\n        const from = this.parent;\n        from.items.delete(this as any);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this as any);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async destroy() {\n        await this._fileMgr.remove(this.path, this.isFolder);\n        this.parent.items.delete(this as any);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n        await this.fileMgr.emitChanged();\n    }\n    async instantiate({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance> {\n        const { type } = this;\n        const Constructor = {\n            patcher: (await import(\"../patcher/Patcher\")).default,\n            audio: (await import(\"../audio/PatcherAudio\")).default,\n            image: (await import(\"../image/PatcherImage\")).default,\n            text: (await import(\"../text/PatcherText\")).default,\n            video: undefined,\n            unknown: (await import(\"../text/PatcherText\")).default\n        }[type];\n        if (Constructor) return Constructor.fromProjectItem({ file: this as any, env, project, instanceId }) as Promise<IFileInstance>;\n        throw new Error(\"Not implemented.\");\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor> {\n        const { type } = this;\n        const Constructor = {\n            patcher: (await import(\"../patcher/PatcherEditor\")).default,\n            audio: (await import(\"../audio/AudioEditor\")).default,\n            image: (await import(\"../image/ImageEditor\")).default,\n            text: (await import(\"../text/TextEditor\")).default,\n            video: undefined,\n            unknown: (await import(\"../text/TextEditor\")).default\n        }[type];\n        if (Constructor) return Constructor.fromProjectItem({ file: this as any, env, project, instanceId }) as Promise<IFileEditor>;\n        throw new Error(\"Not implemented.\");\n    }\n}\n","import PersistentProjectFile from \"./PersistentProjectFile\";\nimport AbstractProjectFolder, { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IPersistentProjectItemManager } from \"./PersistentProjectItemManager\";\n\nexport default class PersistentProjectFolder extends AbstractProjectFolder<IPersistentProjectItemManager> {\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        const items = await this.fileMgr.readDir(this.path || \"/\");\n        for (const rawItem of items) {\n            const { name, isFolder } = rawItem;\n            const item = this.createProjectItem(name, isFolder);\n            this.items.add(item);\n            await this.emitTreeChanged();\n            await item.init();\n        }\n        await this.emit(\"ready\");\n        await this.fileMgr.emitChanged();\n    }\n    clone(parentIn = this.parent, nameIn = this._name) {\n        const Ctor = this.constructor as typeof PersistentProjectFolder;\n        return new Ctor(this._fileMgr, parentIn, nameIn);\n    }\n    createProjectItem(nameIn: string, isFolder: boolean, dataIn?: ArrayBuffer): PersistentProjectFolder | PersistentProjectFile {\n        if (isFolder) return new PersistentProjectFolder(this.fileMgr, this, nameIn);\n        return new PersistentProjectFile(this.fileMgr, this, nameIn, dataIn);\n    }\n    async addFile(nameIn: string, dataIn?: ArrayBuffer) {\n        if (this.existItem(nameIn)) throw new Error(`${nameIn} already exists.`);\n        const tempItem = new PersistentProjectFile(this.fileMgr, this, nameIn, dataIn);\n        await this.fileMgr.putFile(tempItem);\n        const fileDetail = await this.fileMgr.getFileDetails(this.path, nameIn);\n        const item = this.createProjectItem(nameIn, fileDetail.isFolder, dataIn);\n        this.items.add(item);\n        await this.emitTreeChanged();\n        item.init();\n        return item;\n    }\n    async addFolder(name: string) {\n        if (this.existItem(name)) throw new Error(`${name} already exists.`);\n        const folder = new PersistentProjectFolder(this.fileMgr, this, name);\n        await this.fileMgr.putFile(folder);\n        this.items.add(folder);\n        await folder.init();\n        await this.emitTreeChanged();\n        return folder;\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        await this.fileMgr.rename(this.path, `${this.parentPath}/${newNameIn}`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this) return;\n        if (to === this.parent && newName === this.name) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        await this._fileMgr.rename(this.path, `${to.path}/${newName}`);\n        const from = this.parent;\n        from.items.delete(this);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n    }\n    async destroy() {\n        await this._fileMgr.remove(this.path, this.isFolder);\n        this.parent.items.delete(this as any);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n    }\n}\n","import TemporaryProjectFile from \"./TemporaryProjectFile\";\n\nexport default class TempData extends TemporaryProjectFile {\n    get type() {\n        return \"unknown\" as const;\n    }\n    async instantiate(): Promise<any> {\n        return this.data;\n    }\n}\n","import AbstractProjectFile from \"./AbstractProjectFile\";\nimport PersistentProjectFile from \"./PersistentProjectFile\";\nimport type TemporaryProjectItemManager from \"./TemporaryProjectItemManager\";\nimport type PersistentProjectItemManager from \"./PersistentProjectItemManager\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { IFileEditor } from \"./FileEditor\";\nimport type { IFileInstance } from \"./FileInstance\";\n\n/**\n * An item under TempMgr, this contains in-memory data/instance.\n */\nexport default class TemporaryProjectFile<Data = any> extends AbstractProjectFile<Data, TemporaryProjectItemManager> {\n    async removeObserver(observer: string) {\n        await super.removeObserver(observer);\n        await this.fileMgr.emitChanged();\n        if (this._observers.size === 0) await this.destroy();\n    }\n    /**\n     * Creating alias (do not copy the data, new item has the same ref)\n     */\n    clone(parentIn = this.parent, nameIn = this._name, dataIn = this.data) {\n        const Ctor = this.constructor as typeof TemporaryProjectFile;\n        return new Ctor(this._fileMgr, parentIn, nameIn, dataIn);\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this as any) return;\n        if (to === this.parent) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        const from = this.parent;\n        from.items.delete(this);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async destroy() {\n        this.parent.items.delete(this);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n        await this.fileMgr.emitChanged();\n    }\n    async save(newData: Data, by: any) {\n        this._data = newData;\n        this.emit(\"saved\", by);\n        await this.fileMgr.emitChanged();\n    }\n    async saveAsCopy(parent: IProjectFolder, name: string, newData: ArrayBuffer, persistentMgr?: PersistentProjectItemManager) {\n        const item = new PersistentProjectFile(persistentMgr, parent, name, newData);\n        await persistentMgr.putFile(item);\n        parent.items.add(item);\n        await this.emitTreeChanged();\n        await item.init();\n        return item;\n    }\n    async saveAs(to: IProjectFolder, name: string, newData: ArrayBuffer, by: any, persistentMgr: PersistentProjectItemManager) {\n        const item = new PersistentProjectFile(persistentMgr, to, name, newData);\n        await persistentMgr.putFile(item);\n        const from = this.parent;\n        this.parent = to;\n        this._name = name;\n        const _this: PersistentProjectFile = Object.setPrototypeOf(this, PersistentProjectFile.prototype);\n        this.parent.items.add(_this);\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        await this.emit(\"saved\", by);\n        await item.init();\n        return this;\n    }\n    async instantiate(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileInstance> {\n        throw new Error(\"Not implemented.\");\n        // new instance Patcher / AudioBuffer etc\n    }\n    async instantiateEditor(options: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<IFileEditor> {\n        throw new Error(\"Not implemented.\");\n    }\n}\n","import TempAudioFile from \"../audio/TempAudioFile\";\nimport TempPatcherFile from \"../patcher/TempPatcherFile\";\nimport TempTextFile from \"../text/TempTextFile\";\nimport TempData from \"./TempData\";\nimport AbstractProjectFolder, { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type TemporaryProjectFile from \"./TemporaryProjectFile\";\nimport type { TempItemType } from \"../types\";\nimport type TemporaryProjectItemManager from \"./TemporaryProjectItemManager\";\n\nexport default class TemporaryProjectFolder extends AbstractProjectFolder<TemporaryProjectItemManager> {\n    async init() {\n        this.id = this.fileMgr.generateItemId(this);\n        await this.emit(\"ready\");\n    }\n    clone(parentIn = this.parent, nameIn = this._name) {\n        const Ctor = this.constructor as typeof TemporaryProjectFolder;\n        return new Ctor(this._fileMgr, parentIn, nameIn);\n    }\n    createProjectItem(name: string, isFolder: boolean, data?: any, typeIn?: TempItemType): TemporaryProjectFile {\n        const type = typeIn || this.fileMgr.getTypeFromFileName(name);\n        if (type === \"patcher\") return new TempPatcherFile(this.fileMgr, this, name, data);\n        if (type === \"audio\") return new TempAudioFile(this.fileMgr, this, name, data);\n        if (type === \"text\") return new TempTextFile(this.fileMgr, this, name, data);\n        return new TempData(this.fileMgr, this, name, data);\n    }\n    async addFile(name: string, data?: any, typeIn?: TempItemType) {\n        if (this.existItem(name)) throw new Error(`${name} already exists.`);\n        const item = this.createProjectItem(name, false, data, typeIn);\n        this.items.add(item);\n        await this.emitTreeChanged();\n        await item.init();\n        return item;\n    }\n    async addFolder(name: string) {\n        if (this.existItem(name)) throw new Error(`${name} already exists.`);\n        const folder = new TemporaryProjectFolder(this.fileMgr, this, name);\n        this.items.add(folder);\n        await folder.init();\n        await this.emitTreeChanged();\n        await this.fileMgr.emitChanged();\n        return folder;\n    }\n    async rename(newNameIn: string) {\n        const newName = newNameIn.trim();\n        const oldName = this._name;\n        if (newName === oldName) return;\n        if (this.parent.existItem(newNameIn)) throw new Error(`${newName} already exists.`);\n        this._name = newName;\n        await this.emitTreeChanged();\n        await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async move(to: IProjectFolder, newName = this.name) {\n        if (to === this) return;\n        if (to === this.parent) return;\n        if (to.existItem(newName)) throw new Error(`${newName} already exists in ${to.name}`);\n        const from = this.parent;\n        from.items.delete(this);\n        this.parent = to;\n        const oldName = this._name;\n        this._name = newName;\n        this.parent.items.add(this);\n        await from.emitTreeChanged();\n        await this.emitTreeChanged();\n        await this.emit(\"pathChanged\", { from: from.path, to: to.path });\n        if (oldName !== newName) await this.emit(\"nameChanged\", { oldName, newName });\n        await this.fileMgr.emitChanged();\n    }\n    async destroy() {\n        this.parent.items.delete(this);\n        await this.emitTreeChanged();\n        await this.emit(\"destroyed\");\n        await this.fileMgr.emitChanged();\n    }\n}\n","import TemporaryProjectFolder from \"./TemporaryProjectFolder\";\nimport AbstractProjectItemManager from \"./AbstractProjectItemManager\";\nimport type { IProjectFileOrFolder } from \"./AbstractProjectItem\";\n\nexport default class TemporaryProjectItemManager extends AbstractProjectItemManager {\n    root: TemporaryProjectFolder;\n    async empty() {\n        return true;\n    }\n    async init(clean?: boolean) {\n        this.root = new TemporaryProjectFolder(this, null, null);\n        await this.root.init();\n        this.emit(\"ready\");\n        return this;\n    }\n    getProjectItemFromPath(path: string) {\n        const pathArray = path.split(\"/\");\n        const itemArray: IProjectFileOrFolder[] = [this.root];\n        for (let i = 0; i < pathArray.length; i++) {\n            const id = pathArray[i];\n            if (id.length === 0) continue;\n            if (id === \".\") continue;\n            if (id === \"..\") {\n                itemArray.pop();\n                continue;\n            }\n            const cur = itemArray[itemArray.length - 1];\n            if (cur.isFolder === false) throw new Error(`${cur.name} from path ${path} is not a folder`);\n            const next = cur.findItem(id);\n            if (!next) throw new Error(`Cannot find ${id} from path ${path}`);\n            itemArray.push(next);\n        }\n        return itemArray[itemArray.length - 1];\n    }\n}\n","import AbstractProjectItemManager, { IProjectItemManager } from \"./AbstractProjectItemManager\";\nimport PersistentProjectFolder from \"./PersistentProjectFolder\";\nimport type { TypedMessagePort } from \"../workers/Worker\";\nimport type WorkletEnvProcessor from \"../worklets/WorkletEnv.worklet\";\nimport type { IProjectFolder } from \"./AbstractProjectFolder\";\nimport type { IPersistentProjectItemManager, ProjectItemManagerDataForDiff } from \"./PersistentProjectItemManager\";\nimport type { IProjectItem } from \"./AbstractProjectItem\";\nimport type PersistentProjectFile from \"./PersistentProjectFile\";\n\nexport default class WorkletProjectItemManager extends AbstractProjectItemManager implements IPersistentProjectItemManager {\n    readonly port: TypedMessagePort;\n    readonly env: WorkletEnvProcessor;\n    cachedPathIdMap: Record<string, string> = {};\n    disabled = false;\n    constructor(envIn: WorkletEnvProcessor) {\n        super(envIn);\n        this.env = envIn;\n    }\n    empty(): Promise<any> {\n        throw new Error(\"Empty is not allowed from other threads.\");\n    }\n    async init() {\n        this.cachedPathIdMap = await this.env.fileMgrGetPathIdMap();\n        this.root = new PersistentProjectFolder(this, null, null);\n        await this.root.init();\n        if (!this.projectRoot) await this.root.addFolder(this.projectFolderName);\n        this.emit(\"ready\");\n        return this;\n    }\n    getDataForDiff() {\n        const map: ProjectItemManagerDataForDiff = {};\n        const { allItems } = this;\n        for (const id in allItems) {\n            const item = allItems[id] as PersistentProjectFile | PersistentProjectFolder;\n            if (item.isFolder === true) map[id] = { isFolder: item.isFolder, parent: item.parent?.id, name: item.name, path: item.path };\n            else map[id] = { isFolder: item.isFolder, data: item.sab, lastModifiedId: item.lastModifiedId, parent: item.parent?.id, name: item.name, path: item.path };\n        }\n        return map;\n    }\n    async processDiff(diff: ProjectItemManagerDataForDiff) {\n        this.disabled = true;\n        for (const id in diff) {\n            const process = async (id: string): Promise<void> => {\n                const $item = diff[id];\n                const $parentId = $item.parent;\n                if (!$parentId) return;\n                let parent = this.getProjectItemFromId($parentId);\n                if (!parent) await process($parentId);\n                parent = this.getProjectItemFromId($parentId) as PersistentProjectFolder;\n                const current = this.getProjectItemFromId(id) as PersistentProjectFile | PersistentProjectFolder;\n                if (!current) {\n                    if (parent.isFolder === true) {\n                        this.cachedPathIdMap[$item.path] = id;\n                        if ($item.isFolder === true) {\n                            await parent.addFolder($item.name);\n                        } else {\n                            const newFile = await parent.addFile($item.name, $item.data) as PersistentProjectFile;\n                            newFile.lastModifiedId = $item.lastModifiedId;\n                        }\n                    }\n                } else {\n                    if (current.isFolder === false && $item.isFolder === false) {\n                        if (current.lastModifiedId !== $item.lastModifiedId) await current.save($item.data, this);\n                        if (current.name !== $item.name) await current.rename($item.name);\n                        if (current.parent?.id !== $item.parent) await current.move(parent);\n                    }\n                }\n            };\n            await process(id);\n        }\n        this.disabled = false;\n    }\n    generateItemId(item: IProjectItem) {\n        const id = this.cachedPathIdMap[item.path];\n        if (!id) return this.env.generateId(item);\n        delete this.cachedPathIdMap[item.path];\n        return id;\n    }\n    readFile(path: string) {\n        return this.env.fileMgrReadFile(path);\n    }\n    readDir(path?: string): Promise<{ isFolder: boolean; name: string }[]> {\n        return this.env.fileMgrReadDir(path);\n    }\n    getFileDetails(path: string, name: string) {\n        return this.env.fileMgrGetFileDetails(path, name);\n    }\n    exists(path: string) {\n        return this.env.fileMgrExists(path);\n    }\n    putFile(item: { isFolder: boolean; path: string; data?: ArrayBuffer | SharedArrayBuffer }) {\n        if (this.disabled) return null;\n        return this.env.fileMgrPutFile(item);\n    }\n    async writeFile(path: string, data: ArrayBuffer | SharedArrayBuffer) {\n        if (this.disabled) return null;\n        return this.env.fileMgrWriteFile(path, data);\n    }\n    async remove(path: string, isFolder?: boolean) {\n        return true;\n    }\n    async rename(oldPath: string, newPath: string) {\n        return true;\n    }\n    importFileZip(data: ArrayBuffer, subfolder?: string, to?: IProjectFolder<IProjectItemManager<{}>>, taskHost?: any): Promise<void> {\n        throw new Error(\"Import is not allowed from other threads.\");\n    }\n    exportProjectZip(): Promise<ArrayBuffer> {\n        throw new Error(\"Import is not allowed from other threads.\");\n    }\n}\n","import type { SemanticICONS } from \"semantic-ui-react\";\nimport TypedEventEmitter from \"../../../utils/TypedEventEmitter\";\nimport { stringifyError } from \"../../../utils/utils\";\nimport Line from \"../../patcher/Line\";\nimport type Box from \"../../patcher/Box\";\nimport type Patcher from \"../../patcher/Patcher\";\nimport type { ProjectItemType, TempItemByType, SharedItemByType, TempItemType, TAudioNodeInletConnection, TAudioNodeOutletConnection } from \"../../types\";\nimport type AbstractUI from \"./AbstracttUI\";\nimport type { IJSPatcherEnv } from \"../../Env\";\n\nexport const isJSPatcherObjectConstructor = (x: any): x is typeof AbstractObject => typeof x === \"function\" && x?.isJSPatcherObjectConstructor;\n\nexport const isJSPatcherObject = (x: any): x is AbstractObject => typeof x === \"object\" && x?.isJSPatcherObject;\n\nexport type TMetaType = \"anything\" | \"signal\" | \"object\" | \"number\" | \"boolean\" | \"string\" | \"function\" | \"bang\" | \"color\" | \"enum\";\nexport interface IInletMeta {\n    isHot: boolean;\n    type: TMetaType;\n    enums?: string[];\n    varLength?: boolean;\n    description: string;\n}\nexport type IInletsMeta = IInletMeta[];\nexport interface IOutletMeta {\n    type: TMetaType;\n    enums?: string[];\n    varLength?: boolean;\n    description: string;\n}\nexport type IOutletsMeta = IOutletMeta[];\nexport interface IArgMeta {\n    type: TMetaType;\n    enums?: string[];\n    optional: boolean;\n    default?: any;\n    varLength?: boolean;\n    description: string;\n}\nexport type IArgsMeta = IArgMeta[];\nexport interface IPropMeta<T extends any = any> {\n    type: TMetaType;\n    enums?: T[];\n    default: T;\n    group?: string;\n    description: string;\n    isUIState?: boolean;\n}\nexport type IPropsMeta<T extends Record<string, any> = Record<string, any>> = { [K in keyof T]: IPropMeta<T[K]> };\nexport interface IJSPatcherObjectMeta<P extends Record<string, any> = Record<string, any>> {\n    package: string; // div will have class \"package-name\" \"package-name-objectname\"\n    name: string;\n    icon: SemanticICONS; // semantic icon to display in UI\n    author: string;\n    version: string;\n    description: string;\n    inlets: IInletsMeta;\n    outlets: IOutletsMeta;\n    args: IArgsMeta;\n    props: IPropsMeta<P>;\n    isPatcherInlet: \"data\" | \"audio\" | \"parameter\" | false;\n    isPatcherOutlet: \"data\" | \"audio\" | false;\n}\n\nexport interface ObjectUpdateOptions {\n    undoable?: boolean;\n}\n\nexport type Data<T> = T extends IJSPatcherObject<infer D, any, any, any, any, any, any, any> ? D : never;\nexport type State<T> = T extends IJSPatcherObject<any, infer S, any, any, any, any, any, any> ? S : never;\nexport type Inputs<T> = T extends IJSPatcherObject<any, any, infer I, any, any, any, any, any> ? I : never;\nexport type Outputs<T> = T extends IJSPatcherObject<any, any, any, infer O, any, any, any, any> ? O : never;\nexport type Args<T> = T extends IJSPatcherObject<any, any, any, any, infer A, any, any, any> ? A : never;\nexport type Props<T> = T extends IJSPatcherObject<any, any, any, any, any, infer P, any, any> ? P : never;\nexport type UIState<T> = T extends IJSPatcherObject<any, any, any, any, any, any, infer U, any> ? U : never;\nexport type EventMap<T> = T extends IJSPatcherObject<any, any, any, any, any, any, any, infer E> ? E : never;\nexport type TInletEvent<I extends any[] = any[], $ extends keyof Pick<I, number> = keyof Pick<I, number>> = { inlet: $; data: I[$] };\nexport type TOutletEvent<O extends any[] = any[], $ extends keyof Pick<O, number> = keyof Pick<O, number>> = { outlet: $; data: O[$] };\nexport type JSPatcherObjectEventMap<D, S, I extends any[], A extends any[], P, U, E> = {\n    /** Emitted before any connection */\n    \"preInit\": never;\n    /** Emitted after connections */\n    \"postInit\": never;\n    /** Emitted immediately when the editor request changes to the args */\n    \"updateArgs\": Partial<A>;\n    /** Emitted immediately when the editor request changes to the props */\n    \"updateProps\": Partial<P>;\n    /** Emitted immediately when the editor request changes to the state */\n    \"updateState\": Partial<S>;\n    /** The UI will listen to this event type */\n    \"updateUI\": Partial<U> | never;\n    /** Emitted if received any input */\n    \"inlet\": TInletEvent<I>;\n    /** Emitted when a new connection/disconnection is made on any I/O */\n    \"connectedInlet\": { inlet: number; srcBoxId: string; srcOutlet: number; lineId: string };\n    \"connectedOutlet\": { outlet: number; destBoxId: string; destInlet: number; lineId: string };\n    \"disconnectedInlet\": { inlet: number; srcBoxId: string; srcOutlet: number; lineId: string };\n    \"disconnectedOutlet\": { outlet: number; destBoxId: string; destInlet: number; lineId: string };\n    /** Emitted when the object will be destroyed, attach a callback to clean up */\n    \"destroy\": never;\n    /** Emitted when the object's metadata is changed (by itself) */\n    \"metaUpdated\": { oldMeta: IJSPatcherObjectMeta; meta: IJSPatcherObjectMeta };\n    /** Emitted when the object's args is changed */\n    \"argsUpdated\": { oldArgs: A; args: A };\n    /** Emitted when the object's data is changed */\n    \"propsUpdated\": { oldProps: Partial<P>; props: Partial<P> };\n    /** Emitted when the object's data is changed (by itself) */\n    \"dataUpdated\": { oldData: D; data: D };\n    /** Emitted when the object's state is changed */\n    \"stateUpdated\": { oldState: S; state: S };\n} & E;\n\n/**\n * All JSPatcher Object should extends this class\n *\n * @template D serializable, type of `data` property, use `setData` to update. Data will be stored with the box in the serialized patcher. Will mark the patcher `dirty`.\n * @template S serializable, type of `state` property, use `setState` to update. State is temporary to the object instance. Can be updated from the host.\n * @template I type of inlets as an array.\n * @template O type of outlets as an array.\n * @template A serializable, type of args as an array.\n * @template P serializable, type of props as a map.\n * @template U type of UI state as a map, the UI will listen to any update of this map. If the object can be running on another thread, this should be serializable.\n * @template E type of additional event map\n */\nexport interface IJSPatcherObject<\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends {} = {},\n    U extends {} = {},\n    E extends Partial<JSPatcherObjectEventMap<D, S, I, A, P, U, {}>> & Record<string, any> = {}\n> extends TypedEventEmitter<JSPatcherObjectEventMap<D, S, I, A, P, U, E>> {\n    /** Should be true */\n    readonly isJSPatcherObject: true;\n    /** Unique identifier of the object */\n    readonly id: string;\n    /** constructor (class) name */\n    readonly class: string;\n    /** the patcher that the object lives in */\n    readonly patcher: Patcher;\n    /** Patcher constructor */\n    readonly Patcher: typeof Patcher;\n    /** the box that the object lives in */\n    readonly box: Box<this>;\n    /** the env that the object lives in */\n    readonly env: IJSPatcherEnv;\n    readonly audioCtx?: AudioContext;\n    readonly meta: IJSPatcherObjectMeta<P>;\n    setMeta(metaIn: Partial<IJSPatcherObjectMeta>): void;\n    /** Serializable, use `setState` to update. State is temporary to the object instance. Can be updated from the host. */\n    state: S;\n    setState(stateIn: Partial<S>): void;\n    /** Serializable, type of `data` property, use `setData` to update. Data will be stored with the box in the serialized patcher. */\n    readonly data: D;\n    setData(dataIn: Partial<D>): void;\n    /** Get all props from box, if not defined, get from metadata default */\n    readonly props: Partial<P>;\n    /** Get prop value from box, if not defined, get from metadata default. */\n    getProp<K extends keyof P = keyof P>(key: K): P[K];\n    setProps(props: Partial<P>): void;\n    readonly args: Partial<A>;\n    setArgs(args: Partial<A>): void;\n    inlets: number;\n    outlets: number;\n    readonly inletLines: Set<Line>[];\n    readonly outletLines: Set<Line>[];\n    inletAudioConnections: TAudioNodeInletConnection<AudioNode | AudioParam>[];\n    outletAudioConnections: TAudioNodeOutletConnection[];\n\n    // for box\n    /** Will be called just after constructed */\n    init(): Promise<void>;\n    /** Will be called after the object attached to box */\n    postInit(): Promise<void>;\n    /** Will be called when need to change arguments */\n    updateArgs(args: A, options?: ObjectUpdateOptions): Promise<void>;\n    /** Will be called when need to change properties */\n    updateProps(props: Partial<P>, options?: ObjectUpdateOptions): Promise<void>;\n    /** Will be called when need to change state */\n    updateState(state: Partial<S>, options?: ObjectUpdateOptions): Promise<void>;\n    /** Main function when receive data from a inlet (base 0). */\n    fn<$ extends number = number>(inlet: $, data: I[$]): void;\n    /** Called when object will be destroyed. */\n    destroy(): Promise<void>;\n    // called when inlet or outlet are connected or disconnected\n    connectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string): void;\n    disconnectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string): void;\n    connectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string): void;\n    disconnectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string): void;\n    /** Highlight the UI box. */\n    highlight(): void;\n\n    // for developer\n    /** Update UI's React State. */\n    updateUI(state: Partial<U>): void;\n    /** Output data with ith outlet. */\n    outlet<$ extends number>(outlet: $, data: O[$]): void;\n    /**\n     * Outlet all values in an array with corresponding index,\n     * use sparse array to omit an outlet,\n     * `[, 1]` will outlet 1 on second outlet,\n     * but `[undefined, 1]` will also outlet undefined on first outlet\n     */\n    outletAll(outputs: Partial<O>): void;\n    /** Record an undoable operation to the patcher history */\n    undoable(e: { oldArgs?: A; args?: A; oldProps?: Partial<P>; props?: Partial<P>; oldState?: S; state?: S }): void;\n    /**\n     * Get a shared item from files or temp\n     * If no ID provided, this will create a new key in temp\n     * if no such ID found in files or in temp, will put the result of data() into it.\n     */\n    getSharedItem<T extends ProjectItemType>(id?: string, type?: T, data?: () => Promise<TempItemByType<T>[\"data\"]>, onceCreate?: (aitem: SharedItemByType<T>) => any): Promise<{ id: string; item: SharedItemByType<T>; newItem: boolean; off?: () => any }>;\n    // output to console\n    post(data: any): void;\n    error(data: any): void;\n    info(data: any): void;\n    warn(data: any): void;\n    connectAudio(): void;\n    connectAudioInlet(portIn?: number): void;\n    connectAudioOutlet(portIn?: number): void;\n    disconnectAudio(): void;\n    disconnectAudioInlet(portIn?: number): void;\n    disconnectAudioOutlet(portIn?: number): void;\n    applyBPF(param: AudioParam, bpf: number[][]): void;\n}\nexport declare const IJSPatcherObject: {\n    /** Should be true */\n    readonly isJSPatcherObjectConstructor: true;\n    /** div will have class \"packageName\" \"packageName-objectName\" */\n    package: string;\n    readonly _name: string;\n    icon: SemanticICONS;\n    author: string;\n    version: string;\n    description: string;\n    inlets: IInletsMeta;\n    outlets: IOutletsMeta;\n    args: IArgsMeta;\n    props: IPropsMeta;\n    isPatcherInlet: \"data\" | \"audio\" | false;\n    isPatcherOutlet: \"data\" | \"audio\" | false;\n    readonly meta: IJSPatcherObjectMeta;\n    /**\n     * The UI that the object uses to display in the patcher, not available in other threads.\n     * is `BaseUI` by default\n     */\n    UI?: typeof AbstractUI;\n    new (box: Box, patcher: Patcher): IJSPatcherObject;\n};\n\nexport interface AnyJSPatcherObject extends IJSPatcherObject<Record<string, any>, Record<string, any>, any[], any[], any[], Record<string, any>, Record<string, any>, Record<string, any>> {}\n\nexport default abstract class AbstractObject<\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends {} = {},\n    U extends {} = {},\n    E extends Partial<JSPatcherObjectEventMap<D, S, I, A, P, U, {}>> & Record<string, any> = {}\n> extends TypedEventEmitter<JSPatcherObjectEventMap<D, S, I, A, P, U, E>> implements IJSPatcherObject<D, S, I, O, A, P, U, E> {\n    static readonly isJSPatcherObjectConstructor = true as const;\n    static package = \"Base\";\n    static get _name() {\n        return this.name;\n    }\n    static icon = null as SemanticICONS;\n    static author = \"\";\n    static version = \"0.0.0\";\n    static description = \"\";\n    static inlets: IInletsMeta = [];\n    static outlets: IOutletsMeta = [];\n    static args: IArgsMeta = [];\n    static props: IPropsMeta = {};\n    static isPatcherInlet: \"data\" | \"audio\" | false = false;\n    static isPatcherOutlet: \"data\" | \"audio\" | false = false;\n    static get meta(): IJSPatcherObjectMeta {\n        return {\n            package: this.package, // div will have class \"package-name\" \"package-name-objectname\"\n            name: this._name,\n            icon: this.icon, // semantic icon to display in UI\n            author: this.author,\n            version: this.version,\n            description: this.description,\n            inlets: this.inlets,\n            outlets: this.outlets,\n            args: this.args,\n            props: this.props,\n            isPatcherInlet: this.isPatcherInlet,\n            isPatcherOutlet: this.isPatcherOutlet\n        };\n    }\n    static UI: typeof AbstractUI;\n\n    readonly isJSPatcherObject = true as const;\n    readonly id: string;\n    get class() {\n        return this.constructor.name;\n    }\n    protected readonly _patcher: Patcher;\n    get patcher() {\n        return this._patcher;\n    }\n    get Patcher() {\n        return this._patcher.constructor as typeof Patcher;\n    }\n    protected readonly _box: Box<this>;\n    get box() {\n        return this._box;\n    }\n    get env() {\n        return this.patcher.env;\n    }\n    get audioCtx() {\n        return this.patcher.audioCtx;\n    }\n    private _meta = (this.constructor as typeof AbstractObject).meta as IJSPatcherObjectMeta<P>;\n    get meta(): IJSPatcherObjectMeta<P> {\n        return this._meta;\n    }\n    setMeta(metaIn: Partial<IJSPatcherObjectMeta<P>>) {\n        const oldMeta = { ...this.meta };\n        this._meta = Object.assign(this.meta, metaIn);\n        this.emit(\"metaUpdated\", { oldMeta, meta: { ...this.meta } });\n    }\n    state: S;\n    setState = (stateIn: Partial<S>) => {\n        const oldState = { ...this.state };\n        this.state = Object.assign(this.state, stateIn);\n        this.emit(\"stateUpdated\", { oldState, state: { ...this.state } });\n    };\n    get data(): D {\n        return this._box.data;\n    }\n    setData(dataIn: Partial<D>) {\n        const oldData = { ...this._box.data };\n        this._box.data = Object.assign(this.data, dataIn) as any;\n        this.emit(\"dataUpdated\", { oldData, data: { ...this.data } });\n    }\n    get props(): Partial<P> {\n        const props: Partial<P> = {};\n        for (const key in this.meta.props) {\n            props[key as keyof P] = this.getProp(key as keyof P);\n        }\n        return props;\n    }\n    getProp<K extends keyof P = keyof P>(key: K): P[K] {\n        if (key === \"rect\") return this.box.rect as any;\n        if (key === \"presentationRect\") return this.box.presentationRect as any;\n        if (key === \"background\") return this.box.background as any;\n        if (key === \"presentation\") return this.box.presentation as any;\n        return typeof this.box.props[key] === \"undefined\" ? this.meta.props[key].default : this.box.props[key];\n    }\n    setProps = (propsIn: Partial<P>) => {\n        const keys = Object.keys(propsIn);\n        const oldProps = { ...this.props } as Partial<P>;\n        this.box.update({ props: propsIn });\n        const props = { ...this.props } as Partial<P>;\n        for (const key in oldProps) {\n            if (keys.indexOf(key) === -1) {\n                delete oldProps[key];\n                delete props[key];\n            }\n        }\n        this.emit(\"propsUpdated\", { oldProps, props });\n    };\n    get args(): Partial<A> {\n        return this.box.args as any;\n    }\n    setArgs = (args: Partial<A>) => {\n        const oldArgs = this.args.slice() as A;\n        this.box.update({ args });\n        this.emit(\"argsUpdated\", { oldArgs, args: this.args.slice() as A });\n    };\n    get inlets() {\n        return this._box.inlets;\n    }\n    set inlets(i: number) {\n        this._box.setInlets(i);\n    }\n    get outlets() {\n        return this._box.outlets;\n    }\n    set outlets(i: number) {\n        this._box.setOutlets(i);\n    }\n    get outletLines() {\n        return this._box.outletLines;\n    }\n    get inletLines() {\n        return this._box.inletLines;\n    }\n    inletAudioConnections: TAudioNodeInletConnection[] = [];\n    outletAudioConnections: TAudioNodeOutletConnection[] = [];\n    constructor(box: Box, patcher: Patcher) {\n        super();\n        // line connected = metaChange event subscribed\n        // patcher object outside, use _ for prevent recursive stringify\n        this._patcher = patcher;\n        // the box which create this instance, use _ for prevent recursive stringify\n        this._box = box as Box<this>;\n        this.id = this.env.generateId(this);\n    }\n    async init() {\n        // process args and props\n        this.subscribe();\n        await this.emit(\"preInit\");\n    }\n    async postInit() {\n        await this.emit(\"postInit\");\n    }\n    /** Do everything here */\n    subscribe(): void {}\n    updateUI(state: Partial<U>) {\n        this.emit(\"updateUI\", state);\n    }\n    async updateArgs(args: A, options?: ObjectUpdateOptions) {\n        if (args?.length) {\n            const oldArgs = this.args.slice() as A;\n            await this.emit(\"updateArgs\", args);\n            if (options?.undoable) this.undoable({ oldArgs, args: this.args.slice() as A });\n        }\n    }\n    async updateProps(propsIn: Partial<P>, options?: ObjectUpdateOptions) {\n        if (propsIn && Object.keys(propsIn).length) {\n            const keys = Object.keys(propsIn);\n            const oldProps = { ...this.props };\n            await this.emit(\"updateProps\", propsIn);\n            const props = { ...this.props };\n            for (const key in oldProps) {\n                if (keys.indexOf(key) === -1) {\n                    delete oldProps[key];\n                    delete props[key];\n                }\n            }\n            if (options?.undoable) this.undoable({ oldProps, props });\n        }\n    }\n    async updateState(state: Partial<S>, options?: ObjectUpdateOptions) {\n        if (state && Object.keys(state).length) {\n            const oldState = { ...this.state };\n            await this.emit(\"updateState\", state);\n            if (options?.undoable) this.undoable({ oldState, state: { ...this.state } });\n        }\n    }\n    fn<$ extends keyof Pick<I, number> = keyof Pick<I, number>>(inlet: $, data: I[$]) {\n        if (inlet === 0) { // allow change props via first inlet with an props object\n            if (data !== null && typeof data === \"object\") {\n                const propsInKeys = Object.keys(data);\n                const propsKeys = Object.keys(this.meta.props);\n                if (propsInKeys.length && propsInKeys.every(k => propsKeys.indexOf(k) !== -1)) {\n                    this.updateProps(data);\n                    return;\n                }\n            }\n        }\n        this.emit(\"inlet\", { data, inlet });\n    }\n    outlet<$ extends keyof Pick<O, number>>(outlet: $, data: O[$]) {\n        if (outlet >= this.outlets) return;\n        Array.from(this.outletLines[outlet]).sort(Line.compare).map(line => line.pass(data));\n    }\n    outletAll(outputs: Partial<O>) {\n        for (let i = outputs.length - 1; i >= 0; i--) {\n            if (i in outputs) this.outlet(i, outputs[i]);\n        }\n    }\n    undoable(e: { oldArgs?: A; args?: A; oldProps?: Partial<P>; props?: Partial<P>; oldState?: S; state?: S }) {\n        this.box.undoable(e as any);\n    }\n    async destroy() {\n        await this.emit(\"destroy\");\n    }\n    connectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        this.emit(\"connectedOutlet\", { outlet, destBoxId, destInlet, lineId });\n    }\n    connectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        this.emit(\"connectedInlet\", { inlet, srcBoxId, srcOutlet, lineId });\n    }\n    disconnectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        this.emit(\"disconnectedOutlet\", { outlet, destBoxId, destInlet, lineId });\n    }\n    disconnectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        this.emit(\"disconnectedInlet\", { inlet, srcBoxId, srcOutlet, lineId });\n    }\n    post(data: any) {\n        this._patcher.newLog(\"none\", this.meta.name, stringifyError(data), this._box);\n    }\n    error(data: any) {\n        const s = stringifyError(data);\n        this._patcher.newLog(\"error\", this.meta.name, s, this._box);\n        this._box.error(s);\n    }\n    info(data: any) {\n        this._patcher.newLog(\"info\", this.meta.name, stringifyError(data), this._box);\n    }\n    warn(data: any) {\n        this._patcher.newLog(\"warn\", this.meta.name, stringifyError(data), this._box);\n    }\n    highlight() {\n        this._box.highlight();\n    }\n\n    connectAudio() {\n        this.box.allLines.forEach(line => line.enable());\n    }\n    connectAudioInlet(portIn?: number) {\n        this.inletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.enable());\n        });\n    }\n    connectAudioOutlet(portIn?: number) {\n        this.outletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.enable());\n        });\n    }\n    disconnectAudio() {\n        this.box.allLines.forEach(line => line.disable());\n    }\n    disconnectAudioInlet(portIn?: number) {\n        this.inletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.disable());\n        });\n    }\n    disconnectAudioOutlet(portIn?: number) {\n        this.outletLines.forEach((lines, port) => {\n            if (typeof portIn === \"undefined\" || port === portIn) lines.forEach(line => line.disable());\n        });\n    }\n    applyBPF(param: AudioParam, bpf: number[][]) {\n        const { audioCtx } = this;\n        const { currentTime } = audioCtx;\n        param.cancelScheduledValues(currentTime);\n        param.setValueAtTime(param.value, currentTime);\n        let t = 0;\n        bpf.forEach((a) => {\n            if (a.length === 1) {\n                param.setValueAtTime(a[0], currentTime + t);\n            } else if (a.length > 1) {\n                t += a[1];\n                param.linearRampToValueAtTime(a[0], currentTime + t);\n            }\n        });\n    }\n    async getSharedItem<T extends ProjectItemType>(id = this.box.id, type: T = \"unknown\" as T, data?: () => Promise<TempItemByType<T>[\"data\"]>, onceCreate?: (aitem: SharedItemByType<T>) => any): Promise<{ id: string; item: SharedItemByType<T>; newItem: boolean; off?: () => any }> {\n        let item: SharedItemByType<T>;\n        let newItem = false;\n        const { fileMgr, tempMgr } = this.patcher.env;\n        try {\n            item = fileMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n        } catch {\n            try {\n                item = tempMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n            } catch {\n                if (data) {\n                    const d = await data();\n                    try {\n                        item = await tempMgr.root.addFile(id, d, type as TempItemType) as SharedItemByType<T>;\n                        newItem = true;\n                    } catch {\n                        item = tempMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n                    }\n                } else {\n                    if (onceCreate) {\n                        const off = () => {\n                            fileMgr.off(\"treeChanged\", handleFileMgrTreeChanged);\n                            tempMgr.off(\"treeChanged\", handleTempMgrTreeChanged);\n                        };\n                        const handleFileMgrTreeChanged = () => {\n                            try {\n                                item = fileMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n                                off();\n                                onceCreate(item);\n                            } catch {}\n                        };\n                        const handleTempMgrTreeChanged = () => {\n                            try {\n                                item = tempMgr.getProjectItemFromPath(id) as SharedItemByType<T>;\n                                off();\n                                onceCreate(item);\n                            } catch {}\n                        };\n                        fileMgr.on(\"treeChanged\", handleFileMgrTreeChanged);\n                        tempMgr.on(\"treeChanged\", handleTempMgrTreeChanged);\n                        return { id, item: null, newItem, off };\n                    }\n                    return { id, item: null, newItem };\n                }\n            }\n        }\n        if (item.type !== type) throw new Error(`Getting shared item ${id}, but returned item is of type ${item.type}, not of type ${type}.`);\n        return { id, item, newItem };\n    }\n}\n","export default class Bang {\n    isBang = true;\n    toString() {\n        return \"bang\";\n    }\n}\n\nexport const isBang = (x: any): x is Bang => typeof x === \"object\" && x?.isBang;\n","import AbstractObject, { IJSPatcherObjectMeta, IPropsMeta } from \"./AbstractObject\";\nimport type { TRect } from \"../../types\";\nimport type { BaseUIState } from \"./BaseUI\";\n\nexport interface BaseObjectAdditionalProps {\n    background: boolean;\n    presentation: boolean;\n    rect: TRect;\n    presentationRect: TRect;\n}\nexport interface BaseObjectProps extends BaseObjectAdditionalProps, BaseUIState {}\nexport default class BaseObject<\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends Partial<BaseObjectProps> & Record<string, any> = {},\n    U extends Partial<BaseUIState> & Record<string, any> = {},\n    E extends {} = {}\n> extends AbstractObject<D, S, I, O, A, P & BaseObjectProps, U & BaseUIState, E> {\n    static package = \"base\";\n    static props: IPropsMeta = {\n        hidden: {\n            type: \"boolean\",\n            default: false,\n            description: \"Hide on lock\",\n            isUIState: true\n        },\n        background: {\n            type: \"boolean\",\n            default: false,\n            description: \"Include in background\"\n        },\n        presentation: {\n            type: \"boolean\",\n            default: false,\n            description: \"Include in presentation\"\n        },\n        rect: {\n            type: \"object\",\n            default: [0, 0, 90, 20],\n            description: \"Position and dimensions in patch\"\n        },\n        presentationRect: {\n            type: \"object\",\n            default: [0, 0, 90, 20],\n            description: \"Position and dimensions in presentation\"\n        },\n        ignoreClick: {\n            type: \"boolean\",\n            default: false,\n            description: \"Ignore Click\",\n            isUIState: true\n        },\n        hint: {\n            type: \"string\",\n            default: \"\",\n            description: \"Hint on hover\",\n            isUIState: true\n        }\n    };\n    static get meta(): IJSPatcherObjectMeta {\n        const thisName = this._name;\n        const superMeta = Object.getPrototypeOf(this).meta;\n        const superProps = superMeta.props;\n        const thisProps = this.props;\n        for (const key in thisProps) {\n            thisProps[key as keyof IPropsMeta<BaseObjectProps>].group = key in superProps ? superProps[key].group : thisName;\n        }\n        return {\n            package: this.package,\n            name: this._name,\n            icon: this.icon,\n            author: this.author,\n            version: this.version,\n            description: this.description,\n            inlets: [...this.inlets],\n            outlets: [...this.outlets],\n            args: [...this.args],\n            props: {\n                ...superProps,\n                ...thisProps\n            },\n            isPatcherInlet: this.isPatcherInlet,\n            isPatcherOutlet: this.isPatcherOutlet\n        };\n    }\n    isUIStateKey = (x: any) => this.meta.props[x] && this.meta.props[x].isUIState;\n    updateUIFromProps = (props: Partial<P & BaseObjectProps>) => {\n        if (props) {\n            const uiState: Partial<U & BaseUIState> = {};\n            for (const key in props) {\n                if (this.isUIStateKey(key)) uiState[key as keyof (U & BaseUIState)] = props[key] as any;\n            }\n            this.updateUI(uiState);\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", e => this.box.emit(\"metaUpdated\", e));\n        this.on(\"argsUpdated\", e => this.box.emit(\"argsUpdated\", e));\n        this.on(\"propsUpdated\", e => this.box.emit(\"propsUpdated\", e));\n        this.on(\"dataUpdated\", e => this.box.emit(\"dataUpdated\", e));\n        this.on(\"stateUpdated\", e => this.box.emit(\"stateUpdated\", e));\n        this.on(\"updateArgs\", this.setArgs);\n        this.on(\"updateProps\", this.setProps);\n        this.on(\"updateProps\", this.updateUIFromProps);\n    }\n}\n","import BaseObject from \"./BaseObject\";\nimport type { IArgsMeta, IPropsMeta } from \"./AbstractObject\";\nimport type { CommentUIState } from \"./CommentUI\";\n\nexport interface CommentProps {\n    bgColor: string;\n    textColor: string;\n    fontFamily: string;\n    fontSize: number;\n    fontStyle: \"normal\" | \"italic\" | \"oblique\";\n    fontWeight: \"normal\" | \"bold\" | \"lighter\" | \"bolder\" | number;\n    textAlign: \"center\" | \"left\" | \"right\";\n}\n\nexport default class comment extends BaseObject<{ value: string }, {}, [string], [], [string], CommentProps, CommentUIState> {\n    static description = \"Text Comment\";\n    static args: IArgsMeta = [{\n        type: \"string\",\n        optional: true,\n        varLength: true,\n        description: \"Initial text\"\n    }];\n    static props: IPropsMeta<CommentProps> = {\n        bgColor: {\n            type: \"color\",\n            default: \"transparent\",\n            description: \"Background color\",\n            isUIState: true\n        },\n        textColor: {\n            type: \"color\",\n            default: \"rgb(255, 255, 255)\",\n            description: \"Text color\",\n            isUIState: true\n        },\n        fontFamily: {\n            type: \"enum\",\n            enums: [\"Lato\", \"Georgia\", \"Times New Roman\", \"Arial\", \"Tahoma\", \"Verdana\", \"Courier New\"],\n            default: \"Lato\",\n            description: \"Font family\",\n            isUIState: true\n        },\n        fontSize: {\n            type: \"number\",\n            default: 12,\n            description: \"Text font size\",\n            isUIState: true\n        },\n        fontStyle: {\n            type: \"enum\",\n            enums: [\"normal\", \"italic\", \"oblique\"],\n            default: \"normal\",\n            description: \"Text style\",\n            isUIState: true\n        },\n        fontWeight: {\n            type: \"string\",\n            default: \"normal\",\n            description: 'Text style: \"normal\" | \"bold\" | \"lighter\" | \"bolder\" | number',\n            isUIState: true\n        },\n        textAlign: {\n            type: \"enum\",\n            enums: [\"left\", \"center\", \"right\"],\n            default: \"left\",\n            description: \"Text style\",\n            isUIState: true\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 0;\n        });\n        this.on(\"updateArgs\", (args) => {\n            if (!this.data.hasOwnProperty(\"value\")) this.setData({ value: args.join(\" \") });\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (typeof data === \"string\") {\n                this.setData({ value: data });\n                this.updateUI({ value: data });\n            }\n        });\n    }\n}\n","import type BaseObject from \"./BaseObject\";\n\nexport interface RemotedObjectEventMap {\n    \"outlet\": { outlet: number; data: any };\n}\n\n/** Generate an object that can be used in the AudioWorklet as remoted. */\nexport default <\n    D extends {} = {},\n    S extends {} = {},\n    I extends any[] = any[],\n    O extends any[] = any[],\n    A extends any[] = any[],\n    P extends {} = {},\n    U extends {} = {},\n    E extends Partial<RemotedObjectEventMap> & Record<string, any> = {}\n>(O: typeof BaseObject) => class RemotedObject extends O<D, S, I, O, A, P, U, E & RemotedObjectEventMap> {\n    get proxy() {\n        return this.patcher.state.patcherProcessor;\n    }\n    subscribe() {\n        super.subscribe();\n        const handleBoxIoCountChanged = () => {\n            const { id, inlets, outlets } = this.box;\n            this.proxy?.objectEmitFromWorklet(id, \"boxIoCountChanged\", { inlets, outlets });\n        };\n        this.box.on(\"ioCountChanged\", handleBoxIoCountChanged);\n        this.on(\"outlet\", ({ outlet, data }) => this.outlet(outlet, data));\n        this.on(\"destroy\", () => this.box.off(\"ioCountChanged\", handleBoxIoCountChanged));\n    }\n};\n","import BaseObject from \"./BaseObject\";\nimport { Func, New } from \"../importer/RemotedImporter\";\nimport getIO from \"../jsaw/index.jsdsppkg.aw\";\nimport _comment from \"./Comment\";\nimport generateRemotedObject from \"./generateRemotedObject\";\n\nexport default async () => ({\n    BaseObject,\n    EmptyObject: BaseObject,\n    InvalidObject: BaseObject,\n    func: Func,\n    new: New,\n    comment: generateRemotedObject(_comment as typeof BaseObject),\n    ...await getIO()\n});\n","import RemotedImporter from \"../importer/RemotedImporter\";\n\nexport default async () => RemotedImporter.import(\"globalThis\", globalThis, true);\n","import StaticMethod from \"./StaticMethod\";\nimport Method from \"./Method\";\nimport BaseObject from \"../base/BaseObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type ImportedObject from \"./ImportedObject\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\n\ntype TAnyFunction = (...args: any[]) => any;\ntype TWrapper = typeof StaticMethod | typeof Method;\ninterface IS { Wrapper: TWrapper }\nexport default class Func extends BaseObject<{}, {}, [Bang], [TAnyFunction], any[], {}, { loading: boolean }> {\n    static description = \"Get the function itself\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Bang to get the function itself\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"function\",\n        description: \"function\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"string\",\n        optional: false,\n        varLength: false,\n        description: \"Function name\"\n    }];\n    _: IS = { Wrapper: null };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n            handleUpdateArgs(this.args);\n        });\n        const handleUpdateArgs = (args: any[]) => {\n            if (typeof args[0] !== \"undefined\") {\n                const Wrapper = this.patcher.activeLib[args[0]];\n                if (!Wrapper) this.error(`Function ${args[0]} not found.`);\n                else if (Wrapper.prototype instanceof StaticMethod || Wrapper.prototype instanceof Method) {\n                    this._.Wrapper = Wrapper as TWrapper;\n                } else {\n                    this.error(\"Given identifier function is not a function\");\n                }\n            } else {\n                this.error(\"A function identifier is needed.\");\n            }\n        };\n        this.on(\"updateArgs\", handleUpdateArgs);\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (isBang(data)) this.output();\n            }\n        });\n    }\n    callback = () => this.outlet(0, this.imported);\n    output() {\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n    get name() {\n        const c = this._.Wrapper;\n        return c.path[c.path.length - 1];\n    }\n    get imported(): TAnyFunction {\n        const c = this._.Wrapper || this.patcher.activeLib.Object as TWrapper;\n        let r: TAnyFunction;\n        try {\n            r = c.path.reduce((acc, cur) => acc[cur], c.root);\n        } catch (e) {\n            this.error(e);\n        }\n        return r;\n    }\n    set imported(v: TAnyFunction) {\n        const c = (this.constructor as typeof ImportedObject);\n        let parent = c.root;\n        try {\n            if (!c.path.length) {\n                c.root = v;\n            } else {\n                c.path.slice(0, -1).forEach(key => parent = parent[key]);\n                parent[c.path[c.path.length - 1]] = v;\n            }\n        } catch (e) {\n            this.error(e);\n        }\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ninterface IS<Static extends boolean> {\n    instance: Static extends true ? undefined : any;\n    result: any;\n}\ntype I<Static extends boolean> = Static extends true ? [Bang] : [any | Bang];\ntype O<Static extends boolean> = Static extends true ? [any] : [any, any];\nexport default class Getter<Static extends boolean = false> extends ImportedObject<any, {}, I<Static>, O<Static>, [], { sync: boolean }, { loading: boolean }> {\n    static importedObjectType: ImportedObjectType = \"Getter\";\n    static description = \"Auto-imported getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to read\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    static props: IJSPatcherObjectMeta[\"props\"] = {\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    _: IS<Static> = { instance: undefined, result: null };\n    handlePreInit = () => {\n        this.inlets = 1;\n        this.outlets = 2;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.instance = data;\n            if (this.execute()) this.output();\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", this.handlePreInit);\n        this.on(\"inlet\", this.handleInlet);\n    }\n    execute() {\n        try {\n            this._.result = this._.instance[this.name];\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this._.result, this._.instance] as O<Static>);\n    output() {\n        if (this._.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this._.result.then((r) => {\n                this.loading = false;\n                this._.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\n/**\n* ```JavaScript\n*   class A {\n*       static a = {} // A.a\n*       static b() {} // A.b\n*       static get c() {} // A.c (get)\n*       static set d(x) {} // A.d (set)\n*       e = {} // Nothing\n*       f() {} // A.prototype.f\n*       get g() {} // A.prototype.g (get)\n*       set h(x) {} // A.prototype.h (set)\n*       constructor() {} // A.prototype.constructor\n*   }\n*   const B = {\n*       a: {}, // B.a\n*       b() {} // B.b\n*   }\n*   const C = function() {\n*       this.a = null; // C.prototype.constructor\n*   }\n* ```\n*/\n\nexport default abstract class ImportedObject<T, S, I extends any[], O extends any[], A extends any[], P, U> extends BaseObject<{}, S, I, O, A, P, U> {\n    static importedObjectType: ImportedObjectType;\n    static root: Record<string, any>;\n    static path: string[];\n    static description = \"Auto-imported object\";\n    get name() {\n        const c = (this.constructor as typeof ImportedObject);\n        return c.path[c.path.length - 1];\n    }\n    get imported(): T {\n        const c = (this.constructor as typeof ImportedObject);\n        let r: T;\n        try {\n            r = c.path.reduce((acc, cur) => acc[cur], c.root);\n        } catch (e) {\n            this.error(e);\n        }\n        return r;\n    }\n    set imported(v: T) {\n        const c = (this.constructor as typeof ImportedObject);\n        let parent = c.root;\n        try {\n            if (!c.path.length) {\n                c.root = v;\n            } else {\n                c.path.slice(0, -1).forEach(key => parent = parent[key]);\n                parent[c.path[c.path.length - 1]] = v;\n            }\n        } catch (e) {\n            this.error(e);\n        }\n    }\n}\nexport class AnyImportedObject extends ImportedObject<any, any, any, any, any, any, any> {}\n","import { ImporterDirSelfObject } from \"../../../utils/symbols\";\nimport { getPropertyDescriptors } from \"../../../utils/utils\";\nimport { IJSPatcherObject, isJSPatcherObjectConstructor } from \"../base/AbstractObject\";\nimport type { TPackage } from \"../../types\";\n\nexport default abstract class Importer {\n    static $self = ImporterDirSelfObject;\n    static getObject(p: PropertyDescriptor, pkgName: string, root: Record<string, any>, path: string[]): typeof IJSPatcherObject {\n        throw new Error(\"getObject not implemented\");\n    }\n    /*\n    static async test() {\n        await Importer.importFrom(\"https://unpkg.com/@tensorflow/tfjs\", \"tf\").then(console.log);\n        await Importer.importFrom(\"https://unpkg.com/three\", \"THREE\").then(console.log);\n        await Importer.importFrom(\"https://unpkg.com/webmidi\", \"MIDI\").then(console.log);\n    }\n    */\n    static writeInPath(pkgIn: TPackage, pathIn: string[], object: typeof IJSPatcherObject) {\n        if (pathIn.length === 0) {\n            Object.assign(pkgIn, { [this.$self]: object });\n            return;\n        }\n        const path = pathIn.slice();\n        let pkg = pkgIn;\n        while (path.length > 1) {\n            const key = path.shift();\n            if (!pkg[key]) pkg[key] = {};\n            else if (isJSPatcherObjectConstructor(pkg[key])) pkg[key] = { [this.$self]: pkg[key] };\n            pkg = pkg[key] as TPackage;\n        }\n        pkg[path[0]] = object;\n    }\n    /**\n     * Recursive transform JavaScript object to JSPatcher Package\n     *\n     * @param {string} pkgName package identifier\n     * @param {Record<string, any>} root imported JavaScript object\n     * @param {boolean} [all] import non-iterables\n     * @param {TPackage} [outIn]\n     * @param {string[]} [pathIn]\n     * @param {any[]} [stackIn]\n     * @param {number} [depthIn]\n     */\n    static import(pkgName: string, root: Record<string, any>, all?: boolean, outIn?: TPackage, pathIn?: string[], stackIn?: any[], depthIn?: number) {\n        const depth = typeof depthIn === \"undefined\" ? 0 : depthIn;\n        const out = outIn || {};\n        const path = pathIn || [];\n        const stack = stackIn ? stackIn.slice() : [];\n        let o: any;\n        try {\n            o = path.reduce((acc, cur) => acc[cur], root);\n        } catch (e) {\n            return out;\n        }\n        if (typeof o === \"undefined\" || o === null || stack.indexOf(o) !== -1 || (depth && o === globalThis) || o === (globalThis as any).jspatcherEnv) return out; // cyclic object\n        stack[depth] = o;\n        let props: Record<string, TypedPropertyDescriptor<any> | PropertyDescriptor>;\n        try { // mitigate opener.location.href error\n            props = getPropertyDescriptors(o);\n        } catch (e) {\n            return out;\n        }\n        if (path.length === 0) {\n            const newObj = this.getObject({ value: root }, pkgName, root, []);\n            if (newObj) this.writeInPath(out, [], newObj);\n        }\n        for (const key in props) {\n            if (typeof o === \"function\" && [\"arguments\", \"caller\", \"length\", \"name\", \"__proto__\"].indexOf(key) >= 0) continue;\n            if (typeof o === \"object\" && [\"constructor\", \"__proto__\"].indexOf(key) >= 0) continue;\n            const prop = props[key];\n            const newPath = [...path, key];\n            if (!all && !prop.enumerable && key.startsWith(\"_\") && key !== \"prototype\") continue;\n            const newObj = this.getObject(prop, pkgName, root, newPath);\n            if (newObj) this.writeInPath(out, newPath.map((s, i) => (i !== newPath.length - 1 && s === \"prototype\" ? \"\" : s)), newObj);\n            const value = prop.value;\n            if ((typeof value === \"object\" || typeof value === \"function\") && value !== null && (value === Array.prototype || !Array.isArray(value))) {\n                this.import(pkgName, root, all, out, newPath, stack, depth + 1);\n            }\n        }\n        return out;\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ntype TAnyFunction = (...args: any[]) => any;\ninterface IS<Static extends boolean> {\n    instance: Static extends true ? undefined : any;\n    inputs: any[];\n    result: any;\n}\ntype I<Static extends boolean> = Static extends true ? [any | Bang, ...any[]] : [any | Bang, any, ...any[]];\ntype O<Static extends boolean> = Static extends true ? [any, ...any[]] : [any, any, ...any[]];\ninterface P {\n    args: number;\n    spreadArgs: boolean;\n    sync: boolean;\n}\n\nexport default class Method<Static extends boolean = false> extends ImportedObject<TAnyFunction, {}, I<Static>, O<Static>, any[], P, { loading: boolean }> {\n    static importedObjectType: ImportedObjectType = \"Method\";\n    static description = \"Auto-imported method\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to read\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Method argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Method return value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after method called\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        varLength: true,\n        description: \"Set arguments while loaded\"\n    }];\n    static props: IPropsMeta<P> = {\n        args: {\n            type: \"number\",\n            default: 0,\n            description: \"arguments count for method\"\n        },\n        spreadArgs: {\n            type: \"boolean\",\n            default: false,\n            description: \"arguments input will be spreaded if true\"\n        },\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    _: IS<Static> = { instance: undefined, inputs: [], result: null };\n    initialInlets = 1;\n    initialOutlets = 2;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.instance = data;\n            if (this.execute()) this.output();\n        } else {\n            this._.inputs[inlet - 1] = data;\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", () => {\n            handleUpdateArgs(this.args);\n        });\n        const handleUpdateArgs = (args: any[]) => {\n            this._.inputs = args.slice();\n            const fn = this.imported;\n            const argsCount = Math.max(fn.length, args.length, ~~+this.getProp(\"args\"));\n            this.inlets = Math.max(1, this.initialInlets + argsCount);\n            this.outlets = this.initialOutlets + argsCount;\n        };\n        this.on(\"updateArgs\", handleUpdateArgs);\n        this.on(\"updateProps\", (props) => {\n            if (props.args && typeof props.args === \"number\" && props.args >= 0) {\n                const fn = this.imported;\n                const argsCount = Math.max(fn.length, this.box.args.length, ~~props.args);\n                this.inlets = Math.max(1, this.initialInlets + argsCount);\n                this.outlets = this.initialOutlets + argsCount;\n            }\n        });\n        this.on(\"inlet\", this.handleInlet);\n    }\n    execute() {\n        const fn = this.imported;\n        try {\n            this._.result = fn.call(this._.instance, ...(this.getProp(\"spreadArgs\") ? this._.inputs.reduce<any[]>((acc, cur) => [...acc, ...cur], []) : this._.inputs));\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this._.result, this._.instance, ...this._.inputs] as O<Static>);\n    output() {\n        if (this._.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this._.result.then((r) => {\n                this.loading = false;\n                this._.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\n","import StaticMethod from \"./StaticMethod\";\nimport BaseObject from \"../base/BaseObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type ImportedObject from \"./ImportedObject\";\nimport type { IJSPatcherObjectMeta, IPropsMeta } from \"../base/AbstractObject\";\n\ntype TAnyConstructor = new (...args: any[]) => any;\ninterface P {\n    args: number;\n    spreadArgs: boolean;\n}\ninterface IS {\n    Wrapper: typeof StaticMethod;\n    inputs: any[];\n    result: any;\n}\n\nexport default class New extends BaseObject<{}, {}, [any | Bang, ...any[]], [any, ...any[]], any[], P, { loading: boolean }> {\n    static description = \"Call function as a constructor\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Constructor argument, output instance constructed\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Constructor argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Instance constructed\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after constructor called\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"string\",\n        optional: false,\n        varLength: false,\n        description: \"Constructor name\"\n    }, {\n        type: \"anything\",\n        optional: true,\n        varLength: true,\n        description: \"Set arguments while loaded\"\n    }];\n    static props: IPropsMeta<P> = {\n        args: {\n            type: \"number\",\n            default: 0,\n            description: \"arguments count for method\"\n        },\n        spreadArgs: {\n            type: \"boolean\",\n            default: false,\n            description: \"arguments input will be spreaded if true\"\n        }\n    };\n    _: IS = { Wrapper: null, inputs: [], result: null };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", () => {\n            handleUpdateArgs(this.args);\n        });\n        const handleUpdateArgs = (args: any[]) => {\n            if (typeof args[0] !== \"undefined\") {\n                const Wrapper = this.patcher.activeLib[args[0]];\n                if (!Wrapper) this.error(`Function ${args[0]} not found.`);\n                else if (Wrapper.prototype instanceof StaticMethod) {\n                    this._.Wrapper = Wrapper as typeof StaticMethod;\n                    const Fn = this.imported;\n                    const argsCount = Math.max(Fn.length, args.length - 1, ~~+this.getProp(\"args\"));\n                    this.inlets = Math.max(1, argsCount);\n                    this.outlets = 1 + this.inlets;\n                } else {\n                    this.error(\"Given function is not constructable\");\n                }\n            } else {\n                this.error(\"A constructor is needed.\");\n            }\n            this._.inputs = args.slice(1);\n        };\n        this.on(\"updateArgs\", handleUpdateArgs);\n        this.on(\"updateProps\", (props) => {\n            if (props.args && typeof props.args === \"number\" && props.args >= 0) {\n                const Fn = this.imported;\n                const argsCount = Math.max(Fn.length, this.box.args.length - 1, ~~+props.args);\n                this.inlets = Math.max(1, argsCount);\n                this.outlets = 1 + this.inlets;\n            }\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (!isBang(data)) this._.inputs[inlet] = data;\n                if (this.execute()) this.output();\n            } else {\n                this._.inputs[inlet] = data;\n            }\n        });\n    }\n    execute() {\n        const Fn = this.imported;\n        try {\n            this._.result = new Fn(...(this.getProp(\"spreadArgs\") ? this._.inputs.reduce<any[]>((acc, cur) => [...acc, ...cur], []) : this._.inputs));\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this._.result, ...this._.inputs]);\n    output() {\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n    get name() {\n        const c = this._.Wrapper;\n        return c.path[c.path.length - 1];\n    }\n    get imported(): TAnyConstructor {\n        const c = this._.Wrapper || this.patcher.activeLib.Object as typeof StaticMethod;\n        let r: TAnyConstructor;\n        try {\n            r = c.path.reduce((acc, cur) => acc[cur], c.root);\n        } catch (e) {\n            this.error(e);\n        }\n        return r;\n    }\n    set imported(v: TAnyConstructor) {\n        const c = (this.constructor as typeof ImportedObject);\n        let parent = c.root;\n        try {\n            if (!c.path.length) {\n                c.root = v;\n            } else {\n                c.path.slice(0, -1).forEach(key => parent = parent[key]);\n                parent[c.path[c.path.length - 1]] = v;\n            }\n        } catch (e) {\n            this.error(e);\n        }\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ninterface IS<Static extends boolean> { instance: Static extends true ? undefined : any }\ntype I<Static extends boolean> = Static extends true ? [Bang, any] : [any | Bang, any];\ntype O<Static extends boolean> = Static extends true ? [any] : [any, any];\ntype A<Static extends boolean> = Static extends true ? [any] : [];\n\nexport default class Property<Static extends boolean = false> extends ImportedObject<any, {}, I<Static>, O<Static>, A<Static>, {}, {}> {\n    static importedObjectType: ImportedObjectType = \"Property\";\n    static description = \"Auto-imported property\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Constructor argument, output instance constructed\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        varLength: true,\n        description: \"Constructor argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    _: IS<Static> = { instance: undefined };\n    handlePreInit = () => {\n        this.inlets = 2;\n        this.outlets = 2;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.instance = data;\n            let result;\n            try {\n                result = this._.instance[this.name];\n            } catch (e) {\n                this.error(e);\n            }\n            this.outletAll([result, this._.instance] as O<Static>);\n        } else if (inlet === 1) {\n            try {\n                this._.instance[this.name] = data;\n            } catch (e) {\n                this.error(e);\n            }\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", this.handlePreInit);\n        this.on(\"inlet\", this.handleInlet);\n    }\n}\n","import NewBase from \"./New\";\nimport FuncBase from \"./Func\";\nimport PropertyBase from \"./Property\";\nimport GetterBase from \"./Getter\";\nimport SetterBase from \"./Setter\";\nimport SetterGetterBase from \"./SetterGetter\";\nimport MethodBase from \"./Method\";\nimport StaticPropertyBase from \"./StaticProperty\";\nimport StaticGetterBase from \"./StaticGetter\";\nimport StaticSetterBase from \"./StaticSetter\";\nimport StaticSetterGetterBase from \"./StaticSetterGetter\";\nimport StaticMethodBase from \"./StaticMethod\";\nimport generateRemotedObject from \"../base/generateRemotedObject\";\nimport Importer from \"./Importer\";\nimport type BaseObject from \"../base/BaseObject\";\nimport type { IJSPatcherObject } from \"../base/AbstractObject\";\n\nexport class New extends generateRemotedObject(NewBase as typeof BaseObject) {\n}\nexport class Func extends generateRemotedObject(FuncBase as typeof BaseObject) {\n}\nexport class Property extends generateRemotedObject(PropertyBase as typeof BaseObject) {\n}\nexport class Getter extends generateRemotedObject(GetterBase as typeof BaseObject) {\n}\nexport class Setter extends generateRemotedObject(SetterBase as typeof BaseObject) {\n}\nexport class SetterGetter extends generateRemotedObject(SetterGetterBase as typeof BaseObject) {\n}\nexport class Method extends generateRemotedObject(MethodBase as typeof BaseObject) {\n}\nexport class StaticProperty extends generateRemotedObject(StaticPropertyBase as typeof BaseObject) {\n}\nexport class StaticGetter extends generateRemotedObject(StaticGetterBase as typeof BaseObject) {\n}\nexport class StaticSetter extends generateRemotedObject(StaticSetterBase as typeof BaseObject) {\n}\nexport class StaticSetterGetter extends generateRemotedObject(StaticSetterGetterBase as typeof BaseObject) {\n}\nexport class StaticMethod extends generateRemotedObject(StaticMethodBase as typeof BaseObject) {\n}\n\nexport default class DefaultImporter extends Importer {\n    static getObject(p: PropertyDescriptor, pkgName: string, root: Record<string, any>, path: string[]): typeof IJSPatcherObject {\n        const isStatic = path[path.length - 2] !== \"prototype\";\n        let Super: typeof IJSPatcherObject;\n        const type = typeof p.value;\n        if (type === \"function\") {\n            if (isStatic) Super = StaticMethod;\n            else Super = Method;\n        } else if (type === \"undefined\") {\n            const setter = p.set;\n            const getter = p.get;\n            if (isStatic) {\n                if (setter && getter) Super = StaticSetterGetter;\n                else if (setter) Super = StaticSetter;\n                else if (getter) Super = StaticGetter;\n                else return null;\n            } else {\n                if (setter && getter) Super = SetterGetter;\n                else if (setter) Super = Setter;\n                else if (getter) Super = Getter;\n                else return null;\n            }\n        } else {\n            if (isStatic) Super = StaticProperty;\n            else Super = Property;\n        }\n        return class extends Super {\n            static package = pkgName;\n            static root = root;\n            static path = path;\n            static get _name() { return path[path.length - 1] || pkgName; }\n        };\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ninterface IS<Static extends boolean> {\n    instance: Static extends true ? undefined : any;\n    input: any;\n}\ntype I<Static extends boolean> = Static extends true ? [any] : [any | Bang, any];\ntype O<Static extends boolean> = Static extends true ? [] : [any];\n\nexport default class Setter<Static extends boolean = false> extends ImportedObject<any, {}, I<Static>, O<Static>, [any], {}, {}> {\n    static importedObjectType: ImportedObjectType = \"Setter\";\n    static description = \"Auto-imported setter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to set property\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        varLength: false,\n        description: \"Initial value to set\"\n    }];\n    initialInlets = 2;\n    initialOutlets = 1;\n    _: IS<Static> = { instance: undefined, input: null };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.instance = data;\n            if (typeof this._.instance === \"undefined\") return;\n            try {\n                this._.instance[this.name] = this._.input;\n            } catch (e) {\n                this.error(e);\n                return;\n            }\n            this.outlet(0, this._.instance);\n        } else {\n            this._.input = data;\n        }\n    };\n    handleUpdateArgs = (args: [any?]) => {\n        if (args.length) this._.input = args[0];\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = this.initialInlets;\n            this.outlets = this.initialOutlets;\n            this.handleUpdateArgs(this.args);\n        });\n        this.on(\"updateArgs\", this.handleUpdateArgs);\n        this.on(\"inlet\", this.handleInlet);\n    }\n}\n","import ImportedObject from \"./ImportedObject\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\ninterface IS<Static extends boolean> {\n    instance: Static extends true ? undefined : any;\n    input: any;\n    result: any;\n}\ntype I<Static extends boolean> = Static extends true ? [any] : [any | Bang, any];\ntype O<Static extends boolean> = Static extends true ? [any] : [any, any];\n\nexport default class SetterGetter<Static extends boolean = false> extends ImportedObject<any, {}, I<Static>, O<Static>, [any], { sync: boolean }, { loading: boolean }> {\n    static importedObjectType: ImportedObjectType = \"SetterGetter\";\n    static description = \"Auto-imported setter / getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Instance to manipulate\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }, {\n        type: \"anything\",\n        description: \"Instance bypass\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        varLength: false,\n        description: \"Initial value to set\"\n    }];\n    static props: IJSPatcherObjectMeta[\"props\"] = {\n        sync: {\n            type: \"boolean\",\n            default: false,\n            description: \"If true and in case the result is a Promise, instead of waiting for result, will output the Promise object\"\n        }\n    };\n    initialInlets = 2;\n    initialOutlets = 2;\n    _: IS<Static> = { instance: undefined, input: null, result: null };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.instance = data;\n            if (typeof this._.instance === \"undefined\") return;\n            if (typeof this._.input !== \"undefined\") {\n                try {\n                    this._.instance[this.name] = this._.input;\n                } catch (e) {\n                    this.error(e);\n                    return;\n                }\n            }\n            if (this.execute()) this.output();\n        } else if (inlet === 1) {\n            this._.input = data;\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = this.initialInlets;\n            this.outlets = this.initialOutlets;\n            handleUpdateArgs(this.args);\n        });\n        const handleUpdateArgs = (args: [any?]) => {\n            if (args.length) this._.input = args[0];\n        };\n        this.on(\"updateArgs\", handleUpdateArgs);\n        this.on(\"inlet\", this.handleInlet);\n    }\n    execute() {\n        try {\n            this._.result = this._.instance[this.name];\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this._.result, this._.instance] as O<Static>);\n    output() {\n        if (this._.result instanceof Promise && !this.getProp(\"sync\")) {\n            this.loading = true;\n            this._.result.then((r) => {\n                this.loading = false;\n                this._.result = r;\n                this.callback();\n            }, (r) => {\n                this.loading = false;\n                this.error(r);\n            });\n            return this;\n        }\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n}\n","import Getter from \"./Getter\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticGetter extends Getter<true> {\n    static importedObjectType: ImportedObjectType = \"StaticGetter\";\n    static description = \"Auto-imported static getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Get the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    handlePreInit = () => {\n        this.inlets = 1;\n        this.outlets = 1;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0 && isBang(data) && this.execute()) this.output();\n    };\n    execute() {\n        try {\n            this._.result = this.imported;\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outlet(0, this._.result);\n}\n","import Method from \"./Method\";\nimport { ImportedStaticMethodObject } from \"../../../utils/symbols\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticMethod extends Method<true> {\n    static importedObjectType: ImportedObjectType = \"StaticMethod\";\n    static [ImportedStaticMethodObject] = true;\n    static description = \"Auto-imported static method\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        varLength: true,\n        description: \"Method argument\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Method return value\"\n    }, {\n        type: \"anything\",\n        varLength: true,\n        description: \"Argument after method called\"\n    }];\n    initialInlets = 0;\n    initialOutlets = 1;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) this._.inputs[inlet] = data;\n            if (this.execute()) this.output();\n        } else {\n            this._.inputs[inlet] = data;\n        }\n    };\n    execute() {\n        const fn = this.imported;\n        try {\n            this._.result = fn(...(this.getProp(\"spreadArgs\") ? this._.inputs.reduce<any[]>((acc, cur) => [...acc, ...cur], []) : this._.inputs));\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outletAll([this._.result, ...this._.inputs]);\n}\n","import Property from \"./Property\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticProperty extends Property<true> {\n    static importedObjectType: ImportedObjectType = \"StaticProperty\";\n    static description = \"Auto-imported static property\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Get the value\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"anything\",\n        optional: true,\n        description: \"Set the value while loaded.\"\n    }];\n    handlePreInit = () => {\n        this.inlets = 2;\n        this.outlets = 1;\n    };\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (isBang(data)) this.outlet(0, this.imported);\n        } else if (inlet === 1) {\n            this.imported = data;\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"updateArgs\", (args) => {\n            if (args.length) this.imported = args[0];\n        });\n        this.on(\"inlet\", this.handleInlet);\n    }\n}\n","import Setter from \"./Setter\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticSetter extends Setter<true> {\n    static importedObjectType: ImportedObjectType = \"StaticSetter\";\n    static description = \"Auto-imported static setter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [];\n    initialInlets = 1;\n    initialOutlets = 0;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) this.imported = data;\n    };\n    handleUpdateArgs = (args: [any?]) => {\n        if (args.length) this.imported = args[0];\n    };\n}\n","import SetterGetter from \"./SetterGetter\";\nimport { isBang } from \"../base/Bang\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type { ImportedObjectType } from \"../../types\";\n\nexport default class StaticSetterGetter extends SetterGetter<true> {\n    static importedObjectType: ImportedObjectType = \"StaticSetterGetter\";\n    static description = \"Auto-imported static setter / getter\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Get the value\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set the value\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"anything\",\n        description: \"Value\"\n    }];\n    initialInlets = 2;\n    initialOutlets = 1;\n    handleInlet = ({ data, inlet }: { data: any; inlet: number }) => {\n        if (inlet === 0) {\n            if (!isBang(data)) return;\n            if (typeof this._.input !== \"undefined\") {\n                try {\n                    this.imported = this._.input;\n                } catch (e) {\n                    this.error(e);\n                    return;\n                }\n            }\n            if (this.execute()) this.output();\n        } else if (inlet === 1) {\n            this._.input = data;\n        }\n    };\n    execute() {\n        try {\n            this._.result = this.imported;\n            return true;\n        } catch (e) {\n            this.error(e);\n            return false;\n        }\n    }\n    callback = () => this.outlet(0, this._.result);\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\n\ninterface P {\n    description: string;\n}\n\nexport default class AudioIn extends BaseObject<{}, {}, [], [Float32Array], [number], P> {\n    static isPatcherInlet = \"audio\" as const;\n    static description = \"Patcher inlet (audio)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"object\",\n        description: \"Float32Array buffer\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected handlePatcherInput = ({ input, buffer }: PatcherEventMap[\"audioInput\"]) => {\n        if (input === this.index - 1) this.outlet(0, buffer);\n    };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        if (this.env.thread === \"AudioWorklet\") this.patcher.on(\"audioInput\", this.handlePatcherInput);\n        this.on(\"destroy\", () => {\n            this.patcher.off(\"audioInput\", this.handlePatcherInput);\n            this.patcher.changeIO();\n        });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IInletsMeta, IPropsMeta } from \"../base/AbstractObject\";\n\ninterface P {\n    description: string;\n}\n\nexport default class AudioOut extends BaseObject<{}, {}, [Float32Array], [], [number], P> {\n    static isPatcherOutlet = \"audio\" as const;\n    static description = \"Patcher outlet (audio)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Float32Array buffer\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected emitPatcherChangeIO = () => {\n        this.patcher.inspectAudioIO();\n        this.patcher.changeIO();\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 0;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const inlet0 = { ...this.meta.inlets[0] };\n            if (typeof props.description === \"string\") inlet0.description = props.description;\n            this.setMeta({ inlets: [inlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) this.patcher.outputAudio(this.index - 1, data);\n        });\n        this.on(\"destroy\", this.emitPatcherChangeIO);\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta, TMetaType } from \"../base/AbstractObject\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\n\ninterface P {\n    description: string;\n    type: Exclude<TMetaType, \"signal\" | \"enum\">;\n}\n\nexport default class In extends BaseObject<{}, {}, [], [any], [number], P> {\n    static isPatcherInlet = \"data\" as const;\n    static description = \"Patcher inlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        },\n        type: {\n            type: \"enum\",\n            enums: [\"string\", \"number\", \"boolean\", \"object\", \"function\", \"anything\", \"bang\", \"color\"],\n            default: \"anything\",\n            description: \"Inlet data type\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected handlePatcherInput = ({ data, inlet }: PatcherEventMap[\"dataInput\"]) => {\n        if (inlet === this.index - 1) this.outlet(0, data);\n    };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            if (typeof props.type === \"string\") outlet0.type = props.type || \"anything\";\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        if (this.env.thread === \"AudioWorklet\") this.patcher.on(\"dataInput\", this.handlePatcherInput);\n        this.on(\"destroy\", () => {\n            this.patcher.off(\"dataInput\", this.handlePatcherInput);\n            this.patcher.changeIO();\n        });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IInletsMeta, IPropsMeta, TMetaType } from \"../base/AbstractObject\";\n\ninterface P {\n    description: string;\n    type: Exclude<TMetaType, \"signal\" | \"enum\">;\n}\n\nexport default class Out extends BaseObject<{}, {}, [], [any], [number], P> {\n    static isPatcherOutlet = \"data\" as const;\n    static description = \"Patcher outlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        },\n        type: {\n            type: \"enum\",\n            enums: [\"string\", \"number\", \"boolean\", \"object\", \"function\", \"anything\", \"bang\", \"color\"],\n            default: \"anything\",\n            description: \"Inlet data type\"\n        }\n    };\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 0;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.changeIO();\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const inlet0 = { ...this.meta.inlets[0] };\n            if (typeof props.description === \"string\") inlet0.description = props.description;\n            if (typeof props.type === \"string\") inlet0.type = props.type || \"anything\";\n            this.setMeta({ inlets: [inlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) this.patcher.outlet(this.index - 1, data);\n        });\n        this.on(\"destroy\", this.emitPatcherChangeIO);\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\n\ninterface P {\n    description: string;\n}\n\nexport default class Param extends BaseObject<{}, {}, [], [Float32Array], [string], P> {\n    static description = \"Patcher outlet (data)\";\n    static args: IArgsMeta = [{\n        type: \"string\",\n        optional: false,\n        default: \"\",\n        description: \"Parameter name\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"anything\",\n        description: \"\"\n    }];\n    protected handlePatcherInput = ({ param, buffer }: PatcherEventMap[\"paramInput\"]) => {\n        if (this.args[0] === param) this.outlet(0, buffer);\n    };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", this.emitPatcherChangeIO);\n        this.on(\"updateArgs\", this.emitPatcherChangeIO);\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        if (this.env.thread === \"AudioWorklet\") this.patcher.on(\"paramInput\", this.handlePatcherInput);\n        this.on(\"destroy\", () => {\n            this.patcher.off(\"paramInput\", this.handlePatcherInput);\n            this.patcher.changeIO();\n        });\n    }\n}\n","import generateRemotedObject from \"../base/generateRemotedObject\";\nimport In from \"./In\";\nimport Out from \"./Out\";\nimport Param from \"./Param\";\nimport AudioIn from \"./AudioIn\";\nimport AudioOut from \"./AudioOut\";\nimport type BaseObject from \"../base/BaseObject\";\n\nexport default async () => ({\n    in: generateRemotedObject(In as typeof BaseObject),\n    out: generateRemotedObject(Out as typeof BaseObject),\n    \"param~\": generateRemotedObject(Param as typeof BaseObject),\n    \"in~\": generateRemotedObject(AudioIn as typeof BaseObject),\n    \"out~\": generateRemotedObject(AudioOut as typeof BaseObject)\n});\n","import TypedEventEmitter from \"../../utils/TypedEventEmitter\";\nimport { isTRect, parseToPrimitive, isTPresentationRect, isRectMovable, isRectResizable } from \"../../utils/utils\";\nimport type Patcher from \"./Patcher\";\nimport type Line from \"./Line\";\nimport type { TBox, TMaxBox, TRect, TPresentationRect } from \"../types\";\nimport type { Args, Data, IJSPatcherObject, JSPatcherObjectEventMap, Props, State } from \"../objects/base/AbstractObject\";\n\nexport interface BoxEventMap extends Pick<JSPatcherObjectEventMap<any, any, any, any, any, any, any>, \"metaUpdated\" | \"argsUpdated\" | \"propsUpdated\" | \"dataUpdated\" | \"stateUpdated\"> {\n    \"rectChanged\": Box;\n    \"presentationRectChanged\": Box;\n    \"backgroundChanged\": Box;\n    \"presentationChanged\": Box;\n    \"textChanged\": Box;\n    \"highlight\": Box;\n    \"error\": string;\n    \"highlightPort\": { isSrc: boolean; i: number; highlight: boolean };\n    \"connectedPort\": { isSrc: boolean; i: number; last?: false };\n    \"disconnectedPort\": { isSrc: boolean; i: number; last: boolean };\n    \"ioCountChanged\": Box;\n}\n\nexport default class Box<T extends IJSPatcherObject = IJSPatcherObject> extends TypedEventEmitter<BoxEventMap> {\n    readonly id: string;\n    text = \"\";\n    inlets = 0;\n    outlets = 0;\n    rect: TRect;\n    background: boolean;\n    presentation: boolean;\n    presentationRect: TPresentationRect;\n    data: Data<T>;\n    args: Args<T>;\n    props: Props<T>;\n    _editing: boolean;\n    private _parsed: { class: string; args: Args<T>; props: Props<T> };\n    private _object: T;\n    private _Object: typeof IJSPatcherObject;\n    private readonly _patcher: Patcher;\n    private readonly _inletLines: Set<Line>[];\n    private readonly _outletLines: Set<Line>[];\n    constructor(patcherIn: Patcher, boxIn: TBox) {\n        super();\n        this.id = boxIn.id;\n        this.text = boxIn.text;\n        this.args = (boxIn.args || []) as Args<T>;\n        this.props = (boxIn.props || {}) as Props<T>;\n        this.inlets = boxIn.inlets;\n        this.outlets = boxIn.outlets;\n        this._inletLines = new Array(this.inlets).fill(null).map(() => new Set<Line>());\n        this._outletLines = new Array(this.outlets).fill(null).map(() => new Set<Line>());\n        const maxBoxIn = boxIn as unknown as TMaxBox[\"box\"];\n        this.rect = boxIn.rect || maxBoxIn.patching_rect;\n        this.background = boxIn.background || !!maxBoxIn.background;\n        this.presentation = boxIn.presentation || !!maxBoxIn.presentation;\n        this.presentationRect = boxIn.presentationRect || maxBoxIn.presentation_rect;\n        if (!this.presentationRect) this.presentationRect = this.rect.slice() as TRect;\n        this.data = boxIn.data || (boxIn as any).prevData?.storage || {};\n        this._editing = !!boxIn._editing;\n        this._patcher = patcherIn;\n        this.on(\"dataUpdated\", () => this._patcher.emitChanged());\n        this.on(\"argsUpdated\", () => this._patcher.emitChanged());\n        this.on(\"propsUpdated\", () => this._patcher.emitChanged());\n    }\n    async init() {\n        this._parsed = Box.parseObjText(this.text) as { class: string; args: Args<T>; props: Props<T> };\n        const newMeta = this._patcher.getObjectMeta(this._parsed);\n        for (const key in this.props) {\n            if (!newMeta.props[key]) delete this.props[key];\n        }\n        if (this._parsed.args.length) this.args = this._parsed.args;\n        Object.assign(this.props, this._parsed.props);\n        const Constructor = this._patcher.getObjectConstructor(this._parsed);\n        this._Object = Constructor;\n        if (!this.size.every(v => v > 0)) this.size = this.defaultSize;\n        if (!isTPresentationRect(this.presentationRect) || (this.presentationSize.every(v => typeof v === \"number\") && !this.presentationSize.every(v => v > 0))) this.presentationSize = this.defaultSize;\n        this._object = new Constructor(this, this._patcher) as T;\n        await this._object.init();\n        return this;\n    }\n    async postInit() {\n        await this._object.postInit();\n        return this;\n    }\n    /**\n     * Main function when receive data from a inlet (base 0)\n     */\n    fn(inlet: number, data: any) {\n        this._object.fn(inlet, data);\n        return this;\n    }\n    get UI() {\n        return this._Object.UI;\n    }\n    get defaultSize() {\n        return this.UI?.defaultSize || [90, 20];\n    }\n    get meta() {\n        return this._object.meta;\n    }\n    get outletLines() {\n        return this._outletLines;\n    }\n    get inletLines() {\n        return this._inletLines;\n    }\n    get object() {\n        return this._object;\n    }\n    set object(oIn: T) {\n        this._object = oIn;\n    }\n    get Object() {\n        return this._Object;\n    }\n    get parsed() {\n        return this._parsed;\n    }\n    addInletLine(line: Line) {\n        const index = line.destInlet;\n        if (!this._inletLines[index]) this._inletLines[index] = new Set<Line>();\n        this._inletLines[index].add(line);\n    }\n    removeInletLine(line: Line) {\n        const index = line.destInlet;\n        if (this._inletLines[index]) this._inletLines[index].delete(line);\n    }\n    addOutletLine(line: Line) {\n        const index = line.srcOutlet;\n        if (!this._outletLines[index]) this._outletLines[index] = new Set<Line>();\n        this._outletLines[index].add(line);\n    }\n    removeOutletLine(line: Line) {\n        const index = line.srcOutlet;\n        if (this._outletLines[index]) this._outletLines[index].delete(line);\n    }\n    setInlets(count: number) {\n        const lines = this.allLines;\n        lines.forEach(line => line.disable());\n        this.inlets = count;\n        // Lines that should be removed will destroy themselves when enable()\n        lines.forEach(line => line.enable());\n        const linesSetLength = this._inletLines.length;\n        if (count > linesSetLength) this._inletLines.push(...new Array(count - linesSetLength).fill(null).map(() => new Set<Line>()));\n        else if (count < linesSetLength) this._inletLines.splice(count);\n        this._inletLines.forEach(set => set.forEach(line => line.uiUpdateDest()));\n        this.emit(\"ioCountChanged\", this);\n    }\n    setOutlets(count: number) {\n        const lines = this.allLines;\n        lines.forEach(line => line.disable());\n        this.outlets = count;\n        // Lines that should be removed will destroy themselves when enable()\n        lines.forEach(line => line.enable());\n        const linesSetLength = this._outletLines.length;\n        if (count > linesSetLength) this._outletLines.push(...new Array(count - linesSetLength).fill(null).map(() => new Set<Line>()));\n        else if (count < linesSetLength) this._outletLines.splice(count);\n        this._outletLines.forEach(set => set.forEach(line => line.uiUpdateSrc()));\n        this.emit(\"ioCountChanged\", this);\n    }\n    getInletPos(port: number) {\n        const { rect, inlets } = this;\n        const [left, top, width] = rect;\n        return { top, left: ((left + 10) + (width - 20) * port / (inlets > 1 ? inlets - 1 : 1)) };\n    }\n    getOutletPos(port: number) {\n        const { rect, outlets } = this;\n        const [left, top, width, height] = rect;\n        return { top: top + height, left: ((left + 10) + (width - 20) * port / (outlets > 1 ? outlets - 1 : 1)) };\n    }\n    get inletsPositions() {\n        const positions = [];\n        for (let i = 0; i < this.inlets; i++) {\n            positions[i] = this.getInletPos(i);\n        }\n        return positions;\n    }\n    get outletsPositions() {\n        const positions = [];\n        for (let i = 0; i < this.outlets; i++) {\n            positions[i] = this.getOutletPos(i);\n        }\n        return positions;\n    }\n    get allLines() {\n        const lines = new Set<Line>();\n        this._inletLines.forEach(set => set.forEach(line => lines.add(line)));\n        this._outletLines.forEach(set => set.forEach(line => lines.add(line)));\n        return lines;\n    }\n    // called when inlet or outlet are connected or disconnected\n    connectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        if (this._object) this._object.connectedOutlet(outlet, destBoxId, destInlet, lineId);\n        this.emit(\"connectedPort\", { isSrc: true, i: outlet });\n        return this;\n    }\n    connectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        if (this._object) this._object.connectedInlet(inlet, srcBoxId, srcOutlet, lineId);\n        this.emit(\"connectedPort\", { isSrc: false, i: inlet });\n        return this;\n    }\n    disconnectedOutlet(outlet: number, destBoxId: string, destInlet: number, lineId: string) {\n        if (this._object) this._object.disconnectedOutlet(outlet, destBoxId, destInlet, lineId);\n        const last = this._patcher.getLinesBySrcID(this.id)[outlet].length === 1;\n        this.emit(\"disconnectedPort\", { isSrc: true, i: outlet, last });\n        return this;\n    }\n    disconnectedInlet(inlet: number, srcBoxId: string, srcOutlet: number, lineId: string) {\n        if (this._object) this._object.disconnectedInlet(inlet, srcBoxId, srcOutlet, lineId);\n        const last = this._patcher.getLinesByDestID(this.id)[inlet].length === 1;\n        this.emit(\"disconnectedPort\", { isSrc: false, i: inlet, last });\n        return this;\n    }\n    isOutletTo(outlet: number, box: Box, inlet: number) {\n        const iterator = this._outletLines[outlet].values();\n        let r: IteratorResult<Line, Line>;\n        while (!(r = iterator.next()).done) {\n            const line = r.value;\n            if (line.destBox === box && line.destInlet === inlet) return true;\n        }\n        return false;\n    }\n    isInletFrom(inlet: number, box: Box, outlet: number) {\n        const iterator = this._inletLines[inlet].values();\n        let r: IteratorResult<Line, Line>;\n        while (!(r = iterator.next()).done) {\n            const line = r.value;\n            if (line.srcBox === box && line.srcOutlet === outlet) return true;\n        }\n        return false;\n    }\n    async changeText(textIn: string, force?: boolean) {\n        if (!force && textIn === this.text) return this;\n        const { defaultSize: oldDefaultSize } = this;\n        this.allLines.forEach(line => line.disable());\n        await this._object.destroy();\n        this.text = textIn;\n        this.args = [] as Args<T>;\n        await this.init();\n        this.allLines.forEach(line => line.enable());\n        const { defaultSize } = this;\n        if (!defaultSize.every((v, i) => v === oldDefaultSize[i])) {\n            this.size = defaultSize;\n            this.presentationSize = defaultSize;\n        }\n        this.emit(\"textChanged\", this);\n        this._object.setMeta(this._object.meta);\n        await this.postInit();\n        return this;\n    }\n    update(e: { args?: any[]; props?: Record<string, any> }) {\n        const { args, props } = e;\n        if (args) this.args = args as Args<T>;\n        if (props) {\n            if (isTRect(props.rect)) {\n                this.setRect(props.rect);\n                delete props.rect;\n            }\n            if (isTPresentationRect(props.presentationRect)) {\n                this.setPresentationRect(props.presentationRect);\n                delete props.presentationRect;\n            }\n            if (typeof props.presentation === \"boolean\") {\n                this.setPresentation(props.presentation);\n                delete props.presentation;\n            }\n            if (typeof props.background === \"boolean\") {\n                this.setBackground(props.background);\n                delete props.background;\n            }\n            this.props = Object.assign(this.props, props);\n        }\n        return this;\n    }\n    get position() {\n        return this.rect.slice(0, 2) as [number, number];\n    }\n    set position([leftIn, topIn]: [number, number]) {\n        const [left, top, width, height] = this.rect;\n        this.setRect([typeof leftIn === \"number\" ? leftIn : left, typeof topIn === \"number\" ? topIn : top, width, height] as TRect);\n    }\n    get presentationPosition() {\n        return this.presentationRect.slice(0, 2) as [number | string, number | string];\n    }\n    set presentationPosition([leftIn, topIn]: [number | string, number | string]) {\n        const [left, top, width, height] = this.presentationRect;\n        this.setPresentationRect([typeof leftIn === \"number\" || typeof leftIn === \"string\" ? leftIn : left, typeof topIn === \"number\" || typeof topIn === \"string\" ? topIn : top, width, height] as TPresentationRect);\n    }\n    get size() {\n        return this.rect.slice(2) as [number, number];\n    }\n    set size([widthIn, heightIn]: [number, number]) {\n        const [left, top, width, height] = this.rect;\n        this.setRect([left, top, widthIn || width, heightIn || height] as TRect);\n    }\n    get presentationSize() {\n        return this.presentationRect.slice(2) as [number | string, number | string];\n    }\n    set presentationSize([widthIn, heightIn]: [number | string, number | string]) {\n        const [left, top, width, height] = this.presentationRect;\n        this.setPresentationRect([left, top, widthIn || width, heightIn || height] as TPresentationRect);\n    }\n    getLeft(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][0];\n    }\n    setLeft(leftIn: number | string, inPresentation = false) {\n        const positionKey = inPresentation ? \"presentationPosition\" : \"position\";\n        this[positionKey] = [leftIn as any, undefined];\n    }\n    getTop(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][1];\n    }\n    setTop(topIn: number | string, inPresentation = false) {\n        const positionKey = inPresentation ? \"presentationPosition\" : \"position\";\n        this[positionKey] = [undefined, topIn as any];\n    }\n    getWidth(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][2];\n    }\n    setWidth(widthIn: number | string, inPresentation = false) {\n        const sizeKey = inPresentation ? \"presentationSize\" : \"size\";\n        this[sizeKey] = [widthIn as any, undefined];\n    }\n    getHeight(inPresentation = false) {\n        const rectKey = inPresentation ? \"presentationRect\" : \"rect\";\n        return this[rectKey][3];\n    }\n    setHeight(heightIn: number | string, inPresentation = false) {\n        const sizeKey = inPresentation ? \"presentationSize\" : \"size\";\n        this[sizeKey] = [undefined, heightIn as any];\n    }\n    setBackground(bool: boolean) {\n        if (!!this.background === !!bool) return this;\n        this.background = bool;\n        this.emit(\"backgroundChanged\", this);\n        return this;\n    }\n    setPresentation(bool: boolean) {\n        if (!!this.presentation === !!bool) return this;\n        this.presentation = bool;\n        if (bool) this.presentationRect = this.rect.slice() as TRect;\n        this.emit(\"presentationChanged\", this);\n        return this;\n    }\n    setRect(rect: TRect) {\n        if (!isTRect(rect)) return this;\n        rect[0] = Math.max(0, rect[0]);\n        rect[1] = Math.max(0, rect[1]);\n        rect[2] = Math.max(15, rect[2]);\n        rect[3] = Math.max(15, rect[3]);\n        this.rect = rect;\n        this.inletLines.forEach(set => set.forEach(line => line.uiUpdateDest()));\n        this.outletLines.forEach(set => set.forEach(line => line.uiUpdateSrc()));\n        this.emit(\"rectChanged\", this);\n        return this;\n    }\n    setPresentationRect(rect: TPresentationRect) {\n        if (!isTPresentationRect(rect)) return this;\n        if (typeof rect[0] === \"number\") rect[0] = Math.max(0, rect[0]);\n        if (typeof rect[1] === \"number\") rect[1] = Math.max(0, rect[1]);\n        if (typeof rect[2] === \"number\") rect[2] = Math.max(15, rect[2]);\n        if (typeof rect[3] === \"number\") rect[3] = Math.max(15, rect[3]);\n        this.presentationRect = rect;\n        this.emit(\"presentationRectChanged\", this);\n        return this;\n    }\n    getIsMovable(inPresentation = false) {\n        if (!inPresentation) return true;\n        return isRectMovable(this.presentationRect);\n    }\n    getIsResizable(inPresentation = false) {\n        if (!inPresentation) return true;\n        return isRectResizable(this.presentationRect);\n    }\n    error(text: string) {\n        this.emit(\"error\", text);\n    }\n    highlight() {\n        this.emit(\"highlight\", this);\n    }\n    highlightPort(isSrc: boolean, i: number, highlight: boolean) {\n        this.emit(\"highlightPort\", { isSrc, i, highlight });\n    }\n    undoable(e: { oldArgs?: Args<T>; args?: Args<T>; oldProps?: Props<T>; props?: Props<T>; oldState?: State<T>; state?: State<T> }) {\n        this._patcher.boxChanged(this.id, e);\n    }\n    async changeObject({ args, props, state }: { args?: Args<T>; props?: Props<T>; state?: State<T> }, options?: { undoable?: boolean }) {\n        if (args) await this._object.updateArgs(args, options);\n        if (props) await this._object.updateProps(props, options);\n        if (state) await this._object.updateState(state, options);\n    }\n    async destroy() {\n        this.allLines.forEach(line => this._patcher.deleteLine(line.id));\n        await this._object.destroy();\n        delete this._patcher.boxes[this.id];\n        return this;\n    }\n    static parseObjText(strIn: string) {\n        const REGEX = /`([^`]*)`|[^\\s]+/gi;\n        const strArray = [];\n        let match = REGEX.exec(strIn);\n        while (match != null) {\n            // Index 1 in the array is the captured group if it exists\n            // Index 0 is the matched text, which we use if no captured group exists\n            strArray.push(match[1] ? match[1] : match[0]);\n            // Each call to exec returns the next regex match as an array\n            match = REGEX.exec(strIn);\n        }\n        const objOut: { class: string; args: any[]; props: Record<string, any> } = { class: \"\", args: [], props: {} };\n        let lastProp;\n        if (strArray.length) objOut.class = strArray.shift();\n        while (strArray.length) {\n            const el = strArray.shift();\n            if (typeof lastProp === \"undefined\" && el.charAt(0) !== \"@\") { // is arg, to push\n                try {\n                    objOut.args.push(JSON.parse(el));\n                } catch (e) {\n                    objOut.args.push(el);\n                }\n                continue;\n            }\n            if (el.length > 1 && el.charAt(0) === \"@\") { // is prop key\n                lastProp = el.substr(1);\n                objOut.props[lastProp] = [];\n                continue;\n            }\n            try { // is prop value\n                objOut.props[lastProp].push(JSON.parse(el));\n            } catch (e) {\n                objOut.props[lastProp].push(el);\n            }\n        }\n        for (const key in objOut.props) { // no value = true, one value need to parse, else array\n            if (objOut.props[key].length === 0) objOut.props[key] = true;\n            else if (objOut.props[key].length === 1) objOut.props[key] = parseToPrimitive(objOut.props[key][0]);\n            else objOut.props[key] = parseToPrimitive(objOut.props[key].join(\" \"));\n        }\n        return objOut;\n    }\n    toString() {\n        const { id, text, inlets, outlets, rect, background, presentation, presentationRect, args, props, data } = this;\n        return JSON.stringify({ id, text, inlets, outlets, rect, background, presentation, presentationRect, args, props, data });\n    }\n    toSerializable(): TBox {\n        return JSON.parse(this.toString());\n    }\n}\n","import type { Rec, Receive, Import, Iterator, FaustOp, Effect, In, Out, TLineMap } from \"../objects/Faust\";\nimport type Box from \"./Box\";\nimport type Line from \"./Line\";\nimport type Patcher from \"./Patcher\";\n\nconst mapLines = (box: Box, patcher: Patcher, visitedBoxes: Box[], ins: In[], recs: Rec[], lineMap: Map<Line, string>) => {\n    if (visitedBoxes.indexOf(box) >= 0) return;\n    visitedBoxes.push(box);\n    if (box.object.class === \"Iterator\" && box !== visitedBoxes[0]) return;\n    const inletLines = Array.from(box.inletLines);\n    if (box.object.class === \"Receive\") {\n        const { sendID, state: { sendMap } } = box.object as Receive;\n        if (sendMap[sendID]) {\n            sendMap[sendID].forEach(s => inletLines.push(...s.inletLines));\n        }\n    }\n    inletLines.forEach(lines => lines.forEach((line) => {\n        const { srcBox } = line;\n        if (srcBox.object.class === \"In\" && ins.indexOf(srcBox.object as In) === -1) ins.push(srcBox.object as In);\n        else if (srcBox.object.class === \"Rec\" && recs.indexOf(srcBox.object as Rec) === -1) recs.push(srcBox.object as Rec);\n        if (srcBox.object.class === \"Effect\") lineMap.set(line, \"_\");\n        else lineMap.set(line, `${(srcBox.object as FaustOp).resultID}_${line.srcOutlet}`);\n        mapLines(srcBox, patcher, visitedBoxes, ins, recs, lineMap);\n    }));\n};\nexport const toFaustLambda = (patcher: Patcher, outs: FaustOp[], lambdaName: string) => {\n    const exprs: string[] = [];\n    const onces: string[] = [];\n    const mainIns: string[] = [];\n    const mainOuts: string[] = [];\n    const recIns: string[] = [];\n    const recOuts: string[] = [];\n    const visitedBoxes: Box[] = [];\n    let ins: In[] = [];\n    const recs: Rec[] = [];\n    const lineMap: TLineMap = new Map<Line, string>();\n    // Build graph\n    outs.forEach(out => mapLines(out.box, patcher, visitedBoxes, ins, recs, lineMap));\n    visitedBoxes.forEach((box) => {\n        if (box.object.class === \"In\") return;\n        if (box.object.class === \"Out\") return;\n        if (box.object.class === \"Rec\") return;\n        if (outs.indexOf(box.object as FaustOp) !== -1) return;\n        const { onces: o, exprs: e } = (box.object as FaustOp).toExpr(lineMap);\n        if (o) onces.push(...o.filter(v => onces.indexOf(v) === -1));\n        if (e) exprs.push(...e);\n    });\n    // Reverse order for readibility\n    exprs.reverse();\n    // Build rec in/outs\n    recs.forEach((rec) => {\n        exprs.push(...rec.toExpr(lineMap).exprs || []);\n        const recIn = rec.resultID;\n        const recOut = `${recIn}_0`;\n        recIns.push(recIn);\n        recOuts.push(recOut);\n    });\n    // Build main in/outs\n    ins = ins.sort((a, b) => a.index - b.index);\n    ins.forEach((in_) => {\n        const id = `${in_.resultID}_0`;\n        if (mainIns.indexOf(id) === -1) mainIns.push(id);\n    });\n    outs.forEach((out) => {\n        if (out.class === \"Iterator\") exprs.push(...(out as Iterator).toNormalExpr(lineMap).exprs || []);\n        else exprs.push(...out.toExpr(lineMap).exprs || []);\n        const id = out.resultID;\n        if (mainIns.indexOf(id) === -1) mainOuts.push(id);\n    });\n    // Generate Final expressions\n    exprs.forEach((s, i) => exprs[i] = `    ${s.replace(/\\n/g, \"\\n    \")}`); // indent\n    if (recIns.length) {\n        exprs.unshift(`Main(${[...recOuts, ...mainIns].join(\", \")}) = ${[...recIns, ...mainOuts].join(\", \")} with {`);\n        exprs.push(\n            \"};\",\n            `Rec = ${recIns.map(() => \"_\").join(\", \")} : ${recOuts.map(() => \"_\").join(\", \")};`,\n            `${lambdaName} = Main ~ Rec : ${[...recIns.map(() => \"!\"), ...mainOuts.map(() => \"_\")].join(\", \")};`\n        );\n    } else if (mainIns.length) {\n        exprs.unshift(`${lambdaName}(${mainIns.join(\", \")}) = ${mainOuts.join(\", \")} with {`);\n        exprs.push(\"};\");\n    } else if (exprs.length) {\n        exprs.unshift(`${lambdaName} = ${mainOuts.join(\", \")} with {`);\n        exprs.push(\"};\");\n    } else {\n        exprs.push(`${lambdaName} = 0;`);\n    }\n    return { onces, exprs, ins, outs };\n};\nexport const toFaustDspCode = (patcher: Patcher) => inspectFaustPatcher(patcher).code;\nexport const inspectFaustPatcher = (patcher: Patcher) => {\n    const imports: Import[] = [];\n    let outs: Out[] = [];\n    const effects: Effect[] = [];\n    // Find outs and imports\n    for (const boxId in patcher.boxes) {\n        const box = patcher.boxes[boxId];\n        if (box.object.class === \"Effect\") effects.push(box.object as Effect);\n        else if (box.object.class === \"Out\") outs.push(box.object as Out);\n        else if (box.object.class === \"Import\") imports.push(box.object as Import);\n    }\n    outs = outs.sort((a, b) => a.index - b.index);\n    const { onces, exprs, ins } = toFaustLambda(patcher, outs, \"process\");\n    if (effects.length) {\n        const { onces: fxOnces, exprs: fxExprs, ins: fxIns } = toFaustLambda(patcher, [effects[0]], \"effect\");\n        onces.push(...fxOnces.filter(v => onces.indexOf(v) === -1));\n        exprs.push(...fxExprs);\n        ins.push(...fxIns);\n    }\n    imports.map(i => i.toOnceExpr()).forEach(o => onces.push(...o.filter(v => onces.indexOf(v) === -1)));\n    const code = `${onces.join(\"\\n\")}${onces.length ? \"\\n\" : \"\"}${exprs.join(\"\\n\")}\\n`;\n    return { code, onces, exprs, ins, outs };\n};\n","import type { WamNode } from \"wamsdk\";\nimport TypedEventEmitter from \"../../utils/TypedEventEmitter\";\nimport type Patcher from \"./Patcher\";\nimport type { TLine, TLineType } from \"../types\";\nimport type { IJSPatcherObject, TMetaType } from \"../objects/base/AbstractObject\";\n\nexport interface LineEventMap {\n    \"passData\": any;\n    \"destPosChanged\": { top: number; left: number };\n    \"srcPosChanged\": { top: number; left: number };\n    \"posChanged\": Line;\n    \"typeChanged\": TLineType;\n}\n\nexport default class Line extends TypedEventEmitter<LineEventMap> {\n    static isConnectableByAudio(from: IJSPatcherObject, outlet: number, to: IJSPatcherObject, inlet: number) {\n        const fromConnection = from.outletAudioConnections[outlet];\n        const toConnection = to.inletAudioConnections[inlet];\n        if (!fromConnection) return false;\n        if (!toConnection) return false;\n        if (!fromConnection.node) return false;\n        if (!toConnection.node) return false;\n        return true;\n    }\n    static isWamNode(x: any): x is WamNode {\n        return typeof x === \"object\" && x !== null && x?.module?.isWebAudioModule;\n    }\n    static compare(line1: Line, line2: Line) {\n        return line2.positionHash - line1.positionHash;\n    }\n    readonly id: string;\n    src: [string, number];\n    dest: [string, number];\n    disabled = true;\n    private _type: TLineType;\n    private readonly _patcher: Patcher;\n    constructor(patcherIn: Patcher, lineIn: TLine) {\n        super();\n        this.id = lineIn.id;\n        this.src = lineIn.src;\n        this.dest = lineIn.dest;\n        this.disabled = true;\n        this._patcher = patcherIn;\n        const { srcBox, destBox } = this;\n        this._type = this.calcType();\n        if (srcBox) {\n            srcBox.on(\"metaUpdated\", this.updateType);\n            srcBox.addOutletLine(this);\n        }\n        if (destBox) {\n            destBox.on(\"metaUpdated\", this.updateType);\n            destBox.addInletLine(this);\n        }\n    }\n    get isConnectableByAudio() {\n        if (this._patcher.props.mode !== \"js\") return false;\n        return Line.isConnectableByAudio(this.srcBox.object, this.srcOutlet, this.destBox.object, this.destInlet);\n    }\n    get presentation() {\n        return this.srcBox && this.srcBox.presentation && this.destBox && this.destBox.presentation;\n    }\n    setSrc(src: [string, number]) {\n        const srcId = src[0];\n        const srcOutlet = src[1];\n        if (srcId === this.src[0] && srcOutlet === this.src[1]) return this;\n        this.srcBox.off(\"metaUpdated\", this.updateType);\n        this.disable();\n        this.srcBox.removeOutletLine(this);\n        this.src = [srcId, srcOutlet];\n        this.srcBox.addOutletLine(this);\n        this.enable();\n        this.srcBox.on(\"metaUpdated\", this.updateType);\n        this.updateType();\n        return this.uiUpdateSrc();\n    }\n    getSrc() {\n        return this.src;\n    }\n    uiUpdateSrc() {\n        this.emit(\"srcPosChanged\", this.srcPos);\n        return this;\n    }\n    setDest(dest: [string, number]) {\n        const destId = dest[0];\n        const destInlet = dest[1];\n        if (destId === this.dest[0] && destInlet === this.dest[1]) return this;\n        this.destBox.off(\"metaUpdated\", this.updateType);\n        this.disable();\n        this.destBox.removeInletLine(this);\n        this.dest = [destId, destInlet];\n        this.destBox.addInletLine(this);\n        this.enable();\n        this.destBox.on(\"metaUpdated\", this.updateType);\n        this.updateType();\n        return this.uiUpdateDest();\n    }\n    getDest() {\n        return this.dest;\n    }\n    uiUpdateDest() {\n        this.emit(\"destPosChanged\", this.destPos);\n        return this;\n    }\n    disable(bool?: boolean): Line {\n        if (bool === false) return this.enable();\n        if (this.disabled) return this;\n        this.disabled = true;\n        const { srcBox, destBox } = this;\n        if (this._patcher.getLinesByBox(this.srcId, this.destId, this.srcOutlet, this.destInlet).length > 1) return this; // not last cable\n        if (this.isConnectableByAudio) {\n            const from = this.srcBox.object.outletAudioConnections[this.srcOutlet];\n            const to = this.destBox.object.inletAudioConnections[this.destInlet];\n            if (from && to && from.node && to.node) {\n                const isAudioParam = to.node instanceof AudioParam;\n                try {\n                    if (isAudioParam) from.node.disconnect(to.node as AudioParam, from.index);\n                    else from.node.disconnect(to.node as AudioNode, from.index, to.index);\n                    if (Line.isWamNode(from.node) && Line.isWamNode(to.node)) from.node.disconnectEvents(to.node);\n                } catch (e) {\n                    this._patcher.error((e as Error).message);\n                }\n            }\n        }\n        srcBox.disconnectedOutlet(this.srcOutlet, destBox.id, this.destInlet, this.id);\n        destBox.disconnectedInlet(this.destInlet, srcBox.id, this.srcOutlet, this.id);\n        return this;\n    }\n    enable(bool?: boolean): Line {\n        if (bool === false) return this.disable();\n        if (!this.disabled) return this;\n        const { srcBox, destBox } = this;\n        if (this.srcOutlet >= srcBox.outlets || this.destInlet >= destBox.inlets) return this._patcher.deleteLine(this.id);\n        if (this._patcher.getLinesByBox(this.srcId, this.destId, this.srcOutlet, this.destInlet).length > 1) return this; // not last cable\n        if (this.isConnectableByAudio) {\n            const from = this.srcBox.object.outletAudioConnections[this.srcOutlet];\n            const to = this.destBox.object.inletAudioConnections[this.destInlet];\n            if (from && to && from.node && to.node) {\n                const isAudioParam = to.node instanceof AudioParam;\n                try {\n                    if (isAudioParam) from.node.connect(to.node as AudioParam, from.index);\n                    else from.node.connect(to.node as AudioNode, from.index, to.index);\n                    if (Line.isWamNode(from.node) && Line.isWamNode(to.node)) from.node.connectEvents(to.node);\n                } catch (e) {\n                    this._patcher.error((e as Error).message);\n                }\n            }\n        }\n        srcBox.connectedOutlet(this.srcOutlet, destBox.id, this.destInlet, this.id);\n        destBox.connectedInlet(this.destInlet, srcBox.id, this.srcOutlet, this.id);\n        this.disabled = false;\n        return this;\n    }\n    destroy() {\n        this.destBox.off(\"metaUpdated\", this.updateType);\n        this.srcBox.off(\"metaUpdated\", this.updateType);\n        this.disable();\n        this.srcBox.removeOutletLine(this);\n        this.destBox.removeInletLine(this);\n        delete this._patcher.lines[this.id];\n        return this;\n    }\n    pass(data: any) {\n        this.emit(\"passData\", data);\n        return this.disabled ? this : this.destBox.fn(this.destInlet, data);\n    }\n    get positionHash() {\n        const { top, left } = this._patcher.boxes[this.dest[0]].getInletPos(this.dest[1]);\n        return left * 65536 + top;\n    }\n    get srcPos() {\n        return this._patcher.boxes[this.src[0]].getOutletPos(this.src[1]);\n    }\n    get destPos() {\n        return this._patcher.boxes[this.dest[0]].getInletPos(this.dest[1]);\n    }\n    get srcId() {\n        return this.src[0];\n    }\n    get srcOutlet() {\n        return this.src[1];\n    }\n    get destId() {\n        return this.dest[0];\n    }\n    get destInlet() {\n        return this.dest[1];\n    }\n    get srcBox() {\n        return this._patcher.boxes[this.src[0]];\n    }\n    get destBox() {\n        return this._patcher.boxes[this.dest[0]];\n    }\n    private calcType() {\n        const srcMeta = this.srcBox.object.meta.outlets;\n        const destMeta = this.destBox.object.meta.inlets;\n        let srcType: TMetaType = \"anything\";\n        let destType: TMetaType = \"anything\";\n        if (srcMeta[this.srcOutlet]) srcType = srcMeta[this.srcOutlet].type;\n        else if (srcMeta[srcMeta.length - 1] && srcMeta[srcMeta.length - 1].varLength) srcType = srcMeta[srcMeta.length - 1].type;\n        if (destMeta[this.destInlet]) destType = destMeta[this.destInlet].type;\n        else if (destMeta[destMeta.length - 1] && destMeta[destMeta.length - 1].varLength) destType = destMeta[destMeta.length - 1].type;\n        return srcType === \"signal\" && destType === \"signal\" ? \"audio\" : \"normal\";\n    }\n    updateType = () => {\n        const type = this.calcType();\n        if (type !== this._type) {\n            this._type = type;\n            this.emit(\"typeChanged\", type);\n        }\n    };\n    get type(): TLineType {\n        return this._type;\n    }\n    toString() {\n        return JSON.stringify(this.toSerializable());\n    }\n    toSerializable(): TLine {\n        const { id, src, dest, disabled } = this;\n        return { id, src: [...src], dest: [...dest], disabled };\n    }\n}\n","import FileInstance from \"../file/FileInstance\";\nimport PatcherEditor from \"./PatcherEditor\";\nimport Line from \"./Line\";\nimport Box from \"./Box\";\nimport PatcherHistory from \"./PatcherHistory\";\nimport PackageManager, { IPackageManager } from \"../PackageManager\";\nimport { max2js, js2max } from \"../../utils/utils\";\nimport { toFaustDspCode } from \"./FaustPatcherAnalyser\";\nimport type Env from \"../Env\";\nimport type Project from \"../Project\";\nimport type TempPatcherFile from \"./TempPatcherFile\";\nimport type PersistentProjectFile from \"../file/PersistentProjectFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { TInletEvent, TOutletEvent, IJSPatcherObjectMeta, IPropsMeta, IJSPatcherObject, TMetaType } from \"../objects/base/AbstractObject\";\nimport type { TLine, TBox, PatcherMode, RawPatcher, TMaxPatcher, TErrorLevel, TPatcherAudioConnection, TFlatPackage, TPackage, TPatcherLog, TDependencies } from \"../types\";\nimport type PatcherNode from \"../worklets/PatcherNode\";\nimport type PatcherProcessor from \"../worklets/Patcher.worklet\";\n\nexport interface TPatcherProps {\n    mode: PatcherMode;\n    dependencies: TDependencies;\n    bgColor: string;\n    editingBgColor: string;\n    grid: [number, number];\n    boxIndexCount: number;\n    lineIndexCount: number;\n    package?: string;\n    name?: string;\n    author?: string;\n    version?: string;\n    description?: string;\n    openInPresentation: boolean;\n}\nexport type TPublicPatcherProps = Pick<TPatcherProps, \"dependencies\" | \"bgColor\" | \"editingBgColor\" | \"grid\" | \"openInPresentation\">;\n\nexport interface TPatcherState {\n    name: string;\n    isReady: boolean;\n    log: TPatcherLog[];\n    selected: string[];\n    pkgMgr: IPackageManager;\n    preventEmitChanged: boolean;\n    patcherNode?: PatcherNode;\n    patcherProcessor?: PatcherProcessor;\n}\n\nexport interface PatcherEventMap extends TPublicPatcherProps {\n    \"postInited\": never;\n    \"ready\": never;\n    \"unload\": never;\n    \"changeBoxText\": { boxId: string; oldText: string; text: string };\n    \"boxChanged\": { boxId: string; oldArgs?: any[]; args?: any[]; oldProps?: Record<string, any>; props?: Record<string, any>; oldState?: Record<string, any>; state?: Record<string, any> };\n    \"passiveDeleteLine\": Line;\n    \"graphChanged\": never;\n    \"changed\": never;\n    \"ioChanged\": IJSPatcherObjectMeta;\n    \"dataInput\": TInletEvent<any[]>;\n    \"dataOutput\": TOutletEvent<any[]>;\n    \"audioInput\": { input: number; buffer: Float32Array };\n    \"paramInput\": { param: string; buffer: Float32Array };\n    \"audioOutput\": { output: number; buffer: Float32Array };\n    \"disconnectAudioInlet\": number;\n    \"disconnectAudioOutlet\": number;\n    \"connectAudioInlet\": number;\n    \"connectAudioOutlet\": number;\n    \"propsChanged\": Partial<TPublicPatcherProps>;\n    \"libChanged\": { pkg: TPackage; lib: TFlatPackage };\n}\n\nexport default class Patcher extends FileInstance<PatcherEventMap, PersistentProjectFile | TempPatcherFile> {\n    static props: IPropsMeta<TPublicPatcherProps> = {\n        dependencies: {\n            type: \"object\",\n            description: \"Patcher dependencies\",\n            default: []\n        },\n        bgColor: {\n            type: \"color\",\n            description: \"Background color\",\n            default: \"rgba(61, 65, 70, 1)\"\n        },\n        editingBgColor: {\n            type: \"color\",\n            description: \"Background color while unlocked\",\n            default: \"rgba(82, 87, 94, 1)\"\n        },\n        grid: {\n            type: \"object\",\n            description: \"Grid size\",\n            default: [15, 15]\n        },\n        openInPresentation: {\n            type: \"boolean\",\n            description: \"Open patcher in presentation\",\n            default: false\n        }\n    };\n    static async fromProjectItem(options: { file: PersistentProjectFile | TempPatcherFile; env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<Patcher> {\n        return new this(options).init();\n    }\n    async getEditor() {\n        const editor = new PatcherEditor(this);\n        return editor.init();\n    }\n    lines: Record<string, Line> = {};\n    boxes: Record<string, Box> = {};\n    props: TPatcherProps;\n    _state: TPatcherState;\n    _inletAudioConnections: TPatcherAudioConnection[] = [];\n    _outletAudioConnections: TPatcherAudioConnection[] = [];\n    _history = new PatcherHistory();\n    constructor(options: { env: IJSPatcherEnv; project?: IProject; file?: PersistentProjectFile | TempPatcherFile; instanceId?: string }) {\n        super(options);\n        this._state = {\n            name: \"patcher\",\n            isReady: false,\n            log: [],\n            selected: [],\n            pkgMgr: undefined,\n            preventEmitChanged: false\n        };\n        this.lines = {};\n        this.boxes = {};\n        this.props = {\n            mode: \"js\",\n            dependencies: Patcher.props.dependencies.default.slice(),\n            bgColor: Patcher.props.bgColor.default,\n            editingBgColor: Patcher.props.editingBgColor.default,\n            grid: Patcher.props.grid.default.slice() as [number, number],\n            openInPresentation: Patcher.props.openInPresentation.default,\n            boxIndexCount: 0,\n            lineIndexCount: 0\n        };\n    }\n    get state() {\n        return this._state;\n    }\n    get activePkg() {\n        return this._state.pkgMgr.pkg;\n    }\n    get activeLib() {\n        return this._state.pkgMgr.lib;\n    }\n    get isReady() {\n        return true;\n    }\n    get audioCtx() {\n        return (this.project as Project)?.audioCtx || (this.env as Env).audioCtx;\n    }\n    get fileExtension() {\n        return {\n            js: \"jspat\",\n            max: \"maxpat\",\n            gen: \"gendsp\",\n            faust: \"dsppat\",\n            jsaw: \"jsdsp\"\n        }[this.props.mode];\n    }\n    get fileName() {\n        return this.file?.name || `${this._state.name}.${this.fileExtension}`;\n    }\n    emitGraphChanged() {\n        if (this._state.preventEmitChanged) return;\n        this.emit(\"graphChanged\");\n        this.emitChanged();\n    }\n    emitChanged() {\n        if (this._state.preventEmitChanged) return;\n        this.emit(\"changed\");\n    }\n    boxChanged(boxId: string, changed: { oldArgs?: any[]; args?: any[]; oldProps?: Record<string, any>; props?: Record<string, any>; oldState?: Record<string, any>; state?: Record<string, any> }) {\n        this.emit(\"boxChanged\", { boxId, ...changed });\n    }\n    async init(data = this.file?.data, fileName = this.fileName) {\n        if (data instanceof ArrayBuffer) {\n            if (!data.byteLength) return this.load({});\n            const patcherIn = await new Response(data).json();\n            const splitName = fileName.split(\".\");\n            const ext = splitName.pop();\n            const extMap: Record<string, PatcherMode> = { json: \"js\", jspat: \"js\", maxpat: \"max\", gendsp: \"gen\", dsppat: \"faust\" };\n            return this.load(patcherIn, extMap[ext] || \"js\");\n        }\n        return this.load(data || {});\n    }\n    async load(patcherIn: RawPatcher | TMaxPatcher | any, modeIn?: PatcherMode) {\n        this._state.isReady = false;\n        this._state.preventEmitChanged = true;\n        await this.unload();\n        if (typeof patcherIn !== \"object\") {\n            this._state.isReady = true;\n            this._state.preventEmitChanged = false;\n            this.emit(\"ready\");\n            return this;\n        }\n        this.props.mode = patcherIn.props?.mode || modeIn || \"js\";\n        this.state.pkgMgr = new PackageManager(this);\n        const { mode } = this.props;\n        const $init: Promise<Box>[] = [];\n        let patcher;\n        if (mode === \"max\" || mode === \"gen\") {\n            if (!(patcherIn as TMaxPatcher).patcher) {\n                patcher = patcherIn;\n            } else {\n                patcher = max2js(patcherIn as TMaxPatcher);\n            }\n        } else if (mode === \"js\" || mode === \"faust\" || mode === \"jsaw\") {\n            if (\"data\" in patcherIn && \"patcher\" in patcherIn) {\n                patcher = patcherIn.patcher;\n            } else {\n                patcher = patcherIn;\n            }\n        }\n        if (patcher.props) this.props = { ...this.props, ...patcher.props, mode };\n        if (Array.isArray(this.props.bgColor)) this.props.bgColor = `rgba(${this.props.bgColor.join(\", \")})`;\n        if (Array.isArray(this.props.editingBgColor)) this.props.editingBgColor = `rgba(${this.props.editingBgColor.join(\", \")})`;\n        if (mode === \"js\" && this.props.dependencies) {\n            const { dependencies } = this.props;\n            if (!Array.isArray(dependencies)) {\n                this.props.dependencies = [];\n                for (const key in dependencies as Record<string, string>) {\n                    this.props.dependencies.push([key, dependencies[key]]);\n                }\n            }\n        }\n        await this._state.pkgMgr.init();\n        if (patcher.boxes) { // Boxes & data\n            for (const id in patcher.boxes) {\n                const $ = this.createBox(patcher.boxes[id]);\n                $init.push($);\n                const numID = parseInt(id.match(/\\d+/)[0]);\n                if (numID > this.props.boxIndexCount) this.props.boxIndexCount = numID;\n            }\n        }\n        await Promise.all($init);\n        if (patcher.lines) { // Lines\n            for (const id in patcher.lines) {\n                this.createLine(patcher.lines[id]);\n                const numID = parseInt(id.match(/\\d+/)[0]);\n                if (numID > this.props.lineIndexCount) this.props.lineIndexCount = numID;\n            }\n        }\n        this._state.isReady = true;\n        this._state.preventEmitChanged = false;\n        this.emitGraphChanged();\n        this.emit(\"ready\");\n        await Promise.all(Object.keys(this.boxes).map(id => this.boxes[id].postInit()));\n        this.emit(\"postInited\");\n        return this;\n    }\n    async getPatcherNode(inputs = 2, outputs = 2) {\n        if (this.props.mode === \"jsaw\" && this.env.thread === \"main\") {\n            const PatcherNode = (await import(\"../worklets/PatcherNode\")).default;\n            await PatcherNode.register(this.audioCtx.audioWorklet);\n            this.state.patcherNode = new PatcherNode(this.audioCtx, { env: this.env, instanceId: this.id, fileId: this.file?.id, data: this.file ? undefined : this.toSerializable(), inputs, outputs });\n            await this.state.patcherNode.init();\n            return this.state.patcherNode;\n        }\n        return null;\n    }\n    async loadFromURL(url: string) {\n        try {\n            const file = await fetch(url);\n            const parsed = await file.json() as RawPatcher | TMaxPatcher;\n            return this.load(parsed);\n        } catch (e) {\n            this.error(`Fetch file ${url} failed.`);\n        }\n        return this;\n    }\n    async loadFromString(sIn: string) {\n        try {\n            const parsed = JSON.parse(sIn) as RawPatcher | TMaxPatcher;\n            return this.load(parsed);\n        } catch (e) {\n            this.error(`Load from string: ${sIn.slice(20)}... failed.`);\n        }\n        return this;\n    }\n    async loadFromFile(file: File) {\n        const splitName = file.name.split(\".\");\n        const ext = splitName.pop();\n        const name = splitName.join(\".\");\n        const extMap: Record<string, PatcherMode> = { json: \"js\", jspat: \"js\", maxpat: \"max\", gendsp: \"gen\", dsppat: \"faust\" };\n        if (!extMap[ext]) return this;\n        const reader = new FileReader();\n        reader.onload = () => {\n            let parsed: RawPatcher | TMaxPatcher;\n            try {\n                parsed = JSON.parse(reader.result.toString());\n            } catch (e) {\n                this.error((e as Error).message);\n            }\n            if (parsed) {\n                this.load(parsed, extMap[ext]);\n                this._state.name = name;\n            }\n        };\n        reader.onerror = () => this.error(reader.error.message);\n        reader.readAsText(file, \"UTF-8\");\n        return this;\n    }\n    async unload() {\n        await this.emit(\"unload\");\n        if (Object.keys(this.boxes).length) {\n            this._state.preventEmitChanged = true;\n            await Promise.all(Object.keys(this.boxes).map(id => this.boxes[id].destroy()));\n            this._state.preventEmitChanged = false;\n            this.emitGraphChanged();\n        }\n        this.lines = {};\n        this.boxes = {};\n        this.props = {\n            mode: \"js\",\n            dependencies: Patcher.props.dependencies.default.slice(),\n            bgColor: Patcher.props.bgColor.default,\n            editingBgColor: Patcher.props.editingBgColor.default,\n            grid: Patcher.props.grid.default.slice() as [number, number],\n            openInPresentation: Patcher.props.openInPresentation.default,\n            boxIndexCount: 0,\n            lineIndexCount: 0\n        };\n        this._state.selected = [];\n    }\n    async destroy() {\n        await this.unload();\n        await super.destroy();\n    }\n    async addPackage(namespace: string, url: string) {\n        const { dependencies } = this.props;\n        dependencies.push([namespace, url]);\n        this.setProps({ dependencies: dependencies.slice() });\n        await this.state.pkgMgr.init();\n        if (!(namespace in this.activePkg)) {\n            this.setProps({ dependencies: dependencies.filter(([id]) => id !== namespace) });\n        }\n    }\n    async removePackage(id: string) {\n        const { dependencies } = this.props;\n        const i = dependencies.findIndex(t => t[0] === id);\n        if (i === -1) return;\n        dependencies.splice(i, 1);\n        this.setProps({ dependencies: dependencies.slice() });\n        await this.state.pkgMgr.init();\n    }\n    async createBox(boxIn: TBox) {\n        if (!boxIn.id || (boxIn.id in this.boxes)) boxIn.id = \"box-\" + ++this.props.boxIndexCount;\n        const box = new Box(this, boxIn);\n        this.boxes[box.id] = box;\n        await box.init();\n        this.emitGraphChanged();\n        return box;\n    }\n    getObjectConstructor(parsed: { class: string; args: any[]; props: Record<string, any> }) {\n        const className = parsed.class;\n        if (typeof className !== \"string\" || className.length === 0) return this.activeLib.EmptyObject;\n        if (this.activeLib[className]) return this.activeLib[className];\n        this.error(`Object ${className} not found.`);\n        return this.activeLib.InvalidObject;\n    }\n    getObjectMeta(parsed: { class: string; args: any[]; props: Record<string, any> }) {\n        return this.getObjectConstructor(parsed).meta;\n    }\n    async changeBoxText(boxId: string, text: string) {\n        const oldText = this.boxes[boxId].text;\n        if (oldText === text) return this.boxes[boxId];\n        await this.boxes[boxId].changeText(text);\n        this.emit(\"changeBoxText\", { oldText, text, boxId });\n        return this.boxes[boxId];\n    }\n    async deleteBox(boxId: string) {\n        const box = this.boxes[boxId];\n        if (!box) return null;\n        await box.destroy();\n        this.emitGraphChanged();\n        return box;\n    }\n    createLine(lineIn: TLine) {\n        if (!this.canCreateLine(lineIn)) return null;\n        if (!lineIn.id || (lineIn.id in this.lines)) lineIn.id = \"line-\" + ++this.props.lineIndexCount;\n        const line = new Line(this, lineIn);\n        this.lines[line.id] = line;\n        line.enable();\n        this.emitGraphChanged();\n        return line;\n    }\n    canCreateLine(lineIn: TLine) {\n        if (lineIn.src[1] >= this.boxes[lineIn.src[0]].outlets) return false;\n        if (lineIn.dest[1] >= this.boxes[lineIn.dest[0]].inlets) return false;\n        if (this.getLinesByBox(lineIn.src[0], lineIn.dest[0], lineIn.src[1], lineIn.dest[1]).length > 0) return false;\n        return true;\n    }\n    deleteLine(lineId: string) {\n        const line = this.lines[lineId];\n        if (!line) return null;\n        line.destroy();\n        if (!this._state.preventEmitChanged) this.emit(\"passiveDeleteLine\", line);\n        this.emitGraphChanged();\n        return line;\n    }\n    changeLineSrc(lineId: string, srcId: string, srcOutlet: number) {\n        const line = this.lines[lineId];\n        // if (this.instance.getLinesByBox(srcId, line.destId, srcOutlet, line.destInlet).length > 0) return line;\n        const oldSrc: [string, number] = [line.srcId, line.srcOutlet];\n        const src: [string, number] = [srcId, srcOutlet];\n        line.setSrc(src);\n        this.emitGraphChanged();\n        return { lineId, oldSrc, src };\n    }\n    changeLineDest(lineId: string, destId: string, destOutlet: number) {\n        const line = this.lines[lineId];\n        // if (this.getLinesByBox(line.srcId, destId, line.destInlet, destOutlet).length > 0) return line;\n        const oldDest: [string, number] = [line.destId, line.destInlet];\n        const dest: [string, number] = [destId, destOutlet];\n        line.setDest(dest);\n        this.emitGraphChanged();\n        return { lineId, oldDest, dest };\n    }\n    getLinesBySrcID(srcId: string) {\n        const result = [];\n        for (let i = 0; i < this.boxes[srcId].outlets; i++) { // Array.fill fills the array with same instance\n            result[i] = [];\n        }\n        for (const id in this.lines) {\n            const line = this.lines[id];\n            if (line && line.srcId === srcId) {\n                const srcOutlet = line.srcOutlet;\n                if (!result[srcOutlet]) result[srcOutlet] = [id];\n                else result[srcOutlet].push(id);\n            }\n        }\n        return result;\n    }\n    getLinesByDestID(destId: string) {\n        const result = [];\n        for (let i = 0; i < this.boxes[destId].inlets; i++) {\n            result[i] = [];\n        }\n        for (const id in this.lines) {\n            const line = this.lines[id];\n            if (line && line.destId === destId) {\n                const destInlet = line.destInlet;\n                if (!result[destInlet]) result[destInlet] = [id];\n                else result[destInlet].push(id);\n            }\n        }\n        return result;\n    }\n    getLinesByBox(srcId: string, destId: string, srcOutlet?: number, destInlet?: number) {\n        const result: string[] = [];\n        let srcOuts: string[] = [];\n        let destIns: string[] = [];\n        const srcOutsWraped = this.getLinesBySrcID(srcId);\n        if (srcOutlet !== undefined) srcOuts = srcOutsWraped[srcOutlet];\n        else srcOutsWraped.forEach(el => srcOuts = srcOuts.concat(el));\n        const destInsWraped = this.getLinesByDestID(destId);\n        if (destInlet !== undefined) destIns = destInsWraped[destInlet];\n        else destInsWraped.forEach(el => destIns = destIns.concat(el));\n        if (!srcOuts || !destIns) return result;\n        srcOuts.forEach(idOut => destIns.forEach(idIn => (idIn === idOut ? result.push(idIn) : undefined)));\n        return result;\n    }\n    fn(data: any, inlet: number) {\n        this.emit(\"dataInput\", { data, inlet });\n    }\n    inputAudio(input: number, buffer: Float32Array) {\n        this.emitSync(\"audioInput\", { input, buffer });\n    }\n    inputParam(param: string, buffer: Float32Array) {\n        this.emitSync(\"paramInput\", { param, buffer });\n    }\n    outputAudio(output: number, buffer: Float32Array) {\n        this.emitSync(\"audioOutput\", { output, buffer });\n    }\n    outlet(outlet: number, data: any) {\n        this.emit(\"dataOutput\", { data, outlet });\n    }\n    get inletAudioConnections() {\n        return this._inletAudioConnections;\n    }\n    get outletAudioConnections() {\n        return this._outletAudioConnections;\n    }\n    connectAudioInlet(index: number) {\n        this.emit(\"connectAudioInlet\", index);\n    }\n    connectAudioOutlet(index: number) {\n        this.emit(\"connectAudioOutlet\", index);\n    }\n    disconnectAudioInlet(index: number) {\n        this.emit(\"disconnectAudioInlet\", index);\n    }\n    disconnectAudioOutlet(index: number) {\n        this.emit(\"disconnectAudioOutlet\", index);\n    }\n    changeIO() {\n        this.emit(\"ioChanged\", this.meta);\n    }\n    inspectAudioIO() {\n        const inputBoxes: Box[] = [];\n        const outputBoxes: Box[] = [];\n        const parametersBoxes: [string, Box][] = [];\n        for (const boxId in this.boxes) {\n            const box = this.boxes[boxId];\n            const arg0 = box.args[0];\n            const port = Math.max(1, ~~arg0) - 1;\n            if (box.meta.isPatcherInlet === \"audio\") inputBoxes[port] = box;\n            else if (box.meta.isPatcherInlet === \"parameter\") parametersBoxes.push([arg0, box]);\n            else if (box.meta.isPatcherOutlet === \"audio\") outputBoxes[port] = box;\n        }\n        for (let i = 0; i < this._inletAudioConnections.length; i++) {\n            if (!inputBoxes[i]) delete this._inletAudioConnections[i];\n        }\n        for (let i = 0; i < this._outletAudioConnections.length; i++) {\n            if (!outputBoxes[i]) delete this._outletAudioConnections[i];\n        }\n        return { inputBoxes, outputBoxes, parametersBoxes };\n    }\n    get meta(): IJSPatcherObjectMeta {\n        const { metaFromPatcher } = this;\n        return {\n            package: this.props.package || \"\",\n            name: this.props.name || \"\",\n            icon: null,\n            author: this.props.author || \"\",\n            version: this.props.version || \"\",\n            description: this.props.description || \"\",\n            isPatcherInlet: false,\n            isPatcherOutlet: false,\n            ...metaFromPatcher\n        };\n    }\n    get metaFromPatcher(): Pick<IJSPatcherObjectMeta, \"inlets\" | \"outlets\" | \"args\" | \"props\"> {\n        const inlets: IJSPatcherObjectMeta[\"inlets\"] = [];\n        const outlets: IJSPatcherObjectMeta[\"outlets\"] = [];\n        for (const boxId in this.boxes) {\n            const box = this.boxes[boxId] as Box<IJSPatcherObject<any, any, any[], any[], any[], { description: string; type: TMetaType }>>;\n            const port = Math.max(1, ~~box.args[0]) - 1;\n            const description = box.props.description || \"\";\n            if (box.meta.isPatcherInlet === \"data\" && !inlets[port]) {\n                inlets[port] = {\n                    isHot: true,\n                    type: box.props.type || \"anything\",\n                    description\n                };\n            } else if (box.meta.isPatcherInlet === \"audio\") {\n                inlets[port] = {\n                    isHot: true,\n                    type: \"signal\",\n                    description\n                };\n            } else if (box.meta.isPatcherOutlet === \"data\" && !outlets[port]) {\n                outlets[port] = {\n                    type: box.props.type || \"anything\",\n                    description\n                };\n            } else if (box.meta.isPatcherOutlet === \"audio\") {\n                outlets[port] = {\n                    type: \"signal\",\n                    description\n                };\n            }\n        }\n        return { inlets, outlets, args: [], props: {} };\n    }\n    log(message: string) {\n        this.newLog(\"none\", \"Patcher\", message, this);\n    }\n    error(message: string) {\n        this.newLog(\"error\", \"Patcher\", message, this);\n    }\n    newLog(errorLevel: TErrorLevel, title: string, message: string, emitter?: any) {\n        this.env.newLog(errorLevel, title, message, emitter);\n    }\n    setProps(props: Partial<TPublicPatcherProps>) {\n        let changed = false;\n        for (const keyIn in props) {\n            const key = keyIn as keyof TPublicPatcherProps;\n            if (this.props[key] === props[key]) continue;\n            changed = true;\n            (this.props as any)[key] = props[key];\n            this.emit(key, props[key]);\n        }\n        if (changed) {\n            this.emit(\"propsChanged\", props);\n            this.emitChanged();\n        }\n    }\n    get publicProps() {\n        const { dependencies, bgColor, editingBgColor, grid, openInPresentation } = this.props;\n        return { dependencies, bgColor, editingBgColor, grid, openInPresentation } as TPublicPatcherProps;\n    }\n    toFaustDspCode() {\n        const code = toFaustDspCode(this);\n        return code;\n    }\n    toString(spacing?: number) {\n        if (this.props.mode === \"max\" || this.props.mode === \"gen\") {\n            return JSON.stringify(js2max(this), undefined, spacing);\n        }\n        const { props } = this;\n        const boxes: RawPatcher[\"boxes\"] = {};\n        const lines: RawPatcher[\"lines\"] = {};\n        for (const id in this.boxes) {\n            boxes[id] = this.boxes[id].toSerializable();\n        }\n        for (const id in this.lines) {\n            lines[id] = this.lines[id].toSerializable();\n        }\n        return JSON.stringify({ boxes, lines, props }, undefined, spacing);\n    }\n    toSerializable(): RawPatcher {\n        return JSON.parse(this.toString());\n    }\n    serialize() {\n        return new Blob([this.toString()]).arrayBuffer();\n    }\n}\n","import type { SemanticICONS } from \"semantic-ui-react\";\nimport { isRectMovable, isRectResizable, isTRect } from \"../../utils/utils\";\nimport FileEditor from \"../file/FileEditor\";\nimport Box from \"./Box\";\nimport Line from \"./Line\";\nimport type { RawPatcher, TBox, TLine, TMaxClipboard, TRect, TResizeHandlerType } from \"../types\";\nimport type Patcher from \"./Patcher\";\nimport type PersistentProjectFile from \"../file/PersistentProjectFile\";\nimport type TempPatcherFile from \"./TempPatcherFile\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\nimport type { PatcherEventMap } from \"./Patcher\";\n\nexport interface PatcherEditorEventMap extends PatcherEditorState {\n    \"create\": RawPatcher;\n    \"delete\": RawPatcher;\n    \"changeBoxText\": { boxId: string; oldText: string; text: string };\n    \"boxChanged\": { boxId: string; oldArgs?: any[]; args?: any[]; oldProps?: Record<string, any>; props?: Record<string, any>; oldState?: Record<string, any>; state?: Record<string, any> };\n    \"changeLineSrc\": { lineId: string; oldSrc: [string, number]; src: [string, number] };\n    \"changeLineDest\": { lineId: string; oldDest: [string, number]; dest: [string, number] };\n    \"selected\": string[];\n    \"moving\": { selected: string[]; delta: { x: number; y: number }; presentation: boolean };\n    \"moved\": { selected: string[]; delta: { x: number; y: number }; presentation: boolean };\n    \"resized\": { selected: string[]; delta: { x: number; y: number }; type: TResizeHandlerType; presentation: boolean };\n    \"tempLine\": { findSrc: boolean; from: [string, number] };\n    \"inspector\": never;\n    \"dockUI\": string;\n}\n\nexport interface PatcherHistoryEventMap extends Pick<PatcherEditorEventMap, \"create\" | \"delete\" | \"changeBoxText\" | \"changeLineSrc\" | \"changeLineDest\" | \"moved\" | \"resized\" | \"boxChanged\"> {}\n\nexport interface PatcherEditorState {\n    locked: boolean;\n    presentation: boolean;\n    showGrid: boolean;\n    snapToGrid: boolean;\n    selected: string[];\n}\n\nexport default class PatcherEditor extends FileEditor<Patcher, PatcherEditorEventMap> {\n    static async fromProjectItem({ file, env, project, instanceId }: { file: PersistentProjectFile | TempPatcherFile; env: IJSPatcherEnv; project?: IProject; instanceId?: string }): Promise<PatcherEditor> {\n        const patcher = await file.instantiate({ env, project, instanceId }) as Patcher;\n        const editor = new this(patcher);\n        return editor.init();\n    }\n    state: PatcherEditorState = {\n        locked: true,\n        presentation: false,\n        showGrid: true,\n        snapToGrid: true,\n        selected: []\n    };\n    get isLocked() {\n        return this.state.locked;\n    }\n    get boxes() {\n        return this.instance.boxes;\n    }\n    get lines() {\n        return this.instance.lines;\n    }\n    get props() {\n        return this.instance.props;\n    }\n    get publicProps() {\n        return this.instance.publicProps;\n    }\n    get fileExtension() {\n        return this.instance.fileExtension;\n    }\n    get fileName() {\n        return this.instance.fileName;\n    }\n    get fileIcon(): SemanticICONS {\n        return \"sitemap\";\n    }\n    handleChangeBoxText = (e: PatcherEventMap[\"changeBoxText\"]) => this.emit(\"changeBoxText\", e);\n    handlePassiveDeleteLine = (e: PatcherEventMap[\"passiveDeleteLine\"]) => this.emit(\"delete\", { boxes: {}, lines: { [e.id]: e.toSerializable() } });\n    handleBoxChanged = (e: PatcherEventMap[\"boxChanged\"]) => this.emit(\"boxChanged\", e);\n    handleChanged = () => this.instance.emitChanged();\n    constructor(instance: Patcher) {\n        super(instance);\n        const { openInPresentation } = this.props;\n        this.setState({\n            locked: true,\n            presentation: !!openInPresentation,\n            showGrid: true,\n            snapToGrid: true,\n            selected: []\n        });\n    }\n    async init() {\n        if (!this.instance.isReady) {\n            await new Promise<void>((resolve, reject) => {\n                const handleReady = () => {\n                    resolve();\n                    this.instance.off(\"ready\", handleReady);\n                };\n                this.instance.on(\"ready\", handleReady);\n            });\n        }\n        this.on(\"changed\", this.handleChanged);\n        this.instance.on(\"changeBoxText\", this.handleChangeBoxText);\n        this.instance.on(\"passiveDeleteLine\", this.handlePassiveDeleteLine);\n        this.instance.on(\"boxChanged\", this.handleBoxChanged);\n        const { openInPresentation } = this.props;\n        this.setState({\n            locked: true,\n            presentation: !!openInPresentation,\n            showGrid: true,\n            snapToGrid: true,\n            selected: []\n        });\n        this._isReady = true;\n        this.emit(\"ready\");\n        return this;\n    }\n    setState(state: Partial<PatcherEditorState>) {\n        let changed = false;\n        for (const keyIn in state) {\n            const key = keyIn as keyof PatcherEditorState;\n            if (this.state[key] === state[key]) continue;\n            changed = true;\n            if (key === \"locked\" || key === \"presentation\") this.deselectAll();\n            this.state[key] = state[key] as any;\n            this.emit(key, state[key]);\n        }\n        // if (changed) this.emit(\"stateChanged\", this.state);\n        return changed;\n    }\n    async createBox(boxIn: TBox) {\n        const box = await this.instance.createBox(boxIn);\n        this.emit(\"create\", { boxes: { [box.id]: box.toSerializable() }, lines: {} });\n        await box.postInit();\n        return box;\n    }\n    async createBoxFromFile(file: PersistentProjectFile, boxIn: Omit<TBox, \"text\">) {\n        const path = file.projectPath;\n        const type = file.type;\n        const ext = file.fileExtension;\n        if (type === \"patcher\") {\n            const extMap: Record<string, string> = this.props.mode === \"js\"\n                ? { json: \"p\", jspat: \"p\", maxpat: \"max\", gendsp: \"gen\", dsppat: \"pfaust\" }\n                : this.props.mode === \"faust\"\n                    ? { gendsp: \"gen\", dsppat: \"p\" }\n                    : this.props.mode === \"gen\"\n                        ? { gendsp: \"gen\" }\n                        : {};\n            const obj = extMap[ext];\n            if (obj) await this.createBox({ text: `${obj} ${path}`, ...boxIn });\n        } else if (type === \"audio\") {\n            await this.createBox({ text: `buffer~ ${path}`, ...boxIn });\n        } else if (type === \"image\") {\n            await this.createBox({ text: `img ${path}`, ...boxIn });\n        }\n    }\n    async deleteBox(boxId: string) {\n        this.deselect(boxId);\n        const box = await this.instance.deleteBox(boxId);\n        if (!box) return null;\n        this.emit(\"delete\", { boxes: { [box.id]: box.toSerializable() }, lines: {} });\n        return box;\n    }\n    createLine(lineIn: TLine) {\n        const line = this.instance.createLine(lineIn);\n        if (!line) return null;\n        this.emit(\"create\", { boxes: {}, lines: { [line.id]: line.toSerializable() } });\n        return line;\n    }\n    deleteLine(lineId: string) {\n        this.deselect(lineId);\n        const line = this.instance.deleteLine(lineId);\n        if (!line) return null;\n        this.emit(\"delete\", { boxes: {}, lines: { [line.id]: line.toSerializable() } });\n        return line;\n    }\n    changeLineSrc(lineId: string, srcId: string, srcOutlet: number) {\n        const e = this.instance.changeLineSrc(lineId, srcId, srcOutlet);\n        this.emit(\"changeLineSrc\", e);\n    }\n    changeLineDest(lineId: string, destId: string, destOutlet: number) {\n        const e = this.instance.changeLineDest(lineId, destId, destOutlet);\n        this.emit(\"changeLineDest\", e);\n    }\n    async changeBox(boxId: string, change: { args?: any[]; props?: Record<string, any>; state?: Record<string, any> }) {\n        await this.instance.boxes[boxId]?.changeObject(change);\n    }\n\n    select(...ids: string[]) {\n        ids.forEach((id) => {\n            if (this.state.selected.indexOf(id) >= 0) return;\n            if (this.boxes[id] || this.lines[id]) this.state.selected.push(id);\n        });\n        this.emit(\"selected\", this.state.selected.slice());\n    }\n    selectAllBoxes() {\n        let ids = Object.keys(this.boxes);\n        if (this.state.presentation) ids = ids.filter(id => this.boxes[id].presentation);\n        this.state.selected = ids;\n        this.emit(\"selected\", ids);\n    }\n    selectOnly(...ids: string[]) {\n        this.state.selected = [];\n        this.select(...ids);\n    }\n    deselect(...ids: string[]) {\n        ids.forEach((id) => {\n            const i = this.state.selected.indexOf(id);\n            if (i === -1) return;\n            this.state.selected.splice(i, 1);\n        });\n        this.emit(\"selected\", this.state.selected.slice());\n    }\n    deselectAll() {\n        this.state.selected = [];\n        this.emit(\"selected\", []);\n    }\n    selectedToString() {\n        const lineSet = new Set<Line>();\n        const patcher: RawPatcher = { lines: {}, boxes: {} };\n        this.state.selected\n            .filter(id => id.startsWith(\"box\") && this.boxes[id])\n            .map(id => this.boxes[id])\n            .forEach((box) => {\n                box.allLines.forEach(line => lineSet.add(line));\n                patcher.boxes[box.id] = box.toSerializable();\n            });\n        lineSet.forEach((line) => {\n            if (patcher.boxes[line.srcId] && patcher.boxes[line.destId]) patcher.lines[line.id] = line.toSerializable();\n        });\n        if (!Object.keys(patcher.boxes)) return undefined;\n        return JSON.stringify(patcher, undefined, 4);\n    }\n    async pasteToPatcher(clipboard: RawPatcher | TMaxClipboard) {\n        const idMap: Record<string, string> = {};\n        const pasted: RawPatcher = { boxes: {}, lines: {} };\n        if (!clipboard || !clipboard.boxes) return pasted;\n        const $init: Promise<Box>[] = [];\n        const $postInit: Promise<Box>[] = [];\n        if (Array.isArray(clipboard.boxes)) { // Max Patcher\n            this.instance.state.preventEmitChanged = true;\n            const maxBoxes = clipboard.boxes;\n            for (let i = 0; i < maxBoxes.length; i++) {\n                const maxBox = maxBoxes[i].box;\n                const numID = parseInt(maxBox.id.match(/\\d+/)[0]);\n                let id = \"box-\" + numID;\n                if (this.boxes[id]) {\n                    idMap[id] = \"box-\" + ++this.props.boxIndexCount;\n                    id = idMap[id];\n                } else {\n                    idMap[id] = id;\n                    if (numID > this.props.boxIndexCount) this.props.boxIndexCount = numID;\n                }\n                const box: TBox = {\n                    id,\n                    inlets: maxBox.numinlets,\n                    outlets: maxBox.numoutlets,\n                    rect: maxBox.patching_rect,\n                    text: (maxBox.maxclass === \"newobj\" ? \"\" : maxBox.maxclass + \" \") + (maxBox.text ? maxBox.text : \"\")\n                };\n                $init.push(this.instance.createBox(box));\n            }\n            const createdBoxes = (await Promise.all($init)).filter(box => !!box);\n            createdBoxes.forEach((box) => {\n                pasted.boxes[box.id] = box.toSerializable();\n                $postInit.push(box.postInit());\n            });\n            if (Array.isArray(clipboard.lines)) {\n                const maxLines = clipboard.lines;\n                for (let i = 0; i < maxLines.length; i++) {\n                    const lineArgs = maxLines[i].patchline;\n                    const id = \"line-\" + ++this.props.lineIndexCount;\n                    const line: TLine = {\n                        id,\n                        src: [idMap[lineArgs.source[0].replace(/obj/, \"box\")], lineArgs.source[1]],\n                        dest: [idMap[lineArgs.destination[0].replace(/obj/, \"box\")], lineArgs.destination[1]]\n                    };\n                    const createdLine = this.instance.createLine(line);\n                    if (createdLine) pasted.lines[createdLine.id] = createdLine.toSerializable();\n                }\n            }\n            this.instance.state.preventEmitChanged = false;\n            if (Object.keys(pasted.boxes).length) {\n                this.deselectAll();\n                this.select(...Object.keys(pasted.boxes));\n                this.emit(\"create\", pasted);\n                this.instance.emitGraphChanged();\n                await Promise.all($postInit);\n            }\n            return pasted;\n        }\n        if (Array.isArray(clipboard.boxes) || Array.isArray(clipboard.lines)) return pasted;\n        this.instance.state.preventEmitChanged = true;\n        for (const boxId in clipboard.boxes) {\n            const box = clipboard.boxes[boxId];\n            if (this.boxes[box.id]) {\n                idMap[box.id] = \"box-\" + ++this.props.boxIndexCount;\n                box.id = idMap[box.id];\n            } else {\n                idMap[box.id] = box.id;\n                const numID = parseInt(box.id.match(/\\d+/)[0]);\n                if (numID > this.props.boxIndexCount) this.props.boxIndexCount = numID;\n            }\n            box.rect = [box.rect[0] + 30, box.rect[1] + 30, box.rect[2], box.rect[3]];\n            $init.push(this.instance.createBox(box));\n        }\n        const createdBoxes = (await Promise.all($init)).filter(box => !!box);\n        createdBoxes.forEach((box) => {\n            pasted.boxes[box.id] = box.toSerializable();\n            $postInit.push(box.postInit());\n        });\n        await Promise.all($postInit);\n        for (const lineId in clipboard.lines) {\n            const line = clipboard.lines[lineId];\n            line.id = \"line-\" + ++this.props.lineIndexCount;\n            line.src[0] = idMap[line.src[0]];\n            line.dest[0] = idMap[line.dest[0]];\n            const createdLine = this.instance.createLine(line);\n            if (createdLine) pasted.lines[createdLine.id] = createdLine.toSerializable();\n        }\n        this.instance.state.preventEmitChanged = false;\n        if (Object.keys(pasted.boxes).length) {\n            this.deselectAll();\n            this.select(...Object.keys(pasted.boxes));\n            this.emit(\"create\", pasted);\n            this.instance.emitGraphChanged();\n        }\n        return pasted;\n    }\n    async create(objects: RawPatcher) {\n        const $init: Promise<Box>[] = [];\n        const $postInit: Promise<Box>[] = [];\n        const created: RawPatcher = { boxes: {}, lines: {} };\n        for (const boxId in objects.boxes) {\n            const boxIn = objects.boxes[boxId];\n            const box = new Box(this.instance, boxIn);\n            this.boxes[box.id] = box;\n            created.boxes[box.id] = box.toSerializable();\n            $init.push(box.init());\n            $postInit.push(box.postInit());\n        }\n        await Promise.all($init);\n        await Promise.all($postInit);\n        for (const lineId in objects.lines) {\n            const lineIn = objects.lines[lineId];\n            if (!this.instance.canCreateLine(lineIn)) continue;\n            const line = new Line(this.instance, lineIn);\n            this.lines[line.id] = line;\n            created.lines[line.id] = line.toSerializable();\n            line.enable();\n        }\n        this.deselectAll();\n        this.select(...Object.keys(objects.boxes));\n        this.emit(\"create\", created);\n        this.instance.emitGraphChanged();\n    }\n    async deleteSelected() {\n        const boxSet = new Set<Box>();\n        const lineSet = new Set<Line>();\n        this.state.selected.filter(id => id.startsWith(\"line\")).forEach(id => lineSet.add(this.lines[id]));\n        this.state.selected.filter(id => id.startsWith(\"box\")).forEach((id) => {\n            boxSet.add(this.boxes[id]);\n            this.boxes[id].allLines.forEach(line => lineSet.add(line));\n        });\n        if (!boxSet.size && !lineSet.size) return undefined;\n        this.state.selected = [];\n        const deleted: RawPatcher = { boxes: {}, lines: {} };\n        const promises: Promise<Box>[] = [];\n        lineSet.forEach((line) => {\n            deleted.lines[line.id] = line.toSerializable();\n            line.destroy();\n        });\n        boxSet.forEach((box) => {\n            deleted.boxes[box.id] = box.toSerializable();\n            promises.push(box.destroy());\n        });\n        await Promise.all(promises);\n        this.emit(\"selected\", this.state.selected.slice());\n        this.emit(\"delete\", deleted);\n        this.instance.emitGraphChanged();\n        return deleted;\n    }\n    async delete(objects: RawPatcher) {\n        const deleted: RawPatcher = { boxes: {}, lines: {} };\n        for (const id in objects.lines) {\n            deleted.lines[id] = this.lines[id].destroy().toSerializable();\n        }\n        const promises: Promise<Box>[] = [];\n        for (const id in objects.boxes) {\n            deleted.boxes[id] = this.boxes[id].toSerializable();\n            promises.push(this.boxes[id].destroy());\n        }\n        await Promise.all(promises);\n        this.emit(\"selected\", this.state.selected.slice());\n        this.emit(\"delete\", deleted);\n        this.instance.emitGraphChanged();\n    }\n    async cut() {\n        if (this.state.locked) return;\n        await this.copy();\n        this.deleteSelected();\n    }\n    async copy() {\n        if (this.state.locked) return;\n        const s = this.selectedToString();\n        if (!s) return;\n        await navigator.clipboard.writeText(s);\n    }\n    async paste() {\n        if (this.state.locked) return;\n        const s = await navigator.clipboard.readText();\n        if (!s) return;\n        let parsed: RawPatcher | TMaxClipboard;\n        try {\n            parsed = JSON.parse(s);\n        } catch (e) {} // eslint-disable-line no-empty\n        await this.pasteToPatcher(parsed);\n    }\n    async duplicate() {\n        if (this.state.locked) return;\n        const s = this.selectedToString();\n        if (!s) return;\n        let parsed: RawPatcher | TMaxClipboard;\n        try {\n            parsed = JSON.parse(s);\n        } catch (e) {} // eslint-disable-line no-empty\n        await this.pasteToPatcher(parsed);\n    }\n    async selectAll() {\n        this.selectAllBoxes();\n    }\n    selectRegion(selectionRect: number[], selectedBefore: string[]) {\n        let [left, top, right, bottom] = selectionRect;\n        if (left > right) [left, right] = [right, left];\n        if (top > bottom) [top, bottom] = [bottom, top];\n        const { presentation } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        const select = selectedBefore.slice();\n        for (const boxId in this.boxes) {\n            const box = this.boxes[boxId];\n            if (presentation && !box.presentation) continue;\n            const rect = box[rectKey];\n            if (!isTRect(rect)) continue;\n            const [boxLeft, boxTop, boxWidth, boxHeight] = rect;\n            const [boxRight, boxBottom] = [boxLeft + boxWidth, boxTop + boxHeight];\n            if (boxLeft < right && boxTop < bottom && boxRight > left && boxBottom > top) {\n                const i = select.indexOf(boxId);\n                if (i === -1) select.push(boxId);\n                else select.splice(i, 1);\n            }\n        }\n        const deselect = this.state.selected.filter(id => select.indexOf(id) === -1);\n        this.select(...select);\n        this.deselect(...deselect);\n    }\n    moveSelectedBox(dragOffset: { x: number; y: number }, refBoxID?: string) {\n        const { presentation, snapToGrid, selected } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        const delta = { ...dragOffset };\n        if (refBoxID) {\n            const rect = this.boxes[refBoxID][rectKey];\n            if (!isRectMovable(rect)) return { x: 0, y: 0 };\n            delta.x = snapToGrid ? Math.round((rect[0] + dragOffset.x) / this.props.grid[0]) * this.props.grid[0] - rect[0] : dragOffset.x;\n            delta.y = snapToGrid ? Math.round((rect[1] + dragOffset.y) / this.props.grid[1]) * this.props.grid[1] - rect[1] : dragOffset.y;\n        }\n        if (!delta.x && !delta.y) return dragOffset;\n        this.move(selected, delta, presentation);\n        return { x: dragOffset.x - delta.x, y: dragOffset.y - delta.y };\n    }\n    moveEnd(delta: { x: number; y: number }) {\n        const { presentation, selected } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        let ids = selected.filter(id => id.startsWith(\"box\") && this.boxes[id]);\n        if (presentation) ids = ids.filter(id => isRectMovable(this.boxes[id][rectKey]));\n        const boxes = ids.map(id => this.boxes[id]);\n        boxes.forEach(box => box.emit(presentation ? \"presentationRectChanged\" : \"rectChanged\", box));\n        this.emit(\"moved\", { delta, selected: ids, presentation: this.state.presentation });\n    }\n    move(selected: string[], delta: { x: number; y: number }, presentation: boolean) {\n        this.select(...selected);\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        let ids = selected.filter(id => id.startsWith(\"box\") && this.boxes[id]);\n        if (presentation) ids = ids.filter(id => isRectMovable(this.boxes[id][rectKey]));\n        const boxes = ids.map(id => this.boxes[id]);\n        if (boxes.length === 0) return;\n        let [left, top] = boxes[0][rectKey] as TRect;\n        for (let i = 1; i < boxes.length; i++) {\n            const box = boxes[i];\n            const [$left, $top] = box[rectKey] as TRect;\n            if ($left < left) left = $left;\n            if ($top < top) top = $top;\n        }\n        // Not allowing resize out of bound\n        delta.x = Math.max(delta.x, -left);\n        delta.y = Math.max(delta.y, -top);\n        if (delta.x) boxes.forEach(box => (box[rectKey] as TRect)[0] += delta.x);\n        if (delta.y) boxes.forEach(box => (box[rectKey] as TRect)[1] += delta.y);\n        // Emit events\n        if (!delta.x && !delta.y) return;\n        if (presentation !== this.state.presentation) return;\n        // boxes.forEach(box => box.emit(presentation ? \"presentationRectChanged\" : \"rectChanged\", box));\n        this.emit(\"moving\", { selected: ids, delta, presentation });\n        if (presentation) return;\n        const lineSet = new Set<Line>();\n        boxes.forEach((box) => {\n            box.inletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n            box.outletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n        });\n        lineSet.forEach(line => line.emit(\"posChanged\", line));\n    }\n    resizeSelectedBox(boxId: string, dragOffset: { x: number; y: number }, type: TResizeHandlerType) {\n        const { presentation, snapToGrid, selected } = this.state;\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        const rect = this.boxes[boxId][rectKey];\n        if (!isRectResizable(rect)) return { x: 0, y: 0 };\n        const delta = { x: 0, y: 0 };\n        // Round delta to grid\n        if (type === \"e\" || type === \"se\" || type === \"ne\") {\n            delta.x = snapToGrid ? Math.round((rect[0] + rect[2] + dragOffset.x) / this.props.grid[0]) * this.props.grid[0] - rect[0] - rect[2] : dragOffset.x;\n        }\n        if (type === \"s\" || type === \"se\" || type === \"sw\") {\n            delta.y = snapToGrid ? Math.round((rect[1] + rect[3] + dragOffset.y) / this.props.grid[1]) * this.props.grid[1] - rect[1] - rect[3] : dragOffset.y;\n        }\n        if (type === \"w\" || type === \"nw\" || type === \"sw\") {\n            delta.x = snapToGrid ? Math.round((rect[0] + dragOffset.x) / this.props.grid[0]) * this.props.grid[0] - rect[0] : dragOffset.x;\n        }\n        if (type === \"n\" || type === \"nw\" || type === \"ne\") {\n            delta.y = snapToGrid ? Math.round((rect[1] + dragOffset.y) / this.props.grid[1]) * this.props.grid[1] - rect[1] : dragOffset.y;\n        }\n        if (!delta.x && !delta.y) return dragOffset;\n        this.resize(selected, delta, type, presentation);\n        return { x: dragOffset.x - delta.x, y: dragOffset.y - delta.y };\n    }\n    resizeEnd(delta: { x: number; y: number }, type: TResizeHandlerType) {\n        const { selected, presentation } = this.state;\n        this.emit(\"resized\", { delta, type, selected, presentation });\n    }\n    resize(selected: string[], delta: { x: number; y: number }, type: TResizeHandlerType, presentation: boolean) {\n        this.select(...selected);\n        const rectKey = presentation ? \"presentationRect\" : \"rect\";\n        let ids = selected.filter(id => id.startsWith(\"box\") && this.boxes[id]);\n        if (presentation) ids = ids.filter(id => isRectResizable(this.boxes[id][rectKey]));\n        const boxes = ids.map(id => this.boxes[id]);\n        if (boxes.length === 0) return;\n        let [left, top, width, height] = boxes[0][rectKey] as TRect;\n        for (let i = 1; i < boxes.length; i++) {\n            const box = boxes[i];\n            const [$left, $top, $width, $height] = box[rectKey] as TRect;\n            if ($left < left) left = $left;\n            if ($top < top) top = $top;\n            if ($width < width) width = $width;\n            if ($height < height) height = $height;\n        }\n        // Not allowing resize out of bound\n        if (type === \"sw\" || type === \"w\" || type === \"nw\") delta.x = Math.max(delta.x, -left);\n        if (type === \"nw\" || type === \"n\" || type === \"ne\") delta.y = Math.max(delta.y, -top);\n        // Not allowing resize below 15px width or height\n        if (type === \"ne\" || type === \"e\" || type === \"se\") delta.x = Math.max(delta.x, 15 - width);\n        if (type === \"sw\" || type === \"w\" || type === \"nw\") delta.x = Math.min(delta.x, width - 15);\n        if (type === \"se\" || type === \"s\" || type === \"sw\") delta.y = Math.max(delta.y, 15 - height);\n        if (type === \"nw\" || type === \"n\" || type === \"ne\") delta.y = Math.min(delta.y, height - 15);\n        boxes.forEach((box) => {\n            const sizingX = box.UI ? box.UI?.sizing === \"horizontal\" || box.UI?.sizing === \"both\" : true;\n            const sizingY = box.UI ? box.UI?.sizing === \"vertical\" || box.UI?.sizing === \"both\" : true;\n            if (delta.x && sizingX) {\n                if (type === \"ne\" || type === \"e\" || type === \"se\") (box[rectKey] as TRect)[2] += delta.x;\n                if (type === \"sw\" || type === \"w\" || type === \"nw\") {\n                    (box[rectKey] as TRect)[2] -= delta.x;\n                    (box[rectKey] as TRect)[0] += delta.x;\n                }\n            }\n            if (delta.y && sizingY) {\n                if (type === \"se\" || type === \"s\" || type === \"sw\") (box[rectKey] as TRect)[3] += delta.y;\n                if (type === \"nw\" || type === \"n\" || type === \"ne\") {\n                    (box[rectKey] as TRect)[3] -= delta.y;\n                    (box[rectKey] as TRect)[1] += delta.y;\n                }\n            }\n        });\n        // Emit events\n        if (!delta.x && !delta.y) return;\n        if (presentation !== this.state.presentation) return;\n        boxes.forEach(box => box.emit(presentation ? \"presentationRectChanged\" : \"rectChanged\", box));\n        if (presentation) return;\n        const lineSet = new Set<Line>();\n        boxes.forEach((box) => {\n            box.inletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n            box.outletLines.forEach(set => set.forEach(line => lineSet.add(line)));\n        });\n        lineSet.forEach(line => line.emit(\"posChanged\", line));\n    }\n    findNearestPort(findSrc: boolean, left: number, top: number, from: [string, number], to?: [string, number]) {\n        let nearest: [string, number] = [null, null];\n        let minDistance = 100;\n        if (to) {\n            const currentPos = this.boxes[to[0]][findSrc ? \"getOutletPos\" : \"getInletPos\"](to[1]);\n            const currentDistance = ((currentPos.left - left) ** 2 + (currentPos.top - top) ** 2) ** 0.5;\n            if (currentDistance < 100) {\n                nearest = to;\n                minDistance = currentDistance;\n            }\n        }\n        for (const id in this.boxes) {\n            const box = this.boxes[id];\n            box[findSrc ? \"outletsPositions\" : \"inletsPositions\"].forEach((pos, i) => {\n                const distance = ((pos.left - left) ** 2 + (pos.top - top) ** 2) ** 0.5;\n                if (distance < minDistance) {\n                    const canCreate = this.instance.canCreateLine({ src: findSrc ? [id, i] : from, dest: findSrc ? from : [id, i] });\n                    if (!canCreate) return;\n                    nearest = [id, i];\n                    minDistance = distance;\n                }\n            });\n        }\n        return nearest;\n    }\n    highlightNearestPort(findSrc: boolean, dragOffset: { x: number; y: number }, from: [string, number], to?: [string, number]) { // to = the port need to be reconnect\n        const origPos = to ? this.boxes[to[0]][findSrc ? \"getOutletPos\" : \"getInletPos\"](to[1]) : this.boxes[from[0]][findSrc ? \"getInletPos\" : \"getOutletPos\"](from[1]);\n        const left = origPos.left + dragOffset.x;\n        const top = origPos.top + dragOffset.y;\n        const nearest = this.findNearestPort(findSrc, left, top, from, to);\n        for (const id in this.boxes) {\n            const box = this.boxes[id];\n            for (let i = 0; i < box[findSrc ? \"outlets\" : \"inlets\"]; i++) {\n                box.highlightPort(findSrc, i, nearest[0] === id && nearest[1] === i);\n            }\n        }\n        return nearest;\n    }\n    tempLine(findSrc: boolean, from: [string, number]) {\n        this.emit(\"tempLine\", { findSrc, from });\n        return this;\n    }\n    inspector(box?: Box) {\n        if (box) this.emit(\"inspector\");\n        else if (this.state.selected.length) {\n            const found = this.state.selected.find(id => id.startsWith(\"box\"));\n            if (found && this.boxes[found]) this.emit(\"inspector\");\n        }\n    }\n    dockUI(box?: Box) {\n        if (box && box.UI.dockable) this.emit(\"dockUI\", box.id);\n        else if (this.state.selected.length) {\n            const found = this.state.selected.find(id => id.startsWith(\"box\"));\n            if (found && this.boxes[found] && this.boxes[found].UI.dockable) this.emit(\"dockUI\", found);\n        }\n    }\n    onUiResized() {}\n    async toTempData() {\n        return this.instance.toSerializable();\n    }\n}\n","import History from \"../file/History\";\nimport PatcherEditor, { PatcherHistoryEventMap } from \"./PatcherEditor\";\n\nexport default class PatcherHistory extends History<PatcherHistoryEventMap, PatcherEditor> {\n    get eventListening(): (keyof PatcherHistoryEventMap)[] {\n        return [\n            \"create\", \"delete\", \"changeBoxText\", \"boxChanged\",\n            \"changeLineSrc\", \"changeLineDest\", \"moved\", \"resized\"\n        ];\n    }\n    async undoOf(editor: PatcherEditor, eventName: keyof PatcherHistoryEventMap, eventData?: any) {\n        if (eventName === \"delete\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.create(e);\n        } else if (eventName === \"changeBoxText\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, oldText } = e;\n            await editor.instance.changeBoxText(boxId, oldText);\n        } else if (eventName === \"boxChanged\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, oldArgs, oldProps, oldState } = e;\n            await editor.changeBox(boxId, { args: oldArgs, props: oldProps, state: oldState });\n        } else if (eventName === \"moved\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, presentation } = e;\n            const d = { x: -1 * delta.x, y: -1 * delta.y };\n            editor.move(selected, d, presentation);\n            editor.moveEnd(d);\n        } else if (eventName === \"changeLineSrc\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, oldSrc } = e;\n            editor.changeLineSrc(lineId, oldSrc[0], oldSrc[1]);\n        } else if (eventName === \"changeLineDest\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, oldDest } = e;\n            editor.changeLineDest(lineId, oldDest[0], oldDest[1]);\n        } else if (eventName === \"create\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.delete(e);\n        } else if (eventName === \"resized\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, type: t, presentation } = e;\n            const d = { x: -1 * delta.x, y: -1 * delta.y };\n            editor.resize(selected, d, t, presentation);\n            editor.resizeEnd(d, t);\n        }\n    }\n    async redoOf(editor: PatcherEditor, eventName: keyof PatcherHistoryEventMap, eventData?: any) {\n        if (eventName === \"create\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.create(e);\n        } else if (eventName === \"changeBoxText\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, text } = e;\n            await editor.instance.changeBoxText(boxId, text);\n        } else if (eventName === \"boxChanged\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { boxId, args, props, state } = e;\n            await editor.changeBox(boxId, { args, props, state });\n        } else if (eventName === \"moved\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, presentation } = e;\n            editor.move(selected, delta, presentation);\n            editor.moveEnd(delta);\n        } else if (eventName === \"changeLineSrc\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, src } = e;\n            editor.changeLineSrc(lineId, src[0], src[1]);\n        } else if (eventName === \"changeLineDest\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { lineId, dest } = e;\n            editor.changeLineDest(lineId, dest[0], dest[1]);\n        } else if (eventName === \"delete\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            await editor.delete(e);\n        } else if (eventName === \"resized\") {\n            const e: PatcherHistoryEventMap[typeof eventName] = eventData;\n            const { selected, delta, type: t, presentation } = e;\n            editor.resize(selected, delta, t, presentation);\n            editor.resizeEnd(delta, t);\n        }\n    }\n}\n","import TemporaryProjectFile from \"../file/TemporaryProjectFile\";\nimport type { RawPatcher } from \"../types\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\n\nexport default class TempPatcherFile extends TemporaryProjectFile<RawPatcher> {\n    get type() {\n        return \"patcher\" as const;\n    }\n    async instantiate({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const Patcher = (await import(\"./Patcher\")).default;\n        const patcher = new Patcher({ file: this, env, project, instanceId });\n        await patcher.load(this.data);\n        return patcher;\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const PatcherEditor = (await import(\"./PatcherEditor\")).default;\n        return PatcherEditor.fromProjectItem({ file: this, env, project, instanceId });\n    }\n}\n","import TemporaryProjectFile from \"../file/TemporaryProjectFile\";\nimport type PatcherText from \"./PatcherText\";\nimport type { IJSPatcherEnv } from \"../Env\";\nimport type { IProject } from \"../Project\";\n\nexport default class TempTextFile extends TemporaryProjectFile<PatcherText> {\n    get type() {\n        return \"text\" as const;\n    }\n    async instantiate() {\n        return this.data;\n    }\n    async instantiateEditor({ env, project, instanceId }: { env: IJSPatcherEnv; project?: IProject; instanceId?: string }) {\n        const TextEditor = (await import(\"./TextEditor\")).default;\n        return TextEditor.fromProjectItem({ file: this, env, project, instanceId });\n    }\n}\n","import { AudioWorkletGlobalScope, MessagePortRequest, MessagePortResponse, TypedMessageEvent } from \"./TypedAudioWorklet\";\nimport { AudioWorkletProxyProcessor } from \"./AudioWorkletProxyProcessor.types\";\n\ndeclare const globalThis: AudioWorkletGlobalScope;\nconst { AudioWorkletProcessor } = globalThis;\n\nconst Processor = class extends AudioWorkletProcessor {\n    static get fnNames(): string[] {\n        return [];\n    }\n    _disposed = false;\n    constructor(options: AudioWorkletNodeOptions) {\n        super(options);\n        const resolves: Record<number, ((...args: any[]) => any)> = {};\n        const rejects: Record<number, ((...args: any[]) => any)> = {};\n        let messagePortRequestId = -1;\n        const handleDisposed = () => {\n            this.port.removeEventListener(\"message\", handleMessage);\n            this.port.close();\n        };\n        const handleMessage = async (e: TypedMessageEvent<MessagePortResponse & MessagePortRequest>) => {\n            const { id, call, args, value, error } = e.data;\n            if (call) {\n                const r: MessagePortResponse = { id };\n                try {\n                    r.value = await (this as any)[call](...args);\n                } catch (e) {\n                    r.error = e;\n                }\n                this.port.postMessage(r as any);\n                if (this._disposed) handleDisposed();\n            } else {\n                if (error) {\n                    if (rejects[id]) rejects[id](error);\n                    delete rejects[id];\n                    return;\n                }\n                if (resolves[id]) {\n                    resolves[id](value);\n                    delete resolves[id];\n                }\n            }\n        };\n        const call = (call: string, ...args: any[]) => new Promise<any>((resolve, reject) => {\n            const id = messagePortRequestId--;\n            resolves[id] = resolve;\n            rejects[id] = reject;\n            this.port.postMessage({ id, call, args });\n        });\n        const Ctor = (this.constructor as typeof AudioWorkletProxyProcessor);\n        Ctor.fnNames.forEach(name => (this as any)[name] = (...args: any[]) => call(name, ...args));\n        this.port.start();\n        this.port.addEventListener(\"message\", handleMessage);\n    }\n} as typeof AudioWorkletProxyProcessor;\n\nexport default Processor;\n","export const $AnyEventType = Symbol(\"__TypedEventListener_AnyEventType\");\nexport interface ITypedEventEmitter<M> extends Omit<TypedEventEmitter<M>, \"_listeners\" | \"getListeners\"> {\n}\nexport interface IEmitOptions {\n    /** if true, the emission will not trigger `onAny` listeners */\n    excludeAny?: boolean;\n    /** Exclude listeners with emit */\n    exclude?: ((...args: any[]) => any)[];\n}\nexport class TypedEventEmitter<M> {\n    private _listeners: { [eventName: string]: ((e?: any, emitter?: any) => any | Promise<any>)[]; [$AnyEventType]: ((eventName: string, eventData?: any, emitter?: any) => any | Promise<any>)[] } = { [$AnyEventType]: [] };\n    get listeners() {\n        return this._listeners;\n    }\n    private getListeners<K extends keyof M & string>(eventName: K) {\n        if (!(eventName in this._listeners)) this._listeners[eventName] = [];\n        return this._listeners[eventName];\n    }\n    on<K extends keyof M & string>(eventName: K, listener: (e: M[K], emitter?: this) => any) {\n        if (this.getListeners(eventName).indexOf(listener) === -1) this.getListeners(eventName).push(listener);\n    }\n    once<K extends keyof M & string>(eventName: K, listener: (e: M[K], emitter?: this) => any) {\n        const listenerWithOff = (arg: M[K], emitter?: this) => {\n            const returnValue = listener(arg, emitter);\n            this.off(eventName, listenerWithOff);\n            return returnValue;\n        };\n        this.on(eventName, listenerWithOff);\n    }\n    onAny<K extends keyof M & string>(listener: <KK extends K>(eventName: KK, eventData?: M[KK], emitter?: this) => any) {\n        this._listeners[$AnyEventType].push(listener);\n    }\n    off<K extends keyof M & string>(eventName: K, listener: (e: M[K], emitter?: this) => any) {\n        const i = this.getListeners(eventName).indexOf(listener);\n        if (i !== -1) this.getListeners(eventName).splice(i, 1);\n    }\n    offAny<K extends keyof M & string>(listener: <KK extends K>(eventName: KK, eventData?: M[KK], emitter?: this) => any) {\n        const i = this._listeners[$AnyEventType].indexOf(listener);\n        if (i !== -1) this._listeners[$AnyEventType].splice(i, 1);\n    }\n    async emit<K extends keyof M & string>(eventName: K, eventData?: M[K], options?: IEmitOptions) {\n        let listeners = this.getListeners(eventName);\n        let anyListeners = options?.excludeAny ? [] : this._listeners[$AnyEventType];\n        if (!listeners.length && !anyListeners.length) return [];\n        if (options?.exclude?.length) {\n            const { exclude } = options;\n            listeners = listeners.filter(l => exclude.indexOf(l) === -1);\n            anyListeners = anyListeners.filter(l => exclude.indexOf(l) === -1);\n        }\n        return Promise.all([...listeners.map(f => f(eventData, this)), ...anyListeners.map(f => f(eventName, eventData, this))]);\n    }\n    async emitSerial<K extends keyof M & string>(eventName: K, eventData?: M[K], options?: IEmitOptions) {\n        let listeners = this.getListeners(eventName);\n        let anyListeners = options?.excludeAny ? [] : this._listeners[$AnyEventType];\n        if (!listeners.length && !anyListeners.length) return [];\n        if (options?.exclude?.length) {\n            const { exclude } = options;\n            listeners = listeners.filter(l => exclude.indexOf(l) === -1);\n            anyListeners = anyListeners.filter(l => exclude.indexOf(l) === -1);\n        }\n        const returnValues = [];\n        for (let i = 0; i < listeners.length; i++) {\n            const listener = listeners[i];\n            returnValues[i] = await listener(eventData, this);\n        }\n        for (let i = 0; i < anyListeners.length; i++) {\n            const listener = anyListeners[i];\n            returnValues[listeners.length + i] = await listener(eventName, eventData, this);\n        }\n        return returnValues;\n    }\n    emitSync<K extends keyof M & string>(eventName: K, eventData?: M[K], options?: IEmitOptions) {\n        let listeners = this.getListeners(eventName);\n        let anyListeners = options?.excludeAny ? [] : this._listeners[$AnyEventType];\n        if (!listeners.length && !anyListeners.length) return [];\n        if (options?.exclude?.length) {\n            const { exclude } = options;\n            listeners = listeners.filter(l => exclude.indexOf(l) === -1);\n            anyListeners = anyListeners.filter(l => exclude.indexOf(l) === -1);\n        }\n        return [...listeners.map(f => f(eventData, this)), ...anyListeners.map(f => f(eventName, eventData, this))];\n    }\n    offAll(eventName?: keyof M & string) {\n        if (eventName) {\n            this._listeners[eventName] = [];\n        } else {\n            this._listeners = { [$AnyEventType]: [] };\n        }\n    }\n    listenerCount(eventName: keyof M & string) {\n        const anyListenerCount = this._listeners[$AnyEventType].length;\n        if (!(eventName in this._listeners)) return anyListenerCount;\n        return this._listeners[eventName].length + anyListenerCount;\n    }\n}\n\nexport default TypedEventEmitter;\n","import { mod } from \"./math\";\n\ntype TypedArray = Int8Array | Uint8Array | Int16Array | Uint16Array | Int32Array | Uint32Array | Uint8ClampedArray | Float32Array | Float64Array;\ntype TypedArrayConstructor = typeof Int8Array | typeof Uint8Array | typeof Int16Array | typeof Uint16Array | typeof Int32Array | typeof Uint32Array | typeof Uint8ClampedArray | typeof Float32Array | typeof Float64Array;\nexport const sum = (array: TypedArray | number[], from = 0, length = array.length) => {\n    let sum = 0;\n    const l = array.length;\n    for (let i = 0; i < length; i++) {\n        sum += array[(from + i) % l];\n    }\n    return sum;\n};\nexport const mean = (array: TypedArray | number[], from = 0, length = array.length) => sum(array, from, length) / length;\nexport const median = (array: TypedArray | number[], from = 0, length = array.length) => {\n    if (length === 0) throw new Error(\"trying to calculate median of empty array\");\n    const sortedArray = (from + length > array.length ? Array.isArray(array) ? array.slice(from).concat(array.slice(0, from + length - array.length)) : sliceBuffer(array, length, from) : array.slice(from, from + length)).sort();\n    if (length % 2 === 0) return (sortedArray[length / 2 - 1] + sortedArray[length / 2]) / 2;\n    return sortedArray[~~(length / 2)];\n};\nexport const maxIndex = (array: TypedArray | number[], from = 0, length = array.length) => {\n    const l = array.length;\n    if (!l) return 0;\n    let index = 0;\n    let max = array[0];\n    let i = length;\n    while (i-- > 1) {\n        const cur = array[(from + i) % l];\n        if (cur <= max) continue;\n        max = cur;\n        index = i;\n    }\n    return index;\n};\nexport const energy = (signal: TypedArray | number[], from = 0, length = signal.length) => {\n    let sum = 0;\n    let sample = 0;\n    const l = signal.length;\n    for (let i = 0; i < length; i++) {\n        sample = signal[(from + i) % l];\n        sum += sample * sample;\n    }\n    return sum;\n};\nexport const rms = (signal: TypedArray | number[], from = 0, length = signal.length) => Math.sqrt(energy(signal, from, length) / signal.length);\nexport const absMax = (signal: TypedArray | number[], from = 0, length = signal.length) => {\n    let max = 0;\n    let sample = 0;\n    const l = signal.length;\n    for (let i = 0; i < length; i++) {\n        sample = Math.abs(signal[(from + i) % l]);\n        if (sample > max) max = sample;\n    }\n    return max;\n};\nexport const zcr = (signal: TypedArray | number[], from = 0, length = signal.length) => {\n    let zcr = 0;\n    let lastPositive = true;\n    let positive = true;\n    const l = signal.length;\n    for (let i = 0; i < length; i++) {\n        positive = signal[(from + i) % l] >= 0;\n        if (positive !== lastPositive) zcr++;\n        lastPositive = positive;\n    }\n    return zcr;\n};\nexport const centroid = (array: TypedArray | number[], from = 0, length = array.length) => {\n    let weightedSum = 0;\n    let weight = 0;\n    let sample = 0;\n    const l = array.length;\n    for (let i = 0; i < length; i++) {\n        sample = array[(from + i) % l];\n        weightedSum += i * Math.abs(sample);\n        weight += sample;\n    }\n    return weight === 0 ? 0 : weightedSum / weight;\n};\nexport const conjugatedCentroid = (array: TypedArray | number[], factor: number, from = 0, length = array.length) => {\n    let weightedSum = 0;\n    let weight = 0;\n    let sample = 0;\n    const l = array.length;\n    for (let i = 0; i < length; i++) {\n        sample = array[(from + i) % l];\n        weightedSum += (i ** factor) * Math.abs(sample);\n        weight += sample;\n    }\n    return weight === 0 ? 0 : weightedSum / weight;\n};\nexport const geometricMean = (array: TypedArray | number[], from = 0, length = array.length) => {\n    let sum = 0;\n    let sample = 0;\n    const l = array.length;\n    for (let i = 0; i < length; i++) {\n        sample = array[(from + i) % l];\n        if (sample <= 0) return 0;\n        sum += Math.log(sample);\n    }\n    return Math.exp(sum / length);\n};\nexport const flatness = (array: TypedArray | number[], from = 0, length = array.length) => geometricMean(array, from, length) / mean(array, from, length);\n/**\n * https://essentia.upf.edu/reference/std_Flux.html\n */\nexport const flux = (cur: TypedArray | number[], prev: TypedArray | number[], norm?: \"L1\" | \"L2\", halfRectify?: boolean) => {\n    let flux = 0;\n    if (norm === \"L2\") {\n        if (halfRectify === true) { // L2 + halfRectify\n            for (let i = 0; i < cur.length; i++) {\n                const diff = cur[i] - prev[i];\n                if (diff < 0) continue;\n                flux += diff * diff;\n            }\n            return Math.sqrt(flux);\n        }\n        for (let i = 0; i < cur.length; i++) { // L2 not halfRectify\n            const diff = cur[i] - prev[i];\n            flux += diff * diff;\n        }\n        return Math.sqrt(flux);\n    }\n    if (halfRectify === true) { // L1 + halfRectify\n        for (let i = 0; i < cur.length; i++) {\n            const diff = cur[i] - prev[i];\n            if (diff < 0) continue;\n            flux += diff;\n        }\n        return flux;\n    }\n    for (let i = 0; i < cur.length; i++) { // L1 not halfRectify\n        const diff = cur[i] - prev[i];\n        flux += Math.abs(diff);\n    }\n    return flux;\n};\n/**\n * https://github.com/meyda/meyda/blob/master/src/extractors/spectralKurtosis.js=\n */\nexport const kurtosis = (array: TypedArray | number[], from = 0, length = array.length) => {\n    const c1 = centroid(array, from, length);\n    const c2 = conjugatedCentroid(array, 2, from, length);\n    const c3 = conjugatedCentroid(array, 3, from, length);\n    const c4 = conjugatedCentroid(array, 4, from, length);\n    const numerator = -3 * c1 ** 4 + 6 * c1 * c2 - 4 * c1 * c3 + c4;\n    const denominator = (c2 - c1 ** 2) ** 2;\n    return numerator / denominator;\n};\n/**\n * https://github.com/meyda/meyda/blob/master/src/extractors/spectralSkewness.js\n */\nexport const skewness = (array: TypedArray | number[], from = 0, length = array.length) => {\n    const c1 = centroid(array, from, length);\n    const c2 = conjugatedCentroid(array, 2, from, length);\n    const c3 = conjugatedCentroid(array, 3, from, length);\n    const numerator = 2 * c1 ** 3 - 3 * c1 * c2 + c3;\n    const denominator = (c2 - c1 ** 2) ** 1.5;\n    return numerator / denominator;\n};\n/**\n * https://essentia.upf.edu/reference/std_RollOff.html\n *\n * @param {TypedArray} array\n * @param {number} [cutoff] Between 0 - 1\n * @returns\n */\nexport const rolloff = (array: TypedArray | number[], from = 0, length = array.length, cutoff?: number) => {\n    let e = energy(array, from, length);\n    const threshold = (cutoff || 0.99) * e;\n    let n = length - 1;\n    let element;\n    while (e > threshold && n >= 0) {\n        element = array[(n + from) % length];\n        e -= element * element;\n        --n;\n    }\n    return n + 1;\n};\nexport const slope = (array: TypedArray | number[], from = 0, n = array.length) => {\n    const xSum = n * n / 2;\n    const x2Sum = (n - 1) * n * (2 * n - 1) / 6;\n    let ySum = 0;\n    let xySum = 0;\n    let y;\n    for (let x = 0; x < n; x++) {\n        y = array[(x + from) % n];\n        ySum += y;\n        xySum += x * y;\n    }\n    return (n * xySum - xSum * ySum) / (n * x2Sum - xSum * xSum);\n};\nexport const spread = (array: TypedArray | number[], from = 0, length = array.length) => Math.sqrt(conjugatedCentroid(array, 2, from, length)) - centroid(array, from, length) ** 2;\n/**\n * Copy buffer to another, support negative offset index\n */\nexport const setTypedArray = <T extends TypedArray = TypedArray>(to: T, from: T, offsetTo?: number, offsetFrom?: number) => {\n    const toLength = to.length;\n    const fromLength = from.length;\n    const spillLength = Math.min(toLength, fromLength);\n    let spilled = 0;\n    let $to = mod(offsetTo, toLength) || 0;\n    let $from = mod(offsetFrom, fromLength) || 0;\n    while (spilled < spillLength) {\n        const $spillLength = Math.min(spillLength - spilled, toLength - $to, fromLength - $from);\n        const $fromEnd = $from + $spillLength;\n        if ($from === 0 && $fromEnd === fromLength) to.set(from, $to);\n        else to.set(from.subarray($from, $fromEnd), $to);\n        $to = ($to + $spillLength) % toLength;\n        $from = $fromEnd % fromLength;\n        spilled += $spillLength;\n    }\n    return $to;\n};\n\nexport const getSubTypedArray = <T extends TypedArray = TypedArray>(from: T, length: number, offset = 0) => {\n    const fromLength = from.length;\n    const $ = mod(offset, fromLength) || 0;\n    if ($ === 0 && length === fromLength) return from;\n    if ($ + length < fromLength) return from.subarray($, $ + length) as T;\n    const to = new (from.constructor as TypedArrayConstructor)(length) as T;\n    setTypedArray(to, from, 0, $);\n    return to;\n};\n\nexport const sliceBuffer = <T extends TypedArray = TypedArray>(from: T, length: number, offset?: number) => {\n    const fromLength = from.length;\n    const $ = mod(offset, fromLength) || 0;\n    if ($ === 0 && length === fromLength) return from.slice();\n    if ($ + length < fromLength) return from.slice($, $ + length) as T;\n    const to = new (from.constructor as TypedArrayConstructor)(length) as T;\n    setTypedArray(to, from, 0, $);\n    return to;\n};\n/**\n * http://www.fftw.org/fftw3_doc/The-Halfcomplex_002dformat-DFT.html\n */\nexport const fftw2Amp = (from: Float32Array, windowEnergyFactor: number) => {\n    const { length } = from;\n    const amps = new Float32Array(length / 2);\n    for (let i = 0; i < length / 2; i++) {\n        const real = from[i];\n        const imag = (i === 0 || i === length / 2 - 1) ? 0 : from[length - i];\n        amps[i] = (real * real + imag * imag) ** 0.5 / length * windowEnergyFactor;\n    }\n    return amps;\n};\nexport const estimateFreq = (amps: Float32Array, sampleRate: number) => indexToFreq(maxIndex(amps), amps.length, sampleRate);\nexport const indexToFreq = (i: number, fftBins: number, sampleRate: number) => (i % fftBins) / fftBins * sampleRate / 2;\n","import { isNumberArray } from \"./utils\";\n\n/**\n * Mod support wrapping with negative numbers\n */\nexport const mod = (x: number, y: number): number => (x % y + y) % y;\n/**\n * Round a number to multiple of another\n */\nexport const round = (x: number, to: number): number => (Math.abs(to) < 1 ? Math.round(x * (1 / to)) / (1 / to) : Math.round(x / to) * to);\n/**\n * Floor a number to multiple of another\n */\nexport const floor = (x: number, to: number): number => (Math.abs(to) < 1 ? Math.floor(x * (1 / to)) / (1 / to) : Math.floor(x / to) * to);\n/**\n * Ceil a number to multiple of another\n */\nexport const ceil = (x: number, to: number): number => (Math.abs(to) < 1 ? Math.ceil(x * (1 / to)) / (1 / to) : Math.ceil(x / to) * to);\n/**\n * Degree to radian\n */\nexport const toRad = (degrees: number): number => degrees * Math.PI / 180;\n/**\n * MIDI note number to string\n */\nexport const toMIDI = (f: number): string => [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"][(f % 12 + 12) % 12] + Math.round(f / 12 - 2);\n/**\n * Linear amplitude ([0, 1]) to dB ([-Inf, 0])\n *\n * @param {number} a linear amplitude value\n * @returns {number} dB value\n */\nexport const atodb = (a: number): number => 20 * Math.log10(a);\n/**\n * dB ([-Inf, 0]) to Linear mplitude ([0, 1])\n *\n * @param {number} db dB value\n * @returns {number} linear amplitude value\n */\nexport const dbtoa = (db: number): number => 10 ** (db / 20);\n/**\n * De-scale a exponently scaled value\n *\n * @param {number} x normalized value to scale between ([0, 1])\n * @param {number} e exponent factor used to scale, 0 means linear, 1 does ** 1.5 curve\n * @returns {number} de-scaled value\n */\nexport const iNormExp = (x: number, e: number): number => Math.max(0, x) ** (1.5 ** -e);\n/**\n * Scale exponently a normalized value\n *\n * @param {number} x normalized value to scale between ([0, 1])\n * @param {number} e exponent factor, 0 means linear, 1 does ** 1.5 curve\n * @returns {number} scaled value\n */\nexport const normExp = (x: number, e: number): number => Math.max(0, x) ** (1.5 ** e);\n\nexport const scale = (x: number, l1: number, h1: number, l2: number, h2: number) => {\n    const r1 = h1 - l1;\n    const r2 = h2 - l2;\n    return (x - l1) / r1 * r2 + l2;\n};\n\nexport const scaleClip = (x: number, l1: number, h1: number, l2: number, h2: number) => Math.max(l2, Math.min(h2, scale(x, l1, h1, l2, h2)));\n\n// eslint-disable-next-line arrow-body-style\nexport const isIdentityMatrix = (x: number[][]) => {\n    return Array.isArray(x)\n    && x.every((row, i) => isNumberArray(row)\n    && row.length === x.length\n    && row.every((e, j) => e === (j === i ? 1 : 0)));\n};\n\nexport const identityMatrix = (dim: number) => new Array(dim).fill(undefined).map((x, i) => new Array(dim).fill(undefined).map((y, j) => +(i === j)));\n","export const ImporterDirSelfObject = Symbol(\"__JSPatcher_ImporterDirSelfObject\");\nexport const ImportedStaticMethodObject = Symbol(\"__JSPatcher_ImportedStaticMethodObject\");\nexport const SharedDataNoValue = Symbol(\"__JSPatcher_ShareDataNoValue\");\nexport const TempManagerFolder = Symbol(\"__JSPatcher_TempManagerFolder\");\n","/* eslint-disable arrow-body-style */\nimport type { TPatcherProps } from \"../core/patcher/Patcher\";\nimport type { TMIDIEvent, TBPF, TRect, TPresentationRect, ProjectItemType, RawPatcher, TMaxPatcher, TAudioUnit } from \"../core/types\";\n\nexport const isStringArray = (x: any): x is string[] => Array.isArray(x) && x.every(e => typeof e === \"string\");\nexport const isNumberArray = (x: any): x is number[] => Array.isArray(x) && x.every(e => typeof e === \"number\");\nexport const isTRect = (x: any): x is TRect => {\n    return isNumberArray(x)\n        && x.length === 4\n        && x[0] >= 0\n        && x[1] >= 0\n        && x[2] >= 15\n        && x[3] >= 15;\n};\nexport const isTPresentationRect = (x: any): x is TPresentationRect => {\n    return Array.isArray(x)\n        && x.length === 4\n        && x.every(v => typeof v === \"number\" || typeof v === \"string\");\n};\nexport const isRectMovable = (x: any): x is [number, number, number | string, number | string] => {\n    return isTPresentationRect(x) && typeof x[0] === \"number\" && typeof x[1] === \"number\";\n};\nexport const isRectResizable = (x: any): x is TRect => isTRect(x);\nexport const isMIDIEvent = (x: any): x is TMIDIEvent => (isNumberArray(x) || x instanceof Uint8Array) && x.length === 3;\nexport const stringifyError = (data: any) => {\n    if (typeof data === \"string\") return data;\n    if (data instanceof Error) return data.message;\n    if (typeof data === \"object\") return JSON.stringify(data);\n    return `${data}`;\n};\nexport const parseToPrimitive = (value: any) => {\n    try {\n        return JSON.parse(value);\n    } catch (e) {\n        return value.toString();\n    }\n};\nexport const rgbaMax2Css = (maxColor: number[]) => {\n    const cssColor = [255, 255, 255, 1] as TRect;\n    if (Array.isArray(maxColor)) {\n        for (let i = 0; i < 3; i++) {\n            if (typeof maxColor[i] === \"number\") cssColor[i] = Math.floor(maxColor[i] * 255);\n        }\n        if (typeof maxColor[3] === \"number\") cssColor[3] = maxColor[3];\n    }\n    return `rgba(${cssColor.join(\",\")})`;\n};\nexport const css2RgbaMax = (color: string) => {\n    const maxColor = [0.2, 0.2, 0.2, 1] as TRect;\n    const matched = color.match(/rgba\\((.+)\\)/);\n    if (!matched) return maxColor;\n    const cssColor = matched[1].split(\",\").map(s => +s);\n    for (let i = 0; i < 3; i++) {\n        if (typeof cssColor[i] === \"number\") maxColor[i] = cssColor[i] / 255;\n        if (typeof cssColor[3] === \"number\") maxColor[3] = cssColor[3];\n    }\n    return maxColor;\n};\n/**\n * A BPF can be described as a succesion of three number tuples.\n * i.e. `1 1 0.5 2 1 1` curve mode means go to 0 immediately then go to 1 in 1s with a curve of e^0.5, then go to 2 in 1s linear.\n * The function transform the string to number[][], i.e. `[[1, 1, 0.5], [2, 1, 1]]`\n *\n * @param {TBPF} sIn\n * @returns {number[][]}\n */\nexport const decodeBPF = (sIn: TBPF, tupleLength: number): number[][] => {\n    if (typeof sIn === \"number\") return [[sIn]];\n    if (isNumberArray(sIn)) return [sIn];\n    if (Array.isArray(sIn) && sIn.every(a => isNumberArray(a))) return sIn;\n    if (typeof sIn !== \"string\") throw new Error(\"Failed to decode curve.\");\n    const numbers = sIn.split(\" \").filter(s => !!s).map(s => +s);\n    if (numbers.find(v => !isFinite(v))) throw new Error(\"BPF contains invalid number.\");\n    const tuples: number[][] = [];\n    for (let i = 0; i < numbers.length; i++) {\n        const $tuple = ~~(i / tupleLength);\n        const $ = i % tupleLength;\n        if (!tuples[$tuple]) tuples[$tuple] = [];\n        tuples[$tuple][$] = numbers[i];\n    }\n    return tuples;\n};\nexport const decodeCurve = (sIn: TBPF) => decodeBPF(sIn, 3);\nexport const decodeLine = (sIn: TBPF) => decodeBPF(sIn, 2);\n\n/**\n * Gives OS name as follows:\n * \"Windows\"    for all versions of Windows,\n * \"MacOS\"      for all versions of Macintosh OS,\n * \"Linux\"      for all versions of Linux,\n * \"UNIX\"       for all other UNIX flavors,\n * \"Unknown\" indicates failure to detect the OS\n *\n * @returns {\"Windows\" | \"MacOS\" | \"UNIX\" | \"Linux\" | \"Unknown\"} OS name\n */\nexport const detectOS = (): \"Windows\" | \"MacOS\" | \"UNIX\" | \"Linux\" | \"Unknown\" => {\n    const { appVersion } = navigator;\n    if (appVersion.indexOf(\"Win\") !== -1) return \"Windows\";\n    if (appVersion.indexOf(\"Mac\") !== -1) return \"MacOS\";\n    if (appVersion.indexOf(\"X11\") !== -1) return \"UNIX\";\n    if (appVersion.indexOf(\"Linux\") !== -1) return \"Linux\";\n    return \"Unknown\";\n};\nexport const detectBrowserCore = () => {\n    if ((window as any).chrome) return \"Chromium\";\n    if ((window as any).InstallTrigger) return \"Gecko\";\n    if (navigator.vendor.indexOf(\"Apple\") !== -1) return \"WebKit\";\n    return \"Unknown\";\n};\nexport const roundedRect = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number | number[]) => {\n    const radii = [0, 0, 0, 0];\n    if (typeof radius === \"number\") radii.fill(radius);\n    else radius.forEach((v, i) => radii[i] = v);\n    ctx.beginPath();\n    ctx.moveTo(x + radii[0], y);\n    ctx.lineTo(x + width - radii[1], y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radii[1]);\n    ctx.lineTo(x + width, y + height - radii[2]);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radii[2], y + height);\n    ctx.lineTo(x + radii[3], y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radii[3]);\n    ctx.lineTo(x, y + radii[0]);\n    ctx.quadraticCurveTo(x, y, x + radii[0], y);\n    ctx.closePath();\n    ctx.stroke();\n};\nexport const fillRoundedRect = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number | number[]) => {\n    const radii = [0, 0, 0, 0];\n    if (typeof radius === \"number\") radii.fill(radius);\n    else radius.forEach((v, i) => radii[i] = v);\n    ctx.beginPath();\n    ctx.moveTo(x + radii[0], y);\n    ctx.lineTo(x + width - radii[1], y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radii[1]);\n    ctx.lineTo(x + width, y + height - radii[2]);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radii[2], y + height);\n    ctx.lineTo(x + radii[3], y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radii[3]);\n    ctx.lineTo(x, y + radii[0]);\n    ctx.quadraticCurveTo(x, y, x + radii[0], y);\n    ctx.closePath();\n    ctx.fill();\n};\nexport const selectElementRange = (e: HTMLElement) => {\n    const elementIsEditable = (e: HTMLElement): e is HTMLInputElement | HTMLTextAreaElement => !!e.nodeName.match(/^(INPUT|TEXTAREA)$/i);\n    const selection = window.getSelection();\n    if (elementIsEditable(e)) {\n        e.focus();\n        e.select();\n        return;\n    }\n    if (selection.setBaseAndExtent) {\n        // Safari\n        selection.setBaseAndExtent(e, 0, e, e.hasChildNodes() ? 1 : 0);\n        return;\n    }\n    if (selection.addRange && selection.removeAllRanges && document.createRange) {\n        // Mozilla or Opera 10.5+\n        const range = document.createRange();\n        range.selectNodeContents(e);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n};\nexport const selectElementPos = (e: HTMLElement, pos: number) => {\n    const range = document.createRange();\n    const selection = window.getSelection();\n    range.setStart(e.childNodes[0], pos);\n    range.collapse(true);\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\nexport const findFromAscendants = (e: HTMLElement, predict: (e: HTMLElement) => boolean) => {\n    const ascendants = [];\n    let parent = e.parentElement;\n    while (parent !== document.body) {\n        ascendants.push(parent);\n        parent = parent.parentElement;\n    }\n    return ascendants.find(predict);\n};\n// eslint-disable-next-line arrow-body-style\nexport const getPropertyDescriptor = (obj: Record<string, any>, key: string): PropertyDescriptor => {\n    return Object.getOwnPropertyDescriptor(obj, key) || getPropertyDescriptor(Object.getPrototypeOf(obj), key);\n};\nexport const getPropertyDescriptors = (obj: Function | Record<string, any>): PropertyDescriptorMap => {\n    if (typeof obj === \"function\") return Object.getOwnPropertyDescriptors(obj);\n    const proto = Object.getPrototypeOf(obj);\n    if (obj !== Object.prototype && proto === Object.prototype) return Object.getOwnPropertyDescriptors(obj);\n    return Object.assign(proto ? getPropertyDescriptors(proto) : {}, Object.getOwnPropertyDescriptors(obj));\n};\n\nexport const extToType = (ext: string): Exclude<ProjectItemType, \"folder\"> => {\n    if ([\"jspat\", \"maxpat\", \"gendsp\", \"dsppat\"].indexOf(ext) !== -1) return \"patcher\";\n    if ([\"wav\", \"aif\", \"aiff\", \"mp3\", \"aac\", \"flac\", \"ogg\", \"m4a\"].indexOf(ext) !== -1) return \"audio\";\n    if ([\"txt\", \"json\"].indexOf(ext) !== -1) return \"text\";\n    if ([\"apng\", \"avif\", \"gif\", \"jpg\", \"jpeg\", \"jfif\", \"pjpeg\", \"pjp\", \"png\", \"svg\", \"webp\", \"bmp\", \"ico\", \"cur\", \"tif\", \"tiff\"].indexOf(ext) !== -1) return \"image\";\n    if ([\"mp4\", \"webm\", \"3gp\"].indexOf(ext) !== -1) return \"video\";\n    return \"unknown\";\n};\n\nexport const max2js = (patcherIn: TMaxPatcher, mode = \"max\" as TPatcherProps[\"mode\"]): RawPatcher => {\n    const patcher: RawPatcher = { boxes: {}, lines: {} };\n    const maxPatcher = (patcherIn as TMaxPatcher).patcher;\n    patcher.props = {\n        bgColor: rgbaMax2Css(maxPatcher.bgcolor),\n        editingBgColor: rgbaMax2Css(maxPatcher.editing_bgcolor),\n        dependencies: [],\n        grid: maxPatcher.gridsize,\n        openInPresentation: !!maxPatcher.openinpresentation,\n        mode\n    };\n    const maxBoxes = maxPatcher.boxes;\n    const maxLines = maxPatcher.lines;\n    for (let i = 0; i < maxBoxes.length; i++) {\n        const maxBox = maxBoxes[i].box;\n        const numID = parseInt(maxBox.id.match(/\\d+/)[0]);\n        const id = \"box-\" + numID;\n        patcher.boxes[id] = {\n            id,\n            inlets: maxBox.numinlets,\n            outlets: maxBox.numoutlets,\n            rect: maxBox.patching_rect,\n            presentationRect: maxBox.presentation_rect,\n            background: !!maxBox.background,\n            presentation: !!maxBox.presentation,\n            text: (maxBox.maxclass === \"newobj\" ? \"\" : maxBox.maxclass + \" \") + (maxBox.text ? maxBox.text : \"\")\n        };\n    }\n    for (let i = 0; i < maxLines.length; i++) {\n        const lineArgs = maxLines[i].patchline;\n        const id = \"line-\" + i;\n        patcher.lines[id] = {\n            id,\n            src: [lineArgs.source[0].replace(/obj/, \"box\"), lineArgs.source[1]],\n            dest: [lineArgs.destination[0].replace(/obj/, \"box\"), lineArgs.destination[1]]\n        };\n    }\n    return patcher;\n};\n\nexport const js2max = (patcherIn: RawPatcher): TMaxPatcher => {\n    const maxPatcher: TMaxPatcher[\"patcher\"] = {\n        boxes: [],\n        lines: [],\n        rect: undefined,\n        bgcolor: css2RgbaMax(patcherIn.props.bgColor),\n        editing_bgcolor: css2RgbaMax(patcherIn.props.editingBgColor),\n        gridsize: patcherIn.props.grid,\n        openinpresentation: +patcherIn.props.openInPresentation\n    };\n    for (const id in patcherIn.boxes) {\n        const box = patcherIn.boxes[id];\n        const numID = parseInt(id.match(/\\d+/)[0]);\n        maxPatcher.boxes.push({\n            box: {\n                id: `obj-${numID}`,\n                maxclass: \"newobj\",\n                numinlets: box.inlets,\n                numoutlets: box.outlets,\n                patching_rect: box.rect,\n                presentation: +box.presentation,\n                background: +box.background,\n                text: box.text\n            }\n        });\n    }\n    for (const id in patcherIn.lines) {\n        const line = patcherIn.lines[id];\n        maxPatcher.lines.push({\n            patchline: {\n                source: [line.src[0].replace(/box/, \"obj\"), line.src[1]],\n                destination: [line.dest[0].replace(/box/, \"obj\"), line.dest[1]]\n            }\n        });\n    }\n    return { patcher: maxPatcher };\n};\n\nexport const convertSampleToUnit = (sample: number, unit: TAudioUnit, { sampleRate = 48000, bpm = 60, beatsPerMeasure = 4, division = 16 }) => {\n    if (unit === \"sample\") return { unit, str: sample.toString(), value: sample, values: [sample] };\n    const milliseconds = sample * 1000 / sampleRate;\n    const roundedMs = Math.round(milliseconds);\n    if (unit === \"measure\") {\n        const dpms = bpm * division / 60000;\n        const totalDivisions = dpms * milliseconds;\n        const roundedTotalDivisions = dpms * milliseconds;\n        const divisions = ~~(roundedTotalDivisions % division);\n        const beats = ~~(roundedTotalDivisions / division) % beatsPerMeasure + 1;\n        const measure = ~~(roundedTotalDivisions / beatsPerMeasure / division) + 1;\n        const str = `${measure}:${beats}.${divisions.toString().padStart(2, \"0\")}`;\n        return { unit, str, value: totalDivisions / division, values: [measure, beats, divisions] };\n    }\n    // if (unit === \"time\")\n    const ms = roundedMs % 1000;\n    const s = ~~(roundedMs / 1000) % 60;\n    const min = ~~(roundedMs / 60000) % 60;\n    const h = ~~(roundedMs / 3600000);\n    const str = !min ? `${s}.${ms.toString().padStart(3, \"0\")}`\n        : !h ? `${min}:${s.toString().padStart(2, \"0\")}.${ms.toString().padStart(3, \"0\")}`\n            : `${h}:${min.toString().padStart(2, \"0\")}:${s.toString().padStart(2, \"0\")}.${ms.toString().padStart(3, \"0\")}`;\n    return { unit, str, value: milliseconds / 1000, values: [h, min, s, ms] };\n};\nexport const MEASURE_UNIT_REGEX = /^((\\d+):)?(\\d+)\\.?(\\d+)?$/;\nexport const TIME_UNIT_REGEX = /^((\\d+):)??((\\d+):)?(\\d+)\\.?(\\d+)?$/;\nexport const convertUnitToSample = (str: string, unit: TAudioUnit, { sampleRate = 48000, bpm = 60, beatsPerMeasure = 4, division = 16 }) => {\n    if (unit === \"sample\") return +str || 0;\n    if (unit === \"measure\") {\n        const matched = str.match(MEASURE_UNIT_REGEX);\n        if (!matched) throw new Error(`String ${str} cannot be parsed to ${unit}`);\n        const [, , measureIn, beatsIn, divisionsIn] = matched;\n        const bps = bpm / 60;\n        const samplesPerBeat = sampleRate / bps;\n        let measures = +measureIn || 0;\n        let beats = +beatsIn || 0;\n        let divisions = +divisionsIn || 0;\n        beats += ~~(divisions / division);\n        divisions %= division;\n        measures += ~~(beats / beatsPerMeasure);\n        beats %= beatsPerMeasure;\n        return (measures * beatsPerMeasure + beats + divisions / division) * samplesPerBeat;\n    }\n    const matched = str.match(TIME_UNIT_REGEX);\n    if (!matched) throw new Error(`String ${str} cannot be parsed to ${unit}`);\n    const [, , hIn, , minIn, sIn, msIn] = matched;\n    let h = +hIn || 0;\n    let min = +minIn || 0;\n    let s = +sIn || 0;\n    let ms = +msIn || 0;\n    s += ~~(ms / 1000);\n    ms %= 1000;\n    min += ~~(s / 60);\n    s %= 60;\n    h += ~~(min / 60);\n    min %= 60;\n    return (h * 3600 + min * 60 + s + ms / 1000) * sampleRate;\n};\n\nexport const ab2sab = (ab: SharedArrayBuffer | ArrayBuffer) => {\n    if (ab instanceof ArrayBuffer) return ab;\n    const sab = new SharedArrayBuffer(ab.byteLength);\n    const ui8ab = new Uint8Array(ab);\n    const ui8sab = new Uint8Array(sab);\n    for (let i = 0; i < ui8ab.length; i++) {\n        ui8sab[i] = ui8ab[i];\n    }\n    return sab;\n};\n\nexport const sab2ab = (sab: SharedArrayBuffer | ArrayBuffer) => {\n    if (sab instanceof SharedArrayBuffer) return sab;\n    const ab = new ArrayBuffer(sab.byteLength);\n    const ui8ab = new Uint8Array(ab);\n    const ui8sab = new Uint8Array(sab);\n    for (let i = 0; i < ui8sab.length; i++) {\n        ui8ab[i] = ui8sab[i];\n    }\n    return ab;\n};\nexport const ab2str = (buf: ArrayBuffer) => {\n    return String.fromCharCode.apply(null, new Uint16Array(buf));\n};\n\nexport const str2ab = (str: string) => {\n    const buf = new ArrayBuffer(str.length * 2); // 2 bytes for each char\n    const bufView = new Uint16Array(buf);\n    for (let i = 0, strLen = str.length; i < strLen; i++) {\n        bufView[i] = str.charCodeAt(i);\n    }\n    return buf;\n};\n\nexport const getFactors = (n: number) => {\n    const factors = [1];\n    let i = 2;\n    while (i < Math.sqrt(n)) {\n        if (n % i === 0) factors.push(i, n / i);\n        i++;\n    }\n    return factors.sort((a, b) => a - b);\n};\n\nexport const getRuler = (range: [number, number], unit: TAudioUnit, { sampleRate = 48000, bpm = 60, beatsPerMeasure = 4, division = 16 }) => {\n    const ruler: Record<number, string> = {};\n    const length = range[1] - range[0];\n    let coarse: number;\n    let refined: number;\n    if (unit === \"sample\") {\n        const steps = [1, 2, 5];\n        let mag = 1;\n        let step = 0;\n        do {\n            const grid = steps[step] * mag;\n            if (step + 1 < steps.length) {\n                step++;\n            } else {\n                step = 0;\n                mag *= 10;\n            }\n            if (!coarse && length / grid <= 10) coarse = grid;\n            if (!refined && length / grid <= 50) refined = grid;\n        } while (!coarse || !refined);\n    } else if (unit === \"measure\") {\n        const bps = bpm / 60;\n        const samplesPerBeat = sampleRate / bps;\n        const divisionFactors = getFactors(division);\n        const beatsFactors = getFactors(beatsPerMeasure);\n        const measureFactors = [1, 2, 5];\n        let actualUnit: \"division\" | \"beat\" | \"measure\" = \"division\";\n        let mag = 1;\n        let step = 0;\n        do {\n            const grid = actualUnit === \"division\"\n                ? samplesPerBeat * divisionFactors[step] / division\n                : actualUnit === \"beat\"\n                    ? samplesPerBeat * beatsFactors[step]\n                    : samplesPerBeat * measureFactors[step] * mag * beatsPerMeasure;\n            if (actualUnit === \"division\") {\n                if (step + 1 < divisionFactors.length) {\n                    step++;\n                } else {\n                    actualUnit = \"beat\";\n                    step = 0;\n                }\n            } else if (actualUnit === \"beat\") {\n                if (step + 1 < beatsFactors.length) {\n                    step++;\n                } else {\n                    actualUnit = \"measure\";\n                    step = 0;\n                }\n            } else {\n                if (step + 1 < measureFactors.length) {\n                    step++;\n                } else {\n                    step = 0;\n                    mag *= 10;\n                }\n            }\n            if (!coarse && length / grid <= 10) coarse = grid;\n            if (!refined && length / grid <= 50) refined = grid;\n        } while (!coarse || !refined);\n    } else {\n        const msFactors = [1, 2, 5, 10, 20, 50, 100, 200, 500];\n        const sFactors = getFactors(60);\n        const minFactors = sFactors;\n        const hFactors = [1, 2, 5];\n        let actualUnit: \"ms\" | \"s\" | \"min\" | \"h\" = \"ms\";\n        let mag = 1;\n        let step = 0;\n        do {\n            const grid = actualUnit === \"ms\"\n                ? sampleRate * msFactors[step] / 1000\n                : actualUnit === \"s\"\n                    ? sampleRate * sFactors[step]\n                    : actualUnit === \"min\"\n                        ? sampleRate * minFactors[step] * 60\n                        : sampleRate * hFactors[step] * mag * 60;\n            if (actualUnit === \"ms\") {\n                if (step + 1 < msFactors.length) {\n                    step++;\n                } else {\n                    actualUnit = \"s\";\n                    step = 0;\n                }\n            } else if (actualUnit === \"s\") {\n                if (step + 1 < sFactors.length) {\n                    step++;\n                } else {\n                    actualUnit = \"min\";\n                    step = 0;\n                }\n            } else if (actualUnit === \"min\") {\n                if (step + 1 < minFactors.length) {\n                    step++;\n                } else {\n                    actualUnit = \"h\";\n                    step = 0;\n                }\n            } else {\n                if (step + 1 < hFactors.length) {\n                    step++;\n                } else {\n                    step = 0;\n                    mag *= 10;\n                }\n            }\n            if (!coarse && length / grid <= 10) coarse = grid;\n            if (!refined && length / grid <= 50) refined = grid;\n        } while (!coarse || !refined);\n    }\n    let m = ~~(range[0] / refined);\n    if (m * refined < range[0]) m++;\n    while (m * refined < range[1]) {\n        const t = m * refined;\n        if (t && t % coarse < 0.001 || coarse - t % coarse < 0.001) {\n            ruler[t] = unit === \"sample\" ? t.toString() : convertSampleToUnit(t, unit, { sampleRate, bpm, beatsPerMeasure, division }).str.replace(/\\.[0.]+$/, \"\");\n        } else {\n            ruler[t] = \"\";\n        }\n        m++;\n    }\n    return { ruler, coarse, refined };\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","import AudioWorkletProxyProcessor from \"./AudioWorkletProxyProcessor\";\nimport TaskManager from \"../TaskMgr\";\nimport TemporaryProjectItemManager from \"../file/TemporaryProjectItemManager\";\nimport TypedEventEmitter from \"../../utils/TypedEventEmitter\";\nimport WorkletProjectItemManager from \"../file/WorkletProjectItemManager\";\nimport WorkletGlobalPackageManager from \"../WorkletGlobalPackageManager\";\nimport Project from \"../Project\";\nimport JSPatcherWorkletSDK from \"../WorkletSDK\";\nimport type { WorkletEnvParameters, IWorkletEnvNode, IWorkletEnvProcessor, WorkletEnvOptions } from \"./WorkletEnv.types\";\nimport type { AudioWorkletGlobalScope, TypedAudioWorkletNodeOptions } from \"./TypedAudioWorklet\";\nimport type { Task, TaskError } from \"../TaskMgr\";\nimport type { EnvEventMap, IJSPatcherEnv } from \"../Env\";\nimport type { IFileEditor } from \"../file/FileEditor\";\nimport type { IFileInstance } from \"../file/FileInstance\";\nimport type { ProjectItemManagerDataForDiff } from \"../file/PersistentProjectItemManager\";\nimport type { TErrorLevel } from \"../types\";\nimport type { IExternalPackage } from \"../GlobalPackageManager\";\n\nexport const processorId = \"__JSPatcher_WorkletEnv\";\ndeclare const globalThis: AudioWorkletGlobalScope;\nconst { registerProcessor } = globalThis;\n\nexport default class WorkletEnvProcessor extends AudioWorkletProxyProcessor<IWorkletEnvProcessor, IWorkletEnvNode, WorkletEnvParameters, WorkletEnvOptions> implements IWorkletEnvProcessor, IJSPatcherEnv {\n    static fnNames: (keyof IWorkletEnvNode)[] = [\"envNewLog\", \"taskBegin\", \"taskUpdate\", \"taskError\", \"taskEnd\", \"fileMgrExists\", \"fileMgrGetFileDetails\", \"fileMgrPutFile\", \"fileMgrReadDir\", \"fileMgrReadFile\", \"fileMgrWriteFile\", \"fileMgrGetPathIdMap\", \"fileMgrDiff\", \"addObjects\", \"addWorkletModule\"];\n    private readonly ee = new TypedEventEmitter<EnvEventMap>();\n    readonly thread = \"AudioWorklet\";\n    readonly os: \"Windows\" | \"MacOS\" | \"UNIX\" | \"Linux\" | \"Unknown\";\n    readonly browser: \"Unknown\" | \"Chromium\" | \"Gecko\" | \"WebKit\";\n    readonly language: string;\n    readonly generatedId: Uint32Array;\n    readonly taskMgr = new TaskManager();\n    readonly fileMgr: WorkletProjectItemManager;\n    readonly tempMgr: TemporaryProjectItemManager;\n    readonly pkgMgr: WorkletGlobalPackageManager;\n    readonly sdk = new JSPatcherWorkletSDK();\n    currentProject: Project;\n    constructor(options?: TypedAudioWorkletNodeOptions<WorkletEnvOptions>) {\n        super(options);\n        globalThis.jspatcherEnv = this;\n        const { os, browser, language, generatedId } = options.processorOptions;\n        this.os = os;\n        this.browser = browser;\n        this.language = language;\n        this.generatedId = generatedId;\n        this.fileMgr = new WorkletProjectItemManager(this);\n        this.tempMgr = new TemporaryProjectItemManager(this);\n        this.pkgMgr = new WorkletGlobalPackageManager(this);\n    }\n    async init() {\n        await this.pkgMgr.init();\n        this.currentProject = new Project(this);\n        await this.fileMgr.init();\n        await this.tempMgr.init();\n        this.bindTaskMgr();\n        this.bindFileMgr();\n    }\n    instances = new Set<IFileInstance>();\n    activeInstance: IFileInstance;\n    activeEditor: IFileEditor;\n    newLog(errorLevel: TErrorLevel, title: string, message: string, emitterIn?: any) {\n        const emitter = typeof emitterIn === \"string\" ? emitterIn : typeof emitterIn === \"object\" ? emitterIn.constructor.name : typeof emitterIn === \"function\" ? emitterIn.name : \"\";\n        this.envNewLog(errorLevel, title, message, emitter);\n    }\n    generateId(objectIn: object) {\n        return this.thread + objectIn.constructor.name + Atomics.add(this.generatedId, 0, 1);\n    }\n    registerInstance(i: IFileInstance, id?: string) {\n        this.instances.add(i);\n        i.on(\"destroy\", () => {\n            this.instances.delete(i);\n            this.ee.emit(\"instances\", Array.from(this.instances));\n        });\n        this.ee.emit(\"instances\", Array.from(this.instances));\n        if (!id) return this.generateId(i);\n        return id;\n    }\n    getInstanceById(id: string) {\n        for (const instance of this.instances) {\n            if (instance.id === id) return instance;\n        }\n        return null;\n    }\n    // get _listeners() { return this.ee._listeners; }\n    // get getListeners() { return this.ee.getListeners; }\n    get listeners() { return this.ee.listeners; }\n    get on() { return this.ee.on; }\n    get once() { return this.ee.once; }\n    get onAny() { return this.ee.onAny; }\n    get off() { return this.ee.off; }\n    get offAny() { return this.ee.offAny; }\n    get offAll() { return this.ee.offAll; }\n    get emit() { return this.ee.emit; }\n    get emitSerial() { return this.ee.emitSerial; }\n    get emitSync() { return this.ee.emitSync; }\n    get listenerCount() { return this.ee.listenerCount; }\n    bindTaskMgr() {\n        const handleTaskBegin = ({ id, message, emitter }: Task) => this.taskBegin({ id, message, emitter: typeof emitter === \"string\" ? emitter : emitter.constructor?.name });\n        const handleTaskUpdate = ({ id, message }: Task) => this.taskUpdate({ id, message });\n        const handleTaskError = ({ id, error }: TaskError) => this.taskError({ id, error });\n        const handleTaskEnd = ({ id }: Task) => this.taskEnd({ id });\n        this.taskMgr.on(\"taskBegin\", handleTaskBegin);\n        this.taskMgr.on(\"taskUpdate\", handleTaskUpdate);\n        this.taskMgr.on(\"taskError\", handleTaskError);\n        this.taskMgr.on(\"taskEnd\", handleTaskEnd);\n    }\n    handleFileMgrChange = () => {\n        if (this.fileMgr.disabled) return;\n        this.fileMgrDiff(this.fileMgr.getDataForDiff());\n    };\n    bindFileMgr() {\n        this.fileMgr.on(\"changed\", this.handleFileMgrChange);\n    }\n    async workletFileMgrDiff(diff: ProjectItemManagerDataForDiff) {\n        this.fileMgr.off(\"changed\", this.handleFileMgrChange);\n        await this.fileMgr.processDiff(diff);\n        this.fileMgr.on(\"changed\", this.handleFileMgrChange);\n    }\n    async importPackage(url: string, pkgInfo: IExternalPackage) {\n        await this.pkgMgr.importPackage(url, pkgInfo);\n    }\n    process(inputs: Float32Array[][], outputs: Float32Array[][]) {\n        if (this._disposed) return false;\n        return true;\n    }\n}\n\ntry {\n    registerProcessor(processorId, WorkletEnvProcessor);\n} catch (error) {\n    // eslint-disable-next-line no-console\n    console.warn(error);\n}\n"],"names":["TypedEventEmitter","ImporterDirSelfObject","isJSPatcherObjectConstructor","PackageManager","global","patcher","env","pkgMgr","mode","props","patcherDependencies","dependencies","patcherDependenciesNames","map","t","packagesInfo","Object","keys","id","isBuiltIn","builtInPackagesNames","indexOf","url","importedPackages","find","p","name","baseUrl","enabled","pkg","constructor","init","loadPatcherDependencies","pkgName","sort","a","b","lib","packageRegister","emitLibChanged","taskMgr","newTask","file","onUpdate","i","length","importFromURL","e","Error","error","message","emit","libOut","rootifyDepth","Infinity","pathIn","path","slice","el","full","join","k","shift","key","searchInLib","query","limit","staticMethodOnly","items","startsWith","o","push","object","searchInPkg","outs","getFromPath","ab2str","str2ab","Project","audioCtx","envIn","default","author","version","setProps","changed","keyIn","save","load","clean","fileMgr","item","getProjectItemFromPath","projectFilename","json","JSON","parse","data","stringify","projectRoot","addFile","unload","instances","project","destroy","type","description","TaskManager","tasks","_tasks","filter","errors","_errors","emitter","callback","thread","globalThis","timestamp","Date","now","_id","task","$","returnValue","handleUpdate","msg","taskError","lastError","lastTask","getTasksFromEmitter","getErrorsFromEmitter","dismissLastError","dismissAllErrors","getBase","getGlobalThis","WorkletGlobalPackageManager","externalPackagesNames","Map","jsaw","Base","addObjects","getDescriptors","toDescriptor","O","isObjectDescriptor","ctor","importedObjectType","pkgIn","$self","entries","reduce","acc","v","descriptor","add","assign","fetchModule","toExport","exports","module","addWorkletModule","exported","importPackage","pkgInfo","getter","BaseObject","Patcher","Box","Line","generateRemotedObject","Bang","isBang","MathUtils","BufferUtils","Utils","JSPatcherWorkletSDK","TemporaryProjectFile","TempAudioFile","instantiate","instantiateEditor","instanceId","AudioEditor","fromProjectItem","AbstractProjectItem","AbstractProjectFile","getTypeFromFileName","_data","dataIn","fileExtension","splitted","split","fileMgrIn","parentIn","nameIn","onAny","eventName","eventData","isFolder","newData","by","emitChanged","saveAsCopy","parent","manager","clone","emitTreeChanged","saveAs","to","newName","from","move","AbstractProjectFolder","isDirty","getDescendantFiles","every","f","Set","findItem","itemIn","Array","existItem","has","uniqueName","empty","getTree","cur","isParentOf","getOrderedItems","folders","localeCompare","files","_fileMgr","_name","_isDirty","parentPath","projectPath","replace","RegExp","projectFolderName","addObserver","observer","_observers","removeObserver","delete","on","dirty","generateItemId","extToType","AbstractProjectItemManager","allItems","rec","forEach","root","allProjectItems","generateId","emptyProject","ext","getProjectItemFromId","pathArray","itemArray","pop","next","getPathIdMap","instantiateProjectPath","projectIn","FileEditor","instance","value","ctx","isInMemory","isTemporary","isReadonly","isReady","_isReady","isDestroyed","_isDestroyed","history","isLocked","fileIcon","setActive","activeEditor","isActive","handleDestroy","addEditor","handleReady","off","editorId","registerInstance","handleProjectSave","handleProjectUnload","toFileData","serialize","toTempData","undo","redo","copy","cut","paste","deleteSelected","selectAll","onUiResized","removeEditor","FileInstance","_env","_project","_file","_isReadonly","activeInstance","getEditor","size","_history","History","editor","eventListening","capture","Promise","all","editors","$editor","eventQueue","splice","saveTime","emitDirty","performance","timeOrigin","timing","navigationStart","handleEditorEvent","handleSaved","once","offAny","isUndoable","isRedoable","undoOf","redoOf","undoUntil","redoUntil","setIndex","getSyncData","syncData","PersistentProjectFile","sab","_sab","SharedArrayBuffer","byteLength","ui8ab","Uint8Array","ui8sab","lastModifiedId","readFile","Ctor","putFile","rename","newNameIn","trim","oldName","remove","Constructor","audio","image","text","video","undefined","unknown","PersistentProjectFolder","readDir","rawItem","createProjectItem","tempItem","fileDetail","getFileDetails","addFolder","folder","TempData","persistentMgr","_this","setPrototypeOf","prototype","options","TempPatcherFile","TempTextFile","TemporaryProjectFolder","typeIn","TemporaryProjectItemManager","WorkletProjectItemManager","cachedPathIdMap","fileMgrGetPathIdMap","getDataForDiff","processDiff","diff","disabled","process","$item","$parentId","current","newFile","fileMgrReadFile","fileMgrReadDir","fileMgrGetFileDetails","exists","fileMgrExists","fileMgrPutFile","writeFile","fileMgrWriteFile","oldPath","newPath","importFileZip","subfolder","taskHost","exportProjectZip","stringifyError","x","isJSPatcherObject","AbstractObject","meta","package","icon","inlets","outlets","args","isPatcherInlet","isPatcherOutlet","class","_patcher","box","_box","_meta","setMeta","metaIn","oldMeta","setData","oldData","getProp","rect","presentationRect","background","presentation","setInlets","setOutlets","outletLines","inletLines","stateIn","oldState","state","propsIn","oldProps","update","oldArgs","subscribe","postInit","updateUI","updateArgs","undoable","updateProps","updateState","fn","inlet","propsInKeys","propsKeys","outlet","compare","line","pass","outletAll","outputs","connectedOutlet","destBoxId","destInlet","lineId","connectedInlet","srcBoxId","srcOutlet","disconnectedOutlet","disconnectedInlet","post","newLog","s","info","warn","highlight","connectAudio","allLines","enable","connectAudioInlet","portIn","lines","port","connectAudioOutlet","disconnectAudio","disable","disconnectAudioInlet","disconnectAudioOutlet","applyBPF","param","bpf","currentTime","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","getSharedItem","onceCreate","newItem","tempMgr","d","handleFileMgrTreeChanged","handleTempMgrTreeChanged","toString","isUIState","uiState","isUIStateKey","thisName","superMeta","getPrototypeOf","superProps","thisProps","group","setArgs","updateUIFromProps","hidden","ignoreClick","hint","comment","hasOwnProperty","optional","varLength","bgColor","textColor","fontFamily","enums","fontSize","fontStyle","fontWeight","textAlign","RemotedObject","proxy","patcherProcessor","handleBoxIoCountChanged","objectEmitFromWorklet","Func","New","getIO","_comment","EmptyObject","InvalidObject","func","new","RemotedImporter","import","StaticMethod","Method","Wrapper","imported","handleUpdateArgs","activeLib","_","output","loading","c","r","isHot","ImportedObject","Getter","result","execute","handlePreInit","handleInlet","then","sync","AnyImportedObject","getPropertyDescriptors","Importer","getObject","writeInPath","outIn","stackIn","depthIn","depth","out","stack","jspatcherEnv","newObj","prop","enumerable","isArray","inputs","argsCount","Math","max","initialInlets","initialOutlets","call","spreadArgs","Fn","Property","NewBase","FuncBase","PropertyBase","GetterBase","SetterBase","SetterGetterBase","MethodBase","StaticPropertyBase","StaticGetterBase","StaticSetterBase","StaticSetterGetterBase","StaticMethodBase","Setter","SetterGetter","StaticProperty","StaticGetter","StaticSetter","StaticSetterGetter","DefaultImporter","isStatic","Super","setter","set","get","input","ImportedStaticMethodObject","AudioIn","index","buffer","changeIO","emitPatcherChangeIO","outlet0","handlePatcherInput","AudioOut","inspectAudioIO","inlet0","outputAudio","In","Out","Param","in","isTRect","parseToPrimitive","isTPresentationRect","isRectMovable","isRectResizable","patcherIn","boxIn","_inletLines","fill","_outletLines","maxBoxIn","patching_rect","presentation_rect","prevData","storage","_editing","_parsed","parseObjText","newMeta","getObjectMeta","getObjectConstructor","_Object","defaultSize","presentationSize","_object","UI","oIn","parsed","addInletLine","removeInletLine","addOutletLine","removeOutletLine","count","linesSetLength","uiUpdateDest","uiUpdateSrc","getInletPos","left","top","width","getOutletPos","height","inletsPositions","positions","outletsPositions","isSrc","last","getLinesBySrcID","getLinesByDestID","isOutletTo","iterator","values","done","destBox","isInletFrom","srcBox","changeText","textIn","force","oldDefaultSize","setRect","setPresentationRect","setPresentation","setBackground","position","leftIn","topIn","presentationPosition","widthIn","heightIn","getLeft","inPresentation","rectKey","setLeft","positionKey","getTop","setTop","getWidth","setWidth","sizeKey","getHeight","setHeight","bool","getIsMovable","getIsResizable","highlightPort","boxChanged","changeObject","deleteLine","boxes","strIn","REGEX","strArray","match","exec","objOut","lastProp","charAt","substr","toSerializable","mapLines","visitedBoxes","ins","recs","lineMap","sendID","sendMap","resultID","toFaustLambda","lambdaName","exprs","onces","mainIns","mainOuts","recIns","recOuts","toExpr","reverse","recIn","recOut","in_","toNormalExpr","unshift","toFaustDspCode","inspectFaustPatcher","code","imports","effects","boxId","fxOnces","fxExprs","fxIns","toOnceExpr","isConnectableByAudio","fromConnection","outletAudioConnections","toConnection","inletAudioConnections","node","isWamNode","isWebAudioModule","line1","line2","positionHash","lineIn","calcType","_type","src","dest","updateType","setSrc","srcId","getSrc","srcPos","setDest","destId","getDest","destPos","getLinesByBox","isAudioParam","AudioParam","disconnect","disconnectEvents","connect","connectEvents","srcMeta","destMeta","srcType","destType","PatcherEditor","PatcherHistory","max2js","js2max","_state","log","selected","preventEmitChanged","editingBgColor","grid","openInPresentation","boxIndexCount","lineIndexCount","activePkg","js","gen","faust","fileName","emitGraphChanged","ArrayBuffer","Response","splitName","extMap","jspat","maxpat","gendsp","dsppat","modeIn","$init","createBox","numID","parseInt","createLine","getPatcherNode","PatcherNode","register","audioWorklet","patcherNode","fileId","loadFromURL","fetch","loadFromString","sIn","loadFromFile","reader","FileReader","onload","onerror","readAsText","addPackage","namespace","removePackage","findIndex","className","changeBoxText","oldText","deleteBox","canCreateLine","changeLineSrc","oldSrc","changeLineDest","destOutlet","oldDest","srcOuts","destIns","srcOutsWraped","concat","destInsWraped","idOut","idIn","inputAudio","emitSync","inputParam","_inletAudioConnections","_outletAudioConnections","inputBoxes","outputBoxes","parametersBoxes","arg0","metaFromPatcher","errorLevel","title","publicProps","spacing","Blob","arrayBuffer","locked","showGrid","snapToGrid","setState","resolve","reject","handleChanged","handleChangeBoxText","handlePassiveDeleteLine","handleBoxChanged","deselectAll","createBoxFromFile","obj","deselect","changeBox","change","select","ids","selectAllBoxes","selectOnly","selectedToString","lineSet","pasteToPatcher","clipboard","idMap","pasted","$postInit","maxBoxes","maxBox","numinlets","numoutlets","maxclass","createdBoxes","maxLines","lineArgs","patchline","source","destination","createdLine","create","objects","created","boxSet","deleted","promises","navigator","writeText","readText","duplicate","selectRegion","selectionRect","selectedBefore","right","bottom","boxLeft","boxTop","boxWidth","boxHeight","boxRight","boxBottom","moveSelectedBox","dragOffset","refBoxID","delta","y","round","moveEnd","$left","$top","resizeSelectedBox","resize","resizeEnd","$width","$height","min","sizingX","sizing","sizingY","findNearestPort","findSrc","nearest","minDistance","currentPos","currentDistance","pos","distance","canCreate","highlightNearestPort","origPos","tempLine","inspector","found","dockUI","dockable","TextEditor","AudioWorkletProcessor","Processor","fnNames","resolves","rejects","messagePortRequestId","handleDisposed","removeEventListener","handleMessage","close","postMessage","_disposed","start","addEventListener","$AnyEventType","Symbol","listeners","_listeners","getListeners","listener","listenerWithOff","arg","anyListeners","excludeAny","exclude","l","emitSerial","returnValues","offAll","listenerCount","anyListenerCount","mod","sum","array","mean","median","sortedArray","sliceBuffer","maxIndex","energy","signal","sample","rms","sqrt","absMax","abs","zcr","lastPositive","positive","centroid","weightedSum","weight","conjugatedCentroid","factor","geometricMean","exp","flatness","flux","prev","norm","halfRectify","kurtosis","c1","c2","c3","c4","numerator","denominator","skewness","rolloff","cutoff","threshold","n","element","slope","xSum","x2Sum","ySum","xySum","spread","setTypedArray","offsetTo","offsetFrom","toLength","fromLength","spillLength","spilled","$to","$from","$spillLength","$fromEnd","subarray","getSubTypedArray","offset","fftw2Amp","windowEnergyFactor","amps","Float32Array","real","imag","estimateFreq","sampleRate","indexToFreq","fftBins","isNumberArray","floor","ceil","toRad","degrees","PI","toMIDI","atodb","log10","dbtoa","db","iNormExp","normExp","scale","l1","h1","l2","h2","r1","r2","scaleClip","isIdentityMatrix","row","j","identityMatrix","dim","SharedDataNoValue","TempManagerFolder","isStringArray","isMIDIEvent","rgbaMax2Css","maxColor","cssColor","css2RgbaMax","color","matched","decodeBPF","tupleLength","numbers","isFinite","tuples","$tuple","decodeCurve","decodeLine","detectOS","appVersion","detectBrowserCore","window","chrome","InstallTrigger","vendor","roundedRect","radius","radii","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","stroke","fillRoundedRect","selectElementRange","elementIsEditable","nodeName","selection","getSelection","focus","setBaseAndExtent","hasChildNodes","addRange","removeAllRanges","document","createRange","range","selectNodeContents","selectElementPos","setStart","childNodes","collapse","findFromAscendants","predict","ascendants","parentElement","body","getPropertyDescriptor","getOwnPropertyDescriptor","getOwnPropertyDescriptors","proto","maxPatcher","bgcolor","editing_bgcolor","gridsize","openinpresentation","convertSampleToUnit","unit","bpm","beatsPerMeasure","division","str","milliseconds","roundedMs","dpms","totalDivisions","roundedTotalDivisions","divisions","beats","measure","padStart","ms","h","MEASURE_UNIT_REGEX","TIME_UNIT_REGEX","convertUnitToSample","measureIn","beatsIn","divisionsIn","bps","samplesPerBeat","measures","hIn","minIn","msIn","ab2sab","ab","sab2ab","buf","String","fromCharCode","apply","Uint16Array","bufView","strLen","charCodeAt","getFactors","factors","getRuler","ruler","coarse","refined","steps","mag","step","divisionFactors","beatsFactors","measureFactors","actualUnit","msFactors","sFactors","minFactors","hFactors","m","AudioWorkletProxyProcessor","processorId","registerProcessor","WorkletEnvProcessor","fileMgrDiff","os","browser","language","generatedId","processorOptions","currentProject","bindTaskMgr","bindFileMgr","emitterIn","envNewLog","objectIn","Atomics","ee","getInstanceById","handleTaskBegin","taskBegin","handleTaskUpdate","taskUpdate","handleTaskError","handleTaskEnd","taskEnd","handleFileMgrChange","workletFileMgrDiff","console"],"sourceRoot":""}