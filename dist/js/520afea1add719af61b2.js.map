{"version":3,"file":"js/520afea1add719af61b2.js","mappings":"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","sources":["webpack://JSPatcher/./src/core/objects/base/CodePopupUI.tsx","webpack://JSPatcher/./src/core/objects/base/DOMUI.tsx","webpack://JSPatcher/./src/core/objects/base/index.jspatpkg.ts","webpack://JSPatcher/./src/core/objects/faust/FaustNode.ts","webpack://JSPatcher/./src/core/objects/main/AudioIn.ts","webpack://JSPatcher/./src/core/objects/main/AudioOut.ts","webpack://JSPatcher/./src/core/objects/main/BPatcher.ts","webpack://JSPatcher/./src/core/objects/main/BPatcherUI.tsx","webpack://JSPatcher/./src/core/objects/main/Buffer.ts","webpack://JSPatcher/./src/core/objects/main/BufferUI.tsx","webpack://JSPatcher/./src/core/objects/main/DspSubPatcher.ts","webpack://JSPatcher/./src/core/objects/main/FaustPatcher.ts","webpack://JSPatcher/./src/core/objects/main/GenPatcher.ts","webpack://JSPatcher/./src/core/objects/main/In.ts","webpack://JSPatcher/./src/core/objects/main/Out.ts","webpack://JSPatcher/./src/core/objects/main/Record.ts","webpack://JSPatcher/./src/core/objects/main/SubPatcher.ts","webpack://JSPatcher/./src/core/objects/main/WebAudioModule.ts","webpack://JSPatcher/./src/core/objects/main/index.jspatpkg.ts","webpack://JSPatcher/./src/core/objects/main/BPatcherUI.scss","webpack://JSPatcher/./src/core/objects/main/BPatcherUI.scss?a0de"],"sourcesContent":["import * as React from \"react\";\nimport { Icon, StrictModalProps, Modal, Dimmer, Loader, Button } from \"semantic-ui-react\";\nimport type MonacoEditor from \"react-monaco-editor\";\nimport type { editor } from \"monaco-editor/esm/vs/editor/editor.api\";\nimport DefaultPopupUI from \"./DefaultPopupUI\";\nimport type DefaultObject from \"./DefaultObject\";\nimport type { DefaultPopupUIProps, DefaultPopupUIState } from \"./DefaultPopupUI\";\n\nexport interface CodePopupUIState extends DefaultPopupUIState {\n    editorLoaded: boolean;\n}\nexport default class CodePopupUI<T extends DefaultObject = DefaultObject, P extends Partial<DefaultPopupUIProps> & Record<string, any> = {}, S extends Partial<CodePopupUIState> & Record<string, any> = {}> extends DefaultPopupUI<T, P, S & CodePopupUIState> {\n    static dockable = true;\n    state: S & CodePopupUIState = {\n        ...this.state,\n        editorLoaded: false\n    };\n    codeEditor: editor.IStandaloneCodeEditor;\n    editorJSX: typeof MonacoEditor;\n    editorLanguage = \"javascript\";\n    get code() {\n        return \"\";\n    }\n    handleSave = (code: string): any => undefined;\n    handleCloseAndSave = () => {\n        this.setState({ modalOpen: false });\n        this.handleSave(this.codeEditor.getValue());\n    };\n    handleCodeEditorMount = (monaco: editor.IStandaloneCodeEditor) => this.codeEditor = monaco;\n    handleResize = () => ((this.state.editorLoaded && this.codeEditor) ? this.codeEditor.layout() : undefined);\n    async componentDidMount() {\n        super.componentDidMount();\n        window.addEventListener(\"resize\", this.handleResize);\n        const reactMonacoEditor = await import(\"react-monaco-editor\");\n        this.editorJSX = reactMonacoEditor.default;\n        this.setState({ editorLoaded: true });\n    }\n    componentWillUnmount() {\n        super.componentWillUnmount();\n        window.removeEventListener(\"resize\", this.handleResize);\n    }\n    componentDidUpdate(prevProps: Readonly<DefaultPopupUIProps>, prevState: Readonly<S & CodePopupUIState>) {\n        if (this.props.inDock) {\n            if (this.state.width !== prevState.width || this.state.height !== prevState.height) this.handleResize();\n        }\n    }\n    render() {\n        if (this.props.inDock) {\n            if (!this.state.editorLoaded) return <Dimmer active><Loader content=\"Loading\" /></Dimmer>;\n            return (\n                <div style={{ display: \"flex\", flexDirection: \"column\", flex: \"1 1 auto\", width: \"100%\", height: \"100%\" }}>\n                    <div style={{ flex: \"1 1 auto\", overflow: \"hidden\" }}>\n                        <this.editorJSX value={this.code} language={this.editorLanguage} theme=\"vs-dark\" editorDidMount={this.handleCodeEditorMount} options={{ fontSize: 12 }} />\n                    </div>\n                    <div style={{ flex: \"0 0 auto\", display: \"flex\", flexDirection: \"row-reverse\", padding: \"10px\" }}>\n                        <Button icon=\"checkmark\" content=\"OK\" color=\"green\" onClick={this.handleCloseAndSave} inverted />\n                    </div>\n                </div>\n            );\n        }\n        const children = (\n            <>\n                <Modal.Content>\n                    <div style={{ height: window.innerHeight * 0.8 }}>\n                        {\n                            this.state.editorLoaded\n                                ? <this.editorJSX value={this.code} language={this.editorLanguage} theme=\"vs-dark\" editorDidMount={this.handleCodeEditorMount} options={{ fontSize: 12 }} />\n                                : <Dimmer active><Loader content=\"Loading\" /></Dimmer>\n                        }\n                    </div>\n                </Modal.Content>\n                <Modal.Actions>\n                    <Button basic color=\"red\" onClick={this.handleClose} inverted>\n                        <Icon name=\"remove\" /> Cancel\n                    </Button>\n                    <Button color=\"green\" onClick={this.handleCloseAndSave} inverted>\n                        <Icon name=\"checkmark\" /> OK\n                    </Button>\n                </Modal.Actions>\n            </>\n        );\n        const containerProps = { ...this.props.containerProps };\n        if (!containerProps.onDoubleClick) containerProps.onDoubleClick = this.handleDoubleClick;\n        const modalProps: StrictModalProps = { ...this.props.modalProps, children, open: this.state.modalOpen, onClose: this.handleClose, basic: true, size: \"fullscreen\" };\n        return <DefaultPopupUI {...this.props} modalProps={modalProps} containerProps={containerProps} />;\n    }\n}\n","import * as React from \"react\";\nimport BaseUI, { BaseUIProps, BaseUIState } from \"./BaseUI\";\nimport type BaseObject from \"./BaseObject\";\n\nexport class DivContainer extends React.PureComponent<{ containerProps?: JSX.IntrinsicAttributes & React.ClassAttributes<HTMLDivElement> & React.HTMLAttributes<HTMLDivElement>; children?: ChildNode[] }, { root: HTMLDivElement }> {\n    root = React.createRef<HTMLDivElement>();\n    state = { root: undefined as HTMLDivElement };\n    componentDidMount() {\n        const root = this.root.current;\n        if (this.props.children) this.props.children.forEach(v => root.appendChild(v));\n        this.setState({ root });\n    }\n    componentDidUpdate(prevProps: Readonly<{ children: ChildNode[] }>, prevState: Readonly<{ root: HTMLDivElement }>) {\n        if (!this.state.root) return;\n        if (this.props.children !== prevProps.children) {\n            // eslint-disable-next-line react/no-direct-mutation-state\n            this.state.root.innerHTML = \"\";\n            this.props.children.forEach(v => this.state.root.appendChild(v));\n        }\n    }\n    render() {\n        const { containerProps } = this.props;\n        const containerStyle: React.CSSProperties = { width: \"100%\", height: \"100%\", position: \"absolute\", display: \"block\", overflow: \"auto\", ...((containerProps && containerProps.style) ? containerProps.style : {}) };\n        return (\n            <div {...containerProps} style={containerStyle} ref={this.root} />\n        );\n    }\n}\nexport class ShadowDOMContainer extends React.PureComponent<{ children: ChildNode[] }, { root: ShadowRoot }> {\n    root = React.createRef<HTMLDivElement>();\n    state = { root: undefined as ShadowRoot };\n    componentDidMount() {\n        const root = this.root.current.attachShadow({ mode: \"open\" });\n        if (this.props.children) this.props.children.forEach(v => root.appendChild(v));\n        this.setState({ root });\n    }\n    componentDidUpdate(prevProps: Readonly<{ children: ChildNode[] }>, prevState: Readonly<{ root: ShadowRoot }>) {\n        if (!this.state.root) return;\n        if (this.props.children !== prevProps.children) {\n            // eslint-disable-next-line react/no-direct-mutation-state\n            this.state.root.innerHTML = \"\";\n            this.props.children.forEach(v => this.state.root.appendChild(v));\n        }\n    }\n    render() {\n        return (\n            <div style={{ width: \"100%\", height: \"100%\", position: \"absolute\", display: \"block\", overflow: \"auto\" }} ref={this.root} />\n        );\n    }\n}\nexport interface DOMUIState extends BaseUIState {\n    shadow: boolean;\n    containerProps: JSX.IntrinsicAttributes & React.ClassAttributes<HTMLDivElement> & React.HTMLAttributes<HTMLDivElement>;\n    children: ChildNode[];\n}\nexport default class DOMUI<T extends BaseObject = BaseObject, P extends Partial<BaseUIProps> & Record<string, any> = {}, S extends Partial<DOMUIState> & Record<string, any> = {}> extends BaseUI<T, P & BaseUIProps<T>, S & DOMUIState> {\n    static sizing: \"horizontal\" | \"vertical\" | \"both\" | \"ratio\" = \"both\";\n    static defaultSize: [number, number] = [210, 90];\n    state: S & DOMUIState = { ...this.state, shadow: false, containerProps: {}, children: [] };\n    render() {\n        return (\n            <BaseUI {...this.props}>\n                {this.state.shadow ? <ShadowDOMContainer children={this.state.children} /> : <DivContainer containerProps={this.state.containerProps} children={this.state.children} />}\n            </BaseUI>\n        );\n    }\n}\n","import BaseObject from \"./BaseObject\";\nimport EmptyObject from \"./EmptyObject\";\nimport InvalidObject from \"./InvalidObject\";\nimport { Func, New } from \"../importer/DefaultImporter\";\nimport getIO from \"../main/index.jspatpkg\";\n\nexport default async () => ({\n    BaseObject,\n    EmptyObject,\n    InvalidObject,\n    func: Func,\n    new: New,\n    ...await getIO()\n});\n","import type { FaustAudioWorkletNode } from \"faust2webaudio\";\nimport CodePopupUI from \"../base/CodePopupUI\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport DefaultObject from \"../base/DefaultObject\";\nimport { isMIDIEvent, decodeLine } from \"../../../utils/utils\";\nimport type DefaultUI from \"../base/DefaultUI\";\nimport type { TBPF, TMIDIEvent } from \"../../types\";\nimport type { UnPromisifiedFunction } from \"../../workers/Worker\";\nimport type { IJSPatcherObjectMeta, IInletMeta, IOutletMeta } from \"../base/AbstractObject\";\n\nclass FaustNodeUI extends CodePopupUI<FaustNode> {\n    editorLanguage = \"faust\";\n    get code() {\n        return this.object.data.code;\n    }\n    handleSave = (code: string) => {\n        this.object.setData({ code });\n        this.object.newNode(code, this.object._.voices);\n    };\n}\nexport interface FaustNodeData {\n    code?: string;\n}\nexport interface FaustNodeInternalState {\n    merger: ChannelMergerNode;\n    splitter: ChannelSplitterNode;\n    node: FaustAudioWorkletNode & { dspCode?: string };\n    voices: number;\n}\ntype Args = [number];\ntype I = [Bang | number | string | TMIDIEvent | Record<string, TBPF>, ...TBPF[]];\ntype O = (null | FaustAudioWorkletNode)[];\n\nexport default class FaustNode<\n    D extends Record<string, any> & Partial<FaustNodeData> = {},\n    S extends {} = {},\n    A extends any[] = Args,\n    U extends {} = {}\n> extends DefaultObject<D & FaustNodeData, S, I, O, A, {}, U> {\n    static package = \"Faust\";\n    static author = \"Fr0stbyteR\";\n    static version = \"1.0.0\";\n    static description = \"Dynamically generate WebAudioNode from Faust\";\n    static inlets: IJSPatcherObjectMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"A bang to output the node, code string to compile, number to set voices, or a param-bpf map, or a MIDI event\"\n    }];\n    static outlets: IJSPatcherObjectMeta[\"outlets\"] = [{\n        type: \"object\",\n        description: \"FaustNode instance output: AudioWorkletNode | ScriptProcessor\"\n    }];\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"number\",\n        optional: true,\n        default: 0,\n        description: \"Polyphonic instrument voices count\"\n    }];\n    static UI: typeof DefaultUI = FaustNodeUI;\n    _: FaustNodeInternalState = { merger: undefined, splitter: undefined, node: undefined, voices: 0 };\n    async getFaustNode(code: string, voices: number) {\n        const { audioCtx } = this;\n        const faust = await this.env.getFaust();\n        return faust.getNode(code, { audioCtx, useWorklet: true, voices, args: { \"-I\": [\"libraries/\", \"project/\"] } });\n    }\n    async compile(code: string, voices: number) {\n        let splitter: ChannelSplitterNode;\n        let merger: ChannelMergerNode;\n        const node = await this.getFaustNode(code, voices) as FaustAudioWorkletNode & { dspCode?: string };\n        if (!node) throw new Error(\"Cannot compile Faust code\");\n        node.channelInterpretation = \"discrete\";\n        node.dspCode = code;\n        const { audioCtx } = this.patcher;\n        const inlets = node.getNumInputs();\n        const outlets = node.getNumOutputs();\n        if (inlets) {\n            merger = audioCtx.createChannelMerger(inlets);\n            merger.channelInterpretation = \"discrete\";\n            merger.connect(node, 0, 0);\n        }\n        if (outlets) {\n            splitter = audioCtx.createChannelSplitter(outlets);\n            node.connect(splitter, 0, 0);\n        }\n        return { inlets, outlets, node, splitter, merger };\n    }\n    async newNode(code: string, voices: number) {\n        let compiled: ReturnType<UnPromisifiedFunction<FaustNode[\"compile\"]>>;\n        try {\n            compiled = await this.compile(code, voices);\n        } catch (e) {\n            this.error((e as Error).message);\n            return;\n        }\n        const { inlets, outlets, merger, splitter, node } = compiled;\n        this.disconnectAudio();\n        this.handleDestroy();\n        Object.assign(this._, { voices, merger, splitter, node } as FaustNodeInternalState);\n        const Ctor = this.constructor as typeof FaustNode;\n        const firstInletMeta = Ctor.inlets[0];\n        const firstInletSignalMeta: IInletMeta = { ...firstInletMeta, type: \"signal\" };\n        const inletMeta: IInletMeta = { isHot: false, type: \"signal\", description: \"Node connection\" };\n        const audioParamInletMeta: IInletMeta = { isHot: false, type: \"signal\", description: \": bpf or node connection\" };\n        const outletMeta: IOutletMeta = { type: \"signal\", description: \"Node connection\" };\n        const lastOutletMeta = Ctor.outlets[0];\n        const factoryMeta = Ctor.meta as this[\"meta\"];\n        for (let i = 0; i < inlets; i++) {\n            if (i === 0) factoryMeta.inlets[i] = compiled.inlets ? firstInletSignalMeta : firstInletMeta;\n            else factoryMeta.inlets[i] = inletMeta;\n            this.inletAudioConnections[i] = { node: merger, index: i };\n        }\n        for (let i = 0; i < outlets; i++) {\n            factoryMeta.outlets[i] = outletMeta;\n            this.outletAudioConnections[i] = { node: splitter, index: i };\n        }\n        factoryMeta.outlets[outlets] = lastOutletMeta;\n        const audioParams: string[] = [];\n        node.parameters.forEach((v, k) => audioParams.push(k));\n        for (let i = inlets || 1; i < (inlets || 1) + audioParams.length; i++) {\n            const path = audioParams[i - (inlets || 1)];\n            const param = node.parameters.get(path);\n            const { defaultValue, minValue, maxValue } = param;\n            factoryMeta.inlets[i] = { ...audioParamInletMeta, description: `${path}${audioParamInletMeta.description}: ${defaultValue} (${minValue} - ${maxValue})` };\n            this.inletAudioConnections[i] = { node: param };\n        }\n        this.setMeta(factoryMeta);\n        this.inlets = (inlets || 1) + node.parameters.size;\n        this.outlets = outlets + 1;\n        this.connectAudio();\n        this.outlet(this.outlets - 1, this._.node);\n    }\n    handlePreInit = () => undefined as any;\n    handlePostInit = async () => {\n        if (this.data.code) await this.newNode(this.data.code, this._.voices);\n    };\n    handleUpdateArgs = (args: Partial<A>): void => {\n        if (typeof args[0] === \"number\") this._.voices = ~~Math.max(0, args[0]);\n    };\n    handleInlet = async ({ data, inlet }: { data: I[number]; inlet: number }) => {\n        if (inlet === 0) {\n            if (isBang(data)) {\n                if (this._.node) this.outlet(this.outlets - 1, this._.node);\n            } else if (typeof data === \"string\") {\n                this.setData({ code: data } as D);\n                await this.newNode(data, this._.voices);\n            } else if (typeof data === \"number\") {\n                this._.voices = Math.max(0, ~~data);\n            } else if (isMIDIEvent(data)) {\n                if (this._.node) this._.node.midiMessage(data);\n            } else if (typeof data === \"object\") {\n                if (this._.node) {\n                    for (const key in data) {\n                        try {\n                            const bpf = decodeLine((data as Record<string, TBPF>)[key]);\n                            this.applyBPF(this._.node.parameters.get(key), bpf);\n                        } catch (e) {\n                            this.error(e.message);\n                        }\n                    }\n                }\n            }\n        } else if (this._.node) {\n            const con = this.inletAudioConnections[inlet].node;\n            if (con instanceof AudioParam) {\n                try {\n                    const bpf = decodeLine(data as TBPF);\n                    this.applyBPF(con, bpf);\n                } catch (e) {\n                    this.error(e.message);\n                }\n            }\n        }\n    };\n    handleDestroy = () => {\n        const { merger, node } = this._;\n        if (merger) merger.disconnect();\n        if (node) {\n            node.disconnect();\n            node.destroy();\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", this.handlePreInit);\n        this.on(\"postInit\", this.handlePostInit);\n        this.on(\"updateArgs\", this.handleUpdateArgs);\n        this.on(\"inlet\", this.handleInlet);\n        this.on(\"destroy\", this.handleDestroy);\n    }\n}\n","import type { TAudioNodeOutletConnection } from \"../../types\";\nimport type { IArgsMeta, IOutletsMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport DefaultObject from \"../base/DefaultObject\";\n\ninterface P {\n    description: string;\n}\n\nexport default class AudioIn extends DefaultObject<{}, {}, [], [any], [number], P> {\n    static package = \"SubPatcher\";\n    static description = \"Patcher inlet (audio)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Inlet index (1-based)\"\n    }];\n    static props: IPropsMeta<P> = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static outlets: IOutletsMeta = [{\n        type: \"signal\",\n        description: \"\"\n    }];\n    outletAudioConnections: TAudioNodeOutletConnection[] = [{ node: undefined as GainNode, index: 0 }];\n    private _duringInit = true;\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 0;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", () => {\n            this._duringInit = false;\n            this.connectAudio();\n            this.patcher.connectAudioInlet(this.index - 1);\n            this.patcher.inspectAudioIO();\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.disconnectAudioInlet(index - 1);\n                this.disconnectAudio();\n                if (!this.patcher.inletAudioConnections[index - 1]) {\n                    const node = this.audioCtx.createGain();\n                    node.channelInterpretation = \"discrete\";\n                    this.patcher.inletAudioConnections[index - 1] = { node, index: 0 };\n                }\n                const { node } = this.patcher.inletAudioConnections[index - 1];\n                this.outletAudioConnections[0].node = node;\n                if (!this._duringInit) {\n                    this.connectAudio();\n                    this.patcher.connectAudioInlet(index - 1);\n                    this.patcher.inspectAudioIO();\n                    this.emitPatcherChangeIO();\n                }\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const outlet0 = { ...this.meta.outlets[0] };\n            if (typeof props.description === \"string\") outlet0.description = props.description;\n            this.setMeta({ outlets: [outlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"destroy\", () => {\n            this.patcher.inspectAudioIO();\n            this.emitPatcherChangeIO();\n        });\n    }\n}\n","import type { TAudioNodeInletConnection } from \"../../types\";\nimport type { IArgsMeta, IInletsMeta, IPropsMeta } from \"../base/AbstractObject\";\nimport DefaultObject from \"../base/DefaultObject\";\n\nexport default class AudioOut extends DefaultObject<{}, { index: number }, [any], [], [number], { description: string }> {\n    static package = \"SubPatcher\";\n    static description = \"Patcher outlet (audio)\";\n    static args: IArgsMeta = [{\n        type: \"number\",\n        optional: false,\n        default: 1,\n        description: \"Outlet index (1-based)\"\n    }];\n    static props: IPropsMeta = {\n        description: {\n            type: \"string\",\n            default: \"\",\n            description: \"Description text\"\n        }\n    };\n    static inlets: IInletsMeta = [{\n        type: \"signal\",\n        description: \"\",\n        isHot: true\n    }];\n    inletAudioConnections: TAudioNodeInletConnection[] = [{ node: undefined as GainNode, index: 0 }];\n    private _duringInit = true;\n    protected get index() {\n        return Math.max(1, ~~this.box.args[0] || 1);\n    }\n    protected _ = { index: this.index };\n    protected emitPatcherChangeIO = () => this.patcher.changeIO();\n    subscribe() {\n        super.subscribe();\n        this.on(\"metaUpdated\", this.emitPatcherChangeIO);\n        this.on(\"preInit\", () => {\n            this.inlets = 1;\n            this.outlets = 0;\n        });\n        this.on(\"postInit\", () => {\n            this._duringInit = false;\n            this.connectAudio();\n            this.patcher.connectAudioInlet(this.state.index - 1);\n            this.patcher.inspectAudioIO();\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"updateArgs\", () => {\n            const { index } = this;\n            if (index !== this._.index) {\n                this._.index = index;\n                this.patcher.disconnectAudioOutlet(index - 1);\n                this.disconnectAudio();\n                if (!this.patcher.outletAudioConnections[index - 1]) {\n                    const node = this.audioCtx.createGain();\n                    node.channelInterpretation = \"discrete\";\n                    this.patcher.outletAudioConnections[index - 1] = { node, index: 0 };\n                }\n                const { node } = this.patcher.outletAudioConnections[index - 1];\n                this.inletAudioConnections[0].node = node;\n                if (!this._duringInit) {\n                    this.connectAudio();\n                    this.patcher.connectAudioOutlet(index - 1);\n                    this.patcher.inspectAudioIO();\n                    this.emitPatcherChangeIO();\n                }\n            }\n        });\n        this.on(\"updateProps\", (props) => {\n            const inlet0 = { ...this.meta.inlets[0] };\n            if (typeof props.description === \"string\") inlet0.description = props.description;\n            this.setMeta({ inlets: [inlet0] });\n            this.emitPatcherChangeIO();\n        });\n        this.on(\"destroy\", () => {\n            this.patcher.inspectAudioIO();\n            this.emitPatcherChangeIO();\n        });\n    }\n}\n","import BaseObject from \"../base/BaseObject\";\nimport BPatcherUI from \"./BPatcherUI\";\nimport SubPatcher from \"./SubPatcher\";\n\nexport default class BPatcher extends SubPatcher {\n    static props = BaseObject.props;\n    static UI = BPatcherUI as any;\n}\n","import * as React from \"react\";\nimport PatcherEditorUI from \"../../../components/editors/PatcherEditorUI\";\nimport BaseUI, { BaseUIState } from \"../base/BaseUI\";\nimport PatcherUI from \"../../../components/editors/patcher/PatcherUI\";\nimport type SubPatcher from \"./SubPatcher\";\nimport type PatcherEditor from \"../../patcher/PatcherEditor\";\nimport type { SubPatcherUIState } from \"./SubPatcherUI\";\nimport \"./BPatcherUI.scss\";\n\nexport default class BPatcherUI extends BaseUI<SubPatcher, {}, SubPatcherUIState> {\n    static sizing: \"horizontal\" | \"vertical\" | \"both\" | \"ratio\" = \"both\";\n    static defaultSize: [number, number] = [210, 90];\n    state: SubPatcherUIState & BaseUIState = {\n        ...this.state,\n        patcher: this.object._.patcher,\n        timestamp: performance.now(),\n        editor: undefined\n    };\n    handleChanged = () => {\n        if (this.state.editor.isTemporary) this.state.editor.save();\n    };\n    componentDidMount() {\n        super.componentDidMount();\n        if (this.state.patcher) {\n            const Editor = this.editor.constructor as typeof PatcherEditor;\n            const editor = new Editor(this.object._.patcher);\n            this.setState({ editor });\n            editor.init();\n            editor.on(\"changed\", this.handleChanged);\n        }\n    }\n    componentDidUpdate(prevProps: any, prevState: Readonly<SubPatcherUIState & BaseUIState>) {\n        if (prevState.patcher !== this.state.patcher) {\n            if (this.state.editor) {\n                this.state.editor.off(\"changed\", this.handleChanged);\n                this.state.editor.destroy();\n            }\n            if (this.state.patcher) {\n                const Editor = this.editor.constructor as typeof PatcherEditor;\n                const editor = new Editor(this.object._.patcher);\n                this.setState({ timestamp: performance.now(), editor });\n                editor.init();\n                editor.on(\"changed\", this.handleChanged);\n            } else {\n                this.setState({ timestamp: performance.now(), editor: undefined });\n            }\n        }\n    }\n    componentWillUnmount() {\n        this.state.editor?.off(\"changed\", this.handleChanged);\n        super.componentWillUnmount();\n    }\n    static dockable = true;\n    render() {\n        if (this.props.inDock) {\n            return (\n                <div style={{ height: \"100%\", width: \"100%\", display: \"flex\" }}>\n                    {\n                        this.state.editor\n                            ? <PatcherEditorUI key={this.state.timestamp} editor={this.state.editor} env={this.env} lang={this.env.language} />\n                            : undefined\n                    }\n                </div>\n            );\n        }\n        const children = (\n            <div style={{ height: \"100%\", width: \"100%\", display: \"flex\" }}>\n                {\n                    this.state.editor\n                        ? <PatcherUI key={this.state.timestamp} editor={this.state.editor} transparent runtime />\n                        : undefined\n                }\n            </div>\n        );\n        return <BaseUI {...this.props} children={children} />;\n    }\n}\n","import PatcherAudio from \"../../audio/PatcherAudio\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport DefaultObject from \"../base/DefaultObject\";\nimport BufferUI, { BufferUIState } from \"./BufferUI\";\nimport type { ProjectFileEventMap } from \"../../file/AbstractProjectFile\";\nimport type PersistentProjectFile from \"../../file/PersistentProjectFile\";\nimport type TempAudioFile from \"../../audio/TempAudioFile\";\nimport type { IArgsMeta, IInletsMeta, IOutletsMeta } from \"../base/AbstractObject\";\n\ninterface IS {\n    key: string;\n    audio: PatcherAudio;\n    file: PersistentProjectFile | TempAudioFile;\n    numberOfChannels: number;\n    length: number;\n    sampleRate: number;\n}\n\nexport default class Buffer extends DefaultObject<{}, {}, [Bang | File | ArrayBuffer | AudioBuffer | PatcherAudio, File | ArrayBuffer | AudioBuffer | PatcherAudio, string | number], [PatcherAudio, Bang], [string | number, number, number, number], {}, BufferUIState> {\n    static package = \"WebAudio\";\n    static icon = \"volume up\" as const;\n    static author = \"Fr0stbyteR\";\n    static version = \"1.0.0\";\n    static description = \"Audio File Decoder\";\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"Bang to output stored buffer, file to decode, AudioBuffer or PatcherAudio to store then output it as PatcherAudio.\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"File to decode, AudioBuffer or PatcherAudio to store the buffer.\"\n    }, {\n        isHot: false,\n        type: \"anything\",\n        description: \"Set variable name.\"\n    }];\n    static outlets: IOutletsMeta = [{\n        type: \"anything\",\n        description: \"PatcherAudio\"\n    }, {\n        type: \"bang\",\n        description: \"Output a bang while the PatcherAudio buffer object is loaded/changed.\"\n    }];\n    static args: IArgsMeta = [{\n        type: \"anything\",\n        optional: true,\n        description: \"Variable name\"\n    }, {\n        type: \"number\",\n        optional: true,\n        description: \"Initialize buffer's number of channels\"\n    }, {\n        type: \"number\",\n        optional: true,\n        description: \"Initialize buffer's length in samples\"\n    }, {\n        type: \"number\",\n        optional: true,\n        description: \"Initialize buffer's sample rate\"\n    }];\n    static UI = BufferUI;\n    _: IS = { key: this.box.args[0]?.toString(), audio: undefined, file: undefined, numberOfChannels: 1, length: this.audioCtx.sampleRate, sampleRate: this.audioCtx.sampleRate };\n    subscribe() {\n        super.subscribe();\n        const assertBuffer = (audio: PatcherAudio) => {\n            if (!audio) return false;\n            const { numberOfChannels, length, sampleRate } = this._;\n            return audio.numberOfChannels === numberOfChannels && audio.length === length && audio.sampleRate === sampleRate;\n        };\n        const handleFilePathChanged = () => {\n            this._.key = this._.file?.projectPath;\n        };\n        const handleSaved = async (e: ProjectFileEventMap[\"saved\"]) => {\n            if (e.instance === this._.audio) return;\n            await reload();\n        };\n        const subsribeItem = async () => {\n            const { audio, file } = this._;\n            await audio.addObserver(this);\n            if (file) {\n                file.on(\"destroyed\", reload);\n                file.on(\"nameChanged\", handleFilePathChanged);\n                file.on(\"pathChanged\", handleFilePathChanged);\n                file.on(\"saved\", handleSaved);\n            }\n        };\n        const unsubscribeItem = async () => {\n            const { audio, file } = this._;\n            if (file) {\n                file.off(\"destroyed\", reload);\n                file.off(\"nameChanged\", handleFilePathChanged);\n                file.off(\"pathChanged\", handleFilePathChanged);\n                file.off(\"saved\", handleSaved);\n            }\n            await audio.removeObserver(this);\n        };\n        const reload = async () => {\n            if (this._.audio) await unsubscribeItem();\n            const { key } = this._;\n            let audio: PatcherAudio;\n            try {\n                const { item, newItem } = await this.getSharedItem(key, \"audio\", async () => {\n                    const { numberOfChannels, length, sampleRate } = this._;\n                    audio = await PatcherAudio.fromSilence({ env: this.env, project: this.patcher.project }, numberOfChannels, length, sampleRate);\n                    return audio;\n                });\n                if (newItem) {\n                    audio.file = item;\n                } else {\n                    audio = await item.instantiate({ env: this.env, project: this.patcher.project }) as PatcherAudio;\n                }\n                this._.audio = audio;\n                this._.file = item;\n                this.updateUI({ audio });\n            } catch (error) {\n                this.error(error);\n            } finally {\n                await subsribeItem();\n                this.outlet(1, new Bang());\n            }\n        };\n        this.on(\"preInit\", () => {\n            this.inlets = 3;\n            this.outlets = 2;\n        });\n        this.on(\"updateArgs\", (args) => {\n            if (!this._.audio) return;\n            const oldKey = this._.key;\n            const key = args[0]?.toString();\n            const numberOfChannels = typeof args[1] === \"number\" ? ~~args[1] : 1;\n            const length = typeof args[2] === \"number\" ? ~~args[2] : this.audioCtx.sampleRate;\n            const sampleRate = typeof args[3] === \"number\" ? ~~args[3] : this.audioCtx.sampleRate;\n            Object.assign(this._, { key, numberOfChannels, length, sampleRate });\n            if (key !== oldKey || !assertBuffer(this._.audio)) {\n                reload();\n            }\n        });\n        this.on(\"postInit\", reload);\n        this.on(\"inlet\", async ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (!isBang(data)) {\n                    if (data instanceof PatcherAudio) {\n                        this._.audio.setAudio(data);\n                    } else if (data instanceof AudioBuffer) {\n                        const audio = await PatcherAudio.fromNativeAudioBuffer({ env: this.env, project: this.patcher.project }, data);\n                        this._.audio.setAudio(audio);\n                    } else {\n                        let audioBuffer: AudioBuffer;\n                        try {\n                            const ab = data instanceof ArrayBuffer ? data : await (data as File).arrayBuffer();\n                            audioBuffer = await this.patcher.audioCtx.decodeAudioData(ab);\n                        } catch (e) {\n                            this.error(\"Decode File failed.\");\n                            return;\n                        }\n                        const audio = await PatcherAudio.fromNativeAudioBuffer({ env: this.env, project: this.patcher.project }, audioBuffer);\n                        this._.audio.setAudio(audio);\n                    }\n                }\n                this.outlet(0, this._.audio);\n            } else if (inlet === 1) {\n                if (data instanceof PatcherAudio) {\n                    this._.audio.setAudio(data);\n                } else if (data instanceof AudioBuffer) {\n                    const audio = await PatcherAudio.fromNativeAudioBuffer({ env: this.env, project: this.patcher.project }, data);\n                    this._.audio.setAudio(audio);\n                } else {\n                    let audioBuffer: AudioBuffer;\n                    try {\n                        const ab = data instanceof ArrayBuffer ? data : await (data as File).arrayBuffer();\n                        audioBuffer = await this.patcher.audioCtx.decodeAudioData(ab);\n                    } catch (e) {\n                        this.error(\"Decode File failed.\");\n                        return;\n                    }\n                    const audio = await PatcherAudio.fromNativeAudioBuffer({ env: this.env, project: this.patcher.project }, audioBuffer);\n                    this._.audio.setAudio(audio);\n                }\n            } else if (inlet === 2) {\n                if (typeof data === \"string\" || typeof data === \"number\") {\n                    this._.key = data?.toString();\n                    reload();\n                }\n            }\n        });\n        this.on(\"destroy\", unsubscribeItem);\n    }\n}\n","import * as React from \"react\";\nimport { Modal, StrictModalProps } from \"semantic-ui-react\";\nimport AudioEditorUI from \"../../../components/editors/audio/AudioEditorUI\";\nimport AudioEditor from \"../../audio/AudioEditor\";\nimport DefaultPopupUI, { DefaultPopupUIState, DefaultPopupUIProps } from \"../base/DefaultPopupUI\";\nimport type PatcherAudio from \"../../audio/PatcherAudio\";\nimport type Buffer from \"./Buffer\";\n\nexport interface BufferUIState {\n    audio: PatcherAudio;\n    timestamp: number;\n    editor: AudioEditor;\n    dockEditor: AudioEditor;\n}\n\nexport default class BufferUI extends DefaultPopupUI<Buffer, {}, BufferUIState> {\n    state: BufferUIState & DefaultPopupUIState = {\n        ...this.state,\n        audio: this.object._.audio,\n        timestamp: performance.now(),\n        editor: undefined,\n        dockEditor: undefined\n    };\n    static dockable = true;\n    async loadEditor() {\n        const key = this.props.inDock ? \"editor\" : \"dockEditor\";\n        const editor = new AudioEditor(this.object._.audio);\n        await editor.init();\n        editor.on(\"changed\", this.handleChanged);\n        this.setState({ timestamp: performance.now(), [key as \"editor\"]: editor }, () => editor.setActive());\n    }\n    unloadEditor() {\n        const key = this.props.inDock ? \"editor\" : \"dockEditor\";\n        const editor = this.state[key];\n        if (!editor) return;\n        editor.off(\"changed\", this.handleChanged);\n        editor.destroy();\n        this.setState({ timestamp: performance.now(), [key as \"editor\"]: undefined }, () => this.props.editor.setActive());\n    }\n    handleChanged = () => {\n        const editor = this.props.inDock ? this.state.editor : this.state.dockEditor;\n        if (editor.isTemporary) editor.save();\n    };\n    handleDoubleClick = async () => {\n        if (!this.editor.state.locked) return;\n        if (!this.state.audio) return;\n        this.unloadEditor();\n        await this.loadEditor();\n        this.setState({ modalOpen: true });\n    };\n    handleClose = () => {\n        this.unloadEditor();\n        this.setState({ modalOpen: false });\n    };\n    handleMouseDownModal = (e: React.MouseEvent) => e.stopPropagation();\n    componentDidMount() {\n        super.componentDidMount();\n        if (this.props.inDock) this.loadEditor();\n    }\n    componentDidUpdate(prevProps: Readonly<DefaultPopupUIProps>, prevState: Readonly<BufferUIState & DefaultPopupUIState>) {\n        const key = this.props.inDock ? \"editor\" : \"dockEditor\";\n        const editor = this.state[key];\n        if (prevState.audio !== this.state.audio) {\n            if (editor) {\n                this.unloadEditor();\n                this.loadEditor();\n            }\n        }\n        if (prevProps.inDock !== this.props.inDock) {\n            if (this.props.inDock) {\n                this.loadEditor();\n            } else {\n                if (editor) {\n                    this.unloadEditor();\n                }\n            }\n        }\n        if (editor) {\n            if (prevState.width !== this.state.width || prevState.height !== this.state.height) {\n                editor.onUiResized();\n            }\n        }\n        super.componentDidUpdate(prevProps, prevState);\n    }\n    componentWillUnmount() {\n        this.unloadEditor();\n        super.componentWillUnmount();\n    }\n    render() {\n        const editor = this.props.inDock ? this.state.editor : this.state.dockEditor;\n        const content = <div className=\"editor-container\" style={{ height: \"100%\", width: \"100%\", display: \"flex\", position: \"relative\" }}>\n            {\n                editor\n                    ? <AudioEditorUI key={this.state.timestamp} editor={editor} env={this.env} lang={this.env.language} />\n                    : undefined\n            }\n        </div>;\n        const children = (\n            <Modal.Content style={{ height: \"100%\", width: \"100%\", position: \"relative\" }} onMouseDown={this.handleMouseDownModal}>\n                {content}\n            </Modal.Content>\n        );\n        if (this.props.inDock) return children;\n        const containerProps = { ...this.props.containerProps };\n        if (!containerProps.onDoubleClick) containerProps.onDoubleClick = this.handleDoubleClick;\n        const modalProps: StrictModalProps & { onKeyDown: any } = { ...this.props.modalProps, children, className: \"audio-editor\", open: this.state.modalOpen, onClose: this.handleClose, onKeyDown: undefined, basic: true, size: \"fullscreen\", closeIcon: true };\n        return <DefaultPopupUI {...this.props} modalProps={modalProps} containerProps={containerProps} />;\n    }\n}\n","import SubPatcher from \"./SubPatcher\";\nimport type Patcher from \"../../patcher/Patcher\";\n// import type { RawPatcher } from \"../../types\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\nimport type PatcherNode from \"../../worklets/PatcherNode\";\n\nexport default class DspSubPatcher extends SubPatcher {\n    type = \"jsaw\" as const;\n    _: SubPatcher[\"_\"] & { node: PatcherNode } = { ...this._, node: undefined };\n    reload = async () => {\n        if (this._.patcher) {\n            this.disconnectAudio();\n            await this.unsubscribePatcher();\n        }\n        // const { key } = this._;\n        let patcher: Patcher;\n        // let rawPatcher: RawPatcher;\n        try {\n            patcher = new this.Patcher({ env: this.patcher.env, project: this.patcher.project });\n            await patcher.load(this.data, this.type);\n            this._.node = await patcher.getPatcherNode();\n            this._.patcher = patcher;\n            this.updateUI({ patcher });\n        } catch (error) {\n            this.error(error);\n        } finally {\n            this.handlePatcherIOChanged(this._.patcher.meta);\n            this.subscribePatcher();\n            this.handlePatcherGraphChanged();\n            this.connectAudio();\n        }\n    };\n    handlePatcherChanged = () => {\n        const rawPatcher = this._.patcher.toSerializable();\n        this.setData(rawPatcher);\n        this.patcher.emit(\"changed\");\n    };\n    handlePatcherIOChanged = (meta: IJSPatcherObjectMeta) => {\n        this.inlets = meta.inlets.length;\n        this.outlets = meta.outlets.length;\n        const { inlets, outlets } = meta;\n        const { node } = this._;\n        this.inletAudioConnections = new Array(inlets).fill(null).map((v, index) => ({ node, index }));\n        this.outletAudioConnections = new Array(outlets).fill(null).map((v, index) => ({ node, index }));\n        this.setMeta({ ...this.meta, inlets, outlets, args: SubPatcher.args });\n    };\n}\n","import FaustNode, { FaustNodeInternalState } from \"../faust/FaustNode\";\nimport SubPatcherUI from \"./SubPatcherUI\";\nimport type Patcher from \"../../patcher/Patcher\";\nimport type { ProjectFileEventMap } from \"../../file/AbstractProjectFile\";\nimport type { RawPatcher } from \"../../types\";\nimport type { IJSPatcherObjectMeta } from \"../base/AbstractObject\";\n\ninterface InternalState extends FaustNodeInternalState {\n    patcher: Patcher;\n    key: string;\n    voices: number;\n    code: string;\n}\nexport default class FaustPatcher extends FaustNode<Partial<RawPatcher>, {}, [string, number], { patcher: Patcher }> {\n    static package = \"SubPatcher\";\n    static description = \"Faust Sub-patcher, compiled to AudioNode\";\n    static args: IJSPatcherObjectMeta[\"args\"] = [{\n        type: \"string\",\n        optional: true,\n        default: \"\",\n        description: \"Name of the subpatcher\"\n    }, {\n        type: \"number\",\n        optional: true,\n        default: 0,\n        description: \"Polyphonic instrument voices count\"\n    }];\n    static UI = SubPatcherUI;\n    _: InternalState = {\n        merger: undefined,\n        splitter: undefined,\n        node: undefined,\n        patcher: undefined,\n        key: this.box.args[0],\n        code: undefined,\n        voices: ~~Math.max(0, this.box.args[1])\n    };\n    type: \"faust\" | \"gen\" = \"faust\";\n    handleFilePathChanged = () => {\n        this._.key = this._.patcher.file.projectPath;\n    };\n    handleSaved = (e: ProjectFileEventMap[\"saved\"]) => {\n        if (e.instance === this._.patcher) return;\n        this.reload();\n    };\n    subscribePatcher = async () => {\n        const { patcher } = this._;\n        if (patcher) {\n            await patcher.addObserver(this);\n            patcher.on(\"graphChanged\", this.handleGraphChanged);\n            patcher.on(\"changed\", this.handlePatcherChanged);\n            const { file } = patcher;\n            if (file) {\n                file.on(\"destroyed\", this.reload);\n                file.on(\"nameChanged\", this.handleFilePathChanged);\n                file.on(\"pathChanged\", this.handleFilePathChanged);\n                file.on(\"saved\", this.handleSaved);\n            }\n        }\n    };\n    unsubscribePatcher = async () => {\n        const { patcher } = this._;\n        if (patcher) {\n            patcher.off(\"graphChanged\", this.handleGraphChanged);\n            patcher.off(\"changed\", this.handlePatcherChanged);\n            const { file } = patcher;\n            if (file) {\n                file.off(\"destroyed\", this.reload);\n                file.off(\"nameChanged\", this.handleFilePathChanged);\n                file.off(\"pathChanged\", this.handleFilePathChanged);\n                file.off(\"saved\", this.handleSaved);\n            }\n            await patcher.removeObserver(this); // patcher will be destroyed if no observers left.\n        }\n    };\n    async compilePatcher() {\n        const code = this._.patcher.toFaustDspCode();\n        if (code && code !== this._.code) {\n            this._.code = code;\n            await this.newNode(code, this._.voices);\n        }\n    }\n    handleGraphChanged = async () => {\n        await this.compilePatcher();\n        this.patcher.emit(\"graphChanged\");\n    };\n    handlePatcherChanged = () => {\n        const { patcher } = this._;\n        if (patcher.isTemporary) {\n            const rawPatcher = patcher.toSerializable();\n            this.setData(rawPatcher);\n        }\n        this.patcher.emit(\"changed\");\n    };\n    reload = async () => {\n        if (this._.patcher) {\n            this.disconnectAudio();\n            await this.unsubscribePatcher();\n        }\n        const { key } = this._;\n        let patcher: Patcher;\n        let rawPatcher: RawPatcher;\n        try {\n            const { item, newItem } = await this.getSharedItem(key, \"patcher\", async () => {\n                patcher = new this.Patcher({ env: this.patcher.env, project: this.patcher.project });\n                await patcher.load(this.data, this.type);\n                rawPatcher = patcher.toSerializable();\n                return rawPatcher;\n            });\n            if (newItem) {\n                patcher.file = item;\n                this.setData(rawPatcher);\n            } else {\n                patcher = await item.instantiate({ env: this.patcher.env, project: this.patcher.project }) as Patcher;\n                this.setData(patcher.toSerializable());\n            }\n            this._.patcher = patcher;\n            this.updateUI({ patcher });\n        } catch (error) {\n            this.error(error);\n        } finally {\n            await this.subscribePatcher();\n            await this.handleGraphChanged();\n            this.connectAudio();\n        }\n    };\n    handlePreInit = () => {};\n    handleUpdateArgs = async (args: Partial<[string, number]>): Promise<void> => {\n        if (!this._.patcher) return;\n        const { voices, key } = this._;\n        let newKey = key;\n        let newVoices = voices;\n        if (typeof args[0] === \"string\" || typeof args[0] === \"undefined\") {\n            newKey = args[0];\n            if (newKey !== key) this._.key = newKey;\n        }\n        if (typeof args[1] === \"number\") {\n            newVoices = ~~Math.max(0, args[1]);\n            this._.voices = newVoices;\n        }\n        if (newKey !== key) {\n            await this.reload();\n        } else if (newVoices !== voices) {\n            this.disconnectAudio();\n            await this.compilePatcher();\n            this.connectAudio();\n        }\n    };\n    handlePostInit = this.reload;\n    subscribe() {\n        super.subscribe();\n        this.on(\"destroy\", this.unsubscribePatcher);\n    }\n}\n","import FaustPatcher from \"./FaustPatcher\";\n\nexport default class GenPatcher extends FaustPatcher {\n    static description = \"Gen Sub-patcher, compiled to AudioNode\";\n    type: \"faust\" | \"gen\" = \"gen\";\n}\n","import generateDefaultObject from \"../base/generateDefaultObject\";\nimport In from \"../jsaw/In\";\nimport type BaseObject from \"../base/BaseObject\";\n\nexport default generateDefaultObject(In as typeof BaseObject);\n","import generateDefaultObject from \"../base/generateDefaultObject\";\nimport Out from \"../jsaw/Out\";\nimport type BaseObject from \"../base/BaseObject\";\n\nexport default generateDefaultObject(Out as typeof BaseObject);\n","import TransmitterNode from \"../../worklets/Transmitter\";\nimport PatcherAudio from \"../../audio/PatcherAudio\";\nimport OperableAudioBuffer from \"../../audio/OperableAudioBuffer\";\nimport DefaultObject from \"../base/DefaultObject\";\nimport type { IInletsMeta, IOutletsMeta, IPropsMeta } from \"../base/AbstractObject\";\n\ntype I = [boolean | number | PatcherAudio, boolean, number, number];\ninterface P {\n    mono: boolean;\n    channelOffset: number;\n    loop: boolean;\n    loopStart: number;\n    loopEnd: number;\n    append: boolean;\n}\ninterface IS {\n    dummyNode: ConstantSourceNode;\n    node: TransmitterNode;\n    audio: PatcherAudio;\n    // overwrittenAudio: PatcherAudio;\n    recording: boolean;\n    $: number;\n    $start: number;\n    $end: number;\n    inPlace: boolean;\n}\n\nexport default class Record extends DefaultObject<{}, {}, I, [number], [], P> {\n    static description = \"Record audio into an audio buffer\";\n    static icon = \"volume up\" as const;\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"signal\",\n        description: \"signal to record, boolean/number to start/stop, AudioBuffer/PatcherAudio to set buffer\"\n    }, {\n        isHot: false,\n        type: \"boolean\",\n        description: \"loop\"\n    }, {\n        isHot: false,\n        type: \"number\",\n        description: \"loopStart (seconds)\"\n    }, {\n        isHot: false,\n        type: \"number\",\n        description: \"loopEnd (seconds)\"\n    }];\n    static outlets: IOutletsMeta = [{\n        type: \"number\",\n        description: \"sample index writted\"\n    }];\n    static props: IPropsMeta<P> = {\n        mono: {\n            type: \"boolean\",\n            default: false,\n            description: \"Record only one channel\"\n        },\n        channelOffset: {\n            type: \"number\",\n            default: 0,\n            description: \"Record into channels with offset\"\n        },\n        loop: {\n            type: \"boolean\",\n            default: false,\n            description: \"Initial loop, Indicates if the region of audio data designated by loopStart and loopEnd should be played continuously in a loop\"\n        },\n        loopStart: {\n            type: \"number\",\n            default: 0,\n            description: \"An optional playhead position where looping should begin if the loop attribute is true. If <=0 or > duration, loop will end at the end of the buffer.\"\n        },\n        loopEnd: {\n            type: \"number\",\n            default: 0,\n            description: \"An optional playhead position where looping should end if the loop attribute is true. If <=0 or > duration, loop will end at the end of the buffer.\"\n        },\n        append: {\n            type: \"boolean\",\n            default: false,\n            description: \"Allows buffer to growth when recording exceeds the end.\"\n        }\n    };\n    set node(nodeIn: TransmitterNode) {\n        this._.node = nodeIn;\n    }\n    get node() {\n        return this._.node;\n    }\n    _: IS = {\n        node: undefined,\n        audio: undefined,\n        dummyNode: this.audioCtx.createConstantSource(),\n        // overwrittenAudio: undefined,\n        recording: false,\n        $: 0,\n        $start: 0,\n        $end: 0,\n        inPlace: true\n    };\n    handleReceiveBuffer = async (bufferIn: Float32Array[], $total: number) => {\n        if (!this._.recording) return;\n        const { $, audio } = this._;\n        const { length, numberOfChannels, sampleRate } = audio;\n        const mono = this.getProp(\"mono\");\n        const channelOffset = this.getProp(\"channelOffset\");\n        const loop = this.getProp(\"loop\");\n        const append = this.getProp(\"append\");\n        const $start = loop ? this.getProp(\"loopStart\") : 0;\n        if ($start >= length) return;\n        const $end = loop ? Math.max($start, this.getProp(\"loopEnd\")) : length;\n        if ($end === $start) return;\n        const range = $end - $start;\n        const bufferSize = bufferIn[0].length;\n        if (mono) bufferIn.splice(1);\n        if (channelOffset) bufferIn.unshift(...new Array(channelOffset));\n        const $target = $ + bufferSize;\n        if (append && !loop && $target > $end) { // extend current buffer\n            const newLength = 2 ** Math.ceil(Math.log(length + sampleRate) / Math.log(2));\n            const newBuffer = new OperableAudioBuffer({ numberOfChannels, length: newLength, sampleRate });\n            for (let i = 0; i < numberOfChannels; i++) {\n                const channel = newBuffer.getChannelData(i);\n                channel.set(audio.audioBuffer.getChannelData(i));\n                if (bufferIn[i]) channel.set(bufferIn[i], $);\n            }\n            audio.audioBuffer = newBuffer;\n            audio.waveform.update($, newLength);\n            this._.$ = $target;\n        } else {\n            for (let i = 0; i < numberOfChannels; i++) {\n                const channel = audio.audioBuffer.getChannelData(i);\n                if (bufferIn[i]) {\n                    if ($target > $end) {\n                        if (loop) {\n                            const $copyEnd = $start + (($ - $start + bufferSize) % range);\n                            const buffer = bufferSize > range ? bufferIn[i].subarray(bufferSize - range) : bufferIn[i];\n                            const $sSplit = buffer.length - ($copyEnd - $start);\n                            channel.set(buffer.subarray($sSplit), $start);\n                            channel.set(buffer.subarray(0, $sSplit), $);\n                            this._.$ = $copyEnd;\n                            audio.waveform.update($, $end);\n                            audio.waveform.update($start, $copyEnd);\n                        } else {\n                            channel.set(bufferIn[i].subarray(0, $end - $), $);\n                            this._.$ = $end;\n                            audio.waveform.update($, $end);\n                        }\n                    } else {\n                        channel.set(bufferIn[i], $);\n                        this._.$ = $target;\n                        audio.waveform.update($, $target);\n                    }\n                }\n            }\n        }\n        audio.emit(\"setAudio\");\n        audio.emit(\"changed\");\n        this.outlet(0, this._.$);\n        if (!append && !loop && this._.$ === $end) {\n            await this.stop();\n        }\n    };\n    async start() {\n        if (!this.node) return false;\n        this._.$ = this.getProp(\"loop\") ? this.getProp(\"loopStart\") : 0;\n        this._.recording = true;\n        await this.node.reset();\n        await this.node.start();\n        return true;\n    }\n    async stop() {\n        this._.recording = false;\n        if (!this.node) return;\n        await this.node.stop();\n        const { inPlace, $, $end } = this._;\n        if (!inPlace && $ > $end && $ < this._.audio.length) {\n            const [audio] = await this._.audio.split($);\n            this._.audio.setAudio(audio);\n        }\n    }\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", () => {\n            this.inlets = 4;\n            this.outlets = 1;\n        });\n        this.on(\"postInit\", async () => {\n            await TransmitterNode.register(this.audioCtx.audioWorklet);\n            const node = new TransmitterNode(this.audioCtx);\n            node.handleReceiveBuffer = this.handleReceiveBuffer;\n            this.node = node;\n            this._.dummyNode.offset.value = 0;\n            this._.dummyNode.connect(this.node);\n            this._.dummyNode.start();\n            this.disconnectAudioInlet();\n            this.inletAudioConnections = [{ node: this.node, index: 0 }];\n            this._.node = node;\n            this.connectAudioInlet();\n        });\n        this.on(\"inlet\", async ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (typeof data === \"boolean\" || typeof data === \"number\") {\n                    if (data) {\n                        if (!this._.recording) {\n                            await this.start();\n                        }\n                    } else {\n                        if (this._.recording) {\n                            await this.stop();\n                        }\n                    }\n                } else if (data instanceof PatcherAudio) {\n                    this._.audio = data;\n                }\n            } else if (inlet === 1) {\n                if (typeof data === \"boolean\" || typeof data === \"number\") {\n                    this.setProps({ loop: !!data });\n                }\n            } else if (inlet === 2) {\n                if (typeof data === \"number\") {\n                    this.setProps({ loopStart: data });\n                }\n            } else if (inlet === 3) {\n                if (typeof data === \"number\") {\n                    this.setProps({ loopEnd: data });\n                }\n            }\n        });\n        this.on(\"destroy\", async () => {\n            this._.dummyNode.disconnect();\n            if (this._.recording) await this.stop();\n            await this.node.destroy();\n        });\n    }\n}\n","import DefaultObject from \"../base/DefaultObject\";\nimport SubPatcherUI, { SubPatcherUIState } from \"./SubPatcherUI\";\nimport type { ProjectFileEventMap } from \"../../file/AbstractProjectFile\";\nimport type Patcher from \"../../patcher/Patcher\";\nimport type { PatcherEventMap } from \"../../patcher/Patcher\";\nimport type { RawPatcher, PatcherMode } from \"../../types\";\nimport type { IArgsMeta, IJSPatcherObjectMeta } from \"../base/AbstractObject\";\n\nexport default class SubPatcher extends DefaultObject<Partial<RawPatcher>, {}, any[], any[], [string], {}, SubPatcherUIState> {\n    static package = \"SubPatcher\";\n    static description = \"Sub-patcher\";\n    static args: IArgsMeta = [{\n        type: \"string\",\n        optional: true,\n        default: \"\",\n        description: \"Name of the subpatcher\"\n    }];\n    static UI = SubPatcherUI;\n    _ = { patcher: undefined as Patcher, key: this.box.args[0] };\n    type: PatcherMode = \"js\";\n    handlePatcherOutput = ({ outlet, data }: PatcherEventMap[\"dataOutput\"]) => this.outlet(outlet, data);\n    handlePatcherDisconnectAudioInlet = (port: number) => this.disconnectAudioInlet(port);\n    handlePatcherDisconnectAudioOutlet = (port: number) => this.disconnectAudioOutlet(port);\n    handlePatcherConnectAudioInlet = (port: number) => this.connectAudioInlet(port);\n    handlePatcherConnectAudioOutlet = (port: number) => this.connectAudioOutlet(port);\n    handlePatcherIOChanged = (meta: IJSPatcherObjectMeta) => {\n        this.inletAudioConnections = this._.patcher.inletAudioConnections.slice();\n        this.outletAudioConnections = this._.patcher.outletAudioConnections.slice();\n        this.inlets = meta.inlets.length;\n        this.outlets = meta.outlets.length;\n        const { inlets, outlets } = meta;\n        this.setMeta({ ...this.meta, inlets, outlets, args: SubPatcher.args });\n    };\n    handlePatcherGraphChanged = () => {\n        this.patcher.emit(\"graphChanged\");\n    };\n    handlePatcherChanged = () => {\n        const { patcher } = this._;\n        if (patcher.isTemporary) {\n            const rawPatcher = patcher.toSerializable();\n            this.setData(rawPatcher);\n        }\n        this.patcher.emit(\"changed\");\n    };\n    handleFilePathChanged = () => {\n        this._.key = this._.patcher.file.projectPath;\n    };\n    handleSaved = (e: ProjectFileEventMap[\"saved\"]) => {\n        if (e.instance === this._.patcher) return;\n        this.reload();\n    };\n    subscribePatcher = async () => {\n        const { patcher } = this._;\n        if (patcher) {\n            await patcher.addObserver(this);\n            patcher.on(\"dataOutput\", this.handlePatcherOutput);\n            patcher.on(\"disconnectAudioInlet\", this.handlePatcherDisconnectAudioInlet);\n            patcher.on(\"disconnectAudioOutlet\", this.handlePatcherDisconnectAudioOutlet);\n            patcher.on(\"connectAudioInlet\", this.handlePatcherConnectAudioInlet);\n            patcher.on(\"connectAudioOutlet\", this.handlePatcherConnectAudioOutlet);\n            patcher.on(\"ioChanged\", this.handlePatcherIOChanged);\n            patcher.on(\"graphChanged\", this.handlePatcherGraphChanged);\n            patcher.on(\"changed\", this.handlePatcherChanged);\n            const { file } = patcher;\n            if (file) {\n                file.on(\"destroyed\", this.reload);\n                file.on(\"nameChanged\", this.handleFilePathChanged);\n                file.on(\"pathChanged\", this.handleFilePathChanged);\n                file.on(\"saved\", this.handleSaved);\n            }\n        }\n    };\n    unsubscribePatcher = async () => {\n        const { patcher } = this._;\n        if (patcher) {\n            patcher.off(\"dataOutput\", this.handlePatcherOutput);\n            patcher.off(\"disconnectAudioInlet\", this.handlePatcherDisconnectAudioInlet);\n            patcher.off(\"disconnectAudioOutlet\", this.handlePatcherDisconnectAudioOutlet);\n            patcher.off(\"connectAudioInlet\", this.handlePatcherConnectAudioInlet);\n            patcher.off(\"connectAudioOutlet\", this.handlePatcherConnectAudioOutlet);\n            patcher.off(\"ioChanged\", this.handlePatcherIOChanged);\n            patcher.off(\"graphChanged\", this.handlePatcherGraphChanged);\n            patcher.off(\"changed\", this.handlePatcherChanged);\n            const { file } = patcher;\n            if (file) {\n                file.off(\"destroyed\", this.reload);\n                file.off(\"nameChanged\", this.handleFilePathChanged);\n                file.off(\"pathChanged\", this.handleFilePathChanged);\n                file.off(\"saved\", this.handleSaved);\n            }\n            await patcher.removeObserver(this); // patcher will be destroyed if no observers left.\n        }\n    };\n    reload = async () => {\n        if (this._.patcher) {\n            this.disconnectAudio();\n            await this.unsubscribePatcher();\n        }\n        const { key } = this._;\n        let patcher: Patcher;\n        let rawPatcher: RawPatcher;\n        try {\n            const { item, newItem } = await this.getSharedItem(key, \"patcher\", async () => {\n                patcher = new this.Patcher({ env: this.patcher.env, project: this.patcher.project });\n                await patcher.load(this.data, this.type);\n                rawPatcher = patcher.toSerializable();\n                return rawPatcher;\n            });\n            if (newItem) {\n                patcher.file = item;\n                this.setData(rawPatcher);\n            } else {\n                patcher = await item.instantiate({ env: this.patcher.env, project: this.patcher.project }) as Patcher;\n                this.setData(patcher.toSerializable());\n            }\n            this._.patcher = patcher;\n            this.updateUI({ patcher });\n        } catch (error) {\n            this.error(error);\n        } finally {\n            this.handlePatcherIOChanged(this._.patcher.meta);\n            this.subscribePatcher();\n            this.handlePatcherGraphChanged();\n            this.connectAudio();\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"updateArgs\", async (args) => {\n            if (!this._.patcher) return;\n            if (typeof args[0] === \"string\" || typeof args[0] === \"undefined\") {\n                const newKey = args[0];\n                if (newKey !== this._.key) {\n                    this._.key = newKey;\n                    await this.reload();\n                }\n            }\n        });\n        this.on(\"postInit\", this.reload);\n        this.on(\"inlet\", ({ data, inlet }) => this._.patcher.fn(data, inlet));\n        this.on(\"destroy\", this.unsubscribePatcher);\n    }\n}\n","import type { WebAudioModule, WamNode } from \"wamsdk/src/api\";\nimport Bang, { isBang } from \"../base/Bang\";\nimport BaseObject from \"../base/BaseObject\";\nimport DOMUI, { DOMUIState } from \"../base/DOMUI\";\nimport { isMIDIEvent, decodeLine } from \"../../../utils/utils\";\nimport type { TMIDIEvent, TBPF } from \"../../types\";\nimport type { IInletMeta, IOutletMeta, IInletsMeta, IOutletsMeta, IArgsMeta } from \"../base/AbstractObject\";\n\nclass PluginUI extends DOMUI<Plugin> {\n    state: DOMUIState = { ...this.state, children: this.object._.children };\n}\n\nexport interface IS {\n    splitter: ChannelSplitterNode;\n    merger: ChannelMergerNode;\n    node: WamNode;\n    plugin: WebAudioModule;\n    children: ChildNode[];\n}\n\ntype I = [Bang | number | string | TMIDIEvent | Record<string, TBPF>, ...TBPF[]];\ntype O = (null | WamNode)[];\nexport default class Plugin extends BaseObject<{}, {}, I, O, [string], {}, DOMUIState> {\n    static description = \"Dynamically load WebAudioModule\";\n    static inlets: IInletsMeta = [{\n        isHot: true,\n        type: \"anything\",\n        description: \"A bang to output the instance, url to load, or a param-bpf map, or a MIDI event\"\n    }];\n    static outlets: IOutletsMeta = [{\n        type: \"object\",\n        description: \"WebAudioModule instance\"\n    }];\n    static args: IArgsMeta = [{\n        type: \"string\",\n        optional: false,\n        description: \"WebAudioModule URL\"\n    }];\n    static UI = PluginUI;\n    _: IS = { merger: undefined, splitter: undefined, node: undefined, plugin: undefined, children: [] };\n    async load(url: string) {\n        let WAPCtor: typeof WebAudioModule;\n        let plugin: WebAudioModule;\n        try {\n            WAPCtor = (await import(/* webpackIgnore: true */url)).default;\n        } catch (e) {\n            this.error(e.message);\n        }\n        let node: AudioNode;\n        let element: HTMLElement;\n        try {\n            plugin = await WAPCtor.createInstance(this.audioCtx);\n            node = plugin.audioNode;\n            element = await plugin.createGui() as HTMLElement;\n        } catch (e) {\n            if (e) this.error((e as Error).message);\n            return;\n        }\n        this.disconnectAudio();\n        this.handleDestroy();\n        element.style.width = \"100%\";\n        element.style.height = \"100%\";\n        element.style.position = \"absolute\";\n        this._.children = [element];\n        this.updateUI({ children: this._.children });\n        node.channelInterpretation = \"discrete\";\n        const inlets = node.numberOfInputs;\n        const outlets = node.numberOfOutputs;\n        Object.assign(this._, { node, plugin });\n        const Ctor = this.constructor as typeof Plugin;\n        const firstInletMeta = Ctor.inlets[0];\n        const firstInletSignalMeta: IInletMeta = { ...firstInletMeta, type: \"signal\" };\n        const inletMeta: IInletMeta = { isHot: false, type: \"signal\", description: \"Node connection\" };\n        const audioParamInletMeta: IInletMeta = { isHot: false, type: \"number\", description: \": bpf or node connection\" };\n        const outletMeta: IOutletMeta = { type: \"signal\", description: \"Node connection\" };\n        const lastOutletMeta = Ctor.outlets[0];\n        const factoryMeta = Ctor.meta as this[\"meta\"];\n        for (let i = 0; i < inlets; i++) {\n            if (i === 0) factoryMeta.inlets[i] = inlets ? firstInletSignalMeta : firstInletMeta;\n            else factoryMeta.inlets[i] = inletMeta;\n            this.inletAudioConnections[i] = { node, index: i };\n        }\n        for (let i = 0; i < outlets; i++) {\n            factoryMeta.outlets[i] = outletMeta;\n            this.outletAudioConnections[i] = { node, index: i };\n        }\n        factoryMeta.outlets[outlets] = lastOutletMeta;\n        const paramInfo = await plugin.audioNode.getParameterInfo();\n        const params = Object.keys(paramInfo);\n        for (let i = inlets || 1; i < (inlets || 1) + params.length; i++) {\n            const path = params[i - (inlets || 1)];\n            const param = paramInfo[path];\n            const { defaultValue, minValue, maxValue } = param;\n            factoryMeta.inlets[i] = { ...audioParamInletMeta, description: `${path}${audioParamInletMeta.description}: ${defaultValue} (${minValue} - ${maxValue})` };\n        }\n        this.setMeta(factoryMeta);\n        this.inlets = (inlets || 1) + params.length;\n        this.outlets = outlets + 1;\n        this.connectAudio();\n        this.outlet(this.outlets - 1, this._.node);\n    }\n    handleDestroy = () => {\n        const { node, plugin } = this._;\n        if (node) {\n            node.disconnect();\n            node.disconnectEvents();\n        }\n        if (plugin) {\n            plugin.audioNode.destroy();\n            if (this._.children?.[0]) plugin.destroyGui(this._.children[0] as Element);\n        }\n    };\n    handlePreInit = () => undefined as any;\n    handlePostInit = async () => {\n        await this.handleUpdateArgs(this.args);\n    };\n    handleUpdateArgs = async (args: Partial<[string]>): Promise<void> => {\n        if (typeof args[0] === \"string\") await this.load(this.box.args[0]);\n    };\n    handleInlet = async ({ data, inlet }: { data: I[number]; inlet: number }) => {\n        if (inlet === 0) {\n            if (isBang(data)) {\n                if (this._.node) this.outlet(this.outlets - 1, this._.node);\n            } else if (typeof data === \"string\") {\n                await this.load(data);\n            } else if (isMIDIEvent(data)) {\n                const bytes = Array.from(data) as [number, number, number];\n                if (this._.node) this._.node.scheduleEvents({ type: \"wam-midi\", data: { bytes }, time: this.audioCtx.currentTime });\n            } else if (typeof data === \"object\") {\n                if (this._.node) {\n                    for (const key in data) {\n                        try {\n                            const bpf = decodeLine((data as Record<string, TBPF>)[key]);\n                            let t = 0;\n                            bpf.forEach((a) => {\n                                if (a.length > 1) t += a[1];\n                                this._.node.scheduleEvents({ type: \"wam-automation\", data: { id: key, value: a[0], normalized: false }, time: this.audioCtx.currentTime + t });\n                            });\n                            // else this._.node.setParam(key, bpf[bpf.length - 1][0]);\n                        } catch (e) {\n                            this.error(e.message);\n                        }\n                    }\n                }\n            }\n        } else {\n            const con = this.inletAudioConnections[inlet].node;\n            if (con instanceof AudioParam) {\n                try {\n                    const bpf = decodeLine(data as TBPF);\n                    this.applyBPF(con, bpf);\n                } catch (e) {\n                    this.error(e.message);\n                }\n            }\n        }\n    };\n    subscribe() {\n        super.subscribe();\n        this.on(\"preInit\", this.handlePreInit);\n        this.on(\"postInit\", this.handlePostInit);\n        this.on(\"updateArgs\", this.handleUpdateArgs);\n        this.on(\"inlet\", this.handleInlet);\n        this.on(\"destroy\", this.handleDestroy);\n    }\n}\n","import In from \"./In\";\nimport Out from \"./Out\";\nimport AudioIn from \"./AudioIn\";\nimport AudioOut from \"./AudioOut\";\nimport SubPatcher from \"./SubPatcher\";\nimport FaustPatcher from \"./FaustPatcher\";\nimport GenPatcher from \"./GenPatcher\";\nimport BPatcher from \"./BPatcher\";\nimport DspSubPatcher from \"./DspSubPatcher\";\nimport Buffer from \"./Buffer\";\nimport Record from \"./Record\";\nimport Plugin from \"./WebAudioModule\";\n\nexport default async () => ({\n    in: In,\n    out: Out,\n    \"in~\": AudioIn,\n    \"out~\": AudioOut,\n    patcher: SubPatcher,\n    p: SubPatcher,\n    pdsp: DspSubPatcher,\n    faustPatcher: FaustPatcher,\n    pfaust: FaustPatcher,\n    gen: GenPatcher,\n    bpatcher: BPatcher,\n    \"buffer~\": Buffer,\n    \"record~\": Record,\n    \"plugin~\": Plugin\n});\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".patcher div.box-ui > div.package-subpatcher-bpatcher {\\n  position: relative;\\n  height: 100%;\\n  width: 100%; }\\n  .patcher div.box-ui > div.package-subpatcher-bpatcher > div > div.patcher {\\n    overflow: hidden; }\\n\\n.patcher.locked div.box-ui > div.package-subpatcher-bpatcher {\\n  overflow: hidden; }\\n  .patcher.locked div.box-ui > div.package-subpatcher-bpatcher > div > div.patcher {\\n    overflow: hidden; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/core/objects/main/BPatcherUI.scss\"],\"names\":[],\"mappings\":\"AAAA;EAEQ,kBAAkB;EAClB,YAAY;EACZ,WAAW,EAAA;EAJnB;IAMY,gBAAgB,EAAA;;AAN5B;EAWY,gBAAgB,EAAA;EAX5B;IAagB,gBAAgB,EAAA\",\"sourcesContent\":[\".patcher {\\n    & div.box-ui > div.package-subpatcher-bpatcher {\\n        position: relative;\\n        height: 100%;\\n        width: 100%;\\n        & > div > div.patcher {\\n            overflow: hidden;\\n        }\\n    }\\n    &.locked {\\n        & div.box-ui > div.package-subpatcher-bpatcher {\\n            overflow: hidden;\\n            & > div > div.patcher {\\n                overflow: hidden;\\n            }\\n        }\\n    }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./BPatcherUI.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./BPatcherUI.scss\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["React","Icon","Modal","Dimmer","Loader","Button","DefaultPopupUI","CodePopupUI","state","editorLoaded","code","undefined","setState","modalOpen","handleSave","codeEditor","getValue","monaco","layout","componentDidMount","window","addEventListener","handleResize","reactMonacoEditor","editorJSX","default","componentWillUnmount","removeEventListener","componentDidUpdate","prevProps","prevState","props","inDock","width","height","render","display","flexDirection","flex","overflow","editorLanguage","handleCodeEditorMount","fontSize","padding","handleCloseAndSave","children","innerHeight","handleClose","containerProps","onDoubleClick","handleDoubleClick","modalProps","open","onClose","basic","size","BaseUI","DivContainer","PureComponent","createRef","root","current","forEach","v","appendChild","innerHTML","containerStyle","position","style","ShadowDOMContainer","attachShadow","mode","DOMUI","shadow","BaseObject","EmptyObject","InvalidObject","Func","New","getIO","func","new","isBang","DefaultObject","isMIDIEvent","decodeLine","FaustNodeUI","object","setData","newNode","_","voices","data","FaustNode","merger","splitter","node","args","Math","max","inlet","outlet","outlets","midiMessage","key","bpf","applyBPF","parameters","get","e","error","message","con","inletAudioConnections","AudioParam","disconnect","destroy","getFaustNode","audioCtx","faust","env","getFaust","getNode","useWorklet","compile","Error","channelInterpretation","dspCode","patcher","inlets","getNumInputs","getNumOutputs","createChannelMerger","connect","createChannelSplitter","compiled","disconnectAudio","handleDestroy","Object","assign","Ctor","constructor","firstInletMeta","firstInletSignalMeta","type","inletMeta","isHot","description","audioParamInletMeta","outletMeta","lastOutletMeta","factoryMeta","meta","i","index","outletAudioConnections","audioParams","k","push","length","path","param","defaultValue","minValue","maxValue","setMeta","connectAudio","subscribe","on","handlePreInit","handlePostInit","handleUpdateArgs","handleInlet","optional","AudioIn","changeIO","box","emitPatcherChangeIO","_duringInit","connectAudioInlet","inspectAudioIO","disconnectAudioInlet","createGain","outlet0","AudioOut","disconnectAudioOutlet","connectAudioOutlet","inlet0","BPatcherUI","SubPatcher","BPatcher","PatcherEditorUI","PatcherUI","timestamp","performance","now","editor","isTemporary","save","Editor","init","handleChanged","off","language","PatcherAudio","Bang","BufferUI","Buffer","toString","audio","file","numberOfChannels","sampleRate","assertBuffer","handleFilePathChanged","projectPath","handleSaved","instance","reload","subsribeItem","addObserver","unsubscribeItem","removeObserver","item","newItem","getSharedItem","fromSilence","project","instantiate","updateUI","oldKey","setAudio","AudioBuffer","fromNativeAudioBuffer","audioBuffer","ab","ArrayBuffer","arrayBuffer","decodeAudioData","AudioEditorUI","AudioEditor","dockEditor","locked","unloadEditor","loadEditor","stopPropagation","setActive","onUiResized","content","handleMouseDownModal","className","onKeyDown","closeIcon","DspSubPatcher","unsubscribePatcher","Patcher","load","getPatcherNode","handlePatcherIOChanged","subscribePatcher","handlePatcherGraphChanged","rawPatcher","toSerializable","emit","Array","fill","map","SubPatcherUI","FaustPatcher","handleGraphChanged","handlePatcherChanged","compilePatcher","newKey","newVoices","toFaustDspCode","GenPatcher","generateDefaultObject","In","Out","TransmitterNode","OperableAudioBuffer","Record","dummyNode","createConstantSource","recording","$","$start","$end","inPlace","bufferIn","$total","mono","getProp","channelOffset","loop","append","range","bufferSize","splice","unshift","$target","newLength","ceil","log","newBuffer","channel","getChannelData","set","waveform","update","$copyEnd","buffer","subarray","$sSplit","stop","nodeIn","start","reset","split","register","audioWorklet","handleReceiveBuffer","offset","value","setProps","loopStart","loopEnd","port","slice","handlePatcherOutput","handlePatcherDisconnectAudioInlet","handlePatcherDisconnectAudioOutlet","handlePatcherConnectAudioInlet","handlePatcherConnectAudioOutlet","fn","PluginUI","Plugin","plugin","disconnectEvents","audioNode","destroyGui","bytes","from","scheduleEvents","time","currentTime","t","a","id","normalized","url","WAPCtor","element","createInstance","createGui","numberOfInputs","numberOfOutputs","paramInfo","getParameterInfo","params","keys","in","out","p","pdsp","faustPatcher","pfaust","gen","bpatcher"],"sourceRoot":""}