{"version":3,"sources":["webpack://JSPatcher/./src/core/objects/importer/Func.tsx"],"names":["FuncUI","ImportedObjectUI","Func","DefaultObject","Wrapper","outlet","imported","subscribe","on","inlets","outlets","data","inlet","isBang","output","callback","loading","updateUI","name","c","state","path","length","patcher","activeLib","Object","r","reduce","acc","cur","root","e","error","v","constructor","parent","slice","forEach","key","isHot","type","description","optional","varLength"],"mappings":";;;;;;;;;;;;;;;;;AACA;AACA;;AAIA,MAAMA,MAAN,SAAqBC,6DAArB,CAA4C;AAAA;AAAA;;AAAA,0CACzB,mBADyB;AAAA;;AAAA;;AAM7B,MAAMC,IAAN,SAAmBC,gDAAnB,CAA+E;AAAA;AAAA;;AAAA,mCAkB/E;AAAEC,aAAO,EAAE;AAAX,KAlB+E;;AAAA,sCA+B/E,MAAM,KAAKC,MAAL,CAAY,CAAZ,EAAe,KAAKC,QAApB,CA/ByE;AAAA;;AAmB1FC,WAAS,GAAG;AACR,UAAMA,SAAN;AACA,SAAKC,EAAL,CAAQ,UAAR,EAAoB,MAAM;AACtB,WAAKC,MAAL,GAAc,CAAd;AACA,WAAKC,OAAL,GAAe,CAAf;AACH,KAHD;AAIA,SAAKF,EAAL,CAAQ,OAAR,EAAiB,UAAqB;AAAA,UAApB;AAAEG,YAAF;AAAQC;AAAR,OAAoB;;AAClC,UAAIA,KAAK,KAAK,CAAd,EAAiB;AACb,YAAIC,6CAAM,CAACF,IAAD,CAAV,EAAkB,KAAKG,MAAL;AACrB;AACJ,KAJD;AAKH;;AAEDA,QAAM,GAAG;AACL,WAAO,KAAKC,QAAL,EAAP;AACH;;AACD,MAAIC,OAAJ,CAAYA,OAAZ,EAA8B;AAC1B,SAAKC,QAAL,CAAc;AAAED;AAAF,KAAd;AACH;;AACD,MAAIE,IAAJ,GAAW;AACP,UAAMC,CAAC,GAAG,KAAKC,KAAL,CAAWhB,OAArB;AACA,WAAOe,CAAC,CAACE,IAAF,CAAOF,CAAC,CAACE,IAAF,CAAOC,MAAP,GAAgB,CAAvB,CAAP;AACH;;AACD,MAAIhB,QAAJ,GAA6B;AACzB,UAAMa,CAAC,GAAG,KAAKC,KAAL,CAAWhB,OAAX,IAAsB,KAAKmB,OAAL,CAAaC,SAAb,CAAuBC,MAAvD;AACA,QAAIC,CAAJ;;AACA,QAAI;AACAA,OAAC,GAAGP,CAAC,CAACE,IAAF,CAAOM,MAAP,CAAc,CAACC,GAAD,EAAMC,GAAN,KAAcD,GAAG,CAACC,GAAD,CAA/B,EAAsCV,CAAC,CAACW,IAAxC,CAAJ;AACH,KAFD,CAEE,OAAOC,CAAP,EAAU;AACR,WAAKC,KAAL,CAAWD,CAAX;AACH;;AACD,WAAOL,CAAP;AACH;;AACD,MAAIpB,QAAJ,CAAa2B,CAAb,EAA8B;AAC1B,UAAMd,CAAC,GAAI,KAAKe,WAAhB;AACA,QAAIC,MAAM,GAAGhB,CAAC,CAACW,IAAf;;AACA,QAAI;AACA,UAAI,CAACX,CAAC,CAACE,IAAF,CAAOC,MAAZ,EAAoB;AAChBH,SAAC,CAACW,IAAF,GAASG,CAAT;AACH,OAFD,MAEO;AACHd,SAAC,CAACE,IAAF,CAAOe,KAAP,CAAa,CAAb,EAAgB,CAAC,CAAjB,EAAoBC,OAApB,CAA4BC,GAAG,IAAIH,MAAM,GAAGA,MAAM,CAACG,GAAD,CAAlD;AACAH,cAAM,CAAChB,CAAC,CAACE,IAAF,CAAOF,CAAC,CAACE,IAAF,CAAOC,MAAP,GAAgB,CAAvB,CAAD,CAAN,GAAoCW,CAApC;AACH;AACJ,KAPD,CAOE,OAAOF,CAAP,EAAU;AACR,WAAKC,KAAL,CAAWD,CAAX;AACH;AACJ;;AAjEyF;;gBAAzE7B,I,iBACI,yB;;gBADJA,I,YAEgB,CAAC;AAC9BqC,OAAK,EAAE,IADuB;AAE9BC,MAAI,EAAE,MAFwB;AAG9BC,aAAW,EAAE;AAHiB,CAAD,C;;gBAFhBvC,I,aAOkB,CAAC;AAChCsC,MAAI,EAAE,UAD0B;AAEhCC,aAAW,EAAE;AAFmB,CAAD,C;;gBAPlBvC,I,UAWY,CAAC;AAC1BsC,MAAI,EAAE,QADoB;AAE1BE,UAAQ,EAAE,KAFgB;AAG1BC,WAAS,EAAE,KAHe;AAI1BF,aAAW,EAAE;AAJa,CAAD,C;;gBAXZvC,I,QAiBLF,M","file":"js/f8b31d62ce6d66ae2712.js","sourcesContent":["import { StaticMethod } from \"./StaticMethod\";\nimport { DefaultObject, Bang, isBang } from \"../Base\";\nimport { ImportedObject, ImportedObjectUI } from \"./ImportedObject\";\nimport { TMeta } from \"../../types\";\nimport { Method } from \"./Method\";\n\nclass FuncUI extends ImportedObjectUI<Func> {\n    prependColor = \"rgb(78, 201, 176)\";\n}\ntype TAnyFunction = (...args: any[]) => any;\ntype TWrapper = typeof StaticMethod | typeof Method;\ntype S = { Wrapper: TWrapper };\nexport default class Func extends DefaultObject<{}, S, [Bang], [TAnyFunction], any[], {}, {}> {\n    static description = \"Get the function itself\";\n    static inlets: TMeta[\"inlets\"] = [{\n        isHot: true,\n        type: \"bang\",\n        description: \"Bang to get the function itself\"\n    }];\n    static outlets: TMeta[\"outlets\"] = [{\n        type: \"function\",\n        description: \"function\"\n    }];\n    static args: TMeta[\"args\"] = [{\n        type: \"string\",\n        optional: false,\n        varLength: false,\n        description: \"Function name\"\n    }];\n    static UI = FuncUI;\n    state: S = { Wrapper: null };\n    subscribe() {\n        super.subscribe();\n        this.on(\"postInit\", () => {\n            this.inlets = 1;\n            this.outlets = 1;\n        });\n        this.on(\"inlet\", ({ data, inlet }) => {\n            if (inlet === 0) {\n                if (isBang(data)) this.output();\n            }\n        });\n    }\n    callback = () => this.outlet(0, this.imported);\n    output() {\n        return this.callback();\n    }\n    set loading(loading: boolean) {\n        this.updateUI({ loading });\n    }\n    get name() {\n        const c = this.state.Wrapper;\n        return c.path[c.path.length - 1];\n    }\n    get imported(): TAnyFunction {\n        const c = this.state.Wrapper || this.patcher.activeLib.Object as TWrapper;\n        let r: TAnyFunction;\n        try {\n            r = c.path.reduce((acc, cur) => acc[cur], c.root);\n        } catch (e) {\n            this.error(e);\n        }\n        return r;\n    }\n    set imported(v: TAnyFunction) {\n        const c = (this.constructor as typeof ImportedObject);\n        let parent = c.root;\n        try {\n            if (!c.path.length) {\n                c.root = v;\n            } else {\n                c.path.slice(0, -1).forEach(key => parent = parent[key]);\n                parent[c.path[c.path.length - 1]] = v;\n            }\n        } catch (e) {\n            this.error(e);\n        }\n    }\n}\n"],"sourceRoot":""}